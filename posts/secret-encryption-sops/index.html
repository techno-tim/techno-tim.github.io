<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE" /><meta property="og:locale" content="en" /><meta name="description" content="Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information.Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not.If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE.SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.Age is a simple, modern, and secure file encryption tool, format, and build using Go.It can encrypt and decrypt your files making then safe enough to commit to your Git repos!" /><meta property="og:description" content="Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information.Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not.If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE.SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.Age is a simple, modern, and secure file encryption tool, format, and build using Go.It can encrypt and decrypt your files making then safe enough to commit to your Git repos!" /><link rel="canonical" href="https://technotim.live/posts/secret-encryption-sops/" /><meta property="og:url" content="https://technotim.live/posts/secret-encryption-sops/" /><meta property="og:site_name" content="Techno Tim" /><meta property="og:image" content="https://technotim.live/assets/img/headers/encryption-magnifying-glass.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-10-01T09:00:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://technotim.live/assets/img/headers/encryption-magnifying-glass.webp" /><meta property="twitter:title" content="Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE" /><meta name="twitter:site" content="@technotimlive" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-22T15:25:04-06:00","datePublished":"2022-10-01T09:00:00-05:00","description":"Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information.Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not.If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE.SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.Age is a simple, modern, and secure file encryption tool, format, and build using Go.It can encrypt and decrypt your files making then safe enough to commit to your Git repos!","headline":"Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE","image":{"lqip":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAUACgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP5U9Ol+HnxA8I/EOPxZ8MdHuPHXjfRtW8W2fj7SdUv9Ku/D2oaDZHUNR2aIUvNP1NtTv7u1+wTyvavpFhHqVrMNYutSh1HTfj1iK+HzKGHhUlKjCpRhyVHzrkr08TVai370HzUEnZuDXKlTioWl9rClRxeV1MTUpQjiIxqt1KcVDnlSqYOlB1IpWm1GtJqWlRycpSqSlJs+ULnwQ8VxPE+rGZ45pY2me2uA8rI7K0jhdSChpCCzBQACTgYr6CNO8YtOMU4pqPs4vlTV0r9bLS55Tq2bTTbTs3zNXa0btra+9rv1P//Z","url":"https://technotim.live/assets/img/headers/encryption-magnifying-glass.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://technotim.live/posts/secret-encryption-sops/"},"url":"https://technotim.live/posts/secret-encryption-sops/"}</script><title>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE | Techno Tim</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Techno Tim"><meta name="application-name" content="Techno Tim"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="preconnect" href="https://cdnjs.cloudflare.com" ><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/1322205?s=400&u=5b4f2219006577dc0426007fe5a02391c4899677&v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a><h1 class="site-title"> <a href="/">Techno Tim</a></h1><p class="site-subtitle fst-italic mb-0">Engineer. Builder. Creator. | From Code to Cloud</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/shop/" class="nav-link"> <i class="fa-fw fas fa-bag-shopping"></i> <span>MERCH</span> </a><li class="nav-item"> <a href="/sponsor/" class="nav-link"> <i class="fa-fw fas fa-handshake"></i> <span>SPONSOR</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://l.technotim.live/links" aria-label="links" target="_blank" rel="noopener noreferrer" > <i class="fa-solid fa-link"></i> </a> <a href="https://twitter.com/technotimlive" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="https://l.technotim.live/github" aria-label="github-custom" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1664632800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Oct 1, 2022 </time> </span> <span> Updated <time data-ts="1708637104" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 22, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/img/headers/encryption-magnifying-glass.webp" class="popup img-link preview-img blur"><img data-src="/assets/img/headers/encryption-magnifying-glass.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAUACgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP5U9Ol+HnxA8I/EOPxZ8MdHuPHXjfRtW8W2fj7SdUv9Ku/D2oaDZHUNR2aIUvNP1NtTv7u1+wTyvavpFhHqVrMNYutSh1HTfj1iK+HzKGHhUlKjCpRhyVHzrkr08TVai370HzUEnZuDXKlTioWl9rClRxeV1MTUpQjiIxqt1KcVDnlSqYOlB1IpWm1GtJqWlRycpSqSlJs+ULnwQ8VxPE+rGZ45pY2me2uA8rI7K0jhdSChpCCzBQACTgYr6CNO8YtOMU4pqPs4vlTV0r9bLS55Tq2bTTbTs3zNXa0btra+9rv1P//Z"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://l.technotim.live/twitter">Techno Tim</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="848 words" > <em>4 min</em> read</span></div></div></header><div class="content"><p>Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information.Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it’s not.If you’re going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE.SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.Age is a simple, modern, and secure file encryption tool, format, and build using Go.It can encrypt and decrypt your files making then safe enough to commit to your Git repos!</p><p>A HUGE thanks to Datree for sponsoring this video!<br /> Combat misconfigurations. Empower engineers. <a href="https://www.datree.io">https://www.datree.io</a></p><iframe class="embed-video youtube" loading="lazy" src="https://www.youtube.com/embed/1BquzE3Yb4I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p>📺 <a href="https://www.youtube.com/watch?v=1BquzE3Yb4I">Watch Video</a></p><h2 id="install-sops"><span class="me-2">Install SOPS</span><a href="#install-sops" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can install sops by <a href="/posts/install-mozilla-sops/">following this guide</a>.</p><p>test with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">-v</span>
</pre></table></code></div></div><p>should see</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops 3.7.3 <span class="o">(</span>latest<span class="o">)</span>
</pre></table></code></div></div><h2 id="install-age"><span class="me-2">Install Age</span><a href="#install-age" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can install age by <a href="/posts/install-age/">following this guide</a></p><p>test <code class="language-plaintext highlighter-rouge">age</code> with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> age <span class="nt">-version</span>
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">v1.0.0
</span></pre></table></code></div></div><p>test <code class="language-plaintext highlighter-rouge">age-keygen</code> with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> age-keygen <span class="nt">-version</span>
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="go">v1.0.0
</span></pre></table></code></div></div><h2 id="configure-keys"><span class="me-2">configure keys</span><a href="#configure-keys" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Now that we have <code class="language-plaintext highlighter-rouge">age</code> installed we need to create a public and private key</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>age-keygen <span class="nt">-o</span> key.txt
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">age-keygen: warning: writing secret key to a world-readable file
Public key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428t
</span></pre></table></code></div></div><p>let’s look at the contents</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">cat </span>key.txt
</pre></table></code></div></div><p>should see</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="gp">#</span><span class="w"> </span>created: 2022-09-26T21:55:47-05:00
<span class="gp">#</span><span class="w"> </span>public key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428t
<span class="go">AGE-SECRET-KEY-1HJCRJVK7EE3A5N8CRP8YSDUGZKNW90Y5UR2RGYAS8L279LFP6LCQU5ADNR
</span></pre></table></code></div></div><blockquote class="prompt-info"><p><em>Remember this is a secret so keep this safe!</em> Do not commit this!</p></blockquote><p>move the file and add to our shell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">mkdir</span> ~/.sops
<span class="nb">mv</span> ./key.txt ~/.sops
</pre></table></code></div></div><p>add it to our shell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>nano ~/.zshrc 
<span class="c"># or nano ~/.bashrc</span>
</pre></table></code></div></div><p>add to the end of file</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">SOPS_AGE_KEY_FILE</span><span class="o">=</span><span class="nv">$HOME</span>/.sops/key.txt
</pre></table></code></div></div><p>source our shell</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">source</span> ~/.zshrc 
<span class="c"># or source ~/.bashrc</span>
</pre></table></code></div></div><h2 id="now-lets-encrypt"><span class="me-2">Now! Let’s encrypt</span><a href="#now-lets-encrypt" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>A few ways you can do this.You can encrypt in place or encrypt with an editor but we’re going to do an in place encryption.</p><h2 id="yaml"><span class="me-2">YAML</span><a href="#yaml" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This can be kubernetes secrets, helm values, or just plain old yaml</p><p>create a secret with the following contents</p><p><code class="language-plaintext highlighter-rouge">secret.yaml</code></p><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Secret</span>
<span class="na">metadata</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">mysql-secret</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">default</span>
<span class="na">stringData</span><span class="pi">:</span>
    <span class="na">MYSQL_USER</span><span class="pi">:</span> <span class="s">root</span>
    <span class="na">MYSQL_PASSWORD</span><span class="pi">:</span> <span class="s">super-Secret-Password!!!!</span>
</pre></table></code></div></div><p>to encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> <span class="nt">--in-place</span> ./secret.yaml
</pre></table></code></div></div><p>to decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> <span class="nt">--in-place</span> ./secret.yaml
</pre></table></code></div></div><h2 id="kubernetes"><span class="me-2">Kubernetes</span><a href="#kubernetes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you want to decrypt this secret on the fly and apply to kubernetes</p><p>encrypt first</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> <span class="nt">--in-place</span> ./secret.yaml
</pre></table></code></div></div><p>decrypt and pipe to kubectl</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--encrypted-regex</span> <span class="s1">'^(data|stringData)$'</span> ./secret.yaml | kubectl apply <span class="nt">-f</span> -
</pre></table></code></div></div><p>check it with</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>k describe secrets mysql-secret-test
</pre></table></code></div></div><p>then</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> kubectl get secret mysql-secret-test <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.data}'</span>
</pre></table></code></div></div><p>then</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl get secret mysql-secret-test <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.data.MYSQL_PASSWORD}'</span>  | <span class="nb">base64</span> <span class="nt">--decode</span>
</pre></table></code></div></div><h2 id="vscode"><span class="me-2">VSCode</span><a href="#vscode" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>install vscode extension</p><p>choose the beta for sops because that supports age + sops</p><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.yaml</code> to <code class="language-plaintext highlighter-rouge">.gitignore</code></p><p>encrypt .env files</p><p>make sure extension is installed</p><h2 id="env-files"><span class="me-2">.ENV Files</span><a href="#env-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>create</p><p><code class="language-plaintext highlighter-rouge">secret.env</code></p><pre><code class="language-env">MYSQL_USER=superroot
MYSQL_PASSWORD="super-Secret-Password!!!!############"
</code></pre><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> .env
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> .env
</pre></table></code></div></div><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.env</code> to your <code class="language-plaintext highlighter-rouge">.gitignore</code></p><h2 id="json-files"><span class="me-2">JSON Files</span><a href="#json-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">secret.json</code></p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"mySqlUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"superroot"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"super-Secret-Password!!!!#######"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.json
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.json
</pre></table></code></div></div><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.json</code> to your <code class="language-plaintext highlighter-rouge">.gitignore</code></p><h2 id="ini-files"><span class="me-2">INI Files</span><a href="#ini-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">secret.ini</code></p><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nn">[database]</span>
<span class="py">user</span>     <span class="p">=</span> <span class="s">superroot</span>
<span class="py">password</span> <span class="p">=</span> <span class="s">super-Secret-Password!!!!1223</span>
</pre></table></code></div></div><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.ini
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">-i</span> secret.ini
</pre></table></code></div></div><p>don’t forget to add <code class="language-plaintext highlighter-rouge">.decrypted~secret.ini</code> to you <code class="language-plaintext highlighter-rouge">.gitignore</code></p><h2 id="files"><span class="me-2">Files</span><a href="#files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><code class="language-plaintext highlighter-rouge">secret.sql</code></p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c1">--- https://xkcd.com/327/</span>
<span class="c1">--- DO NOT USE</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">Students</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="s1">'Robert'</span> <span class="p">);</span>  <span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">STUDENTS</span><span class="p">;</span> <span class="c1">--' )</span>
</pre></table></code></div></div><p>encrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--encrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--in-place</span> ./secret.sql
</pre></table></code></div></div><p>decrypt</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>sops <span class="nt">--decrypt</span> <span class="nt">--age</span> <span class="si">$(</span><span class="nb">cat</span> <span class="nv">$SOPS_AGE_KEY_FILE</span> |grep <span class="nt">-oP</span> <span class="s2">"public key: </span><span class="se">\K</span><span class="s2">(.*)"</span><span class="si">)</span> <span class="nt">--in-place</span> ./secret.sql
</pre></table></code></div></div><h2 id="flux"><span class="me-2">Flux</span><a href="#flux" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If you’re thinking of doing GitOps with Flux, you can <a href="https://www.youtube.com/watch?v=PFLimPh5-wo">check out my video on this topic</a> or see my <a href="/posts/flux-devops-gitops/">documentation</a>.You can do cluster decryption and fully automate decryption of secrets.</p><p>In cluster decryption with Flux</p><p><a href="https://fluxcd.io/flux/guides/mozilla-sops/#configure-in-cluster-secrets-decryption">https://fluxcd.io/flux/guides/mozilla-sops/#configure-in-cluster-secrets-decryption</a></p><h2 id="join-the-conversation"><span class="me-2">Join the conversation</span><a href="#join-the-conversation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote class="twitter-tweet" data-dnt="true" data-theme="dark"><p lang="en" dir="ltr">People often ask if it&#39;s OK to save secrets in code or config to a private git repo. I though this was ok until now... <br /><br />If you&#39;re using Secrets in Kubernetes or ENVs in Docker I highly recommend encrypting them with Mozilla SOPS.<a href="https://twitter.com/mozhacks?ref_src=twsrc%5Etfw">@mozhacks</a> <a href="https://t.co/r1NpBoGWe2">https://t.co/r1NpBoGWe2</a> <a href="https://t.co/sdPFq06WQM">pic.twitter.com/sdPFq06WQM</a></p>&mdash; Techno Tim (@TechnoTimLive) <a href="https://twitter.com/TechnoTimLive/status/1576252417435635713?ref_src=twsrc%5Etfw">October 1, 2022</a></blockquote><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h2 id="links"><span class="me-2">Links</span><a href="#links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>🛍️ Check out the new Merch Shop at <a href="https://l.technotim.live/shop">https://l.technotim.live/shop</a></p><p>⚙️ See all the hardware I recommend at <a href="https://l.technotim.live/gear">https://l.technotim.live/gear</a></p><p>🚀 Don’t forget to check out the <a href="https://l.technotim.live/quick-start">🚀Launchpad repo</a> with all of the quick start source files</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/homelab/">homelab</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/git/" class="post-tag no-text-decoration" >git</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/secrets/" class="post-tag no-text-decoration" >secrets</a> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a> <a href="/tags/sops/" class="post-tag no-text-decoration" >sops</a> <a href="/tags/age/" class="post-tag no-text-decoration" >age</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim&url=https%3A%2F%2Ftechnotim.live%2Fposts%2Fsecret-encryption-sops%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim&u=https%3A%2F%2Ftechnotim.live%2Fposts%2Fsecret-encryption-sops%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftechnotim.live%2Fposts%2Fsecret-encryption-sops%2F&text=Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftechnotim.live%2Fposts%2Fsecret-encryption-sops%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <script defer type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/share-to-mastodon/+esm"></script> <button class="btn text-start" data-bs-toggle="tooltip" data-bs-placement="top" title="Mastodon" aria-label="Mastodon"> <share-to-mastodon class="share-mastodon" message="Encrypt%20Your%20Sensitive%20Information%20Before%20Storing%20It%20-%20Encrypting%20with%20Mozilla%20SOPS%20and%20AGE%20-%20Techno%20Tim" url="https%3A%2F%2Ftechnotim.live%2Fposts%2Fsecret-encryption-sops%2F"customInstanceList="[{&quot;label&quot;:&quot;mastodon.social&quot;,&quot;link&quot;:&quot;https://mastodon.social/&quot;},{&quot;label&quot;:&quot;mastodon.online&quot;,&quot;link&quot;:&quot;https://mastodon.online/&quot;},{&quot;label&quot;:&quot;fosstodon.org&quot;,&quot;link&quot;:&quot;https://fosstodon.org/&quot;},{&quot;label&quot;:&quot;photog.social&quot;,&quot;link&quot;:&quot;https://photog.social/&quot;}]" > <i class="fa-fw fa-brands fa-mastodon"></i> </share-to-mastodon> </button> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/traefik-3-docker-certificates/">Traefik 3 and FREE Wildcard Certificates with Docker</a><li class="text-truncate lh-lg"> <a href="/posts/traefik-portainer-ssl/">Put Wildcard Certificates and SSL on EVERYTHING</a><li class="text-truncate lh-lg"> <a href="/posts/authelia-traefik/">2 Factor Auth and Single Sign on with Authelia</a><li class="text-truncate lh-lg"> <a href="/posts/grafana-loki/">Meet Grafana LOKI, a Log Aggregation System for Everything</a><li class="text-truncate lh-lg"> <a href="/posts/jekyll-docs-site/">Meet Jekyll - The Static Site Generator</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/hardware/">hardware</a> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/rancher/">rancher</a> <a class="post-tag btn btn-outline-primary" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/portainer/">portainer</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/k3s/">k3s</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/rotate-sops-encryption-keys/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1678028400" data-df="ll" > Mar 5, 2023 </time><h4 class="pt-0 my-2">Rotating your Encryption Keys and Updating your Secrets with SOPS</h4><div class="text-muted"><p> If you’ve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you’re not familiar with encrypting your secrets with SOPS and Age,...</p></div></div></a></article><article class="col"> <a href="/posts/install-age/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1675090800" data-df="ll" > Jan 30, 2023 </time><h4 class="pt-0 my-2">Installing Age Encryption Tool</h4><div class="text-muted"><p> What is Age? age is a simple, modern and secure file encryption tool, format, and Go library. It features small explicit keys, no config options, and UNIX-style composability.It is commonly used i...</p></div></div></a></article><article class="col"> <a href="/posts/install-mozilla-sops/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1675090800" data-df="ll" > Jan 30, 2023 </time><h4 class="pt-0 my-2">Installing Mozilla SOPS Encryption Tool</h4><div class="text-muted"><p> What is Mozilla SOPS? SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.It’s open source ...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/45-drives-storinator/" class="btn btn-outline-primary" aria-label="Older" ><p>NEW SERVER! Deploying 100 TB of Storage to my HomeLab!</p></a> <a href="/posts/rgb-storinator/" class="btn btn-outline-primary" aria-label="Newer" ><p>I Put RGB Fans in My Server and I am NOT Apologizing</p></a></nav><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'timothystewart6/techno-tim.github.io', 'data-repo-id': 'MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk', 'data-category': 'Comments', 'data-category-id': 'DIC_kwDODy-1C84CSN7z', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://l.technotim.live/twitter">Techno Tim</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p><a href="/sponsor/">🤝 Help keep this ad-free!</href> &nbsp; &nbsp;<a href="https://l.technotim.live/shop">🛍️ Check out the new merch shop!</href></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/hardware/">hardware</a> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/rancher/">rancher</a> <a class="post-tag btn btn-outline-primary" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/portainer/">portainer</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/k3s/">k3s</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
