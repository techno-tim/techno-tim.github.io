<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Configuring Traefik 2 Ingress for Kubernetes" /><meta property="og:locale" content="en" /><meta name="description" content="This guide is for installing traefik 2 on k3s.If you’re not using rancher, that’s fine, just skip to Reconfiguring k3s" /><meta property="og:description" content="This guide is for installing traefik 2 on k3s.If you’re not using rancher, that’s fine, just skip to Reconfiguring k3s" /><link rel="canonical" href="https://technotim.live/posts/k3s-traefik-rancher/" /><meta property="og:url" content="https://technotim.live/posts/k3s-traefik-rancher/" /><meta property="og:site_name" content="Techno Tim" /><meta property="og:image" content="https://technotim.live/assets/img/headers/traffic-streaks.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-08T09:00:00-05:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://technotim.live/assets/img/headers/traffic-streaks.webp" /><meta property="twitter:title" content="Configuring Traefik 2 Ingress for Kubernetes" /><meta name="twitter:site" content="@technotimlive" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-08-24T15:54:49-05:00","datePublished":"2021-04-08T09:00:00-05:00","description":"This guide is for installing traefik 2 on k3s.If you’re not using rancher, that’s fine, just skip to Reconfiguring k3s","headline":"Configuring Traefik 2 Ingress for Kubernetes","image":{"lqip":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAUACgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP5gfjj+zZ8MfgD+zB8HPCseg6X418c/F/xp4g8Yar8UtX0u10/XtC0vQPDl5b/8IZoUVjvv4tAv5bKy1KVbrXrmS31OKee1EcF9e2k/yGOx+JeJxOJp1atGlgKNKEcPTqe5VqV8VRp+2q80XTk4QqSioSoyTWqcZ8s4/pPC+WYKeLy3LMThcJjYZzWqxxNTFYdTnTo0sHXrqnhqlOdLFYaftKMJKthsVRm2uWftKMqlGf5h6/4Ns9I13WtJjup5Y9L1bUdOSUqqGRLK8mtlkK5faXEQYrvbBONzYyfVy7NKmNy/A4yVKEJYvB4XFSgm5KDr0IVXFS0uoudr2V7XstiuKOB8HkXEvEWR0cbiK1LJs9zbKqVaUIQlVp5dj8RhIVZQvPllUjRUnHnlyt25pWu//9k=","url":"https://technotim.live/assets/img/headers/traffic-streaks.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://technotim.live/posts/k3s-traefik-rancher/"},"url":"https://technotim.live/posts/k3s-traefik-rancher/"}</script><title>Configuring Traefik 2 Ingress for Kubernetes | Techno Tim</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Techno Tim"><meta name="application-name" content="Techno Tim"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="preconnect" href="https://cdnjs.cloudflare.com" ><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/1322205?s=400&u=5b4f2219006577dc0426007fe5a02391c4899677&v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a><h1 class="site-title"> <a href="/">Techno Tim</a></h1><p class="site-subtitle fst-italic mb-0">Engineer. Builder. Creator. | From Code to Cloud</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/shop/" class="nav-link"> <i class="fa-fw fas fa-bag-shopping"></i> <span>MERCH</span> </a><li class="nav-item"> <a href="/sponsor/" class="nav-link"> <i class="fa-fw fas fa-handshake"></i> <span>SPONSOR</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://l.technotim.live/links" aria-label="links" target="_blank" rel="noopener noreferrer" > <i class="fa-solid fa-link"></i> </a> <a href="https://twitter.com/technotimlive" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="https://l.technotim.live/github" aria-label="github-custom" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Configuring Traefik 2 Ingress for Kubernetes</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Configuring Traefik 2 Ingress for Kubernetes</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1617890400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Apr 8, 2021 </time> </span> <span> Updated <time data-ts="1756068889" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Aug 24, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/img/headers/traffic-streaks.webp" class="popup img-link preview-img blur"><img data-src="/assets/img/headers/traffic-streaks.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAUACgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP5gfjj+zZ8MfgD+zB8HPCseg6X418c/F/xp4g8Yar8UtX0u10/XtC0vQPDl5b/8IZoUVjvv4tAv5bKy1KVbrXrmS31OKee1EcF9e2k/yGOx+JeJxOJp1atGlgKNKEcPTqe5VqV8VRp+2q80XTk4QqSioSoyTWqcZ8s4/pPC+WYKeLy3LMThcJjYZzWqxxNTFYdTnTo0sHXrqnhqlOdLFYaftKMJKthsVRm2uWftKMqlGf5h6/4Ns9I13WtJjup5Y9L1bUdOSUqqGRLK8mtlkK5faXEQYrvbBONzYyfVy7NKmNy/A4yVKEJYvB4XFSgm5KDr0IVXFS0uoudr2V7XstiuKOB8HkXEvEWR0cbiK1LJs9zbKqVaUIQlVp5dj8RhIVZQvPllUjRUnHnlyt25pWu//9k="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://l.technotim.live/twitter">Techno Tim</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1019 words" > <em>5 min</em> read</span></div></div></header><div class="content"><p>This guide is for installing <code class="language-plaintext highlighter-rouge">traefik 2</code> on <code class="language-plaintext highlighter-rouge">k3s</code>.If you’re not using rancher, that’s fine, just skip to <code class="language-plaintext highlighter-rouge">Reconfiguring k3s</code></p><blockquote class="prompt-info"><p><em>Note: There is an updated tutorial on installing traefik + cert-manager on Kubernetes <a href="/posts/kube-traefik-cert-manager-le/">here</a>. However, if you want to store your certificates on disk, this tutorial here is perfectly fine.</em></p></blockquote><p>It assumes you have followed:</p><ul><li><a href="https://www.youtube.com/watch?v=CbkEWcUZ7zM">Fully Automated K3S etcd High Availability Install</a><li>(or) <a href="https://www.youtube.com/watch?v=UoOcLXfa8EU">HIGH AVAILABILITY k3s (Kubernetes) in minutes!</a><li>(if you need rancher) <a href="https://www.youtube.com/watch?v=APsZJbnluXg">High Availability Rancher on a Kubernetes Cluster</a></ul><p>There is a little bit of “undoing” we’ll have to do since k3s ships with <code class="language-plaintext highlighter-rouge">traefik</code> and Rancher doesn’t play well with service load balancer. So, we’ll pick up after instaling these two.</p><h2 id="reconfigure-rancher"><span class="me-2">Reconfigure Rancher</span><a href="#reconfigure-rancher" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Make note of your version of Rancher</p><p>Remove Rancher</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>helm uninstall rancher
</pre></table></code></div></div><p>Install Rancher</p><p>(replace with version above)</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>helm <span class="nb">install </span>rancher rancher-stable/rancher <span class="se">\</span>
  <span class="nt">--namespace</span> cattle-system <span class="se">\</span>
  <span class="nt">--set</span> <span class="nb">hostname</span><span class="o">=</span>rancher.example.com <span class="se">\</span>
  <span class="nt">--version</span> 2.5.6
</pre></table></code></div></div><h2 id="reconfiguring-k3s"><span class="me-2">Reconfiguring k3s</span><a href="#reconfiguring-k3s" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Get the version of <code class="language-plaintext highlighter-rouge">k3s</code> that’s currently running</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>k3s <span class="nt">--version</span>
<span class="nb">export </span><span class="nv">INSTALL_K3S_VERSION</span><span class="o">=</span>v1.20.5+k3s1
</pre></table></code></div></div><p>Run the same command you ran initially to install <code class="language-plaintext highlighter-rouge">k3s</code> on your servers but add <code class="language-plaintext highlighter-rouge">--disable traefik --disable servicelb</code> and be sure to set your version.</p><p>example (be sure you are using the right version)</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">export </span><span class="nv">INSTALL_K3S_VERSION</span><span class="o">=</span>v1.20.5+k3s1
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>curl <span class="nt">-sfL</span> https://get.k3s.io | sh <span class="nt">-s</span> - server <span class="nt">--node-taint</span> <span class="nv">CriticalAddonsOnly</span><span class="o">=</span><span class="nb">true</span>:NoExecute <span class="nt">--tls-san</span> your.load.balancer.ip <span class="nt">--write-kubeconfig-mode</span> 644 <span class="nt">--disable</span> traefik <span class="nt">--disable</span> servicelb
</pre></table></code></div></div><p>This should reconfigure your servers.Just run it on all server nodes, not agent nodes.</p><h2 id="install-metal-lb"><span class="me-2">Install Metal LB</span><a href="#install-metal-lb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://metallb.universe.tf/installation/">Metal LB installation</a></p><p>You can follow <a href="https://www.youtube.com/watch?v=pAM2GBCDGTo">Self-Hosting Your Homelab Services with SSL</a> to get the idea of Metal LB. It’s recommended to:</p><ul><li>Install with <a href="https://metallb.universe.tf/installation/#installation-with-helm">helm</a><li>Use <a href="https://metallb.universe.tf/configuration/#layer-2-configuration">Layer2 configuration</a> if you follow this series</ul><h2 id="exposing-rancher-directly-to-your-metal-lb"><span class="me-2">Exposing Rancher directly to your Metal LB</span><a href="#exposing-rancher-directly-to-your-metal-lb" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>It’s a good idea to do this until traefik is configured otherwise you won’t have access to the Rancher UI</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl expose deployment rancher <span class="nt">-n</span> cattle-system <span class="nt">--type</span><span class="o">=</span>LoadBalancer <span class="nt">--name</span><span class="o">=</span>rancher-lb <span class="nt">--port</span><span class="o">=</span>443
</pre></table></code></div></div><p>Then, you can access Rancher UI after getting external-IP</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl get service/rancher-lb <span class="nt">-n</span> cattle-system
</pre></table></code></div></div><h2 id="install-traefik-2"><span class="me-2">Install Traefik 2</span><a href="#install-traefik-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>You can can choose between creating <code class="language-plaintext highlighter-rouge">Ingress</code> in Rancher or <code class="language-plaintext highlighter-rouge">IngresRoute</code> with <code class="language-plaintext highlighter-rouge">traefik</code></p><p>If you choose <code class="language-plaintext highlighter-rouge">IngressRoute</code> see <a href="#exposing-a-service-with-traefik-ingressroute">IngressRoute</a> otherwise continue on.</p><ul><li>You must have a persistent volume set up already for <code class="language-plaintext highlighter-rouge">acme.json</code> certificate<li>This uses cloudflare, check providers if you want to switch<li>This will get wildcard certs<li>This is pointed at staging, if you want production be sure comment staging the line (and delete your staging certs)</ul><p>We will be installing this into the <code class="language-plaintext highlighter-rouge">kube-system</code> namespace, which already exists. If you are going to use anther namespace you will need change it everywhere.</p><h3 id="optional-make-sure-that-persistent-volume-claim-is-available"><span class="me-2">(Optional) Make sure that persistent volume claim is available</span><a href="#optional-make-sure-that-persistent-volume-claim-is-available" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The dynamic configuration for Traefik is stored in a persistent volume. If you want to persist the certificate, it’s better to create one now to claim later.</p><p>To create a persistent volume, it’s better to check out <a href="https://www.youtube.com/watch?v=eKBBHc0t7bc">Cloud Native Distributed Storage in Kubernetes with Longhorn</a>.</p><p>If not, just create one from <code class="language-plaintext highlighter-rouge">Rancher UI &gt; Clusters (Choose your cluster) &gt; Storage &gt; Persistent Volume &gt; Add volume</code></p><h3 id="add-traefik-helm-repo-and-update"><span class="me-2">Add <code class="language-plaintext highlighter-rouge">traefik</code> helm repo and update</span><a href="#add-traefik-helm-repo-and-update" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>helm repo add traefik https://helm.traefik.io/traefik
helm repo update
</pre></table></code></div></div><h3 id="edit--apply-configmap"><span class="me-2">Edit &amp; apply ConfigMap</span><a href="#edit--apply-configmap" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Create <code class="language-plaintext highlighter-rouge">traefik-config.yaml</code> with the contents of <code class="language-plaintext highlighter-rouge">/config/traefik-config.yaml</code> from <a href="https://github.com/timothystewart6/tree/master/kubernetes/traefik2-k3s-rancher/config">/config</a><li>This holds our cloudflare secrets along with a configmap<li>Update this file with your values<li>Re-check if you have a persistent volume ready to claim<li>Apply the config</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> traefik-config.yaml
</pre></table></code></div></div><h3 id="edit--install-traefik-helm-chart"><span class="me-2">Edit &amp; install Traefik helm chart</span><a href="#edit--install-traefik-helm-chart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Create <code class="language-plaintext highlighter-rouge">traefik-chart-values.yaml</code> with the contents of <code class="language-plaintext highlighter-rouge">/config/traefik-chart-values.yaml</code> from <a href="https://github.com/timothystewart6/tree/master/kubernetes/traefik2-k3s-rancher/config">/config</a><li>Update <code class="language-plaintext highlighter-rouge">loadBalancerIP</code> in <code class="language-plaintext highlighter-rouge">traefik-chart-values.yaml</code> with your Metal LB IP</ul><p>Before running this, be sure you only have one default storage class set.</p><p>If you are using Rancher it is <code class="language-plaintext highlighter-rouge">Cluster &gt; Storage &gt; Storage Classes</code>. Make sure only one is default.</p><ul><li>Install Traefik with chart values</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>helm <span class="nb">install </span>traefik traefik/traefik <span class="nt">--namespace</span><span class="o">=</span>kube-system <span class="nt">--values</span><span class="o">=</span>traefik-chart-values.yaml
</pre></table></code></div></div><p>More configuration value can be add from this <a href="https://github.com/traefik/traefik-helm-chart/blob/master/traefik/values.yaml">default-value.yaml</a> from Traefik github.</p><p>If all went well, you should now have traefik 2 installed and configured.</p><h3 id="check-for-container-logs"><span class="me-2">Check for container logs</span><a href="#check-for-container-logs" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>To check if the Traefik instance is running correctly, see the logs:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl <span class="nt">-n</span> kube-system logs <span class="si">$(</span>kubectl <span class="nt">-n</span> kube-system get pods <span class="nt">--selector</span> <span class="s2">"app.kubernetes.io/name=traefik"</span> <span class="nt">--output</span><span class="o">=</span>name<span class="si">)</span>
</pre></table></code></div></div><p>It should be <code class="language-plaintext highlighter-rouge">level=info msg="Configuration loaded from flags."</code></p><h2 id="traefik-dashboard"><span class="me-2">Traefik Dashboard</span><a href="#traefik-dashboard" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To see all router to Traefik, we can install and expose Traefik Dashboard.</p><p>First you will need <code class="language-plaintext highlighter-rouge">htpassword</code> to generate a password for your dashboard.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>apache2-utils
</pre></table></code></div></div><p>You can then generate one using this, be sure to swap your username and password.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>htpasswd <span class="nt">-nb</span> techno password | openssl <span class="nb">base64</span>
</pre></table></code></div></div><p>It should output:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">dGVjaG5vOiRhcHIxJFRnVVJ0N2E1JFpoTFFGeDRLMk8uYVNaVWNueG41eTAKCg</span><span class="o">==</span>
</pre></table></code></div></div><p>Save this in a secure place, it will be the password you use to access the traefik dashboard.</p><p>Copy <code class="language-plaintext highlighter-rouge">traefik-dashboard-secret.yaml</code> locally and update it with your credentials.</p><p>Copy <code class="language-plaintext highlighter-rouge">traefik-dashboard-ingressroute.yaml</code> and update it with your hostname, then apply:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> traefik-dashboard-secret.yaml
kubectl apply <span class="nt">-f</span> traefik-dashboard-ingressroute.yaml
</pre></table></code></div></div><p>This should create:</p><ul><li>A secret in Kubernetes cluster name <code class="language-plaintext highlighter-rouge">traefik-dashboard-auth</code><li>A middleware for Traefik name <code class="language-plaintext highlighter-rouge">traefik-dashboard-basicauth</code><li>An ingress route for Traefik name <code class="language-plaintext highlighter-rouge">dashboard</code></ul><p>Check out the Traefik Dashboard with the URL you specify earlier.</p><h2 id="exposing-a-service-with-traefik-and-rancher-ingress"><span class="me-2">Exposing a service with traefik and Rancher Ingress</span><a href="#exposing-a-service-with-traefik-and-rancher-ingress" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In Rancher go to Load Balancing</p><ul><li>create ingress<li>choose a host name (service.example.com)<li>choose a target (your workload)<li>set the port to the exposed port within the container<li>go to labels and annotations and add <code class="language-plaintext highlighter-rouge">kubernetes.io/ingress.class</code> = <code class="language-plaintext highlighter-rouge">traefik-external</code><li>note, <code class="language-plaintext highlighter-rouge">traefik-external</code> comes from <code class="language-plaintext highlighter-rouge">--providers.kubernetesingress.ingressclass=traefik-external</code> in <code class="language-plaintext highlighter-rouge">traefik-chart-values.yml</code>.If you used something else, you will need to set your label properly.<li>when you visit your website (<code class="language-plaintext highlighter-rouge">https://service.example.com</code>) you should now see a certificate issues.If it’s a staging cert, see the note about switching to production in <code class="language-plaintext highlighter-rouge">traefik-chart-values.yaml</code>.After changing, you will need to delete your certs in storage and reapply that file</ul><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>kubectl delete <span class="nt">-n</span> kube-system persistentvolumeclaims acme-json-certs
kubectl apply <span class="nt">-f</span> traefik-config.yaml
</pre></table></code></div></div><h2 id="exposing-a-service-with-traefik-ingressroute"><span class="me-2">Exposing a service with traefik IngressRoute</span><a href="#exposing-a-service-with-traefik-ingressroute" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>copy the contents of <a href="https://github.com/timothystewart6/tree/master/kubernetes/traefik2-k3s-rancher/config-ingress-route/kubernetes">config-ingress-route/kubernetes</a> to your local machine</p><p>then run</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>kubectl apply <span class="nt">-f</span> kubernetes
</pre></table></code></div></div><p>This will create the deployment, service, and ingress.</p><h2 id="links"><span class="me-2">Links</span><a href="#links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>🛍️ Check out the new Merch Shop at <a href="https://l.technotim.live/shop">https://l.technotim.live/shop</a></p><p>⚙️ See all the hardware I recommend at <a href="https://l.technotim.live/gear">https://l.technotim.live/gear</a></p><p>🚀 Don’t forget to check out the <a href="https://l.technotim.live/quick-start">🚀Launchpad repo</a> with all of the quick start source files</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/kubernetes/">kubernetes</a>, <a href="/categories/rancher/">rancher</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/rancher/" class="post-tag no-text-decoration" >rancher</a> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/k3s/" class="post-tag no-text-decoration" >k3s</a> <a href="/tags/traefik/" class="post-tag no-text-decoration" >traefik</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Configuring%20Traefik%202%20Ingress%20for%20Kubernetes%20-%20Techno%20Tim&url=https%3A%2F%2Ftechnotim.live%2Fposts%2Fk3s-traefik-rancher%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Configuring%20Traefik%202%20Ingress%20for%20Kubernetes%20-%20Techno%20Tim&u=https%3A%2F%2Ftechnotim.live%2Fposts%2Fk3s-traefik-rancher%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftechnotim.live%2Fposts%2Fk3s-traefik-rancher%2F&text=Configuring%20Traefik%202%20Ingress%20for%20Kubernetes%20-%20Techno%20Tim" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftechnotim.live%2Fposts%2Fk3s-traefik-rancher%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <script defer type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/share-to-mastodon/+esm"></script> <button class="btn text-start" data-bs-toggle="tooltip" data-bs-placement="top" title="Mastodon" aria-label="Mastodon"> <share-to-mastodon class="share-mastodon" message="Configuring%20Traefik%202%20Ingress%20for%20Kubernetes%20-%20Techno%20Tim" url="https%3A%2F%2Ftechnotim.live%2Fposts%2Fk3s-traefik-rancher%2F"customInstanceList="[{&quot;label&quot;:&quot;mastodon.social&quot;,&quot;link&quot;:&quot;https://mastodon.social/&quot;},{&quot;label&quot;:&quot;mastodon.online&quot;,&quot;link&quot;:&quot;https://mastodon.online/&quot;},{&quot;label&quot;:&quot;fosstodon.org&quot;,&quot;link&quot;:&quot;https://fosstodon.org/&quot;},{&quot;label&quot;:&quot;photog.social&quot;,&quot;link&quot;:&quot;https://photog.social/&quot;}]" > <i class="fa-fw fa-brands fa-mastodon"></i> </share-to-mastodon> </button> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/traefik-3-docker-certificates/">Traefik 3 and FREE Wildcard Certificates with Docker</a><li class="text-truncate lh-lg"> <a href="/posts/traefik-portainer-ssl/">Put Wildcard Certificates and SSL on EVERYTHING</a><li class="text-truncate lh-lg"> <a href="/posts/authelia-traefik/">2 Factor Auth and Single Sign on with Authelia</a><li class="text-truncate lh-lg"> <a href="/posts/grafana-loki/">Meet Grafana LOKI, a Log Aggregation System for Everything</a><li class="text-truncate lh-lg"> <a href="/posts/jekyll-docs-site/">Meet Jekyll - The Static Site Generator</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/hardware/">hardware</a> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/rancher/">rancher</a> <a class="post-tag btn btn-outline-primary" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/portainer/">portainer</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/k3s/">k3s</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/rancher-monitoring/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1618063200" data-df="ll" > Apr 10, 2021 </time><h4 class="pt-0 my-2">Monitoring Your Kubernetes Cluster with Grafana, Prometheus, and Alertmanager</h4><div class="text-muted"><p> Today in this step by step guide, we’ll set up Grafana, Prometheus, and Alertmanager to monitor your Kubernetes cluster.This can be set up really quickly using helm or the Rancher UI.We’ll install ...</p></div></div></a></article><article class="col"> <a href="/posts/meet-harvester/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1647090000" data-df="ll" > Mar 12, 2022 </time><h4 class="pt-0 my-2">A Hypervisor Built on Kubernetes - Cloud Native HCI with Harvester</h4><div class="text-muted"><p> Rancher released a next generation open source HCI software hypervisor built on Kubernetes that helps you run virtual machines.With Harvester you can create Linux, Windows, or any virtual machine t...</p></div></div></a></article><article class="col"> <a href="/posts/reverse-proxy-kubernetes/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1597500000" data-df="ll" > Aug 15, 2020 </time><h4 class="pt-0 my-2">Self-Hosting Your Homelab Services with SSL -- Let's Encrypt, MetalLB, Traefik, Rancher, Kubernetes</h4><div class="text-muted"><p> Are you self-hosting lots of services at home in your homelab? Have you been port forwarding or using VPN to access your self-hosted services wishing you had certificates so that you can access th...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/rancher-new-ui/" class="btn btn-outline-primary" aria-label="Older" ><p>Everything you need to know about the NEW Rancher UI</p></a> <a href="/posts/rancher-monitoring/" class="btn btn-outline-primary" aria-label="Newer" ><p>Monitoring Your Kubernetes Cluster with Grafana, Prometheus, and Alertmanager</p></a></nav><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'timothystewart6/techno-tim.github.io', 'data-repo-id': 'MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk', 'data-category': 'Comments', 'data-category-id': 'DIC_kwDODy-1C84CSN7z', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://l.technotim.live/twitter">Techno Tim</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p><a href="/sponsor/">🤝 Help keep this ad-free!</href> &nbsp; &nbsp;<a href="https://l.technotim.live/shop">🛍️ Check out the new merch shop!</href></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/hardware/">hardware</a> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/rancher/">rancher</a> <a class="post-tag btn btn-outline-primary" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/portainer/">portainer</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/k3s/">k3s</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
