[ { "title": "It's better with Proxmox... Beelink ME Mini PC NAS", "url": "/posts/proxmox-lxc-me-mini/", "categories": "proxmox", "tags": "homelab, prxmox, self-hosted, lxc", "date": "2025-08-09 08:00:00 -0500", "snippet": "Everyone thinks this is a NAS. I don‚Äôt. It‚Äôs a low power Proxmox LXC Server and it‚Äôs awesome!üì∫ Watch VideoIntroThe Beelink ME Mini has been generating attention as a small form factor NAS, and wit...", "content": "Everyone thinks this is a NAS. I don‚Äôt. It‚Äôs a low power Proxmox LXC Server and it‚Äôs awesome!üì∫ Watch VideoIntroThe Beelink ME Mini has been generating attention as a small form factor NAS, and with its compact footprint and six NVMe slots, it‚Äôs easy to see why. But after spending time with it, I think it has another role worth exploring: virtualization.While it‚Äôs marketed for storage, pairing it with Proxmox and LXC containers turns it into a surprisingly capable low-power app engine. The CPU specs may not impress on paper, but it handles more than you might think. I decided to test it that way, loading it with containers, a few VMs, and monitoring its performance.Unboxing &amp; First ImpressionsThe ME Mini has a smaller than the Beelink EQ14, and has an internal power supply instead of an external brick.Ports: Front: USB-C, USB-A 3.0 Rear: HDMI, USB-A 2.0, dual 2.5 GbE LANInside, you‚Äôll find: Intel N150 Twin Lake 4 Cores 4 Threads Turbos up to 3.6 GHz Six labeled NVMe slots Internal power supply Wireless &amp; Bluetooth radios A large, All-in-one heatsink with thermal pads for all NVMe drivesOpening it requires removing some weird screw protectors. These are totally unnecessary and they should get rid of these. Once inside, the cooling solution in pretty impressive. It cools the CPU, all 6 NVMe drives, and the WiFi and Bluetooth chips.Storage LayoutThe included Crucial NVMe in Slot 1 (PCIe 3.0 x2) became my OS drive. The other five slots run at PCIe 3.0 x1, so while you can fill all six, bandwidth will be limited under heavy load. Given the x1 lanes, using the cheapest NVMe drives you can find makes more sense than loading it with high-end models.Power Consumption &amp; SetupWith one NVMe installed, idle power draw hovered around 15‚Äì20W running Windows. After initially setting it up, I skipped Windows entirely and installed Proxmox VE.BIOS tweaks: Enabled VT-D Disabled Hibernate &amp; Sleep ‚ÄúRestore AC Power‚Äù is actually listed under Chipset &gt; PCH-IO Configuration &gt; State After G3 &gt; S0 State. This will restore power to the device after power loss (something I didn‚Äôt realize when evaluating this machine)Installing Proxmox was straightforward, aside from a long pause at ‚ÄúCreating LVSs (normal on some mini-PCs like Beelink and Minisforums machines, just wait it out).LXC Containers on the ME MiniOnce Proxmox was installed, I ran my Proxmox Helper Scripts to: Disable enterprise repos Enable no-subscription repo Disable HA &amp; Corosync Update systemI created a ZFS pool on four Samsung 990 Pros in a stripe (no redundancy). Performance hit ~15K IOPS - on par with my Mac Studio M2 in a similar test.Then I deployed a bunch of container, similar to the Docker containers I am running on my NAS: PiHole Authelia Minio Mongodb MySQL Postgres Redis Uptime Kuma Homepage Immich Plex Tautulli Home Assistant Core n8n Zigbee2mqtt Mqtt Traefik Grafana Jellyfin Ubuntu VMResource usage with all running: RAM: ~50% of 12GB CPU: 2‚Äì8% average Power: ~14‚Äì15WLXC containers made the difference - minimal overhead, instant startup, less resources, and higher density than VMs.Bonus VM Tests Ubuntu Server VM: Runs fine, but LXCs are more efficient here so unless you need full isolation, just run the LXC version of Ubuntu. Windows 11 VM: Works, but sluggish - I would only do this if absolutely necessary and for light, occasional use.GPU Transcoding for Plex &amp; Jellyfin Note: Proxmox recently release 9.0, which includes Linux kernel 9.14Out of the box, Plex couldn‚Äôt detect the integrated Twin Lake GPU - the default Proxmox kernel was too old. I updated to kernel 6.15 using the Zabbly project, which temporarily broke ZFS until I upgraded it as well.Once I fixed that, both Plex and Jellyfin successfully used the GPU for hardware transcoding. Note: Kernel upgrades on Proxmox carry risk - only do this if you need Twin Lake GPU support.Final ThoughtsThe Beelink ME Mini works as a NAS, but shines as a low-power Proxmox LXC host.Highlights: Runs many services with low CPU/RAM usage Integrated GPU for media transcoding Compact and efficient - ideal for app hosting, dashboards, and self-hosted toolsIf you don‚Äôt need six NVMe slots, the EQ14 might be a cheaper option. But for compact, quiet, and flexible virtualization, the ME Mini delivers far more uses cases than their NAS focused marketing suggests.Where to buy Beelink ME - https://amzn.to/3J8vNxZ Beelink EQ14 - https://amzn.to/45vQEmp(Affiliate links. I may receive a small commission at no cost to you.)Join the conversationEveryone thinks this is a NAS. I don&#39;t. It&#39;s a low power Proxmox LXC Server and it&#39;s awesome!https://t.co/bpG3jP7Nv5 pic.twitter.com/0BsuuKolp4&mdash; Techno Tim (@TechnoTimLive) August 9, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "How I Run Docker on TrueNAS Like a Pro", "url": "/posts/truenas-docker-pro/", "categories": "self-hosted", "tags": "homelab, truenas, self-hosted, docker", "date": "2025-07-14 08:00:00 -0500", "snippet": "Learn how to run Docker apps on TrueNAS like a pro ‚Äî with full control, clean YAML, and no extra dashboards.Have questions or a different setup that works for you? Leave a comment, I‚Äôd love to hea...", "content": "Learn how to run Docker apps on TrueNAS like a pro ‚Äî with full control, clean YAML, and no extra dashboards.Have questions or a different setup that works for you? Leave a comment, I‚Äôd love to hear how others are running Docker on TrueNAS.üì∫ Watch VideoThe ApproachWe‚Äôre going to: Create a dataset to store our containers and configs Use Docker Compose and .env files Optionally manage everything from a browser using Code ServerExample 1: Basic Stateless Container (Draw.io)First make the dataset drawio in the TrueNAS UI.Then create the compose.yaml filenano compose.yamldrawio docker-compose.yml---services: drawio: image: jgraph/drawio container_name: drawio restart: unless-stopped ports: - 9080:8080 - 9443:8443 environment: - PUBLIC_DNS=${PUBLIC_DNS:-domain} healthcheck: test: [\"CMD-SHELL\", \"curl -f http://localhost:8080 || exit 1\"] interval: 5s timeout: 5s retries: 5 start_period: 10sThen add it to your includes: while creating a Custom App based on YAML.Example 2: NGINX with Volume MountsFirst make the dataset nginx in the TrueNAS UI.Then create the compose.yaml filenano compose.yamlnginx docker-compose.yml---services: nginx: image: nginx:1-alpine ports: - 8099:80 volumes: - ./html/:/usr/share/nginx/htmlCreate the html foldermkdir htmlinside of there create an index.html filecd htmlnano index.htmlnginx index.html&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;Hello World App&lt;/title&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;style&gt; body { font-family: sans-serif; display: flex; height: 100vh; justify-content: center; align-items: center; background-color: #f0f0f0; margin: 0; } h1 { color: #333; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;Then add it to your includes: while creating a Custom App based on YAML.Example 3: Code Server for Web-Based EditingFirst make the dataset code-server in the TrueNAS UI.Then create the compose.yaml filenano compose.yamlcode-server docker-compose.yml---services: code-server: image: lscr.io/linuxserver/code-server:latest container_name: code-server env_file: - .env environment: - PUID=${PUID:-950} #update with your userId or update .env - PGID=${PGID:-950} #update with your groupId or update .env volumes: - ./config:/config - /mnt/storage0/nginx/:/nginx - /mnt/storage0/code-server/:/code-server - /mnt/storage0/drawio/:/drawio ports: - 8443:8443 restart: unless-stoppedThen create the .env filenano .envPUID=950PGID=950TZ=America/ChicagoThen add it to your includes: while creating a Custom App based on YAML.Bonus: Run Home Assistant with macvlan and Traefik on TrueNASIf you‚Äôre self-hosting Home Assistant on TrueNAS, and you want: Native device discovery on your LAN (or VLAN!) Reverse proxy access through your domain A clean, Compose-managed setupThen this combo of Docker Compose + macvlan + Traefik is exactly what you‚Äôre looking for. Note: This setup is designed for users with a single NIC. I have it connected to a bond in my homelab, which works fine, but I just want to keep it simple for this example. Also, you can host your Home Assistant on one network or VLAN while having your TrueNAS on another (that‚Äôs how I do it).Why macvlan?By using macvlan, you give your Home Assistant container a LAN IP, just like a physical device. This enables: Proper device discovery (e.g., Google Home, Shelly, Zigbee) Direct network communication with other LAN devices Better compatibility with smart home protocolsWhat You NeedAssumptions for this setup: Your NIC is eth0 Your LAN subnet is 192.168.20.0/24 Your gateway is 192.168.20.1 You want Home Assistant to have IP 192.168.20.202 You‚Äôre using Traefik as a reverse proxy (but optional)docker-compose.ymlservices: homeassistant: container_name: homeassistant image: ghcr.io/home-assistant/home-assistant:stable pull_policy: always restart: unless-stopped env_file: - .env security_opt: - no-new-privileges:true networks: iot_macvlan: ipv4_address: 192.168.20.202 traefik: volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - /mnt/storage0/home-assistant/config:/config labels: - \"traefik.enable=true\" - \"traefik.http.routers.homeassistant.rule=Host(`homeassistant.yourdomain.com`)\" - \"traefik.http.routers.homeassistant.entrypoints=https\" - \"traefik.http.routers.homeassistant.tls=true\" - \"traefik.http.routers.homeassistant.tls.certresolver=cloudflare\" - \"traefik.http.services.homeassistant.loadbalancer.server.port=8123\"networks: iot_macvlan: external: true traefik: external: true Note: The iot_macvlan and traefik networks must already exist as external Docker networks. You can create the macvlan network using the command below.Create the macvlan NetworkYou only need to create the macvlan network once:docker network create -d macvlan \\ --subnet=192.168.20.0/24 \\ --gateway=192.168.20.1 \\ -o parent=eth0 \\ iot_macvlan Warning: macvlan works best with physical interfaces like eth0. It can work with bonded or VLAN interfaces too, but compatibility depends on your network setup and driver support. (I am using a bond without ay issues but worth mentioning in case you run into issues) Danger: If you assign the same IP to more than one container or device, it will cause an IP conflict and could take your Home Assistant or host offline.macvlan + Traefik Setting Value Description Interface eth0 Your physical NIC or bond that has access to tagged packets Subnet 192.168.20.0/24 Matches your LAN range Gateway 192.168.20.1 Gateway IP Home Assistant IP 192.168.20.202 LAN IP assigned to the container Domain homeassistant.yourdomain.com Used in your Traefik rule Networks iot_macvlan, traefik Must exist as external networks, created with the docker command ResultsWith this setup: Home Assistant has a dedicated IP on your LAN You can access it securely via Traefik + HTTPS Everything is defined in Compose.Bonus: Fix Custom Icons for TrueNAS Custom AppsBy default, when you deploy a custom app on TrueNAS using your own Docker Compose, the app will likely show up with a missing or blank icon in the Apps UI.Fortunately, you can fix that by editing the app‚Äôs metadata file.Update the App MetadataEdit the following file on your TrueNAS system:/mnt/.ix-apps/app_configs/YOUR_APP_NAME/metadata.yamlAdd the icon: property inside the metadata: block. For example:custom_app: truehuman_version: 1.0.0_custommetadata: app_version: custom capabilities: [] description: This is a custom app where user can use his/her own docker compose file for deploying services home: '' host_mounts: [] maintainers: [] name: custom-app run_as_context: [] sources: [] title: Custom App train: stable version: 1.0.0 icon: https://media.sys.truenas.net/apps/homepage/icons/icon.pngmigrated: falsenotes: nullportals: {}version: 1.0.0 Note: You will need to redeploy the app and refresh the UI for the icon to show up.Mount App Configs in Code ServerIf you‚Äôre using Code Server like I am, you can easily edit app configs like this by mounting the app config directory into your container:volumes: - /mnt/.ix-apps/app_configs/:/ix-appsThis makes /ix-apps accessible from inside Code Server, so you can quickly edit metadata, YAML, or other settings.Bonus: Embed Icons with Base64 (No Internet Needed)If you‚Äôre customizing app metadata on TrueNAS SCALE, you can embed an image directly using a Base64-encoded Data URL. This is perfect if you don‚Äôt want your system to rely on the internet just to load icons. This method was originally shared in this excellent TrueNAS forum thread: How to change icon of custom appOption 1: Encode via Command Line (JPEG Example)Linux:base64 -w 0 your-image.jpg &gt; output.txtmacOS:base64 your-image.jpg &gt; output.txtThen embed it into your app‚Äôs metadata like this:icon: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...' Replace ... with the full Base64 string from output.txtOption 2: Use a Web ToolUse base64.guru/converter/encode/image Upload your image (JPEG/PNG/etc.) Choose ‚ÄúData URI‚Äù as the output format Copy the full result into your app‚Äôs metadata:icon: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...'Why This Is Useful Keeps apps fully offline-capable Avoids pulling icons from GitHub, Docker Hub, or external URLs Ideal for self-contained deployments on isolated or air-gapped TrueNAS SCALE systemsJoin the conversation&quot;Keep your data close‚Ä¶ but your apps closer.&quot;My new setup runs Docker apps on TrueNAS the clean way ‚Äî using Compose, .env, and no hacks.https://t.co/RQ90braua3 pic.twitter.com/NNvDO0zn0O&mdash; Techno Tim (@TechnoTimLive) July 15, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Self-Host Your Own Automation Platform with n8n + Docker", "url": "/posts/n8n-self-hosted/", "categories": "self-hosted", "tags": "homelab, n8n, self-hosted, workflow, automation", "date": "2025-07-11 08:00:00 -0500", "snippet": "n8n is a powerful self-hosted workflow automation tool. In this tutorial, I‚Äôll show you how to self-host n8n on Linux using Docker. You‚Äôll learn how to set up the environment, configure it with a ...", "content": "n8n is a powerful self-hosted workflow automation tool. In this tutorial, I‚Äôll show you how to self-host n8n on Linux using Docker. You‚Äôll learn how to set up the environment, configure it with a .env file, and build workflows that connect to services like Google Sheets and Discord.We‚Äôll start with a simple manual trigger, then create a scheduled workflow, and move on to a more advanced automation that pulls in data from external services and processes it through n8n‚Äôs visual workflow editor. Whether you‚Äôre just exploring n8n or ready to start building, this guide will help you get up and running with a flexible, powerful automation platform.üì∫ Watch VideoInfoFor this setup, I‚Äôll be using Docker Compose on Ubuntu Linux‚Äîspecifically the latest Ubuntu LTS and the latest version of Docker with Compose support. This makes the setup clean, consistent, and easy to repeat.To to learn more about n8n, check out the GitHub repoInstall DockerTo install docker, see this postSetting UpLet‚Äôs walk through the initial setup.Check Docker InstallationFirst, make sure Docker is installed and working by running:docker -vIf that returns a version, you‚Äôre good to go.Create the Project FolderI like to keep things organized under /opt/stacks, but you can adjust this to fit your structure:sudo mkdir -p /opt/stacks/n8nsudo chown serveradmin:serveradmin -R /opt/stackscd /opt/stacks/n8nCreate the Docker Compose FileCreate the file:nano compose.yamlPaste in the following yaml:services: n8n: image: n8nio/n8n:latest restart: always ports: - \"5678:5678\" env_file: - .env volumes: - ./data:/home/node/.n8n - ./files:/files depends_on: - postgres # labels: # - \"traefik.enable=true\" # - \"traefik.http.routers.${TRAEFIK_ROUTER_NAME}.rule=Host(`${TRAEFIK_DOMAIN}`)\" # - \"traefik.http.routers.${TRAEFIK_ROUTER_NAME}.entrypoints=websecure\" # - \"traefik.http.routers.${TRAEFIK_ROUTER_NAME}.tls.certresolver=${TRAEFIK_CERT_RESOLVER}\" # - \"traefik.http.services.${TRAEFIK_ROUTER_NAME}.loadbalancer.server.port=5678\" # If you're running your own external PostgreSQL instance, you can comment out this service postgres: image: postgres:15 restart: always env_file: - .env volumes: - ./postgres-data:/var/lib/postgresql/dataThis gives us a working setup using Docker Compose, with support for environment variables, volumes for persistence, and optional Traefik labels if you want to enable TLS down the line.Create the .env FileCreate and edit the environment file:nano .envPaste in your values:# n8n SettingsDOMAIN_NAME=example.comSUBDOMAIN=n8nGENERIC_TIMEZONE=America/New_YorkN8N_HOST=n8n.example.comN8N_PROTOCOL=httpsWEBHOOK_URL=https://n8n.example.com/N8N_SECURE_COOKIE=falseNODE_ENV=production# Traefik (optional)TRAEFIK_ROUTER_NAME=n8nTRAEFIK_DOMAIN=n8n.example.comTRAEFIK_CERT_RESOLVER=mytlschallenge# PostgreSQLPOSTGRES_DB=n8nPOSTGRES_USER=n8nPOSTGRES_PASSWORD=changeme123This file lets us easily manage settings, especially if you‚Äôre running multiple stacks. If you‚Äôre using Traefik, the optional labels in compose.yaml will pull values from here automatically.Starting the StackNavigate to your project directory:cd /opt/stacks/n8nThen bring everything up in the background:docker compose up -dDocker will pull the required images and spin up your containers. Once that‚Äôs done, n8n should be up and running‚Äîby default on port 5678, or at the domain you configured if you‚Äôre using a reverse proxy like Traefik.Confirm It‚Äôs RunningTo confirm everything started correctly, run:docker psYou should see both the n8n and postgres containers listed and running. If not, check the logs with:docker compose logsThis can help troubleshoot any startup issues.Exploring n8nWith everything up and running, open your browser and go to:http://localhost:5678or use your domain if you‚Äôve set up a reverse proxy. You‚Äôll be prompted to create an admin account the first time you log in.From here, you‚Äôre ready to start building workflows.More infoIf you are looking to combine this stack with an AI/LLM stack, this postJoin the conversationJust published a full tutorial on self-hosting n8n with Docker on Ubuntu.From setup to building workflows with Google Sheets, Ollama, and Discord - this guide walks you through everything.https://t.co/cUK7wtNFe2 pic.twitter.com/4yKMd8mJvU&mdash; Techno Tim (@TechnoTimLive) July 11, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Take Control of Your Photos ‚Äì Self-Host Immich on Your Server", "url": "/posts/immich-self-hosted/", "categories": "self-hosted", "tags": "homelab, immich, self-hosted", "date": "2025-06-15 08:00:00 -0500", "snippet": "Protect your personal photos and videos by hosting them yourself. In this video, you‚Äôll learn how to install Immich, an open-source photo and video platform, on your own home server using Docker. T...", "content": "Protect your personal photos and videos by hosting them yourself. In this video, you‚Äôll learn how to install Immich, an open-source photo and video platform, on your own home server using Docker. Take control of your data with a fast, modern interface, GPU-accelerated features, and the ability to use your own NAS or network storage.üì∫ Watch VideoInfoTo to learn more about immich, check out the GitHub repoInstall DockerTo install docker, see this postGPUcheck for cardlspciSupported NVIDIA cards (5.2 CUDA and higher) https://developer.nvidia.com/cuda-gpuslist all driversubuntu-drivers devicesinstall recommended nvidia driverssudo ubuntu-drivers installrebootsudo rebootcheck to see if drivers are installed and workingnvidia-smiNVIDIA Container Toolkithttps://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.htmlConfigure the production repository:curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\ &amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \\ sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\ sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.listupdate packagessudo apt-get updateInstall NVIDIA Container Toolkit packagesexport NVIDIA_CONTAINER_TOOLKIT_VERSION=1.17.8-1 sudo apt-get install -y \\ nvidia-container-toolkit=${NVIDIA_CONTAINER_TOOLKIT_VERSION} \\ nvidia-container-toolkit-base=${NVIDIA_CONTAINER_TOOLKIT_VERSION} \\ libnvidia-container-tools=${NVIDIA_CONTAINER_TOOLKIT_VERSION} \\ libnvidia-container1=${NVIDIA_CONTAINER_TOOLKIT_VERSION}Configure docker to run the toolkitsudo nvidia-ctk runtime configure --runtime=dockerrestart dockersudo systemctl restart dockerrun nvidia smi inside the ubuntu containerdocker run --rm --runtime=nvidia --gpus all ubuntu nvidia-smiConfigurecreate folders for our stacksudo mkdir -p /opt/stacks/immichchange ownership of the folder (change group:user)sudo chown serveradmin:serveradmin -R /opt/stackschange directoriescd /opt/stacks/immichcreate our compose filenano compose.ymlname: immichservices: immich-server: container_name: immich_server image: ghcr.io/immich-app/immich-server:${IMMICH_VERSION:-release} extends: file: hwaccel.transcoding.yml service: ${TRANSCODING_BACKEND:-cpu} volumes: - ${UPLOAD_LOCATION}:/usr/src/app/upload # - /mnt/photos:/mnt/photos:ro # update and uncomment if you are using a network share - /etc/localtime:/etc/localtime:ro env_file: - .env ports: - '2283:2283' depends_on: - redis - database restart: always healthcheck: disable: false # labels: # - \"traefik.enable=true\" # - \"traefik.http.routers.${TRAEFIK_ROUTER_NAME}.rule=Host(`${TRAEFIK_DOMAIN}`)\" # - \"traefik.http.routers.${TRAEFIK_ROUTER_NAME}.entrypoints=websecure\" # - \"traefik.http.routers.${TRAEFIK_ROUTER_NAME}.tls.certresolver=${TRAEFIK_CERT_RESOLVER}\" # - \"traefik.http.services.${TRAEFIK_ROUTER_NAME}.loadbalancer.server.port=2283\" immich-machine-learning: container_name: immich_machine_learning image: ghcr.io/immich-app/immich-machine-learning:${IMMICH_VERSION:-release}-cuda extends: file: hwaccel.ml.yml service: cuda volumes: - model-cache:/cache env_file: - .env restart: always healthcheck: disable: false redis: container_name: immich_redis image: docker.io/valkey/valkey:8-bookworm healthcheck: test: redis-cli ping || exit 1 restart: always database: container_name: immich_postgres image: ghcr.io/immich-app/postgres:14-vectorchord0.3.0-pgvectors0.2.0 environment: POSTGRES_PASSWORD: ${DB_PASSWORD} POSTGRES_USER: ${DB_USERNAME} POSTGRES_DB: ${DB_DATABASE_NAME} POSTGRES_INITDB_ARGS: '--data-checksums' DB_STORAGE_TYPE: ${DB_STORAGE_TYPE:-SSD} volumes: - ${DB_DATA_LOCATION}:/var/lib/postgresql/data env_file: - .env restart: alwaysvolumes: model-cache:nano hwaccel.ml.ymlservices: cuda: deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: - gpunano hwaccel.transcoding.ymlservices: nvenc: deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: - gpu - compute - videonano .env# Required pathsUPLOAD_LOCATION=./libraryDB_DATA_LOCATION=./postgres# Optional timezone (not needed if localtime is mounted)# TZ=Etc/UTC# Version controlIMMICH_VERSION=release# Postgres authenticationDB_PASSWORD=postgresDB_USERNAME=postgresDB_DATABASE_NAME=immich# Optional tuningDB_STORAGE_TYPE=SSD# transcodingTRANSCODING_BACKEND=nvenc# traefikTRAEFIK_ROUTER_NAME=immichTRAEFIK_DOMAIN=immich.example.comTRAEFIK_CERT_RESOLVER=myresolverSMB Sharemake creds dir sudo mkdir -p /etc/smb-credentialscreate credentials filesudo nano /etc/smb-credentials/photosadd contents (update with your username and password that has access to your share)username=photosuserpassword=Ph0t0sUs3r!update permissions for filesudo chmod 600 /etc/smb-credentials/photossudo chown root:root /etc/smb-credentials/photoscheck permissions ls -l /etc/smb-credentials/photosupdate fstabsudo nano /etc/fstabadd mount path//192.168.10.10/photos /mnt/photos cifs credentials=/etc/smb-credentials/photos,iocharset=utf8,vers=3.0,ro,nofail 0 0install additional packages for cifssudo apt update &amp;&amp; sudo apt install cifs-utilsreboot (mandatory)sudo rebootAfter rebooting you should see your share mounted at /mnt/photosStarting containerstart docker stackcd /opt/stacks/immichdocker compose up -dcheck docker containersdocker psvisit server (update with your server‚Äôs IP) http://192.168.10.111:2283More infoimmich back up docs https://immich.app/docs/administration/backup-and-restore/Join the conversationJust launched: My guide to self‚Äëhosted photo backups with Immich!- Docker- Optional GPU acceleration- Mount external NAS shares- Full control over your library (no more vendor lock‚Äëin!Check it out! https://t.co/kAZGPZWPBg pic.twitter.com/nrSFvb6WZz&mdash; Techno Tim (@TechnoTimLive) June 15, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Buy Once, Cry Once: How I Wasted $2,857 on Switches", "url": "/posts/buy-once-cry-once/", "categories": "homelab", "tags": "homelab, unifi, hardware, network", "date": "2025-06-06 08:00:00 -0500", "snippet": "I bought and replaced 4 switches trying to save money‚Ä¶Then I finally spent $2,742 on the one I should‚Äôve bought in the first place.üì∫ Watch VideoInfoThis isn‚Äôt sponsored ‚Äî I paid for the switch myse...", "content": "I bought and replaced 4 switches trying to save money‚Ä¶Then I finally spent $2,742 on the one I should‚Äôve bought in the first place.üì∫ Watch VideoInfoThis isn‚Äôt sponsored ‚Äî I paid for the switch myself along with all of the others included in the total.And it‚Äôs not really about networking.It‚Äôs about the cost of solving the same problem over and over again.Buy once, cry once.üì¶ Products in this video üì¶(affiliate links) Pro XG 48 PoE (the one I bought): https://store.ui.com/us/en/category/switching-professional-max-xg/products/usw-pro-xg-48-poe?a_aid=TechnoTim Other Switches: https://store.ui.com/us/en/category/all-switching?a_aid=TechnoTim Gateways: https://store.ui.com/us/en/category/all-cloud-gateways?a_aid=TechnoTim Join the conversationI ignored ‚ÄúBuy Once, Cry Once.‚ÄùSpent $2,857 on 4 switches over time‚Ä¶Then $2,742 on the one I should‚Äôve bought first.https://t.co/5n84XIcXeL pic.twitter.com/RQkV8zT9IP&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) June 6, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Boost ZFS Performance with a Special VDEV in TrueNAS", "url": "/posts/special-vdev-truenas/", "categories": "homelab", "tags": "homelab, zsf, truenas", "date": "2025-05-10 08:00:00 -0500", "snippet": "Curious about how a special metadata VDEV can boost ZFS performance, especially with spinning disks? In this video, I walk through what it is, why it matters, and how to set it up in TrueNAS and so...", "content": "Curious about how a special metadata VDEV can boost ZFS performance, especially with spinning disks? In this video, I walk through what it is, why it matters, and how to set it up in TrueNAS and some from the terminal. I‚Äôll also share real-world benchmarks comparing pools with and without a special VDEV, so you can see the difference for yourself.üì∫ Watch VideoTestingI created a test script that you can find here: https://github.com/timothystewart6/zfs-toolsThe test script will try to create a pool based on 3 drives. HDD1, HDD2, and NVME_SPECIAL. You can modify these to match your disk Ids.You can find your disk Ids by running:ls -l /dev/disk/by-id/You can also adjust the test files by changing TEST_COUNT however I found that 100,000 is a good number to get consistent results.Update the script with your disk Ids.You can then run the script:chmod +x zfs-metadata.sh # make it executable./zfs-metadata.sh # run the scriptIt will create 2 pools, test-1 and test-2, test-2 has the special vdeb.This will take a long time to run depending on your system, disks, and TEST_COUNT.When it‚Äôs done, you will find the results in /mnt/test-results/If you want to check the small blocks values for your pool:List poolzpool list -v test-1 # change based on your pool nameSetting Small Blocks &amp; Record SizeTo change your small blocks value you can do so like this, however it‚Äôs a good idea to check your record size firstzfs get recordsize test-1You should see something like:NAME PROPERTY VALUE SOURCEtest-1 recordsize 128K defaultYou always want to be sure that your record size &gt; small blocks size, otherwise all blocks will be writtenGet valuezfs get special_small_blocks test-1 -r # change based on your pool nameSet valuezfs set special_small_blocks=64k test-1 # change based on your pool name and the small block value you want to useIf you want to use something higher than 128K you would do something like thiszfs set recordsize=256K test-1/yourdatasetzfs set special_small_blocks=128K test-1/yourdatasetMy Test resultsRandom Read (4K, iodepth=1)Here are my results from the video. test-1 pool was a single 14TB EXOS drive test-2 pool was a single 14TB EXOS drive + a Samsung 990 Pro NVMe Metric test-1 (HDD only) test-2 (Special VDEV) Improvement IOPS 4,331 57,200 +1,220% Bandwidth 16.9 MiB/s 223 MiB/s +1,220% Avg Latency 865.88 ¬µs 66.35 ¬µs ‚àí92% 99% Latency 8.0 ¬µs 2.8 ¬µs ‚àí65% Read IO Completed 2.0 GiB 26.2 GiB +1,210% Random Write (4K, iodepth=1) Metric test-1 (HDD only) test-2 (Special VDEV) Change IOPS 209 195 ‚àí6.7% Bandwidth 838 KiB/s 782 KiB/s ‚àí6.7% Avg Latency 18.8 ms 20.2 ms +7.4% (worse) 99% Latency 10.18 ¬µs 10.82 ¬µs Slightly worse Random Write (4K, iodepth=16) Metric test-1 (HDD only) test-2 (Special VDEV) Improvement IOPS 210 229 +9% Bandwidth 840 KiB/s 919 KiB/s +9% Avg Latency 303.8 ms 277.4 ms ‚àí8.7% 99% Latency 701 ms 376 ms ‚àí46.4% 99.95% Latency 776 ms 443 ms ‚àí43% Max Latency 842 ms 516 ms ‚àí38.7% Random Read/Write (4K, iodepth=16) Metric test-1 (HDD only) test-2 (Special VDEV) Improvement Read IOPS 196 247 +26% Write IOPS 196 246 +25% Read Bandwidth 788 KiB/s 989 KiB/s +25.5% Write Bandwidth 786 KiB/s 986 KiB/s +25.5% Avg Read Latency 160.15 ms 127.45 ms ‚àí20% Avg Write Latency 163.93 ms 130.24 ms ‚àí20.5% 99% Read Latency 502 ms 207 ms ‚àí58.8% 99% Write Latency 506 ms 209 ms ‚àí58.7% Metadata ‚Äì Random Access (20,000 files) Pool Duration (s) Improvement test-1 71.91 s ‚Äî test-2 65.73 s +8.6% faster Metadata ‚Äì Sequential Access (20,000 files) Pool Duration (s) Improvement test-1 139.80 s ‚Äî test-2 81.62 s +41.6% faster üì¶ Products in this video üì¶While enterprise gear is great for businesses, I have found that if you have a good warranty, redundancy, and understand the trade-offs, consumer gear works great for home. Samsung 990 Pro NVMe: https://amzn.to/4d9JKXk (affiliate link)Join the conversationI tested how much a special metadata VDEV can actually speed up ZFS. Turns out it makes directory browsing faster, snappier containers, and a smart use of NVMe. I built a test script, ran benchmarks, and walk through it all in @TrueNAS https://t.co/czyXEFkSd3 pic.twitter.com/6hpIve8HR9&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) May 10, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Swapping PSUs: From Corsair to Seasonic (and the Molex Mayhem That Followed)", "url": "/posts/psu-cable-journey/", "categories": "homelab", "tags": "homelab, hardware, hl15, 45drives, seasonic, noctua", "date": "2025-04-30 08:00:00 -0500", "snippet": "When I first got my HL15 from 45Drives, I knew it was going to be a long-term part of my homelab. What I didn‚Äôt expect was how tricky it would be to swap out the PSU ‚Äî specifically replacing the st...", "content": "When I first got my HL15 from 45Drives, I knew it was going to be a long-term part of my homelab. What I didn‚Äôt expect was how tricky it would be to swap out the PSU ‚Äî specifically replacing the stock Corsair one with the Seasonic TX-1600 Noctua Edition. Spoiler: the PSU swap itself was the easy part.The Power Breakout BoardThe HL15 includes a breakout board that distributes power to the fans and the backplane using four 4-pin Molex connectors, but here‚Äôs the catch - the 6-pin-to-Molex power cables that 45Drives includes are custom-made for Corsair PSUs. They don‚Äôt work with Seasonic‚Äôs modular pin-out or any other brand for that matter. This is common practice among all power supply makers and something I didn‚Äôt even think about when starting this swap.HL15 power breakout boardSince I had already replaced all the fans and wired them directly to my SuperMicro motherboard (which gave me full PWM control), I figured I could skip the breakout board and wire the backplane directly.The Molex NightmareSeasonic only includes one 6-pin to 4-pin Molex cable, and I needed four. Worse, the backplane is powered entirely via Molex, the same old 4-pin IDE-style connectors that IDE drive used (which no one has by the way). I wonder why they have not switched SATA power. It‚Äôs more available, and the cables are far more suited for the tight spacing underneath the HL15‚Äôs backplane. I‚Äôm assuming it‚Äôs just a design that dates back to when it was first designed for servers. Also, since they own the design for the backplane they can also design any cables they want.HL15 power breakout cables for fans and backplaneThe Cable SearchI searched for Seasonic compatible 6-pin to Molex cables. No luck. Seasonic pointed me to BTOS Integration, who doesn‚Äôt make or sell these cables. Noctua, despite collaborating on the PSU, had no cable leads (pun intended). CableMod couldn‚Äôt offer right-angle Molex ends that would clear the space under the backplane. ModDIY could make custom right-angle Molex cables but at ~$30 each after customizing the length. I needed 8 cables (2 servers), which would run nearly $300 with shipping. Not the end of the world, but I wanted to shop around before shelling out this kind of money for cables.I then contact 45Drives directly since they made the original cables for Corsair PSUs, I hoped they‚Äôd offer ones for Seasonic too. I thought they might be interested since they have partnered with Noctua on fans and might sell this PSU at some point. Unfortunately they could not make them. They suggested I contact CableMod, which I already did, so the cable hunt continues.At this point I was running SATA-to-Molex adapters (affiliate link) as a temporary workaround, creating a rat‚Äôs nest of cables.A Needle in the HaystackAfter scouring eBay, Amazon, and finally AliExpress, I found a set of cables that looked promising, a 6-pin power to 3x 4-pin Molex (IDE) right-angle power cable that is supposedly compatible with Seasonic power supplies. The listing is now gone, but here‚Äôs the archived product.I ordered 9 cables ($3.56 each‚Äîone spare) and waited.‚ÄúSeasonic compatible‚Äù 6-pin to Molex cablesSafety FirstWhen the cables arrived, I didn‚Äôt plug them in immediately. I needed to make sure the pin-outs matched. I almost fried my PSU and backplane once by using the Corsair cables, I didn‚Äôt want to do that again.I posted this question on X: ‚ÄúWhat are the odds that these ‚ÄúSeasonic compatible‚Äù power cables fry my server‚ÄùWhat are the odds that these ‚ÄúSeasonic compatible‚Äù power cables fry my server pic.twitter.com/XaDUCvz0dS&mdash; Techno Tim (@TechnoTimLive) April 30, 2025Digital Spaceport chimed in with video on how to test cables using a multimeter (thank you!), and five minutes later I had verified the new cable‚Äôs pin-outs match the OEM Seasonic cables!Toning out the cablesThe Final InstallWith the pin-outs verified, I tore the HL15 apart again, removed the breakout board, ditched all the adapter cables, and installed the new ones. Each backplane Molex connector now had its own dedicated cable and power lane to the PSU.New Molex cablesI hit the power button‚Ä¶ and it worked. No sparks. No dead drives. Just clean direct power.Final ThoughtsThis whole adventure reaffirmed two things: Always test your modular cables. Even if they look the same, they aren‚Äôt. Power supplies should use standardized modular connectors‚Äîor none at all. This halfway point of using identical-looking connectors with proprietary pin-outs is a recipe for disaster. I feel like it‚Äôs in everyone‚Äôs best interest for power supply makers to standardize this.If you‚Äôre planning to swap PSUs in your HL15 or PC/server that has parts made for a different PSU, be ready to go deep into the rabbit hole of custom cables. And yes those old Molex connectors are still around, like it or not.The HL15 is finally back in the rack, and it‚Äôs running great. Clean cables, quiet fans, and solid power delivery.Done wiring (for now)The PSU and backplane are all cleaned upIf you‚Äôre curious, I ranted about this whole issue with modular power cables and PSU manufacturers here:I Rebuilt My Home Server ‚Äî Quieter, Faster, and Ready for 2025Also, if you‚Äôre interested in this PSU it‚Äôs hard to find right now. Noctua said the demand for this PSU is much greater than they anticipated but more stock is on the way.You can find it here: Seasonic Prime TX-1600 Noctua Edition PSU: https://amzn.to/3EjEAeA (affiliate link)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Thought I Ran Out of PCIe Lanes... I Was Wrong", "url": "/posts/oculink-nvme/", "categories": "homelab", "tags": "homelab, hardware, oculink, nvme, icy-dock", "date": "2025-04-26 08:00:00 -0500", "snippet": "I thought I had no PCIe lanes left ‚Äî but OCuLink opened a new path.üì∫ Watch VideoInfoToday, I expand my home server with more NVMe storage, put a Samsung 990 Pro and Intel Optane head-to-head, and s...", "content": "I thought I had no PCIe lanes left ‚Äî but OCuLink opened a new path.üì∫ Watch VideoInfoToday, I expand my home server with more NVMe storage, put a Samsung 990 Pro and Intel Optane head-to-head, and show just how much you can still get out of a packed system.TestsI decided to test each drive to be sure that I wasn‚Äôt being throttled and that I was getting the highest speeds my motherboard would support.Finding Your DrivesFirst install the nvme utilitysudo apt updatesudo apt install nvme-cliThen we can list all of our NVMe drivesnvme listYou should see something like thisNode Generic SN Model Namespace Usage Format FW Rev--------------------- --------------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------/dev/nvme2n1 /dev/ng2n1 PHOC331301K11111 INTEL SSDPEK1A118GA 1 118.41 GB / 118.41 GB 512 B + 0 B U5110550/dev/nvme1n1 /dev/ng1n1 1846E1D22222 CT500P1SSD8 1 500.11 GB / 500.11 GB 512 B + 0 B P3CR013/dev/nvme0n1 /dev/ng0n1 S3EWNX0JA0YYYYY Samsung SSD 960 PRO 512GB 1 512.11 GB / 512.11 GB 512 B + 0 B 4B6QCXP7From there you can also check to see which lane it‚Äôs inlspci | grep -i nvmeYou should see something like this01:00.0 Non-Volatile memory controller: Samsung Electronics Co Ltd NVMe SSD Controller SM961/PM961/SM96304:00.0 Non-Volatile memory controller: Micron/Crucial Technology P1 NVMe PCIe SSD (rev 03)69:00.0 Non-Volatile memory controller: Intel Corporation Optane NVME SSD P1600X SeriesChecking PCIe SpeedsThen you can check to see what each drive is negotiated at (update with your lane assignment)lspci -s 68:00.0 -vv | grep -iE 'LnkCap|LnkSta'You should see something like this (keep in mind, mine shows PCIe Gen 3 speeds) LnkCap: Port #0, Speed 8GT/s, Width x4, ASPM L1, Exit Latency L1 unlimited LnkSta: Speed 8GT/s, Width x4 LnkCap2: Supported Link Speeds: 2.5-8GT/s, Crosslink- Retimer- 2Retimers- DRS- LnkSta2: Current De-emphasis Level: -3.5dB, EqualizationComplete+ EqualizationPhase1+Checking Drive Temps and ThrottlingIf you want to see the SMART log to check for throttling and temps you can run (updated with your drive path)nvme smart-log /dev/ng0n1You should see something like thisSmart Log for NVME device:ng0n1 namespace-id:ffffffffcritical_warning\t\t\t: 0temperature\t\t\t\t: 32¬∞C (305 Kelvin)available_spare\t\t\t\t: 100%available_spare_threshold\t\t: 10%percentage_used\t\t\t\t: 8%endurance group critical warning summary: 0Data Units Read\t\t\t\t: 127385723 (65.22 TB)Data Units Written\t\t\t: 186302952 (95.39 TB)host_read_commands\t\t\t: 1823391462host_write_commands\t\t\t: 3042922234controller_busy_time\t\t\t: 8341power_cycles\t\t\t\t: 4402power_on_hours\t\t\t\t: 11430unsafe_shutdowns\t\t\t: 348media_errors\t\t\t\t: 0num_err_log_entries\t\t\t: 13652Warning Temperature Time\t\t: 0Critical Composite Temperature Time\t: 0Temperature Sensor 1 : 32¬∞C (305 Kelvin)Temperature Sensor 2 : 37¬∞C (310 Kelvin)Thermal Management T1 Trans Count\t: 0Thermal Management T2 Trans Count\t: 0Thermal Management T1 Total Time\t: 0Thermal Management T2 Total Time\t: 0Sequential PerformanceHere is the command I ran to test sequential read and writes. Keep in mind that although the drives and adapter support PCIe gen 4, my board only supports gen 3.Sequential Read/Write (Large Files, 1MiB Block Size)fio --name=seqreadwrite \\ --filename=/dev/nvme3n1 \\ --ioengine=libaio \\ --direct=1 \\ --rw=readwrite \\ --bs=1M \\ --numjobs=2 \\ --iodepth=32 \\ --runtime=30 \\ --time_based \\ --group_reporting Drive Read Speed Write Speed Samsung 990 Pro 3041 MB/s 3042 MB/s Intel Optane P1600X 689 MB/s 694 MB/s Random 4K PerformanceRandom 4K tests were using 4k block size, random read/write (randrw).Random Read/Write 4KiB (IOPS/Small Files Test)fio --name=random4k \\ --filename=/dev/nvme3n1 \\ --ioengine=libaio \\ --direct=1 \\ --rw=randrw \\ --bs=4k \\ --numjobs=4 \\ --iodepth=32 \\ --runtime=30 \\ --time_based \\ --group_reporting Drive Read Speed Write Speed Samsung 990 Pro 1940 MB/s 1939 MB/s Intel Optane P1600X 629 MB/s 629 MB/s Latency Comparison (4K Random Read, 1 Queue Depth)I then wanted to test latency, since that‚Äôs where Intel Optane drives are claimed to excel.Latency Focused Test (1 I/O at a Time, 4KiB Random Read)fio --name=latency_test \\ --filename=/dev/nvme3n1 \\ --ioengine=sync \\ --direct=1 \\ --rw=randread \\ --bs=4k \\ --iodepth=1 \\ --numjobs=1 \\ --runtime=10 \\ --time_based \\ --group_reporting Drive Avg Latency (¬µs) IOPS Bandwidth (MB/s) Samsung 990 Pro 25.6 ¬µs 37.3k 146 MB/s Intel Optane P1600X 9.1 ¬µs 97.2k 380 MB/s Note: ¬µs = microseconds (one millionth of a second)ObservationsQuick observations: Optane P1600X had almost 3x lower latency. Optane handled more than 2.5x the IOPS. Samsung 990 Pro crushes when it comes to raw transfer speedsüì¶ Products in this video üì¶ ICY Dock NVMe to U2. Adapter: https://amzn.to/3Yk882t OCuLink to NVMe U.2 Cable: https://amzn.to/432ArFa Samsung NVMe: https://amzn.to/4m6dfO7 Intel Optane: https://amzn.to/4lO3zHLJoin the conversationI thought I had no PCIe lanes left ‚Äî but OCuLink opened a new path.https://t.co/q6K6TUTXtr pic.twitter.com/4Prk054Jic&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) April 26, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "I Rebuilt My Home Server ‚Äî Quieter, Faster, and Ready for 2025", "url": "/posts/home-server-upgrade-2025/", "categories": "homelab", "tags": "homelab, hardware, noctua", "date": "2025-04-12 08:00:00 -0500", "snippet": "I rebuilt my home server from the ground up: CPU, GPU, RAM, fans, SSDs, and power supply‚Ä¶ even some ‚Äúaccessory lighting‚Äù. This thing is now quieter, faster, and built to handle just about anything ...", "content": "I rebuilt my home server from the ground up: CPU, GPU, RAM, fans, SSDs, and power supply‚Ä¶ even some ‚Äúaccessory lighting‚Äù. This thing is now quieter, faster, and built to handle just about anything I throw at it in 2025 and hopefully beyond.Thank you to Noctua for helping to make this server quiet!Thank you to Patrick from Serve the Home for the CPU upgrades!(Both Noctua and Patrick gifted items for this upgrade.)üì∫ Watch Videoüì¶ Products in this video üì¶ Noctua NF-A12x25 PWM Fans: https://amzn.to/3EmPfoF Noctua NH-D9 DX-3647 4U CPU Cooler: https://amzn.to/4ihah62 Seasonic Prime TX-1600 Noctua Edition PSU: https://amzn.to/3EjEAeA 45HomeLab Server: https://45homelab.com/ DDR4 ECC RAM: https://amzn.to/4curN5m LGA 3647 CPU Upgrades: https://ebay.us/3QABqM Smasung SSDs: https://amzn.to/4czkKbQ Intel Optane (the good ones): https://amzn.to/3Yp91qo Intel Optane on Ebay: https://ebay.us/Me61DT Intel A310 GPU (best budget Plex GPU): https://amzn.to/4js7M1J Gigabyte RTX 3060 (best budget AI GPU): more https://amzn.to/3G6dMio Nvidia RTX 2000 Ada Generation on Amazon: https://amzn.to/3Ri7nTD Nvidia RTX 2000 Ada Generation on ebay: https://ebay.us/Ix5Bd3 Hue Light Strip: https://amzn.to/4j1pZU53D Printed Items 45Drives - SSD Caddies: https://www.printables.com/model/583544-45drives-ssd-caddies 3D Print Homelab Collection - https://makerworld.com/en/collections/3574171-homelabJoin the conversationI rebuilt my home server from the ground up: CPU, GPU, RAM, fans, SSDs, and power supply‚Ä¶ even some &quot;accessory lighting&quot;. This thing is now quieter, faster, and built to handle just about anything I throw at it in 2025 and hopefully beyond. https://t.co/Ll9h7wt0hQ pic.twitter.com/XGLlTf6VXt&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) April 12, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Turns Out, VGA to HDMI Isn‚Äôt That Simple‚Ä¶", "url": "/posts/vga-hdmi-server/", "categories": "homelab", "tags": "homelab, hardware, hdmi, vga", "date": "2025-03-20 08:00:00 -0500", "snippet": "I tested 10 VGA to HDMI adapters and only some actually worked. If you have a homelab server or older machine and have failed converting your video signal when getting into the OS or BIOS, you know...", "content": "I tested 10 VGA to HDMI adapters and only some actually worked. If you have a homelab server or older machine and have failed converting your video signal when getting into the OS or BIOS, you know what I‚Äôm talking about. Find out which one‚Äôs work, which one‚Äôs don‚Äôt, and what to avoid before you waste time and money.üì∫ Watch VideoInfoHere are the 10 adapters I tested with my Supermicro servers. Most of these worked surprisingly well, better than the ones I tested years ago. Adapter BIOS OS PiKVM JetKVM Price Link Notes MINI ‚úÖ ‚úÖ ‚úÖ ‚úÖ $10.55 https://amzn.to/4kFIAq3 First one I tested, worked, white, need to buy your own VGA cables UGREEN ‚ùå ‚ùå ‚ùå ‚ùå $9.99 https://amzn.to/4bGRhfL This is HDMI in to VGA out Fairikabe ‚úÖ ‚úÖ ‚úÖ ‚úÖ $9.99 https://amzn.to/41Gopj3 Best value, 3.5 mm analog Foinnex ‚úÖ ‚úÖ ‚úÖ ‚úÖ $15.99 https://amzn.to/4hstfGx Worked dine, no VGA cabled needed Foinnex block ‚úÖ ‚úÖ ‚úÖ ‚úÖ $13.99 https://amzn.to/4imRLds Most unique, very compact Cable Matters ‚úÖ ‚úÖ ‚úÖ ‚úÖ $21.99 https://amzn.to/4iLqSzM Best quality and USB chip for audio. Check return policy though, they might not have one! Tendak ‚ùå ‚ùå ‚ùå ‚ùå $13.99 https://amzn.to/4kBXlu5 This is HDMI in to VGA out Benfei ‚úÖ ‚úÖ ‚úÖ ‚úÖ $12.59 https://amzn.to/4bSetI0 Best value and USB chip for audio, my choice Onten ‚úÖ ‚úÖ ‚úÖ ‚úÖ $9.99 https://amzn.to/4kHwc90 Worked fine, comes with cables needed JideTech ‚ùå ‚ùå ‚ùå ‚ùå $45.99 https://amzn.to/4bSycat This one didn‚Äôt work for me even though the Amazon reviews said it worked for others Join the conversationI tested 10 VGA to HDMI adapters with my Homelab servers so that you don&#39;t have to.https://t.co/UrwOcF3L4C&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) March 23, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Pi-hole Syncing‚Ä¶ But Smarter...", "url": "/posts/pihole-sync-nebula/", "categories": "homelab", "tags": "homelab, pihole, self-hosted", "date": "2025-03-20 08:00:00 -0500", "snippet": "Running multiple Pi-hole servers has always been a challenge, until now. In this video, I‚Äôll show you a tool called Nebula Sync that helps keep them in sync, making DNS and blocklist management muc...", "content": "Running multiple Pi-hole servers has always been a challenge, until now. In this video, I‚Äôll show you a tool called Nebula Sync that helps keep them in sync, making DNS and blocklist management much easier. I‚Äôll walk through how it works, how to set it up, how to choose the right settings, and why it might be useful for your network.üì∫ Watch VideoInfoDon‚Äôt forget to give these repos a star! https://github.com/pi-hole/pi-hole https://github.com/lovelaze/nebula-syncWhat you‚Äôll need to get started 2 fully working Pi-hole servers Docker running somewhere in your environmentAlso, I mentioned that I would show you how to reset your Pi-hole password in the video, but never showed how üòÖ.Here‚Äôs how:ssh into your Pi-hole server.sudo pihole setpasswordYour password will instantly be updated.Upgrading from Pi-Hole 5 + Gravity Sync Note: Pi-Hole 6 is not compatible with gravity-sync so if you‚Äôre using Pi-Hole 5 or gravity-sync please follow this firstDO NOT UPGRADE TO PI-HOLE 6 YETUninstall gravity-sync by running:gravity-sync purgeThis should remove gravity-syncPersonally I would reboot the server afterwards and run gravity-sync command afterwards to be sure it‚Äôs fully remove. You should get an error like command not found: gravity-sync, which means it‚Äôs fully removed.Next I take a backup of your Pi-Hole instance and even export your config with Teleporter just to be sure.Upgrade to Pi-Hole 6. Test it, reboot it, make sure it works.Do this for each Pi-Hole 5 instance you have.Then continue on with this tutorial.Install DockerTo install docker, see this postInstructionsssh into server.I usually put my stacks into /opt/stacks.Make a new directory for Nebula Sync and cd into it.mkdir nebula-synccd nebula-syncCreate our compose file.nano compose.yamlInside of our compose.yaml paste:---services: nebula-sync: image: ghcr.io/lovelaze/nebula-sync:latest container_name: nebula-sync restart: unless-stopped env_file: .envCreate our .env with our variables.Replace with your server IPs, passwords, timezone, and how frequently you want so run this sync job.PRIMARY=\"https://192.168.60.10|abc123\" # Be sure to add quotes if you have special charactersREPLICAS=\"https://192.168.60.26|abc123,https://10.0.200.5|abc123,https://10.0.200.6|abc123\" # Be sure to add quotes if you have special charactersFULL_SYNC=falseRUN_GRAVITY=falseCRON=*/15 * * * *CLIENT_SKIP_TLS_VERIFICATION=trueTZ=America/ChicagoSYNC_CONFIG_DNS=trueSYNC_CONFIG_DHCP=falseSYNC_CONFIG_NTP=falseSYNC_CONFIG_RESOLVER=falseSYNC_CONFIG_DATABASE=falseSYNC_CONFIG_MISC=falseSYNC_CONFIG_DEBUG=falseSYNC_GRAVITY_DHCP_LEASES=falseSYNC_GRAVITY_GROUP=falseSYNC_GRAVITY_AD_LIST=trueSYNC_GRAVITY_AD_LIST_BY_GROUP=trueSYNC_GRAVITY_DOMAIN_LIST=trueSYNC_GRAVITY_DOMAIN_LIST_BY_GROUP=trueSYNC_GRAVITY_CLIENT=falseSYNC_GRAVITY_CLIENT_BY_GROUP=falseStart our compose stack interactively to monitor logs.docker compose upStart our compose stack as a daemon.docker compose up -dChecking for the running containerdocker ps | grep nebulaCheck container logsdocker logs nebula-syncIf you don‚Äôt want to use Docker Compose and want to use the Docker CLI you can run this command:docker run \\ --restart unless-stopped \\ --name=nebula-sync \\ --env-file .env \\ ghcr.io/lovelaze/nebula-sync:latestBlocklistsHere is the list of blocklists that I use. Use these with caution and prepare to add exceptions for sites you may need.Most of these were collected from https://firebog.net/https://raw.githubusercontent.com/StevenBlack/hosts/master/hostshttps://mirror1.malwaredomains.com/files/justdomainshttps://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts_without_controversies.txthttps://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hostshttps://v.firebog.net/hosts/static/w3kbl.txthttps://adaway.org/hosts.txthttps://v.firebog.net/hosts/Prigent-Ads.txthttps://raw.githubusercontent.com/DandelionSprout/adfilt/master/Alternate%20versions%20Anti-Malware%20List/AntiMalwareHosts.txthttps://osint.digitalside.it/Threat-Intel/lists/latestdomains.txthttps://zerodot1.gitlab.io/CoinBlockerLists/hosts_browserhttps://phishing.army/download/phishing_army_blocklist_extended.txthttps://v.firebog.net/hosts/AdguardDNS.txthttps://v.firebog.net/hosts/Admiral.txthttps://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txthttps://s3.amazonaws.com/lists.disconnect.me/simple_ad.txthttps://v.firebog.net/hosts/Easylist.txthttps://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&amp;showintro=0&amp;mimetype=plaintexthttps://raw.githubusercontent.com/FadeMind/hosts.extras/master/UncheckyAds/hostshttps://raw.githubusercontent.com/bigdargon/hostsVN/master/hostshttps://v.firebog.net/hosts/Easyprivacy.txthttps://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-blocklist.txthttps://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Risk/hostshttps://urlhaus.abuse.ch/downloads/hostfile/https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txthttps://raw.githubusercontent.com/jdlingyu/ad-wars/master/hostshttps://raw.githubusercontent.com/Perflyst/PiHoleBlocklist/master/android-tracking.txthttps://raw.githubusercontent.com/Perflyst/PiHoleBlocklist/master/SmartTV.txthttps://raw.githubusercontent.com/Perflyst/PiHoleBlocklist/master/AmazonFireTV.txthttps://v.firebog.net/hosts/Prigent-Malware.txthttps://raw.githubusercontent.com/matomo-org/referrer-spam-blacklist/master/spammers.txthttps://someonewhocares.org/hosts/zero/hostshttps://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.2o7Net/hostshttps://raw.githubusercontent.com/crazy-max/WindowsSpyBlocker/master/data/hosts/spy.txthttps://s3.amazonaws.com/lists.disconnect.me/simple_malvertising.txthttps://v.firebog.net/hosts/Prigent-Crypto.txthttps://mirror.cedia.org.ec/malwaredomains/immortal_domains.txthttps://bitbucket.org/ethanr/dns-blacklists/raw/8575c9f96e5b4a1308f2f12394abd86d0927a4a0/bad_lists/Mandiant_APT1_Report_Appendix_D.txthttps://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-malware.txthttps://v.firebog.net/hosts/Shalla-mal.txthttps://raw.githubusercontent.com/Spam404/lists/master/main-blacklist.txthttps://raw.githubusercontent.com/VeleSila/yhosts/master/hostshttps://winhelp2002.mvps.org/hosts.txthttps://v.firebog.net/hosts/neohostsbasic.txthttps://raw.githubusercontent.com/RooneyMcNibNug/pihole-stuff/master/SNAFU.txthttps://paulgb.github.io/BarbBlock/blacklists/hosts-file.txthttps://phishing.army/download/phishing_army_blocklist.txthttps://www.github.developerdan.com/hosts/lists/ads-and-tracking-extended.txthttps://malware-filter.gitlab.io/malware-filter/phishing-filter-hosts.txthttps://v.firebog.net/hosts/RPiList-Malware.txthttps://v.firebog.net/hosts/RPiList-Phishing.txthttps://raw.githubusercontent.com/AssoEchap/stalkerware-indicators/master/generated/hostsJoin the conversationTired of the Internet going down when you reboot your Pi-Hole server?https://t.co/sKfXYhK8qf pic.twitter.com/skFjb1sVMd&mdash; Techno Tim (@TechnoTimLive) March 21, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "6 JetKVMs, 1 Rack ‚Äì The Ultimate Setup!", "url": "/posts/jetkvm-rackmount/", "categories": "homelab", "tags": "homelab, hardware, jetkvm, kvm", "date": "2025-03-10 08:00:00 -0500", "snippet": "I wanted to rackmount 6 JetKVMs in my server rack, thankfully there‚Äôs a DIY solution for it.üì∫ Watch VideoInfoThanks to JaredC01 for the designs! https://github.com/JaredC01 LabStack-Rack Designs: ...", "content": "I wanted to rackmount 6 JetKVMs in my server rack, thankfully there‚Äôs a DIY solution for it.üì∫ Watch VideoInfoThanks to JaredC01 for the designs! https://github.com/JaredC01 LabStack-Rack Designs: https://github.com/JaredC01/LabStack-Rack JetKVM: https://jetkvm.com (provided most of the JetKVMs however no input into this video)Other Products I used (affiliate links below) M2 x 16mm Screws: https://amzn.to/3DxNZia M3 x 8mm Screws: https://amzn.to/3XJxq9N M3x4x5mm Threaded Inserts with tip: https://amzn.to/41C1NA8 PoE Splitter: https://amzn.to/41pxKeU 10 ft. USB-A cables: https://amzn.to/3FsA9hu USB A to USB C adapters: https://amzn.to/4kGfZAL 10 ft. Cat6 cables: https://amzn.to/4iCoScL Female HDMI to HDMI coupler: https://amzn.to/41TbDij Mini HDMI to HDMI (I didn‚Äôt end up using these): https://amzn.to/3Fjs12UJoin the conversationThis is getting out of hand.... Now there are 6 of them!https://t.co/u7UzgKWwEr pic.twitter.com/Xk9A2oYjKu&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) March 10, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "JetKVM: Promises Made, Promises Kept?", "url": "/posts/jetkvm-tested/", "categories": "homelab", "tags": "homelab, hardware, jetkvm, kvm", "date": "2025-03-05 07:00:00 -0600", "snippet": "I received my JetKVM from backing it on Kickstarter and I wanted to find out if it delivers on all of its many promises it made during their campaign.üì∫ Watch VideoInfoCheck out JetKVM: https://jetk...", "content": "I received my JetKVM from backing it on Kickstarter and I wanted to find out if it delivers on all of its many promises it made during their campaign.üì∫ Watch VideoInfoCheck out JetKVM: https://jetkvm.com/JetKVM on GitHub: https://github.com/jetkvmOther Products I used (affiliate links below) EZCOO Switch (hotkey model): https://amzn.to/3QKNGU4 EZCOO KVM Switch: https://amzn.to/41GuWvb PoE Splitter: https://amzn.to/41pxKeU Mini Monitor: https://amzn.to/4ihjH1UJoin the conversationI received my JetKVM from backing it on Kickstarter and I wanted to find out if it delivers on all of its many promises it made during their campaign.SPOILER ALERT: It&#39;s awesome!https://t.co/XNYzj3NpCA pic.twitter.com/6P9WzsoE4U&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) March 5, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "The MINI Network RACK Ubiquiti should make", "url": "/posts/network-mini-rack/", "categories": "homelab", "tags": "homelab, unifi, ubiquiti, networking, hardware", "date": "2025-02-16 07:00:00 -0600", "snippet": "After building a mini rack that included an entire Homelab, I decided to build 2 more custom mini racks that focus solely on networking.üì∫ Watch VideoInfoThank you to DeskPi for sending this mini ra...", "content": "After building a mini rack that included an entire Homelab, I decided to build 2 more custom mini racks that focus solely on networking.üì∫ Watch VideoInfoThank you to DeskPi for sending this mini rack. Note: I was not paid to make this video nor did DeskPi or Ubiquiti have any input. I just love racks of all sizes and UniFi gear fits nicely in it, not to mention there are quite a few 3D printed models for their gear.Products in this Video (includes affiliate links)4u Rack RackMate T0: https://amzn.to/4hGSjKM UniFi Cloud Gateway Ultra: https://store.ui.com/us/en/category/all-unifi-cloud-gateways/products/ucg-ultra?a_aid=TechnoTim Flex Mini Switch: https://store.ui.com/us/en/category/all-switching/products/usw-flex-mini?a_aid=TechnoTim Ultra 60W Switch: https://store.ui.com/us/en/category/switching-utility/collections/pro-ultra/products/usw-ultra-60w?a_aid=TechnoTim U7 Pro Wall Access Point: https://store.ui.com/us/en/category/all-wifi/products/u7-pro-wall?a_aid=TechnoTim UniFi Patch Cables: https://store.ui.com/us/en?category=accessories-cables-dacs&amp;a_aid=TechnoTim8u Rack RackMate T1: https://amzn.to/4b4wwu2 UniFi Cloud Gateway Max: https://store.ui.com/us/en/category/cloud-gateways-compact/collections/cloud-gateway-max?a_aid=TechnoTim Lite 16 PoE Switch: https://store.ui.com/us/en/category/all-switching/products/usw-lite-16-poe?a_aid=TechnoTim Flex 10 Gbe Switch: https://store.ui.com/us/en/category/all-switching/products/usw-flex-xg?a_aid=TechnoTim Flex 2.5G Switch: https://store.ui.com/us/en/category/all-switching/products/usw-flex-2-5g-8?a_aid=TechnoTim Flex Mini 2.5G: https://store.ui.com/us/en/category/switching-utility/products/usw-flex-2-5g-5?a_aid=TechnoTim U7 Pro Access Point: https://store.ui.com/us/en/category/all-wifi/products/u7-pro?a_aid=TechnoTim G4 Doorbell Pro PoE Kit: https://store.ui.com/us/en?category=cameras-doorbells&amp;a_aid=TechnoTim UniFi Security Cameras: https://store.ui.com/us/en?category=all-cameras-nvrs&amp;a_aid=TechnoTim UniFi Patch Cables: https://store.ui.com/us/en?category=accessories-cables-dacs&amp;a_aid=TechnoTim Gigabit PoE Splitter with USB-C: https://amzn.to/410n2vd Cat6 Keystone Couplers: https://amzn.to/4hE49FyOther Items that will fit Cloud Gateway Fiber: https://store.ui.com/us/en/category/all-cloud-gateways/collections/cloud-gateway-fiber/products/ucg-fiber?a_aid=TechnoTim3D Printed Items Thank you to ‚ÄúMauker‚Äù for creating many of the prints used in this video: https://makerworld.com/en/@mauker Mini Homelab Collection: https://makerworld.com/en/collections/3337303Join the conversationMy MINI network RACKs are &quot;done&quot;.https://t.co/NPEz6Gi3ga pic.twitter.com/AYKtoATWtb&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) February 16, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "HomeLab Services Tour (Early 2025)", "url": "/posts/homelab-services-tour-2025/", "categories": "homelab", "tags": "homelab, software, self-hosted", "date": "2025-01-31 07:00:00 -0600", "snippet": "After seeing my HomeLab Hardware tour, many of you asked what I am self-hosting in it‚Ä¶ Well, here are all of the services and software I am running in my HomeLab in 2025!üì∫ Watch VideoInfoSelf-host...", "content": "After seeing my HomeLab Hardware tour, many of you asked what I am self-hosting in it‚Ä¶ Well, here are all of the services and software I am running in my HomeLab in 2025!üì∫ Watch VideoInfoSelf-hosting in 2025: What‚Äôs running in my HomeLab?After sharing my HomeLab hardware setup, the next big question was‚Äîwhat am I actually running on it? Well, here‚Äôs the full list of all the services and software powering my HomeLab this year. From databases to automation, storage to security and more, I break it all down in my latest video.What are you self-hosting in 2025?Videos Mentioned in this Video (in order) HomeLab Hardware Tour 2025 - https://www.youtube.com/watch?v=lDaVYAcOR9Q Wireless Bridge to my Garage - https://www.youtube.com/watch?v=e3R-kFfR9tM My Colocation - https://www.youtube.com/watch?v=zbkqRPIUYAo Homepage Dashboard - https://www.youtube.com/watch?v=mC3tjysJ01E Proxmox Getting Started - https://www.youtube.com/watch?v=GoZaMgEgrHw PostgreSQL Server - https://www.youtube.com/watch?v=RHwglGf_z40 Proxmox Backup Server - https://www.youtube.com/watch?v=KxPl8SHREcE TrueNAS Performance Guide - https://www.youtube.com/watch?v=3T5wBZOm4hY High Availability Pi-Hole and Sync - https://www.youtube.com/watch?v=IFVYe3riDRA Keepalived Loadbalancing - https://www.youtube.com/watch?v=hPfk0qd4xEY Scrypted Home Security Hub Integration - https://www.youtube.com/watch?v=x1xsFRQYSv0 Traefik 3 with Wildcard Certifications - https://www.youtube.com/watch?v=n1vOfdz5Nm8 Proxmox Helper Scripts - https://www.youtube.com/watch?v=kcpu4z5eSEU Self-hosted Private Local AI - https://www.youtube.com/watch?v=GrLpdfhTwLg HomeLab Dashboards with Home Assistant - https://www.youtube.com/watch?v=XvNVYcC1HIA GitOps Updating Containers with Renovate - https://www.youtube.com/watch?v=5CkCr9U_Q1Y K3S Automated Install with Ansible - https://www.youtube.com/watch?v=CbkEWcUZ7zM Uptime Kuma - https://www.youtube.com/watch?v=r_A5NKkAqZM Self-Hosting Security Guide - https://www.youtube.com/watch?v=Cs8yOmTJNYQ My All-in-One HomeLab Server - https://www.youtube.com/watch?v=1lXSdg-8evA Netboot XYZ - https://www.youtube.com/watch?v=4btW5x_clpg Plex with Live TV - https://www.youtube.com/watch?v=Q5okoyPewyU Certificates with Kubernetes and Cert-Manager https://www.youtube.com/watch?v=G4CmbYL9UPg Network UPS Tools (Nut Server) https://www.youtube.com/watch?v=vyBP7wpN72c Little Link Server - https://www.youtube.com/watch?v=42SqfI_AjXU Jekyll Static Site Generator - https://www.youtube.com/watch?v=F8iOU1ci19QJoin the conversationSelf-hosting in 2025: What‚Äôs running in my HomeLab?After sharing my HomeLab hardware setup, the next big question was‚Äîwhat am I actually running on it? I break it all down here: https://t.co/fxSZ77KxaLWhat are you self-hosting in 2025?#homelab pic.twitter.com/xutLjxmExp&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) January 31, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "PiKVM Switch: The Best KVM Solution Yet?", "url": "/posts/pikvm-switch/", "categories": "homelab", "tags": "homelab, hardware, pikvm", "date": "2025-01-18 07:00:00 -0600", "snippet": "I tested the PiKVM Switch Multiport Extender with every device I had. Here‚Äôs how it went.üì∫ Watch VideoInfoThanks to PiKVM for sending over the switches to test with all of my many random and stubb...", "content": "I tested the PiKVM Switch Multiport Extender with every device I had. Here‚Äôs how it went.üì∫ Watch VideoInfoThanks to PiKVM for sending over the switches to test with all of my many random and stubborn devices. They did not pay me to make this video nor do they have any input into the contents of this video.https://docs.pikvm.org/switch/Other Products in this Video: 7‚Äù Monitor with HDMI: https://amzn.to/3Cn1yAg Keychron K3 Max: https://amzn.to/42idA8I Minisforum MS-A1: https://amzn.to/4fZ8rFS Beelink EQ13: https://amzn.to/4hfdTWJMerch Shop üõçÔ∏è: https://l.technotim.live/shop(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Join the conversationI tested the new PiKVM Switch Multiport Extender with every device I had. Here&#39;s how it went.#homelab https://t.co/b8TlYGRytI pic.twitter.com/Q1hgl2gFkD&mdash; Techno Tim (@TechnoTimLive) January 18, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "HomeLab Hardware Tour (Early 2025)", "url": "/posts/homelab-hardware-tour-2025/", "categories": "homelab", "tags": "homelab, hardware", "date": "2025-01-06 07:00:00 -0600", "snippet": "Here‚Äôs all of the hardware I am running in my Homelab in 2025! Software / services tour soon!üì∫ Watch VideoInfoMerch Shop üõçÔ∏è: https://l.technotim.live/shopüì¶ Gear in this video üì¶Rack &amp; Accessori...", "content": "Here‚Äôs all of the hardware I am running in my Homelab in 2025! Software / services tour soon!üì∫ Watch VideoInfoMerch Shop üõçÔ∏è: https://l.technotim.live/shopüì¶ Gear in this video üì¶Rack &amp; Accessories 32u Rack https://amzn.to/3TlhdXb D Ring Hooks https://amzn.to/3FSxk5Y 1u Brush Panels https://amzn.to/3hKNiaf 1u Rack Mount Full Depth Shelf https://amzn.to/3jrm5Kp Right Angle Extension Cord https://amzn.to/3Wl7gay Black Outlet Covers https://amzn.to/3jrf7Vu UniFi SmartPower https://l.technotim.live/ubiquitiNetwork Patch Panel https://amzn.to/3YIKtHq Wall Mount Patch Panel https://amzn.to/3WyvnCk Slim Network Cables https://amzn.to/3kbYV85 SFP+ Dust Covers https://amzn.to/3TmGfou SFP+ DAC https://amzn.to/3TajUut UniFi Flex https://l.technotim.live/ubiquiti UniFi Fortress Gateway https://l.technotim.live/ubiquiti UniFi NVR https://l.technotim.live/ubiquiti UniFi 48 Port Enterprise https://l.technotim.live/ubiquitiServers &amp; Accessories MinisForum MS-A1 https://amzn.to/3W6HMja SuperMicro 1u Servers https://amzn.to/3YBQy8u Beelink EQ 13 https://amzn.to/3PpPlxO HL15 https://store.45homelab.com/configure/hl15 PiKVM V4 Plus - https://www.pishop.us/product/pikvm-v4-plus/ 14 TB Exos Seagate Drives https://amzn.to/3GbtXsk Smart ZigBee LED Controller https://amzn.to/3jtCpKI Cooler Master SickleFlow 120mm RGB Fans https://amzn.to/3I68AtA DDR-4 for AV15 &amp; HL15 (used) https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=R40&amp;_nkw=MTA18ASF2G72PDZ-3G2R1&amp;_sacat=0&amp;mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1Accessories Axxtra Power Strip https://amzn.to/3qbzIhT Eaton 5P1500R UPS https://amzn.to/3OC2D90 Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack https://amzn.to/3XxwBzd APC 1500VA UPS https://amzn.to/3GXLJh6 APC 600 VA UPS https://amzn.to/3mMxsM1 Wall Control Galvanized Steel Pegboard https://amzn.to/3bJ8R4s HDHomeRun Network Tuner https://amzn.to/3Gdkd0x Hue Light Strip https://amzn.to/3I124o3 Hue Motion &amp; Temp https://amzn.to/3qb1FXf Hue v2 Dimmer Switch https://amzn.to/3hH6pCh Hue Smart Bulb Starter Kit https://amzn.to/3jljCRA Nest Protect https://amzn.to/3hMZcR8 Cloud Lamp https://amzn.to/3GZji24 Fire Extinguisher https://amzn.to/3GeB2s4 PoE Zigbee Adapter SMLIGHT SLZB-06: https://amzn.to/4doSJ6BOver the Air TV Gear TV Tuner that supports 4K and up to 4 streams!: https://amzn.to/3r1v3SL Indoor Outdoor Antenna: https://amzn.to/3sHLST3 LTE / 5G Filter: https://amzn.to/3Pax72J Antenna Splitter with Power Passthrough: https://amzn.to/3sLTZy4Intel NUC Mini Cluster Intel NUC 11 https://amzn.to/43TK8nS Intel NUC 12 https://amzn.to/3MZjC6C SAMSUNG 980 PRO SSD 2TB PCIe NVMe https://amzn.to/41vUOrk SAMSUNG 870 EVO SATA https://amzn.to/3KQMriU G.Skill RipJaws DDR4 SO-DIMM Series 64GB https://amzn.to/3AlstI8 Rackmount Kit Mk1 Manufacturing - https://www.mk1manufacturing.com/cart.php(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Join the conversationHere&#39;s all of the hardware I am running in my Homelab in 2025!https://t.co/JI1na2cbMp pic.twitter.com/VUGuw7vBNE&mdash; Techno Tim (@TechnoTimLive) January 6, 2025LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Building My ULTIMATE Linux Workstation", "url": "/posts/linux-workstation/", "categories": "homelab", "tags": "linux, ubuntu, hardware", "date": "2024-12-23 07:00:00 -0600", "snippet": "I finally built my dedicated Linux workstation. What parts did I choose? How does it perform? And most importantly, which distribution did I go with??A huge THANK YOU to Micro Center who sponsor...", "content": "I finally built my dedicated Linux workstation. What parts did I choose? How does it perform? And most importantly, which distribution did I go with??A huge THANK YOU to Micro Center who sponsored this video and this Linux workstation build!üì∫ Watch VideoInfoShop Micro Center‚Äôs Holiday Savings Event: https://micro.center/xxvbSign-Up for Early Access to Micro Center Santa Clara: https://micro.center/xkcdFull PC Build: https://micro.center/5wncShop the Intel Ultra 7 265K Processor: https://micro.center/b52452Shop AMD Ryzen 5500GT Processor: https://micro.center/2086a0Shop Intel Core i5-12400 Processor: https://micro.center/820d0aJoin the conversationI finally built my dedicated Linux workstation. What parts did I choose? How does it perform? And most importantly, which distribution did I go with?? https://t.co/D2aPxXsQ9m pic.twitter.com/D8v299yl8o&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) December 23, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "PostgresSQL Clustering the hard way...", "url": "/posts/postgresql-high-availability/", "categories": "self-hosted", "tags": "postgresql, homelab", "date": "2024-12-07 07:00:00 -0600", "snippet": "Today is the day that you start running PostgresSQL in a cluster! In this tutorial we‚Äôll be setting up a production ready Postgres cluster that‚Äôs highly available and fault tolerant using PostgreS...", "content": "Today is the day that you start running PostgresSQL in a cluster! In this tutorial we‚Äôll be setting up a production ready Postgres cluster that‚Äôs highly available and fault tolerant using PostgreSQL, etcd, Patroni, HA Proxy, and keepalived. This resilient combination will ensure that you can always reach your database even when a node in the cluster goes down!üì∫ Watch VideoNodes# ha proxy192.168.60.100 # haproxy-01192.168.60.101 # haproxy-02192.168.60.102 # haproxy-03# postgres192.168.60.103 # postgres-01192.168.60.104 # postgres-02192.168.60.105 # postgres-03PostgreSQLOn postgres nodes install latest postgres.Install updated postgres repositories.sudo apt updatesudo apt install -y postgresql-commonsudo /usr/share/postgresql-common/pgdg/apt.postgresql.org.shInstall postgres and additional modules.sudo apt updatesudo apt install -y postgresql postgresql-contribWe‚Äôll configure postgres later.Stop and disable the service because Patroni will handle the lifecycle of postgressudo systemctl stop postgresqlsudo systemctl disable postgresqletcdInstallThis should be installed on the postgres servers.Make sure you have wget and curlsudo apt updatesudo apt-get install -y wget curlFind latest release.https://github.com/etcd-io/etcd/releaseswget https://github.com/etcd-io/etcd/releases/download/v3.5.17/etcd-v3.5.17-linux-amd64.tar.gzUncompress and rename.tar xvf etcd-v3.5.17-linux-amd64.tar.gzmv etcd-v3.5.17-linux-amd64 etcdMove all binaries into /usr/local/bin/ for later use.sudo mv etcd/etcd* /usr/local/bin/Check etcd versionetcd --versionShould see something like:etcd Version: 3.5.17Git SHA: 507c0de√üGo Version: go1.22.9obsGo OS/Arch: linux/amd64etcdctl versionShould see something like:etcdctl version: 3.5.17API version: 3.5Let‚Äôs create a user for etcd service.sudo useradd --system --home /var/lib/etcd --shell /bin/false etcdBefore configuring etcd, we need to repeat all of these steps for the other 2 nodes.Let‚Äôs configure etcd.Make dir and edit file.sudo mkdir -p /etc/etcdsudo mkdir -p /etc/etcd/sslCertificatesWe‚Äôll be securing the communication between etcd nodes and postgres.On our own machine (not servers!)Make sure openssl is installedWindowswinget install -e --id FireDaemon.OpenSSLmacOSbrew install opensslLinuxsudo apt install opensslVerify it‚Äôs installed and workingopenssl versionShould see something like:OpenSSL 3.4.0 22 Oct 2024 (Library: OpenSSL 3.4.0 22 Oct 2024)Now let‚Äôs generate and configure certsmkdir certscd certsGenerate cert authorityopenssl genrsa -out ca.key 2048openssl req -x509 -new -nodes -key ca.key -subj \"/CN=etcd-ca\" -days 7300 -out ca.crtGenerate certificate each node. Note, pay attention to SANS, I am using IP, update with your IP and oh DNS/hostname.node1# Generate a private keyopenssl genrsa -out etcd-node1.key 2048# Create temp file for configcat &gt; temp.cnf &lt;&lt;EOF[ req ]distinguished_name = req_distinguished_namereq_extensions = v3_req[ req_distinguished_name ][ v3_req ]subjectAltName = @alt_names[ alt_names ]IP.1 = 192.168.60.103IP.2 = 127.0.0.1EOF# Create a csropenssl req -new -key etcd-node1.key -out etcd-node1.csr \\ -subj \"/C=US/ST=YourState/L=YourCity/O=YourOrganization/OU=YourUnit/CN=etcd-node1\" \\ -config temp.cnf# Sign the certopenssl x509 -req -in etcd-node1.csr -CA ca.crt -CAkey ca.key -CAcreateserial \\ -out etcd-node1.crt -days 7300 -sha256 -extensions v3_req -extfile temp.cnf# Verify the cert and be sure you see Subject Name Alternativeopenssl x509 -in etcd-node1.crt -text -noout | grep -A1 \"Subject Alternative Name\"# Remove temp filerm temp.cnfnode 2# Generate a private keyopenssl genrsa -out etcd-node2.key 2048# Create temp file for configcat &gt; temp.cnf &lt;&lt;EOF[ req ]distinguished_name = req_distinguished_namereq_extensions = v3_req[ req_distinguished_name ][ v3_req ]subjectAltName = @alt_names[ alt_names ]IP.1 = 192.168.60.104IP.2 = 127.0.0.1EOF# Create a csropenssl req -new -key etcd-node2.key -out etcd-node2.csr \\ -subj \"/C=US/ST=YourState/L=YourCity/O=YourOrganization/OU=YourUnit/CN=etcd-node2\" \\ -config temp.cnf# Sign the certopenssl x509 -req -in etcd-node2.csr -CA ca.crt -CAkey ca.key -CAcreateserial \\ -out etcd-node2.crt -days 7300 -sha256 -extensions v3_req -extfile temp.cnf# Verify the cert and be sure you see Subject Name Alternativeopenssl x509 -in etcd-node2.crt -text -noout | grep -A1 \"Subject Alternative Name\"# Remove temp filerm temp.cnfnode3# Generate a private keyopenssl genrsa -out etcd-node3.key 2048# Create temp file for configcat &gt; temp.cnf &lt;&lt;EOF[ req ]distinguished_name = req_distinguished_namereq_extensions = v3_req[ req_distinguished_name ][ v3_req ]subjectAltName = @alt_names[ alt_names ]IP.1 = 192.168.60.105IP.2 = 127.0.0.1EOF# Create a csropenssl req -new -key etcd-node3.key -out etcd-node3.csr \\ -subj \"/C=US/ST=YourState/L=YourCity/O=YourOrganization/OU=YourUnit/CN=etcd-node3\" \\ -config temp.cnf#Sign the certopenssl x509 -req -in etcd-node3.csr -CA ca.crt -CAkey ca.key -CAcreateserial \\ -out etcd-node3.crt -days 7300 -sha256 -extensions v3_req -extfile temp.cnf# Verify the cert and be sure you see Subject Name Alternativeopenssl x509 -in etcd-node3.crt -text -noout | grep -A1 \"Subject Alternative Name\"# Remove temp filerm temp.cnfList all fileslsShould see:ca.crtca.keyca.srletcd-node1.crtetcd-node1.csretcd-node2.crtetcd-node2.csretcd-node2.keyetcd-node3.crtetcd-node3.csretcd-node3.keySecure copy (scp) the certs to each node:scp ca.crt etcd-node1.crt etcd-node1.key serveradmin@192.168.60.103:/tmp/scp ca.crt etcd-node2.crt etcd-node2.key serveradmin@192.168.60.104:/tmp/scp ca.crt etcd-node3.crt etcd-node3.key serveradmin@192.168.60.105:/tmp/Should see:ssh into each nodeWe need to move certs from /tmp to ssl location (/etc/etcd/ssl)sudo mkdir -p /etc/etcd/sslsudo mv /tmp/etcd-node*.crt /etc/etcd/ssl/sudo mv /tmp/etcd-node*.key /etc/etcd/ssl/sudo mv /tmp/ca.crt /etc/etcd/ssl/sudo chown -R etcd:etcd /etc/etcd/sudo chmod 600 /etc/etcd/ssl/etcd-node*.keysudo chmod 644 /etc/etcd/ssl/etcd-node*.crt /etc/etcd/ssl/ca.crtConfigureCreate our configsudo nano /etc/etcd/etcd.envnode1ETCD_NAME=\"postgresql-01\"ETCD_DATA_DIR=\"/var/lib/etcd\"ETCD_INITIAL_CLUSTER=\"postgresql-01=https://192.168.60.103:2380,postgresql-02=https://192.168.60.104:2380,postgresql-03=https://192.168.60.105:2380\"ETCD_INITIAL_CLUSTER_STATE=\"new\"ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"ETCD_INITIAL_ADVERTISE_PEER_URLS=\"https://192.168.60.103:2380\"ETCD_LISTEN_PEER_URLS=\"https://0.0.0.0:2380\"ETCD_LISTEN_CLIENT_URLS=\"https://0.0.0.0:2379\"ETCD_ADVERTISE_CLIENT_URLS=\"https://192.168.60.103:2379\"ETCD_CLIENT_CERT_AUTH=\"true\"ETCD_TRUSTED_CA_FILE=\"/etc/etcd/ssl/ca.crt\"ETCD_CERT_FILE=\"/etc/etcd/ssl/etcd-node1.crt\"ETCD_KEY_FILE=\"/etc/etcd/ssl/etcd-node1.key\"ETCD_PEER_CLIENT_CERT_AUTH=\"true\"ETCD_PEER_TRUSTED_CA_FILE=\"/etc/etcd/ssl/ca.crt\"ETCD_PEER_CERT_FILE=\"/etc/etcd/ssl/etcd-node1.crt\"ETCD_PEER_KEY_FILE=\"/etc/etcd/ssl/etcd-node1.key\"node2ETCD_NAME=\"postgresql-02\"ETCD_DATA_DIR=\"/var/lib/etcd\"ETCD_INITIAL_CLUSTER=\"postgresql-01=https://192.168.60.103:2380,postgresql-02=https://192.168.60.104:2380,postgresql-03=https://192.168.60.105:2380\"ETCD_INITIAL_CLUSTER_STATE=\"new\"ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"ETCD_INITIAL_ADVERTISE_PEER_URLS=\"https://192.168.60.104:2380\"ETCD_LISTEN_PEER_URLS=\"https://0.0.0.0:2380\"ETCD_LISTEN_CLIENT_URLS=\"https://0.0.0.0:2379\"ETCD_ADVERTISE_CLIENT_URLS=\"https://192.168.60.104:2379\"ETCD_CLIENT_CERT_AUTH=\"true\"ETCD_TRUSTED_CA_FILE=\"/etc/etcd/ssl/ca.crt\"ETCD_CERT_FILE=\"/etc/etcd/ssl/etcd-node2.crt\"ETCD_KEY_FILE=\"/etc/etcd/ssl/etcd-node2.key\"ETCD_PEER_CLIENT_CERT_AUTH=\"true\"ETCD_PEER_TRUSTED_CA_FILE=\"/etc/etcd/ssl/ca.crt\"ETCD_PEER_CERT_FILE=\"/etc/etcd/ssl/etcd-node2.crt\"ETCD_PEER_KEY_FILE=\"/etc/etcd/ssl/etcd-node2.key\"node 3ETCD_NAME=\"postgresql-03\"ETCD_DATA_DIR=\"/var/lib/etcd\"ETCD_INITIAL_CLUSTER=\"postgresql-01=https://192.168.60.103:2380,postgresql-02=https://192.168.60.104:2380,postgresql-03=https://192.168.60.105:2380\"ETCD_INITIAL_CLUSTER_STATE=\"new\"ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"ETCD_INITIAL_ADVERTISE_PEER_URLS=\"https://192.168.60.105:2380\"ETCD_LISTEN_PEER_URLS=\"https://0.0.0.0:2380\"ETCD_LISTEN_CLIENT_URLS=\"https://0.0.0.0:2379\"ETCD_ADVERTISE_CLIENT_URLS=\"https://192.168.60.105:2379\"ETCD_CLIENT_CERT_AUTH=\"true\"ETCD_TRUSTED_CA_FILE=\"/etc/etcd/ssl/ca.crt\"ETCD_CERT_FILE=\"/etc/etcd/ssl/etcd-node3.crt\"ETCD_KEY_FILE=\"/etc/etcd/ssl/etcd-node3.key\"ETCD_PEER_CLIENT_CERT_AUTH=\"true\"ETCD_PEER_TRUSTED_CA_FILE=\"/etc/etcd/ssl/ca.crt\"ETCD_PEER_CERT_FILE=\"/etc/etcd/ssl/etcd-node3.crt\"ETCD_PEER_KEY_FILE=\"/etc/etcd/ssl/etcd-node3.key\"Now let‚Äôs create a service for etcd on all 3 nodessudo nano /etc/systemd/system/etcd.serviceContents of service file, same for all 3 nodes[Unit]Description=etcd key-value storeDocumentation=https://github.com/etcd-io/etcdAfter=network-online.targetWants=network-online.target[Service]Type=notifyWorkingDirectory=/var/lib/etcdEnvironmentFile=/etc/etcd/etcd.envExecStart=/usr/local/bin/etcdRestart=alwaysRestartSec=10sLimitNOFILE=40000User=etcdGroup=etcd[Install]WantedBy=multi-user.targetWe need to create a directory for etcd ETCD_DATA_DIR defined in service file.sudo mkdir -p /var/lib/etcd sudo chown -R etcd:etcd /var/lib/etcdRunning etcdReload daemon and enable the servicesudo systemctl daemon-reloadsudo systemctl enable etcdStart etcd and check statusthis looks like it‚Äôs hanging on the first node but once you add another node it will completesudo systemctl start etcdsudo systemctl status etcdShould see something like:‚óè etcd.service - etcd key-value store Loaded: loaded (/etc/systemd/system/etcd.service; enabled; preset: enabled) Active: active (running) since Mon 2024-12-02 14:09:30 CST; 2s ago Docs: https://github.com/etcd-io/etcd Main PID: 7266 (etcd) Tasks: 9 (limit: 4612) Memory: 29.3M (peak: 30.0M) CPU: 246ms CGroup: /system.slice/etcd.service ‚îî‚îÄ7266 /usr/local/bin/etcdYou can also check the logs for etcd by running:journalctl -xeu etcd.serviceShould see something like:‚ñë‚ñë Subject: A start job for unit etcd.service has finished successfully‚ñë‚ñë Defined-By: systemd‚ñë‚ñë Support: http://www.ubuntu.com/support‚ñë‚ñë‚ñë‚ñë A start job for unit etcd.service has finished successfully.‚ñë‚ñë‚ñë‚ñë The job identifier is 5757.Dec 02 14:09:30 postgres-01 etcd[7266]: {\"level\":\"info\",\"ts\":\"2024-12-02T14:09:30.862122-0600\",\"caller\":\"v3rpc/health.go:61\",\"msg\":\"grpc service status changed\",\"service\":\"\",\"status\":\"SERVING\"}Dec 02 14:09:30 postgres-01 etcd[7266]: {\"level\":\"info\",\"ts\":\"2024-12-02T14:09:30.862347-0600\",\"caller\":\"embed/serve.go:187\",\"msg\":\"serving client traffic insecurely; this is strongly discouraged!\",\"traffic\":\"grpc+http\",\"address\":\"[::]:2379\"}VerificationOnce cluster is running, we should verify it‚Äôs working on each by runningetcdctl endpoint healthetcdctl member listShould see something like on node1:127.0.0.1:2379 is healthy: successfully committed proposal: took = 1.786976mseb8ee14ab5150b4, started, postgresql-01, http://192.168.60.103:2380, http://192.168.60.103:2379, false34e89b244664f02d, started, postgresql-02, http://192.168.60.104:2380, http://192.168.60.104:2379, false8ee2a9473a41c400, started, postgresql-03, http://192.168.60.105:2380, http://192.168.60.105:2379, falseDo this for all 3 nodesNow we should now edit the variables since the cluster is bootstrappedThen restart etcd and verify the cluster is still workingsudo systemctl restart etcdIf you want to run the following commands without sudo, you can run:sudo usermod -aG etcd $USER sudo etcdctl \\--endpoints=https://127.0.0.1:2379 \\--cacert=/etc/etcd/ssl/ca.crt \\--cert=/etc/etcd/ssl/etcd-node1.crt \\--key=/etc/etcd/ssl/etcd-node1.key \\endpoint healthsudo etcdctl \\--endpoints=https://127.0.0.1:2379 \\--cacert=/etc/etcd/ssl/ca.crt \\--cert=/etc/etcd/ssl/etcd-node1.crt \\--key=/etc/etcd/ssl/etcd-node1.key \\member listShould see something likehttps://127.0.0.1:2379 is healthy: successfully committed proposal: took = 4.611121ms59afb19d7cb2565d, started, postgresql-01, https://192.168.60.103:2380, https://192.168.60.103:2379, false6338565ebcb76aa2, started, postgresql-02, https://192.168.60.104:2380, https://192.168.60.104:2379, false9d74b3125c745c74, started, postgresql-03, https://192.168.60.105:2380, https://192.168.60.105:2379, falseYou can check to see who is leader by runningsudo etcdctl \\ --endpoints=https://192.168.60.103:2379,https://192.168.60.104:2379,https://192.168.60.105:2379 \\ --cacert=/etc/etcd/ssl/ca.crt \\ --cert=/etc/etcd/ssl/etcd-node1.crt \\ --key=/etc/etcd/ssl/etcd-node1.key \\ endpoint status --write-out=tableYou should see something like this, specifically one of the nodes IS LEADER = true+-----------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+| ENDPOINT | ID | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |+-----------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+| https://192.168.60.103:2379 | 59afb19d7cb2565d | 3.5.17 | 20 kB | true | false | 2 | 12 | 12 | || https://192.168.60.104:2379 | 6338565ebcb76aa2 | 3.5.17 | 20 kB | false | false | 2 | 12 | 12 | || https://192.168.60.105:2379 | 9d74b3125c745c74 | 3.5.17 | 20 kB | false | false | 2 | 12 | 12 | |+-----------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+PostgreSQL and PatroniPostgreSQL CertificatesOnce this is all set up and working, we can now configure postgres and patroni.We need to create some dirs for postgressudo mkdir -p /var/lib/postgresql/datasudo mkdir -p /var/lib/postgresql/sslNotice we are using ssl, we need to generate a certificateGenerate a self-signed certificate(this will last 20 years)openssl genrsa -out server.key 2048 # private keyopenssl req -new -key server.key -out server.req # csropenssl req -x509 -key server.key -in server.req -out server.crt -days 7300 # generate cert, valid for 20 yearsUpdate permissionschmod 600 server.keyMove files to cert locationsudo mv server.crt server.key server.req /var/lib/postgresql/sslAfter doing this, we need to copy this to our other serversCopy files locally from (your local machine!) to node1, node2, node3 using scpscp them to node1, node2, and node3scp server.crt server.key server.req serveradmin@192.168.60.103:/tmpscp server.crt server.key server.req serveradmin@192.168.60.104:/tmpscp server.crt server.key server.req serveradmin@192.168.60.105:/tmpOn the servers (not your local machine) move filescd /tmpsudo mv server.crt server.key server.req /var/lib/postgresql/sslUpdate permissions on certificatesudo chmod 600 /var/lib/postgresql/ssl/server.keysudo chmod 644 /var/lib/postgresql/ssl/server.crtsudo chmod 600 /var/lib/postgresql/ssl/server.reqsudo chown postgres:postgres /var/lib/postgresql/datasudo chown postgres:postgres /var/lib/postgresql/ssl/server.*We will need to give the postgres user read access to the etcd certificates using aclssudo apt updatesudo apt install -y aclnode1sudo setfacl -m u:postgres:r /etc/etcd/ssl/ca.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node1.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node1.keynode2sudo setfacl -m u:postgres:r /etc/etcd/ssl/ca.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node2.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node2.keynode3sudo setfacl -m u:postgres:r /etc/etcd/ssl/ca.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node3.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node3.keyNow that we have postgres certs configured, it‚Äôs now time to configure patroni to operate or drive postgresPatroniInstalling Patronisudo apt install -y patronissh into node1Make a dir for patronisudo mkdir -p /etc/patroni/Configuring PatroniCreate a config file and editsudo nano /etc/patroni/config.ymlnode1scope: postgresql-clusternamespace: /service/name: postgresql-01 # node1etcd3: hosts: 192.168.60.103:2379,192.168.60.104:2379,192.168.60.105:2379 # etcd cluster nodes protocol: https cacert: /etc/etcd/ssl/ca.crt cert: /etc/etcd/ssl/etcd-node1.crt # node1's etcd certificate key: /etc/etcd/ssl/etcd-node1.key # node1's etcd keyrestapi: listen: 0.0.0.0:8008 connect_address: 192.168.60.103:8008 # IP for node1's REST API certfile: /var/lib/postgresql/ssl/server.pembootstrap: dcs: ttl: 30 loop_wait: 10 retry_timeout: 10 maximum_lag_on_failover: 1048576 # Failover parameters postgresql: parameters: ssl: 'on' # Enable SSL ssl_cert_file: /var/lib/postgresql/ssl/server.crt # PostgreSQL server certificate ssl_key_file: /var/lib/postgresql/ssl/server.key # PostgreSQL server key pg_hba: # Access rules - hostssl replication replicator 127.0.0.1/32 md5 - hostssl replication replicator 192.168.60.103/32 md5 - hostssl replication replicator 192.168.60.104/32 md5 - hostssl replication replicator 192.168.60.105/32 md5 - hostssl all all 127.0.0.1/32 md5 - hostssl all all 0.0.0.0/0 md5 initdb: - encoding: UTF8 - data-checksumspostgresql: listen: 0.0.0.0:5432 connect_address: 192.168.60.103:5432 # IP for node1's PostgreSQL data_dir: /var/lib/postgresql/data bin_dir: /usr/lib/postgresql/17/bin # Binary directory for PostgreSQL 17 authentication: superuser: username: postgres password: cnV2abjbDpbh64e12987wR4mj5kQ3456Y0Qf # Superuser password - be sure to change replication: username: replicator password: sad9a23jga8jsuedrwtsskj74567suiuwe23 # Replication password - be sure to change parameters: max_connections: 100 shared_buffers: 256MBtags: nofailover: false noloadbalance: false clonefrom: falsenode2scope: postgresql-clusternamespace: /service/name: postgresql-02 # Unique name for Node 2etcd3: hosts: 192.168.60.103:2379,192.168.60.104:2379,192.168.60.105:2379 # etcd cluster nodes protocol: https cacert: /etc/etcd/ssl/ca.crt cert: /etc/etcd/ssl/etcd-node2.crt # Node 2's etcd certificate key: /etc/etcd/ssl/etcd-node2.key # Node 2's etcd keyrestapi: listen: 0.0.0.0:8008 connect_address: 192.168.60.104:8008 # IP for Node 2's REST API certfile: /var/lib/postgresql/ssl/server.pembootstrap: dcs: ttl: 30 loop_wait: 10 retry_timeout: 10 maximum_lag_on_failover: 1048576 postgresql: parameters: ssl: 'on' ssl_cert_file: /var/lib/postgresql/ssl/server.crt ssl_key_file: /var/lib/postgresql/ssl/server.key pg_hba: - hostssl replication replicator 127.0.0.1/32 md5 - hostssl replication replicator 192.168.60.103/32 md5 - hostssl replication replicator 192.168.60.104/32 md5 - hostssl replication replicator 192.168.60.105/32 md5 - hostssl all all 127.0.0.1/32 md5 - hostssl all all 0.0.0.0/0 md5 initdb: - encoding: UTF8 - data-checksumspostgresql: listen: 0.0.0.0:5432 connect_address: 192.168.60.104:5432 # IP for Node 2's PostgreSQL data_dir: /var/lib/postgresql/data bin_dir: /usr/lib/postgresql/17/bin authentication: superuser: username: postgres password: cnV2abjbDpbh64e12987wR4mj5kQ3456Y0Qf # Superuser password (provided) replication: username: replicator password: sad9a23jga8jsuedrwtsskj74567suiuwe23 # Replication password (provided) parameters: max_connections: 100 shared_buffers: 256MBtags: nofailover: false noloadbalance: false clonefrom: falsenode3scope: postgresql-clusternamespace: /service/name: postgresql-03 # Unique name for Node 3etcd3: hosts: 192.168.60.103:2379,192.168.60.104:2379,192.168.60.105:2379 #etcd cluster nodes protocol: https cacert: /etc/etcd/ssl/ca.crt cert: /etc/etcd/ssl/etcd-node3.crt # Node 3's etcd certificate key: /etc/etcd/ssl/etcd-node3.key # Node 3's etcd keyrestapi: listen: 0.0.0.0:8008 connect_address: 192.168.60.105:8008 # IP for Node 3's REST API certfile: /var/lib/postgresql/ssl/server.pembootstrap: dcs: ttl: 30 loop_wait: 10 retry_timeout: 10 maximum_lag_on_failover: 1048576 postgresql: parameters: ssl: 'on' ssl_cert_file: /var/lib/postgresql/ssl/server.crt ssl_key_file: /var/lib/postgresql/ssl/server.key pg_hba: - hostssl replication replicator 127.0.0.1/32 md5 - hostssl replication replicator 192.168.60.103/32 md5 - hostssl replication replicator 192.168.60.104/32 md5 - hostssl replication replicator 192.168.60.105/32 md5 - hostssl all all 127.0.0.1/32 md5 - hostssl all all 0.0.0.0/0 md5 initdb: - encoding: UTF8 - data-checksumspostgresql: listen: 0.0.0.0:5432 connect_address: 192.168.60.105:5432 # IP for Node 3's PostgreSQL data_dir: /var/lib/postgresql/data bin_dir: /usr/lib/postgresql/17/bin authentication: superuser: username: postgres password: \"cnV2abjbDpbh64e12987wR4mj5kQ3456Y0Qf\" # Superuser password (provided) replication: username: replicator password: sad9a23jga8jsuedrwtsskj74567suiuwe23 # Replication password (provided) parameters: max_connections: 100 shared_buffers: 256MBtags: nofailover: false noloadbalance: false clonefrom: falsePatroni CertificatesLet‚Äôs also use a certificate for this, requires a pemsudo sh -c 'cat /var/lib/postgresql/ssl/server.crt /var/lib/postgresql/ssl/server.key &gt; /var/lib/postgresql/ssl/server.pem'sudo chown postgres:postgres /var/lib/postgresql/ssl/server.pemsudo chmod 600 /var/lib/postgresql/ssl/server.pemWe can verify with:sudo openssl x509 -in /var/lib/postgresql/ssl/server.pem -text -nooutStarting Patroni and HA ClusterRestart the service sudo systemctl restart patroniCheck logsjournalctl -u patroni -fShould see something like:Dec 03 22:16:05 postgres-01 patroni[770]: 2024-12-03 22:16:05,399 INFO: no action. I am (postgresql-01), the leader with the lockDec 03 22:16:15 postgres-01 patroni[770]: 2024-12-03 22:16:15,399 INFO: no action. I am (postgresql-01), the leader with the lockandDec 03 22:16:21 postgres-02 patroni[768]: 2024-12-03 22:16:21,780 INFO: Lock owner: postgresql-01; I am postgresql-02Dec 03 22:16:21 postgres-02 patroni[768]: 2024-12-03 22:16:21,823 INFO: bootstrap from leader 'postgresql-01' in progressReconfiguring our etcd Clustersudo nano /etc/etcd/etcd.envChangeETCD_INITIAL_CLUSTER_STATE=\"new\"toETCD_INITIAL_CLUSTER_STATE=\"existing\"Do this on all 3 nodes!Verifying Our Postgres ClusterWe now have a ha postgres cluster!However we don‚Äôt always know who the leader is so we can‚Äôt use an IPWe can test the patroni endpoint to see who is leadercurl -k https://192.168.60.103:8008/primarycurl -k https://192.168.60.104:8008/primarycurl -k https://192.168.60.105:8008/primaryEditing your pg_hba after bootstrappingIf you ever want to see your global config you can withsudo patronictl -c /etc/patroni/config.yml show-configIf you ever want to edit it, you can with:sudo patronictl -c /etc/patroni/config.yml edit-configAfter saving these will be replicated to all nodes, note you might want to update your boostrap config at some pouintHA ProxyInstalling HA Proxythis is where ha proxy comes inswitch nodesinstall ha proxysudo apt -y install haproxyOnce installed we need to add some configsudo nano /etc/haproxy/haproxy.cfgfrontend postgres_frontend bind *:5432 mode tcp default_backend postgres_backendbackend postgres_backend mode tcp option tcp-check option httpchk GET /primary # patroni provides an endpoint to check node roles http-check expect status 200 # expect 200 for the primary node timeout connect 5s timeout client 30s timeout server 30s server postgresql-01 192.168.60.103:5432 port 8008 check check-ssl verify none server postgresql-02 192.168.60.104:5432 port 8008 check check-ssl verify none server postgresql-03 192.168.60.105:5432 port 8008 check check-ssl verify noneDo this for all 3 nodesStarting HA Proxyrestartsudo systemctl reload haproxycheck logssudo tail -f /var/log/syslog | grep haproxykeepalivedInstalling keepalivedNow we need to install keepalived to create a VIPsudo apt updatesudo apt install keepalived -yConfuring keepalivedNow we need to apply a configuration filesudo nano /etc/keepalived/keepalived.confhaproxy1global_defs { enable_script_security script_user keepalived_script}vrrp_script check_haproxy { script \"/etc/keepalived/check_haproxy.sh\" interval 2 fall 3 rise 2}vrrp_instance VI_1 { state MASTER interface eth0 # update with your nic virtual_router_id 51 priority 100 advert_int 1 authentication { auth_type PASS auth_pass tDHjh7by # change } virtual_ipaddress { 192.168.60.110 } track_script { check_haproxy }}haproxy2global_defs { enable_script_security script_user keepalived_script}vrrp_script check_haproxy { script \"/etc/keepalived/check_haproxy.sh\" interval 2 fall 3 rise 2}vrrp_instance VI_1 { state BACKUP interface eth0 # update with your nic virtual_router_id 51 priority 90 advert_int 1 authentication { auth_type PASS # change auth_pass tDHjh7by # change } virtual_ipaddress { 192.168.60.110 } track_script { check_haproxy }}haproxy3global_defs { enable_script_security script_user keepalived_script}vrrp_script check_haproxy { script \"/etc/keepalived/check_haproxy.sh\" interval 2 fall 3 rise 2}vrrp_instance VI_1 { state BACKUP interface eth0 # update with your nic virtual_router_id 51 priority 80 advert_int 1 authentication { auth_type PASS # change auth_pass tDHjh7by # change } virtual_ipaddress { 192.168.60.110 } track_script { check_haproxy }}Create a check script on eachsudo nano /etc/keepalived/check_haproxy.sh#!/bin/bash# Define the port to check (e.g., HAProxy frontend port)PORT=5432# Check if HAProxy is runningif ! pidof haproxy &gt; /dev/null; then echo \"HAProxy is not running\" exit 1fi# Check if HAProxy is listening on the expected portif ! ss -ltn | grep -q \":${PORT}\"; then echo \"HAProxy is not listening on port ${PORT}\" exit 2fi# All checks passedexit 0we need to add a user to execute these scriptssudo useradd -r -s /bin/false keepalived_scriptsudo chmod +x /etc/keepalived/check_haproxy.shsudo chown keepalived_script:keepalived_script /etc/keepalived/check_haproxy.shsudo chmod 700 /etc/keepalived/check_haproxy.shStarting keepalivedsudo systemctl restart keepalivedVerifying keepalivedCheck logssudo journalctl -u keepalived -fwe should not be able to ping the VIPping 192.168.60.110PGAdminConnecting with PGAdminConnected with a clienthttps://www.pgadmin.org/Connect to your VIP 192.168.60.110 and use the postgres user and password.Adding DataCreate a table with data-- Create a table for Nintendo charactersCREATE TABLE nintendo_characters ( character_id SERIAL PRIMARY KEY, -- Unique identifier for each character name VARCHAR(50) NOT NULL, -- Name of the character game_series VARCHAR(50), -- Game series the character belongs to debut_year INT, -- Year the character debuted description TEXT, -- Brief description of the character is_playable BOOLEAN DEFAULT TRUE -- Whether the character is playable);-- Insert some example charactersINSERT INTO nintendo_characters (name, game_series, debut_year, description, is_playable)VALUES ('Mario', 'Super Mario', 1981, 'The iconic plumber and hero of the Mushroom Kingdom.', TRUE), ('Link', 'The Legend of Zelda', 1986, 'A courageous hero tasked with saving Hyrule.', TRUE), ('Samus Aran', 'Metroid', 1986, 'A bounty hunter equipped with a powerful Power Suit.', TRUE), ('Donkey Kong', 'Donkey Kong', 1981, 'A powerful gorilla and protector of the jungle.', TRUE), ('Princess Zelda', 'The Legend of Zelda', 1986, 'The princess of Hyrule and possessor of the Triforce of Wisdom.', FALSE), ('Bowser', 'Super Mario', 1985, 'The King of the Koopas and Marios arch-nemesis.', FALSE), ('Kirby', 'Kirby', 1992, 'A pink puffball with the ability to inhale enemies and copy their powers.', TRUE), ('Pikachu', 'Pok√©mon', 1996, 'An Electric-type Pok√©mon and mascot of the Pok√©mon series.', TRUE), ('Fox McCloud', 'Star Fox', 1993, 'A skilled pilot and leader of the Star Fox team.', TRUE), ('Captain Falcon', 'F-Zero', 1990, 'A bounty hunter and expert racer known for his Falcon Punch.', TRUE);-- Select all rows to verify the table creation and data insertionSELECT * FROM nintendo_characters;SELECT * FROM nintendo_characters;insert more characters-- Insert additional Nintendo characters into the tableINSERT INTO nintendo_characters (name, game_series, debut_year, description, is_playable)VALUES ('Yoshi', 'Super Mario', 1990, 'A friendly green dinosaur and Marios trusted companion.', TRUE), ('Luigi', 'Super Mario', 1983, 'Marios younger brother and a skilled ghost hunter.', TRUE), ('King Dedede', 'Kirby', 1992, 'The self-proclaimed king of Dream Land and occasional ally of Kirby.', TRUE), ('Meta Knight', 'Kirby', 1993, 'A mysterious swordsman who often challenges Kirby.', TRUE), ('Marth', 'Fire Emblem', 1990, 'A legendary hero and prince from the Fire Emblem series.', TRUE), ('Ness', 'EarthBound', 1994, 'A young boy with psychic powers and a bat-wielding hero.', TRUE), ('Jigglypuff', 'Pok√©mon', 1996, 'A Balloon Pok√©mon known for its singing abilities.', TRUE), ('Villager', 'Animal Crossing', 2001, 'A customizable character from the Animal Crossing series.', TRUE), ('Isabelle', 'Animal Crossing', 2012, 'A cheerful assistant who helps manage your town.', TRUE), ('Ganondorf', 'The Legend of Zelda', 1998, 'The King of Evil and nemesis of Link.', TRUE);SELECT * FROM nintendo_characters;If you want to clean this data up, you can DROP the table-- Drop the nintendo_characters table if it existsDROP TABLE IF EXISTS nintendo_characters;TroubleshootingReset all data but certs and start oversudo systemctl stop patronisudo systemctl stop etcdsudo rm -rf /var/lib/etcd/sudo rm -rf /var/lib/postgresql/data/sudo mkdir -p /var/lib/postgresql/datasudo mkdir -p /var/lib/etcd/sudo chown etcd:etcd /var/lib/etcd/sudo setfacl -m u:postgres:r /etc/etcd/ssl/ca.crtsudo setfacl -m u:postgres:r /etc/etcd/ssl/etcd-node*sudo systemctl start etcdsudo systemctl start patroniJoin the conversationToday, I teach you how you can self-host a production-ready PostgreSQL cluster. I&#39;ve even included all of the copy pasta commands!https://t.co/OGHUGfDEs2 pic.twitter.com/9NWtYcWcO6&mdash; Techno Tim (@TechnoTimLive) December 7, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "I tried the HexOS Beta. Here's how it went.", "url": "/posts/hexos-beta/", "categories": "homelab", "tags": "hexos, truenas, homelab", "date": "2024-12-01 07:00:00 -0600", "snippet": "I tried the HexOS Beta, the new Linus backed Home Server NAS operating system. Here‚Äôs how it went.üì∫ Watch VideoDisclosures I was invited to the beta however I purchased my own license before testi...", "content": "I tried the HexOS Beta, the new Linus backed Home Server NAS operating system. Here‚Äôs how it went.üì∫ Watch VideoDisclosures I was invited to the beta however I purchased my own license before testing it and recording this videoInfoI was invited to test out the recently announced beta of HexOS, a NAS operating system that‚Äôs attempting to shake up the home server market with simplicity built on a modern, solid foundation. Here‚Äôs what I think about it.You can read more about HexOS here: https://hexos.com/Join the conversationI tried the HexOS Beta, the new Linus backed Home Server NAS operating system. Here&#39;s how it went.https://t.co/2cMdTv5r3I pic.twitter.com/dRhzC7a9Lw&mdash; Techno Tim (@TechnoTimLive) December 1, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Weekend Wireless Wizardry", "url": "/posts/weekend-wireless-wizardy/", "categories": "homelab", "tags": "unifi, network", "date": "2024-11-22 07:00:00 -0600", "snippet": "This is how my weekends usually go‚Ä¶üì∫ Watch VideoDisclosures Ubiquiti devices were provided for testing and upgrading my existing devices, which is why you see the sponsored banner. I was not paid...", "content": "This is how my weekends usually go‚Ä¶üì∫ Watch VideoDisclosures Ubiquiti devices were provided for testing and upgrading my existing devices, which is why you see the sponsored banner. I was not paid.InfoThis video follows my wireless upgrade adventure over 3 days. I try to figure out what works, what doesn‚Äôt, and how to extend the range of my home Wi-Fi while trying to improve the wireless bridge to my garage with the Unifi U7 Outdoor, the Unifi Device Bridge (UDB), and the Unifi Device Bridge Pro (UDB-Pro).üì¶ Products in video (affiliate links): UniFi U7 Outdoor: https://store.ui.com/us/en/category/all-wifi/products/u7-outdoor?a_aid=TechnoTim UniFi Device Bridge (UDB): https://store.ui.com/us/en/category/all-wifi/products/udb?a_aid=TechnoTim UniFi Device Bridge Pro: https://store.ui.com/us/en/category/all-wifi/products/udb-pro?a_aid=TechnoTim 6U Enclosed Network Cabinet Rack: https://amzn.to/4fUBgnd Data cable crimper: https://amzn.to/3CEA9K4 Pass though RJ45 connectors: https://amzn.to/3Z3OXcC Bulk cat6 cable: https://amzn.to/3ATQ9Y4Join the conversationThis is how my weekends usually go...https://t.co/Q9P19Emgku&mdash; Techno Tim (@TechnoTimLive) November 22, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Building the Ultimate Wireless Bridge", "url": "/posts/unifi-wireless-bridge/", "categories": "homelab", "tags": "unifi, network", "date": "2024-11-18 07:00:00 -0600", "snippet": "I transformed my wireless bridge into a faster, more reliable network setup.üì∫ Watch VideoInfoIn this video, I take on the challenge of creating the fastest and most reliable wireless bridge between...", "content": "I transformed my wireless bridge into a faster, more reliable network setup.üì∫ Watch VideoInfoIn this video, I take on the challenge of creating the fastest and most reliable wireless bridge between my house and garage‚Äîwithout digging trenches or laying cable. Over the years, my wireless setup has faced growing interference from neighbors, radar, and the increasing number of devices on the 2.4 GHz and 5 GHz bands. It‚Äôs time for an upgrade!I‚Äôll walk you through my journey, testing different setups, including mesh networks, point-to-point links, and a new outdoor UniFi access point with WiFi 7. I‚Äôll show you what worked, what didn‚Äôt, and how I ultimately built a stable, high-performance connection that meets my needs.Thank you Micro Center for sponsoring today‚Äôs video! Shop Micro Center‚Äôs Black Friday Event: https://micro.center/7weu Shop Qualcomm Powered Microsoft Surfaces: https://micro.center/rtkg Shop the AMD Ryzen 5 7600X3D Bundle: https://micro.center/1115b4 Shop Micro Center‚Äôs selection of Ubiquiti Networking gear: https://micro.center/lkgsüì¶ Products in video (affiliate links): UniFi WiFi - https://store.ui.com/us/en?category=all-wifi&amp;a_aid=TechnoTimJoin the conversationI transformed my wireless bridge into a faster, more reliable network setup.https://t.co/1W4JKTAB5O pic.twitter.com/QKWrjj7ivM&mdash; Techno Tim (@TechnoTimLive) November 18, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "NEW HomeLab University Shirt!", "url": "/posts/homelab-university-shirt/", "categories": "life", "tags": "merch, homelab", "date": "2024-11-04 07:00:00 -0600", "snippet": "Introducing the brand new HomeLab University Tee! üéâ Designed in-house by me‚Äîwith help from my wife. üíõ A lot of time and thought went into making this perfect for all the HomeLab enthusiasts out the...", "content": "Introducing the brand new HomeLab University Tee! üéâ Designed in-house by me‚Äîwith help from my wife. üíõ A lot of time and thought went into making this perfect for all the HomeLab enthusiasts out there. To celebrate the launch, I‚Äôm including a special free gift with every purchase!Get yours now and rep Infrastructure as a Hobby (IaaH) in style! üõ†Ô∏èüéÅüëïhttps://shop.technotim.live/Join the conversation&gt;Introducing the brand new HomeLab University Tee! üéâ Designed in-house by me‚Äîwith help from my wife. üíõGet yours now and rep Infrastructure as a Hobby (IaaH) in style! üõ†Ô∏èüéÅüëï https://t.co/xk5uBxjJcf pic.twitter.com/DLvGHK1Q35&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) November 4, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "From HomeLab to E-Waste: Giving Old Tech a New Purpose at Free Geek", "url": "/posts/e-waste-free-geek/", "categories": "homelab", "tags": "hardware, free-geek", "date": "2024-11-01 08:00:00 -0500", "snippet": "Ever wonder what to do with old homelab gear? Join me as I visit a local e-waste facility to see how outdated tech can be recycled, refurbished, or given a second life. From nostalgic tech to respo...", "content": "Ever wonder what to do with old homelab gear? Join me as I visit a local e-waste facility to see how outdated tech can be recycled, refurbished, or given a second life. From nostalgic tech to responsible recycling, Free Geek Twin Cities shows us the impact of handling e-waste the right way.üì∫ Watch VideoInfoPlease consider donating to Free Geek Twin Cities using YouTube‚Äôs donate button or directly on their website:https://www.freegeektwincities.org/donateThanks to Free Geek Twin Cities for letting me interrupt your day and share your story.https://www.freegeektwincities.org/Join the conversationI visited a local e-waste and recycling facility to see what they would do with some of my old homelab tech. Turns out, it&#39;s much more than just recycling it.https://t.co/5DE6tCXIPu&mdash; Techno Tim (@TechnoTimLive) November 2, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "UniFi NAS Pro, a NAS from Ubiquiti", "url": "/posts/unas-pro/", "categories": "homelab", "tags": "unifi, hardware, nas", "date": "2024-10-21 08:00:00 -0500", "snippet": "Introducing the UniFi NAS Pro, the NAS from Ubiquiti - UNAS-PROüì∫ Watch VideoInfoUbiquiti just stepped into the storage game with a NAS. It‚Äôs the UniFi NAS Pro but is it any good?üì¶ Products in vide...", "content": "Introducing the UniFi NAS Pro, the NAS from Ubiquiti - UNAS-PROüì∫ Watch VideoInfoUbiquiti just stepped into the storage game with a NAS. It‚Äôs the UniFi NAS Pro but is it any good?üì¶ Products in video (affiliate links): UNAS-Pro - https://store.ui.com/us/en/products/unas-pro?a_aid=TechnoTimJoin the conversationSo today Ubiquiti launched a NAS....https://t.co/z69jGghrCF pic.twitter.com/MpOshfC9p2&mdash; Techno Tim (@TechnoTimLive) October 21, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "I turned a gaming case into a living room NAS", "url": "/posts/living-room-nas/", "categories": "homelab", "tags": "proxmox, homelab", "date": "2024-10-03 08:00:00 -0500", "snippet": "This case was meant for gaming but I decided to do a little tinkering to see if I could truly turn this build into a NAS for a good-looking home server in your living room.üì∫ Watch VideoInfoI origin...", "content": "This case was meant for gaming but I decided to do a little tinkering to see if I could truly turn this build into a NAS for a good-looking home server in your living room.üì∫ Watch VideoInfoI originally built a standalone media server on Windows that focused on low energy use, but decided to take it one step further.üì¶ Products in video (affiliate links): Fractal Design Terra Case: https://amzn.to/3MLBXCD Intel Corei3 14100 CPU: https://amzn.to/3Zmaq2k ASUS ROG Strix B760-I Motherboard: https://amzn.to/3XvqkVH Corsair DDR5 RAM 64GB: https://amzn.to/3zbZD06 Noctua Low- Profile CPU Cooler: https://amzn.to/3XpAirv Corsair SF750 SFF Power Supply: https://amzn.to/3ZsZ1xS Seagate Exos X18 18TB Hard Drive: https://amzn.to/4gsQReF Noctua NF-A8 PWM Fan - https://amzn.to/4d3t42h Hard Drive Rubber Stands - https://amzn.to/4gueXWs Kill A Watt Electricity Monitor - https://amzn.to/3zpAVt5 Mini monitor everyone keeps asking about - https://amzn.to/4deDP1ECheck out the whole kit here: https://kit.co/TechnoTim/low-power-media-serverJoin the conversationThis week I tinkered some more and I converted a gaming case into a server quiet and good looking enough for your living room.https://t.co/jbbjpzPH4W&mdash; Techno Tim (@TechnoTimLive) October 3, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "You should be using Proxmox Backup Server", "url": "/posts/proxmox-backup-server/", "categories": "homelab", "tags": "proxmox, homelab", "date": "2024-09-28 08:00:00 -0500", "snippet": "After years of ignoring it, I finally switched back to Proxmox Backup Server and reclaimed 6TB of disk space. Totally worth it.üì∫ Watch VideoInfoThe disk, network, and computational savings are inc...", "content": "After years of ignoring it, I finally switched back to Proxmox Backup Server and reclaimed 6TB of disk space. Totally worth it.üì∫ Watch VideoInfoThe disk, network, and computational savings are incredible with Proxmox Backup Server and you should be using it if you are running Proxmox VE. I used NFS for years and only now do I realize how inefficient that is. This is why I started using Proxmox Backup Server once again.Helpful links: Proxmox Backup Server Documentation Proxmox Backup Server Prune Simulator Guide on using NFS for your Proxmox Backup Server Dataset I followed this guide but stored the dataset on my TrueNAS server on an NFS share. The process is almost the same except use TrueNAS instead of Synology. Join the conversationAfter years of ignoring it, I finally switched back to Proxmox Backup Server and reclaimed 6TB of disk space. Totally worth it.https://t.co/SSFrkSkutT pic.twitter.com/AeMSjPqLOI&mdash; Techno Tim (@TechnoTimLive) September 28, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Building a Low-Power, Fully Loaded Plex Server", "url": "/posts/plex-build-low-power-server/", "categories": "homelab", "tags": "plex, hardware, windows, linux, pc, server", "date": "2024-09-16 08:00:00 -0500", "snippet": "I built an efficient, good looking, Mini ITX Plex server that doesn‚Äôt skimp on the processing power, storage, or features like transcoding all while using only 16 watts of power. Each part is hand...", "content": "I built an efficient, good looking, Mini ITX Plex server that doesn‚Äôt skimp on the processing power, storage, or features like transcoding all while using only 16 watts of power. Each part is hand-picked and every setting is tweaked with efficiency in mind. Oh, and it would even look nice in your living space too! If you already have a Plex server, you can still follow this guide to be sure you are getting the most efficiency out of your hardware!A huge THANK YOU to Plex for sponsoring this video during Pro Week!Explore and learn more from Plex Pros here: https://www.plex.tv/pro-week.üì∫ Watch VideoDisclosures Plex sponsored this video however all content was written and edited by me personally.Infoüì¶ Products in video (affiliate links): Fractal Design Terra Case: https://amzn.to/3MLBXCD Intel Corei3 14100 CPU: https://amzn.to/3Zmaq2k ASUS ROG Strix B760-I Motherboard: https://amzn.to/3XvqkVH Corsair DDR5 RAM 64GB: https://amzn.to/3zbZD06 Noctua Low- Profile CPU Cooler: https://amzn.to/3XpAirv Corsair SF750 SFF Power Supply: https://amzn.to/3ZsZ1xS Seagate Exos X18 18TB Hard Drive: https://amzn.to/4gsQReF Noctua NF-A8 PWM Fan - https://amzn.to/4d3t42h Hard Drive Rubber Stands - https://amzn.to/4gueXWs Kill A Watt Electricity Monitor - https://amzn.to/3zpAVt5 Mini monitor everyone keeps asking about - https://amzn.to/4deDP1ECheck out the whole kit here: https://kit.co/TechnoTim/low-power-media-serverJoin the conversationI built an efficient, good looking, Mini ITX Plex server that doesn‚Äôt skimp on the processing power, storage, or features like transcoding all while using 16 watts. Each part is hand-picked and every setting is tweaked with efficiency in mind.---&gt;https://t.co/Ka4Sdb2xFe pic.twitter.com/IvguaiNB4m&mdash; Techno Tim (@TechnoTimLive) September 16, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "How one company is \"De-Microsoft-ifying\" and pushing Linux on the desktop", "url": "/posts/creator-summit-2024-demicrosoftification/", "categories": "homelab", "tags": "45drives, linux", "date": "2024-09-05 08:00:00 -0500", "snippet": "45Drives is De-Microsoft-ifying and leading the charge by replacing Windows with Linux desktops and replacing proprietary solutions with open source. This topic of ‚Äúdemicrosoftification‚Äù was discus...", "content": "45Drives is De-Microsoft-ifying and leading the charge by replacing Windows with Linux desktops and replacing proprietary solutions with open source. This topic of ‚Äúdemicrosoftification‚Äù was discussed at the Creator Summit 2024 at 45Drives headquarters. I attended along with many other tech YouTubers in this space. They also gave us a sneak peek at some new hardware too and an early look at some unique prototypes.Thanks to 45Drives for inviting me to this event! If you‚Äôd like to learn more about them you can here: https://www.45drives.com/techno-timüì∫ Watch VideoDisclosures 45Drives did provide travel and accommodations to attend this event, however I was not paid.InfoHere are some helpful links: Link to my presentation at the Creator Summit: https://l.technotim.live/demicrosoftification-presentation 45Drives live stream of the event: https://www.youtube.com/watch?v=fCvXw86pqPw Craft Computing‚Äôs live stream we all crashed: https://www.youtube.com/watch?v=AcA1DYzVSK8Join the conversationHow one company is &quot;De-Microsoft-ifying&quot; and pushing Linux on the desktopCheck it out!---&gt;https://t.co/UgAF5J62DY pic.twitter.com/3W8j2O1RtF&mdash; Techno Tim (@TechnoTimLive) September 5, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "The Best HomeLab Service Dashboard Yet!", "url": "/posts/homelab-assistant/", "categories": "homelab", "tags": "home-automation, home-assistant, homelab", "date": "2024-08-26 08:00:00 -0500", "snippet": "Say goodbye to all of the other Home Lab Dashboards that you end up not using, it‚Äôs time to use something smarter, Home Assistant.üì∫ Watch VideoDisclosures Nothing in this video was sponsoredInfo ...", "content": "Say goodbye to all of the other Home Lab Dashboards that you end up not using, it‚Äôs time to use something smarter, Home Assistant.üì∫ Watch VideoDisclosures Nothing in this video was sponsoredInfo Home Assistant: https://github.com/home-assistant/core HACS : https://github.com/hacs/integration System Monitor: https://www.home-assistant.io/integrations/systemmonitor/ TrueNAS: (Found in HACS) Plex Media Server: https://www.home-assistant.io/integrations/plex/ Proxmox: (Found in HACS) Pi-hole: https://www.home-assistant.io/integrations/pi_hole/ UniFi Network: https://www.home-assistant.io/integrations/unifi/ pfSense: (Found in HACS) System Bridge: https://www.home-assistant.io/integrations/system_bridge/ System Bridge Client: https://github.com/timmo001/system-bridgeCodeYou can check out my current Home Assistant Docker Compose StackJoin the conversationSay goodbye to all of the other Home Lab Dashboards that you end up not using, it&#39;s time to use something smarter, Home Assistant.--&gt;https://t.co/VeliDgNYdq pic.twitter.com/6cAVe7ozQn&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) August 26, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Create Your Own Zigbee Hub & Network", "url": "/posts/create-your-own-zigbee-hub/", "categories": "home-automation, hardware", "tags": "hardware, home-automation, zigbee, home-assistant", "date": "2024-08-04 08:00:00 -0500", "snippet": "This simple but powerful little adapter lets you build your own Zigbee network and easily add and manage it in Home Assistant, no hub required!üì∫ Watch VideoDisclosures Nothing in this video was sp...", "content": "This simple but powerful little adapter lets you build your own Zigbee network and easily add and manage it in Home Assistant, no hub required!üì∫ Watch VideoDisclosures Nothing in this video was sponsoredInfo SMLIGHT homepage: https://smlight.tech/ Zigbee2MQTT: https://github.com/Koenkk/zigbee2mqtt Mosquitto: https://github.com/eclipse/mosquitto Home Assistant: https://github.com/home-assistant/coreHardware SMLIGHT SLZB-06: https://amzn.to/4doSJ6B (affiliate link) THIRDREALITY ZigBee Smart Plug: https://amzn.to/3A8AlA7 (affiliate link)CodeA simplified Home Assistant Stack with Zigbee2MQTT Support. Don‚Äôt forget to update your Zigbee2MQTT configuration!---services: homeassistant: container_name: homeassistant image: ghcr.io/home-assistant/home-assistant:stable depends_on: - mqtt - zigbee2mqtt volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./home-assistant/config:/config environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped ports: - 8123:8123 mqtt: container_name: mqtt environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} image: eclipse-mosquitto:latest restart: unless-stopped volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./mqtt/data:/mosquitto ports: - 1883:1883 - 9001:9001 command: mosquitto -c /mosquitto-no-auth.conf zigbee2mqtt: container_name: zigbee2mqtt environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped image: koenkk/zigbee2mqtt:latest volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./zigbee2mqtt/data:/app/data ports: - 8080:8080My Home Assistant Stack:---services: homeassistant: container_name: homeassistant networks: iot_macvlan: ipv4_address: 192.168.20.202 traefik: image: ghcr.io/home-assistant/home-assistant:stable depends_on: - faster-whisper-gpu - wyoming-piper - mqtt - zigbee2mqtt volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./home-assistant/config:/config environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped labels: - \"traefik.enable=true\" - \"traefik.http.routers.homeassistant.rule=Host(`homeassistant.local.techtronic.us`)\" - \"traefik.http.routers.homeassistant.entrypoints=https\" - \"traefik.http.routers.homeassistant.tls=true\" - \"traefik.http.routers.homeassistant.tls.certresolver=cloudflare\" - \"traefik.http.routers.homeassistant.middlewares=default-headers@file\" - \"traefik.http.services.homeassistant.loadbalancer.server.port=8123\" - \"com.centurylinklabs.watchtower.enable=true\" faster-whisper-gpu: image: lscr.io/linuxserver/faster-whisper:gpu container_name: faster-whisper-gpu networks: - traefik environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - WHISPER_MODEL=tiny-int8 - WHISPER_BEAM=1 #optional - WHISPER_LANG=en #optional volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./faster-whisper/data:/config restart: unless-stopped labels: - \"com.centurylinklabs.watchtower.enable=true\" deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: [gpu] wyoming-piper: container_name: wyoming-piper networks: - traefik image: rhasspy/wyoming-piper # no gpu volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./wyoming-piper/data:/data environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped labels: - \"com.centurylinklabs.watchtower.enable=true\" command: --voice en_US-lessac-medium deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: [gpu] mqtt: container_name: mqtt networks: - traefik environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} image: eclipse-mosquitto:latest restart: unless-stopped labels: - \"com.centurylinklabs.watchtower.enable=true\" volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./mqtt/data:/mosquitto command: mosquitto -c /mosquitto-no-auth.conf zigbee2mqtt: container_name: zigbee2mqtt networks: iot_macvlan: ipv4_address: 192.168.20.204 traefik: environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped labels: - \"traefik.enable=true\" - \"traefik.http.routers.zigbee2mqtt.rule=Host(`zigbee2mqtt.local.techtronic.us`)\" - \"traefik.http.routers.zigbee2mqtt.entrypoints=https\" - \"traefik.http.routers.zigbee2mqtt.tls=true\" - \"traefik.http.routers.zigbee2mqtt.tls.certresolver=cloudflare\" - \"traefik.http.routers.zigbee2mqtt.middlewares=default-headers@file\" - \"traefik.http.services.zigbee2mqtt.loadbalancer.server.port=8080\" - \"com.centurylinklabs.watchtower.enable=true\" image: koenkk/zigbee2mqtt:latest volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./zigbee2mqtt/data:/app/datanetworks: traefik: external: true iot_macvlan: external: trueJoin the conversationIn today&#39;s side quest, I created my own Zigbee hub and network and added it to Home Assistant with this awesome little adapter!!check it out---&gt;https://t.co/s0VRC6oLOD pic.twitter.com/8V9pavNH1T&mdash; Techno Tim (@TechnoTimLive) August 4, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Mini Rack, HomeLab Stack", "url": "/posts/mini-rack-homelab-stack/", "categories": "homelab, hardware", "tags": "hardware, mini-rack, homelab", "date": "2024-07-26 08:00:00 -0500", "snippet": "There‚Äôs building a MINI SERVER RACK and then there‚Äôs beating Raid Owl in the mini server rack build challenge. Let‚Äôs see if I can do both.üì∫ Watch VideoDisclosures This video no longer has sponsors...", "content": "There‚Äôs building a MINI SERVER RACK and then there‚Äôs beating Raid Owl in the mini server rack build challenge. Let‚Äôs see if I can do both.üì∫ Watch VideoDisclosures This video no longer has sponsors RackMate T1, Protectli VP1210, (1) Beelink EQ13 (other was purchased), Axe Effect, and PiKVM v4 plus/mini were sent for review.InfoCheck out Raid Owl‚Äôs build here: https://www.youtube.com/watch?v=wJUDhQ7s9HMHardwareüì¶ Mini Server Rack Parts List üì¶ DeskPi RackMate T1: https://amzn.to/3zVZk9w DeskPi Rackmate Shelves: https://amzn.to/4di9gIZ Protectli VP1210: https://amzn.to/4bWEyUF Beelink EQ13: https://amzn.to/3Wfu9gR RealHD 2.5G Switch: https://amzn.to/46gA3TG Tenda 2.5G Switch (won‚Äôt fit in rack but dual SFP+): https://amzn.to/3SlShx4 PiKVM: https://pikvm.org/ Axe Effect by Craft Computing: https://www.craftcomputing.com/product/axe-effect-temperature-sensor-beta-/1?cs=true&amp;cst=custom EZCOO KVM: https://amzn.to/3WgjO4u 120mm USB Ran: https://amzn.to/3YhsIRL Noctua 5V 120mm fan: https://amzn.to/46kFS2c Rii X8 Mini Keyboard: https://amzn.to/3WkQmtY USB to SATA adapter: https://amzn.to/46gWWGu 12‚Äù HDMI Cables: https://amzn.to/3LBT3T3 SmallRig Monitor Clamp (Magic Arm): https://amzn.to/3Skj9hh Cable Organizer Box: https://amzn.to/3ylG4BP Cable clips: https://amzn.to/3WkFYSW 280W USB GaN III Charger: https://amzn.to/3LzF6Fl Anker Surge Protector: https://amzn.to/3LzFvaP(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Join the conversationI finished my mini server rack build! I basically shrunk an entire HomeLab into this small rack.Check it out! ----&gt;https://t.co/NPI2YcSZcb pic.twitter.com/xJRmwyXYzP&mdash; Techno Tim (@TechnoTimLive) July 26, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "How to Self-Host Your Own Private AI Stack", "url": "/posts/ai-stack-tutorial/", "categories": "homelab, self-hosted", "tags": "ai, docker, software, llm, ollama, whisper", "date": "2024-07-08 08:00:00 -0500", "snippet": "In this tutorial we‚Äôll walk through my local, private, self-hosted AI stack so that you can run it too.üì∫ Watch VideoDisclosures Nothing in this video was sponsoredInfoIf you‚Äôre looking for the ove...", "content": "In this tutorial we‚Äôll walk through my local, private, self-hosted AI stack so that you can run it too.üì∫ Watch VideoDisclosures Nothing in this video was sponsoredInfoIf you‚Äôre looking for the overview of this stack, you can out the video here Self-Hosted AI That‚Äôs Actually UsefulHardware Machine Used for AI: Building My ULTIMATE, All-inOne, HomeLab ServerGPUsHere are some cards that are good for local AI. Keep in mind that it‚Äôs always better to get a newer one for better CUDA support and more RAM. 8GB of RAM should be good for small models like the ones in this stack, however 12-24 is probably best.NVIDIA RTX 3000 Series MSI Gaming GeForce RTX 3060 12GB GIGABYTE GeForce RTX 3060 Gaming OC 12G NVIDIA GeForce RTX 3090 Founders Edition Graphics Card (Renewed) 24GB Zotac Gaming GeForce RTX 3090 Trinity OC, 24GBNVIDIA RTX 4000 Series ASUS TUF Gaming GeForce RTX‚Ñ¢ 4090 OG OC Edition Gaming Graphics Card 24GB MSI Gaming GeForce RTX 4060 8GB ASUS Dual GeForce RTX‚Ñ¢ 4070 White OC Edition 12GBCPUYou‚Äôll want a modern CPU, if you are going desktop class here are a few I would choose Intel Core i7-12700K Gaming Desktop Processor Intel Core i7-13700K Gaming Desktop Processor Intel Core i7-14700K Gaming Desktop ProcessorStorageFor flash storage, I always go with these SSDs Samsung 870 EVO SATA SAMSUNG 990 PRO SSD NVMeOperating SystemI am running Ubuntu Server 24.04 LTSDriversInstalling NVIDIA DriversIf you need help, you can check out this article but here are the commands I ran.Install the best desktop graphics card for your machine.sudo ubuntu-drivers installInstall NVIDIA toolsBe sure you install the version that matches your driver from abovesudo apt install nvidia-utils-535Then reboot your machinesudo rebootOnce the machine is back up, check to be sure your drivers are functioning properlynvidia-smi Software OverviewHere are the packages and repo‚Äôs we‚Äôre be using Ollama Open WebUI ComfyUI Stable Diffusion web UI pluja/whishper HuggingFace Home Assistant Wyoming Protocol Continue Code Assistant searXNG MacWhisperTraefikUsingI am using Traefik as the only entry point into this stack. No ports are exposed on the host. If you don‚Äôt want to use traefik, just comment out the labels (and optionally rename the network named traefik). You will then need to expose ports for open-webui, stable-diffusion-webui, and whisper in your Docker compose file.If you need help installing Traefik, see this post on installing traefik 3 on DockerDNS Note: If using traefik (or any reverse proxy, remember that all of your internal DNS records will point to this machine! e.g. If the machine running this stack‚Äôs ip is 192.168.0.100 you‚Äôll need a DNS record like chat.local.example.com that points to 192.168.0.100Auth MiddlewareThis stack contains middleware for basic auth so that the Ollama so that it is secure with a username and password. This is optional. If you don‚Äôt want to use basic auth, just remove the auth middleware labels from the ollama service in your compose.Otherwise, here‚Äôs how you create the credential:Hashing your password for traefik middlewareecho $(htpasswd -nB ollamauser) | sed -e s/\\\\$/\\\\$\\\\$/gYou‚Äôll then want to place this in your .env here using the OLLAMA_API_CREDENTIALS variable. This is then used in the ollama service in your compose file.Basic Auth HashIf you want to create a hash value for Basic Auth (Used for Continue extension). You‚Äôll need to use the credential from above.echo 'ollamauser:ollamapassword!' | base64NVIDIA Container ToolkitIf you run into issues, you can always visit the NVIDIA Container ToolkitConfigure the production repositorycurl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\ &amp;&amp; curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \\ sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\ sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.listUpdate the packages list from the repository:sudo apt-get updateInstall the NVIDIA Container Toolkit packagessudo apt-get install -y nvidia-container-toolkitConfigure the container runtime by using the nvidia-ctk command and restart dockersudo nvidia-ctk runtime configure --runtime=dockersudo systemctl restart dockerThis will fail if you don‚Äôt have Docker installed yet.DockerIf you need to install Docker see this post on how to install docker and docker composeAfter installing Docker you will need to reconfigure the runtimesudo nvidia-ctk runtime configure --runtime=dockersudo systemctl restart dockerTestingThis will test to make sure that the NVIDIA container toolkit can access the NVidia driver.sudo docker run --rm --runtime=nvidia --gpus all ubuntu nvidia-smiYou should see the same output as running nvidia-smi without Docker.Folder StructureStacks live in /opt/stacksHere is the folder structure. Most subfolders are created when binding volumes.‚îú‚îÄ‚îÄ ai-stack‚îÇ ‚îú‚îÄ‚îÄ .env‚îÇ¬†¬† ‚îú‚îÄ‚îÄ compose.yaml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ollama‚îÇ¬†¬† ‚îú‚îÄ‚îÄ open-webui‚îÇ¬†¬† ‚îú‚îÄ‚îÄ searxng‚îÇ¬†¬† ‚îú‚îÄ‚îÄ stable-diffusion-webui-docker‚îÇ¬†¬† ‚îî‚îÄ‚îÄ whisper‚îú‚îÄ‚îÄ home-assistant-stack‚îÇ¬†¬† ‚îú‚îÄ‚îÄ compose.yaml‚îÇ¬†¬† ‚îú‚îÄ‚îÄ faster-whisper‚îÇ¬†¬† ‚îú‚îÄ‚îÄ home-assistant‚îÇ¬†¬† ‚îî‚îÄ‚îÄ wyoming-piperFolder PermissionsIf you run into any folder permission errors while running any of this, you can simple change the owner to yourself using the command. Please replace the user and group with your own user and group.sudo chown serveradmin:serveradmin -R /opt/stacksVariables with .envMy ai-stack .envis pretty minimalOLLAMA_API_CREDENTIALS=DB_USER=DB_PASS=WHISHPER_HOST=https://whisper.local.example.comWHISPER_MODELS=tiny,smallPUID=PGID=AI Stack (Docker Compose)Here is my compose.yamlYou‚Äôll want to create this in the root of your stack folder (see folder structure above)The command I use to start, build, and remove orphans is:docker compose up -d --build --force-recreate --remove-orphansotherwise you can usedocker compose up -d --buildThere are additional steps you‚Äôll need to do before starting this stack. Please continue on to the end.Here are 2 Docker compose files that you can use on your system.My Docker Compose StackThe stack is the one I use in the video as well as at home. If you want to use the general stack without traefik and macvlan, see the general Docker compose stackBefore running this, you will need to create the network for Docker to use.This might already exist if you are using traefik. If so skip this step.docker network create traefikThis will create the macvlan network. Adjust accordingly.docker network create -d macvlan \\--subnet=192.168.20.0/24 \\--gateway=192.168.20.1 \\-o parent=eth1 \\iot_macvlancompose.yamlservices:# Ollama ollama: image: ollama/ollama:latest container_name: ollama restart: unless-stopped environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - OLLAMA_KEEP_ALIVE=24h - ENABLE_IMAGE_GENERATION=True - COMFYUI_BASE_URL=http://stable-diffusion-webui:7860 networks: - traefik volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./ollama:/root/.ollama labels: - \"traefik.enable=true\" - \"traefik.http.routers.ollama.rule=Host(`ollama.local.example.com`)\" - \"traefik.http.routers.ollama.entrypoints=https\" - \"traefik.http.routers.ollama.tls=true\" - \"traefik.http.routers.ollama.tls.certresolver=cloudflare\" - \"traefik.http.routers.ollama.middlewares=default-headers@file\" - \"traefik.http.routers.ollama.middlewares=ollama-auth\" - \"traefik.http.services.ollama.loadbalancer.server.port=11434\" - \"traefik.http.routers.ollama.middlewares=auth\" - \"traefik.http.middlewares.auth.basicauth.users=${OLLAMA_API_CREDENTIALS}\" deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: [gpu]# open web ui open-webui: image: ghcr.io/open-webui/open-webui:latest container_name: open-webui restart: unless-stopped networks: - traefik environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - 'OLLAMA_BASE_URL=http://ollama:11434' - ENABLE_RAG_WEB_SEARCH=True - RAG_WEB_SEARCH_ENGINE=searxng - RAG_WEB_SEARCH_RESULT_COUNT=3 - RAG_WEB_SEARCH_CONCURRENT_REQUESTS=10 - SEARXNG_QUERY_URL=http://searxng:8080/search?q=&lt;query&gt; volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./open-webui:/app/backend/data labels: - \"traefik.enable=true\" - \"traefik.http.routers.open-webui.rule=Host(`chat.local.example.com`)\" - \"traefik.http.routers.open-webui.entrypoints=https\" - \"traefik.http.routers.open-webui.tls=true\" - \"traefik.http.routers.open-webui.tls.certresolver=cloudflare\" - \"traefik.http.routers.open-webui.middlewares=default-headers@file\" - \"traefik.http.services.open-webui.loadbalancer.server.port=8080\" depends_on: - ollama extra_hosts: - host.docker.internal:host-gateway searxng: image: searxng/searxng:latest container_name: searxng networks: - traefik environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./searxng:/etc/searxng depends_on: - ollama - open-webui restart: unless-stopped# stable diffusion stable-diffusion-download: build: ./stable-diffusion-webui-docker/services/download/ image: comfy-download environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./stable-diffusion-webui-docker/data:/data stable-diffusion-webui: build: ./stable-diffusion-webui-docker/services/comfy/ image: comfy-ui environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - CLI_ARGS= volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./stable-diffusion-webui-docker/data:/data - ./stable-diffusion-webui-docker/output:/output stop_signal: SIGKILL tty: true deploy: resources: reservations: devices: - driver: nvidia device_ids: ['0'] capabilities: [compute, utility] restart: unless-stopped networks: - traefik labels: - \"traefik.enable=true\" - \"traefik.http.routers.stable-diffusion.rule=Host(`stable-diffusion.local.example.com`)\" - \"traefik.http.routers.stable-diffusion.entrypoints=https\" - \"traefik.http.routers.stable-diffusion.tls=true\" - \"traefik.http.routers.stable-diffusion.tls.certresolver=cloudflare\" - \"traefik.http.services.stable-diffusion.loadbalancer.server.port=7860\" - \"traefik.http.routers.stable-diffusion.middlewares=default-headers@file\"# whisper mongo: image: mongo env_file: - .env networks: - traefik restart: unless-stopped volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./whisper/db_data:/data/db - ./whisper/db_data/logs/:/var/log/mongodb/ environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - MONGO_INITDB_ROOT_USERNAME=${DB_USER:-whishper} - MONGO_INITDB_ROOT_PASSWORD=${DB_PASS:-whishper} command: ['--logpath', '/var/log/mongodb/mongod.log'] translate: container_name: whisper-libretranslate image: libretranslate/libretranslate:latest-cuda env_file: - .env networks: - traefik restart: unless-stopped volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./whisper/libretranslate/data:/home/libretranslate/.local/share - ./whisper/libretranslate/cache:/home/libretranslate/.local/cache user: root tty: true environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - LT_DISABLE_WEB_UI=True - LT_LOAD_ONLY=${LT_LOAD_ONLY:-en,fr,es} - LT_UPDATE_MODELS=True deploy: resources: reservations: devices: - driver: nvidia count: all capabilities: [gpu] whisper: container_name: whisper pull_policy: always image: pluja/whishper:latest-gpu env_file: - .env networks: - traefik volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./whisper/uploads:/app/uploads - ./whisper/logs:/var/log/whishper - ./whisper/models:/app/models restart: unless-stopped labels: - \"traefik.enable=true\" - \"traefik.http.routers.whisper.rule=Host(`whisper.local.example.com`)\" - \"traefik.http.routers.whisper.entrypoints=https\" - \"traefik.http.routers.whisper.tls=true\" - \"traefik.http.routers.whisper.tls.certresolver=cloudflare\" - \"traefik.http.services.whisper.loadbalancer.server.port=80\" - \"traefik.http.routers.whisper.middlewares=default-headers@file\" depends_on: - mongo - translate environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - PUBLIC_INTERNAL_API_HOST=${WHISHPER_HOST} - PUBLIC_TRANSLATION_API_HOST=${WHISHPER_HOST} - PUBLIC_API_HOST=${WHISHPER_HOST:-} - PUBLIC_WHISHPER_PROFILE=gpu - WHISPER_MODELS_DIR=/app/models - UPLOAD_DIR=/app/uploads deploy: resources: reservations: devices: - driver: nvidia count: all capabilities: [gpu]networks: traefik: external: trueGeneral Docker Compose StackThis Docker compose stack does not use traefik and also exposes the port on the host for each service. If you don‚Äôt want to expose the port, comment that section out. If you want to use the stack with traefik and macvlan, see the stack I used in the videoBefore running this, you will need to create the network for Docker to use.docker network create ai-stackservices: ollama: image: ollama/ollama:latest container_name: ollama restart: unless-stopped environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - OLLAMA_KEEP_ALIVE=24h - ENABLE_IMAGE_GENERATION=True - COMFYUI_BASE_URL=http://stable-diffusion-webui:7860 networks: - ai-stack volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./ollama:/root/.ollama ports: - \"11434:11434\" # Add this line to expose the port deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: [gpu] open-webui: image: ghcr.io/open-webui/open-webui:latest container_name: open-webui restart: unless-stopped networks: - ai-stack environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - 'OLLAMA_BASE_URL=http://ollama:11434' - ENABLE_RAG_WEB_SEARCH=True - RAG_WEB_SEARCH_ENGINE=searxng - RAG_WEB_SEARCH_RESULT_COUNT=3 - RAG_WEB_SEARCH_CONCURRENT_REQUESTS=10 - SEARXNG_QUERY_URL=http://searxng:8080/search?q=&lt;query&gt; volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./open-webui:/app/backend/data depends_on: - ollama extra_hosts: - host.docker.internal:host-gateway ports: - \"8080:8080\" # Add this line to expose the port searxng: image: searxng/searxng:latest container_name: searxng networks: - ai-stack environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./searxng:/etc/searxng depends_on: - ollama - open-webui restart: unless-stopped ports: - \"8081:8080\" # Add this line to expose the port stable-diffusion-download: build: ./stable-diffusion-webui-docker/services/download/ image: comfy-download environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./stable-diffusion-webui-docker/data:/data stable-diffusion-webui: build: ./stable-diffusion-webui-docker/services/comfy/ image: comfy-ui environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - CLI_ARGS= volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./stable-diffusion-webui-docker/data:/data - ./stable-diffusion-webui-docker/output:/output stop_signal: SIGKILL tty: true deploy: resources: reservations: devices: - driver: nvidia device_ids: ['0'] capabilities: [compute, utility] restart: unless-stopped networks: - ai-stack ports: - \"7860:7860\" # Add this line to expose the port mongo: image: mongo env_file: - .env networks: - ai-stack restart: unless-stopped volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./whisper/db_data:/data/db - ./whisper/db_data/logs/:/var/log/mongodb/ environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - MONGO_INITDB_ROOT_USERNAME=${DB_USER:-whishper} - MONGO_INITDB_ROOT_PASSWORD=${DB_PASS:-whishper} command: ['--logpath', '/var/log/mongodb/mongod.log'] ports: - \"27017:27017\" # Add this line to expose the port translate: container_name: whisper-libretranslate image: libretranslate/libretranslate:latest-cuda env_file: - .env networks: - ai-stack restart: unless-stopped volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./whisper/libretranslate/data:/home/libretranslate/.local/share - ./whisper/libretranslate/cache:/home/libretranslate/.local/cache user: root tty: true environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - LT_DISABLE_WEB_UI=True - LT_LOAD_ONLY=${LT_LOAD_ONLY:-en,fr,es} - LT_UPDATE_MODELS=True deploy: resources: reservations: devices: - driver: nvidia count: all capabilities: [gpu] ports: - \"5000:5000\" # Add this line to expose the port whisper: container_name: whisper pull_policy: always image: pluja/whishper:latest-gpu env_file: - .env networks: - ai-stack volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./whisper/uploads:/app/uploads - ./whisper/logs:/var/log/whishper - ./whisper/models:/app/models restart: unless-stopped depends_on: - mongo - translate environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - PUBLIC_INTERNAL_API_HOST=${WHISHPER_HOST} - PUBLIC_TRANSLATION_API_HOST=${WHISHPER_HOST} - PUBLIC_API_HOST=${WHISHPER_HOST:-} - PUBLIC_WHISHPER_PROFILE=gpu - WHISPER_MODELS_DIR=/app/models - UPLOAD_DIR=/app/uploads deploy: resources: reservations: devices: - driver: nvidia count: all capabilities: [gpu] ports: - \"8000:80\" # Add this line to expose the portnetworks: ai-stack: external: trueChanges for ComfyUIBefore starting the stack, in the room ai-stack folder, you‚Äôll want to clone the repo (or just copy the necessary files).(this will create the folder for you)git clone https://github.com/AbdBarho/stable-diffusion-webui-docker.gitAfter cloning, you‚Äôll want to make a change to the Docker filenano stable-diffusion-webui-docker/services/comfy/DockerfileI commented out the pinning to commit hash and just grabbed the latest comfy.FROM pytorch/pytorch:2.3.0-cuda12.1-cudnn8-runtimeENV DEBIAN_FRONTEND=noninteractive PIP_PREFER_BINARY=1RUN apt-get update &amp;&amp; apt-get install -y git &amp;&amp; apt-get cleanENV ROOT=/stable-diffusionRUN --mount=type=cache,target=/root/.cache/pip \\ git clone https://github.com/comfyanonymous/ComfyUI.git ${ROOT} &amp;&amp; \\ cd ${ROOT} &amp;&amp; \\ git checkout master &amp;&amp; \\# git reset --hard 276f8fce9f5a80b500947fb5745a4dde9e84622d &amp;&amp; \\ pip install -r requirements.txtWORKDIR ${ROOT}COPY . /docker/RUN chmod u+x /docker/entrypoint.sh &amp;&amp; cp /docker/extra_model_paths.yaml ${ROOT}ENV NVIDIA_VISIBLE_DEVICES=all PYTHONPATH=\"${PYTHONPATH}:${PWD}\" CLI_ARGS=\"\"EXPOSE 7860ENTRYPOINT [\"/docker/entrypoint.sh\"]CMD python -u main.py --listen --port 7860 ${CLI_ARGS}If you cloned the repo and want to verify your changes, you can do so with:git diffYou should see something likediff --git a/services/comfy/Dockerfile b/services/comfy/Dockerfileindex 2de504d..a84c8ce 100644--- a/services/comfy/Dockerfile+++ b/services/comfy/Dockerfile@@ -9,7 +9,7 @@ RUN --mount=type=cache,target=/root/.cache/pip \\ git clone https://github.com/comfyanonymous/ComfyUI.git ${ROOT} &amp;&amp; \\ cd ${ROOT} &amp;&amp; \\ git checkout master &amp;&amp; \\- git reset --hard 276f8fce9f5a80b500947fb5745a4dde9e84622d &amp;&amp; \\+# git reset --hard 276f8fce9f5a80b500947fb5745a4dde9e84622d &amp;&amp; \\ pip install -r requirements.txt WORKDIR ${ROOT}(END)Downloading ModelsYou‚Äôll want to grab any models you like from HuggingFace. I am using stabilityai/stable-diffusion-3-mediumYou‚Äôll want to download all of the models and then transfer them to your serverand put them in the appropriate foldersModels will need to bt placed in the Stable-diffusion folder.stable-diffusion-webui-docker/data/models/Stable-diffusionModels are any file in the root of stable-diffusion-3-medium that have the extension *.safetensorsFor clips, you‚Äôll need to create this folder (because it doesn‚Äôt exist)mkdir stable-diffusion-webui-docker/data/models/CLIPEncoderIn there you‚Äôll place your clips, from the text_encoders folder from stable-diffusion-3-mediumExample Workflows for ComfyUI and Stable Diffusion 3 MediumYou‚Äôll need to download the same workflows to the machine that accesses ComfyUI so you can import them into the browser.Example workflows are also available on HuggingFace in the Stable Diffusion 3 Medium repoVerifying ModelsIf you‚Äôre going to spend all of that time downloading these model files, you should also pend a few minutes verifying them. I typically do this once they are on the server running the AI Stackshasum -a 256 ./sd3_medium.safetensorsThis should output something like:cc236278d28c8c3eccb8e21ee0a67ebed7dd6e9ce40aa9de914fa34e8282f191 ./sd3_medium.safetensorsYou‚Äôll want to be sure the checksum matches the checksum from the source (HuggingFace, etc).Home Assistant Stack (Docker Compose)Please see folder structure aboveBefore running this, you will need to create the network for Docker to use.This might already exist if you are using traefik. If so skip this step.docker network create traefikThis will create the macvlan network. Adjust accordingly.docker network create -d macvlan \\--subnet=192.168.20.0/24 \\--gateway=192.168.20.1 \\-o parent=eth1 \\iot_macvlan---services: homeassistant: container_name: homeassistant networks: iot_macvlan: ipv4_address: 192.168.20.202 #optional, I am using mac vlan, if you don't want to, remove iot_macvlan and don't create the network above traefik: image: ghcr.io/home-assistant/home-assistant:stable depends_on: - faster-whisper-gpu - wyoming-piper volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./home-assistant/config:/config environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped labels: - \"traefik.enable=true\" - \"traefik.http.routers.homeassistant.rule=Host(`homeassistant.local.example.com`)\" - \"traefik.http.routers.homeassistant.entrypoints=https\" - \"traefik.http.routers.homeassistant.tls=true\" - \"traefik.http.routers.homeassistant.tls.certresolver=cloudflare\" - \"traefik.http.routers.homeassistant.middlewares=default-headers@file\" - \"traefik.http.services.homeassistant.loadbalancer.server.port=8123\" faster-whisper-gpu: image: lscr.io/linuxserver/faster-whisper:gpu container_name: faster-whisper-gpu networks: - traefik environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} - WHISPER_MODEL=tiny-int8 - WHISPER_BEAM=1 #optional - WHISPER_LANG=en #optional volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./faster-whisper/data:/config restart: unless-stopped deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: [gpu] wyoming-piper: container_name: wyoming-piper networks: - traefik image: rhasspy/wyoming-piper # no gpu volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - ./wyoming-piper/data:/data environment: - PUID=${PUID:-1000} - PGID=${PGID:-1000} restart: unless-stopped command: --voice en_US-lessac-medium deploy: resources: reservations: devices: - driver: nvidia count: 1 capabilities: [gpu]networks: traefik: external: true iot_macvlan: external: trueCode Completion (VSCode)I am using Basic Auth Middleware with traefik. Please see traefik section for details on how to set this up.ExtensionI am using Continue for code completion and integrated chat.Example config.If you aren‚Äôt going to use auth, remove the requestOptions key.If you are going to use auth, please replace the xxx with the value from above{ \"models\": [ { \"title\": \"Ollama (Self-Hosted)\", \"provider\": \"ollama\", \"model\": \"AUTODETECT\", \"completionOptions\": {}, \"apiBase\": \"https://ollama.local.example.com\", \"requestOptions\": { \"headers\": { \"Authorization\": \"Basic xxx\" } } } ], \"tabAutocompleteModel\": { \"title\": \"Starcoder 3b\", \"provider\": \"ollama\", \"model\": \"starcoder2:3b\", \"apiBase\": \"https://ollama.local.example.com\", \"requestOptions\": { \"headers\": { \"Authorization\": \"Basic xxx\" } } }}Join the conversationYou know that video on self-hosted AI that I just released? Well I just followed up with one of the most in-depth tutorials I have ever released.FULL TUTORIAL HEREüëáhttps://t.co/5JAo9Phd1Y pic.twitter.com/zdqgd0IgS8&mdash; Techno Tim (@TechnoTimLive) July 8, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Self-Hosted AI That's Actually Useful", "url": "/posts/private-practical-local-ai/", "categories": "homelab, self-hosted", "tags": "ai, docker, software, llm, ollama, whisper", "date": "2024-07-05 08:00:00 -0500", "snippet": "I built a private, local, and self-hosted AI stack to help me out with daily tasks.üì∫ Watch VideoDisclosures Thanks to Surfshark Sponsoring this Video! Secure your privacy with Surfshark! Enter co...", "content": "I built a private, local, and self-hosted AI stack to help me out with daily tasks.üì∫ Watch VideoDisclosures Thanks to Surfshark Sponsoring this Video! Secure your privacy with Surfshark! Enter coupon code TechnoTim for 4 months EXTRA at https://surfshark.deals/TechnoTimInfoIf you‚Äôre looking for the tutorial to run this yourself, you can out the video here How to Self-Host Your Own Private AI StackFull tutorial coming soon on my other channel! TechnoTimTinkersHardware Machine Used for AI: Building My ULTIMATE, All-inOne, HomeLab ServerSoftware Ollama Open WebUI ComfyUI Stable Diffusion web UI pluja/whishper HuggingFace Home Assistant Wyoming Protocol Continue Code Assistant searXNG MacWhisperJoin the conversationAI should also be private, local, and useful. Here are some practical projects that prove it can be.https://t.co/2IQwvVbq5s pic.twitter.com/FU0a47K0uU&mdash; Techno Tim (@TechnoTimLive) July 5, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Track Changes Online with ChangeDetection, a Self-Hosted Docker Container!", "url": "/posts/change-detection-docker/", "categories": "homelab, hardware", "tags": "changedetection, docker, software", "date": "2024-06-21 08:00:00 -0500", "snippet": "Tracking things on the web just got a whole lot easier with ChangeDetection, the free and open source Docker container! Track website changes, price changes of products, and even track out of stoc...", "content": "Tracking things on the web just got a whole lot easier with ChangeDetection, the free and open source Docker container! Track website changes, price changes of products, and even track out of stock products with notifications all from a container you host yourself!üì∫ Watch VideoDisclosures Thanks to Docker for Sponsoring this Video! Get Actionable insights for software supply chain management with Docker Scout! https://dockr.ly/45HWDnRInfo‚≠ê ChangeDetection on GitHub: https://github.com/dgtlmoon/changedetection.ioDocker SetupSee this post on how to install docker and docker composePrepare Our ServerCreate folder for your compose and mountsmkdir changedetectioncd changedetectionThen we‚Äôll create a folder to hold our data and our datastoremkdir datacd datamkdir datastorecd datastorecd ../.. # go back to the root of changedetection/Create docker compose file and add contentstouch compose.yamlnano compose.yamlYour folder structure should look like this./changedetection‚îú‚îÄ‚îÄ data‚îÇ ‚îî‚îÄ‚îÄ datastore‚îî‚îÄ‚îÄ docker-compose.ymlTasks from Our Compose FileDocker Compose ContentsSimple version of change detection---services: changedetection: image: ghcr.io/dgtlmoon/changedetection.io:latest container_name: changedetection hostname: changedetection environment: # - BASE_URL=https://mysite.com # configure this for your own domain volumes: - ./data/datastore:/datastore ports: - 5000:5000Advanced version of change detectionIf you want to use Selenium + Webdriver, uncomment the WEBDRIVER_URL variable and the browser-chrome service, and then comment out PLAYWRIGHT_DRIVER_URL variable and playwright-chrome service.To see all supported configurations, see the Docker compose file on github---services: changedetection: image: ghcr.io/dgtlmoon/changedetection.io:latest container_name: changedetection hostname: changedetection volumes: - ./data/datastore:/datastore ports: - 5000:5000 environment: # - WEBDRIVER_URL=http://playwright-chrome:4444/wd/hub - PLAYWRIGHT_DRIVER_URL=ws://playwright-chrome:3000 # - BASE_URL=https://mysite.com # configure this for your own domain depends_on: playwright-chrome: condition: service_started restart: unless-stopped # browser-chrome: # hostname: browser-chrome # image: selenium/standalone-chrome:125.0 # shm_size: '2gb' # # volumes: # # # Workaround to avoid the browser crashing inside a docker container # # # See https://github.com/SeleniumHQ/docker-selenium#quick-start # # - /dev/shm:/dev/shm # restart: unless-stopped playwright-chrome: hostname: playwright-chrome image: browserless/chrome restart: unless-stopped environment: - SCREEN_WIDTH=1920 - SCREEN_HEIGHT=1024 - SCREEN_DEPTH=16 - ENABLE_DEBUGGER=false - PREBOOT_CHROME=true - CONNECTION_TIMEOUT=300000 - MAX_CONCURRENT_SESSIONS=10 - CHROME_REFRESH_TIME=600000 - DEFAULT_BLOCK_ADS=true - DEFAULT_STEALTH=true # Ignore HTTPS errors, like for self-signed certs - DEFAULT_IGNORE_HTTPS_ERRORS=trueChrome ExtensionIf you want to install the Chrome Extenions, you can but adding it here https://chromewebstore.google.com/detail/changedetectionio-website/kefcfmgmlhmankjmnbijimhofdjekbop?hl=enThen all you need to do to configure it is visit your ChangeDetection site and click Settings and it will automatically configure it for you!Then when visiting a site, all you need to do it click the extension and click add!Join the conversationThis week I spun up ChangeDetection, a free and open source (and self-hosted) container to help you track things on the web! Check it out!https://t.co/Kmi5i94GcJ pic.twitter.com/s1uteYMHtH&mdash; Techno Tim (@TechnoTimLive) June 21, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "TrueNAS vs Unraid - Which one is the BEST NAS OS for my HomeLab", "url": "/posts/truenas-vs-unraid/", "categories": "homelab, hardware", "tags": "truenas, unraid, homelab, hardware, software", "date": "2024-06-09 08:00:00 -0500", "snippet": "Which is the best NAS operating system to use at home and in your HomeLab?Is it Unraid for maximizing storage efficiency?Or is it TrueNAS for bringing enterprise ZFS to home?Let‚Äôs find out.üì∫ Watch ...", "content": "Which is the best NAS operating system to use at home and in your HomeLab?Is it Unraid for maximizing storage efficiency?Or is it TrueNAS for bringing enterprise ZFS to home?Let‚Äôs find out.üì∫ Watch VideoDisclosures This video is NOT sponsored. I bought Unraid with my own money. If you‚Äôd like see more sponsor-free videos, see one of the ways to support me below!Ways to support Support me on Patreon: https://www.patreon.com/technotim Sponsor me on GitHub: https://github.com/sponsors/timothystewart6 Subscribe on Twitch: https://www.twitch.tv/technotim Become a YouTube member: https://www.youtube.com/channel/UCOk-gHyjcWZNj3Br4oxwh0A/join Merch Shop üõçÔ∏è: https://l.technotim.live/shopJoin the conversationWhich is the best NAS operating system to use at home and in your HomeLab? Is it Unraid for maximizing storage efficiency? Or is it TrueNAS for bringing enterprise ZFS to home? Let&#39;s find out.https://t.co/IoAHmiSev1 pic.twitter.com/Zn9zu1Ogy2&mdash; Techno Tim (@TechnoTimLive) June 9, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Proxmox Automation with Proxmox Helper Scripts!", "url": "/posts/proxmox-helper-scripts/", "categories": "proxmox", "tags": "proxmox, homelab, lxc, docker, virtualization", "date": "2024-05-30 08:00:00 -0500", "snippet": "Proxmox helper scripts is a collection of scripts to help you easily make changes to your Proxmox VE server along with installing many LXC Containers. This makes installing, configuring, and main...", "content": "Proxmox helper scripts is a collection of scripts to help you easily make changes to your Proxmox VE server along with installing many LXC Containers. This makes installing, configuring, and maintaining your Proxmox server in your HomeLab along with many applications as simple as running a script.üì∫ Watch Video Note: ttek who created the scripts initially is no longer able to maintain these scripts due to health issues. We thank ttek for his contributions and wish him the best. He has turned it over the the community and links in this post were updated to reflect the community versionCheck out Proxmox VE Helper Scripts on Github: https://github.com/community-scripts/ProxmoxVE This is the new community version of the repoDisclosures Nothing in this video was sponsoredNotes Note: Be sure to always inspect any script before executing it, whether local or from the internet!You can find the website here: https://community-scripts.github.io/Proxmox/scripts This is the new community version of the siteIf you want to execute scripts from a commit SHA (somewhat immutable), you can execute the script like so (commit SHA of the date this video was released): Visit the link with a commit hash https://github.com/community-scripts/ProxmoxVE/blob/a4a1821822f0f00fde56bc9b1ebe7204f5e01c08 This is the new community version of the repo Find your script (homeassistant-core-install.sh) choose the RAW option This will create a link like https://raw.githubusercontent.com/community-scripts/ProxmoxVE/a4a1821822f0f00fde56bc9b1ebe7204f5e01c08/install/homeassistant-core-install.shYou can now use this hash to execute this script. This will ensure that you can run this repeatable (and not always latest)bash -c \"$(wget -qLO - https://raw.githubusercontent.com/community-scripts/ProxmoxVE/a4a1821822f0f00fde56bc9b1ebe7204f5e01c08/install/homeassistant-core-install.sh)\"You can reuse this commit SHA for all other scripts (just replace the path)Join the conversationThis past week I got to learn all about Proxmox Helper Scripts, a wonderful collection of scripts to help you automate common tasks with Proxmox along with LXC container installs!https://t.co/CRuExA8Ik2 pic.twitter.com/1u1JRWGEav&mdash; Techno Tim (@TechnoTimLive) May 30, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "I tried Unraid for the FIRST time in 2024", "url": "/posts/unraid-first-time/", "categories": "homelab, hardware", "tags": "unraid, homelab, hardware, software", "date": "2024-05-24 08:00:00 -0500", "snippet": "I knew nothing about Unraid until today. I finally installed Unraid in my HomeLab on one of my servers. Is it any good? Does it live up to the hype? Let‚Äôs find out in my candid walkthrough of Un...", "content": "I knew nothing about Unraid until today. I finally installed Unraid in my HomeLab on one of my servers. Is it any good? Does it live up to the hype? Let‚Äôs find out in my candid walkthrough of Unraid as you see and hear my successes as well as my struggles.üì∫ Watch VideoDisclosures This video is NOT sponsored. I bought Unraid with my own money. If you‚Äôd like see more sponsor-free videos, see one of the ways to support me below!Quality USB Drives SAMSUNG FIT Plus: https://amzn.to/3VfsHvR SanDisk Ultra Fit: https://amzn.to/3WP2zcm PNY Elite-X Fit: https://amzn.to/3wFqoZBUnraid License Unraid Buying Options: https://l.technotim.live/unraid(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Ways to support Support me on Patreon: https://www.patreon.com/technotim Sponsor me on GitHub: https://github.com/sponsors/timothystewart6 Subscribe on Twitch: https://www.twitch.tv/technotim Become a YouTube member: https://www.youtube.com/channel/UCOk-gHyjcWZNj3Br4oxwh0A/join Merch Shop üõçÔ∏è: https://l.technotim.live/shopJoin the conversationThis past week, I tried Unraid so that you don&#39;t have to. Is it any good in 2024? Let&#39;s find outhttps://t.co/3k6aJpqjma pic.twitter.com/QKgH0kjQS4&mdash; Techno Tim (@TechnoTimLive) May 24, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Replacing the microSD with something MUCH FASTER!", "url": "/posts/no-more-microsd/", "categories": "homelab, hardware", "tags": "pi, raspberry-pi, microsd, ssd, hardware", "date": "2024-05-17 08:00:00 -0500", "snippet": "Today I got rid of the slow and pesky microSD card in my Pi and replaced it with something MUCH faster in my Pi LED Panel. Don‚Äôt know what my Pi LED Panel is? Check it out! This is my first video...", "content": "Today I got rid of the slow and pesky microSD card in my Pi and replaced it with something MUCH faster in my Pi LED Panel. Don‚Äôt know what my Pi LED Panel is? Check it out! This is my first video on the new channel @TechnoTimTinkers üéâüì∫ Watch VideoDisclosures: nothing in this video was sponsoredPartsThings mentioned in the video (some are affiliate links) : Pi 4 8GB: https://amzn.to/4dG93QP USB to SATA Adapter: https://amzn.to/3QNr4CU Shadow Box (similar to mine, 12‚Äùx16‚Äù): https://amzn.to/4dU7vTs Cheapest SSD I could find: https://amzn.to/3QPzQQG 32x32 LED Panel: https://www.adafruit.com/product/607 Matrix LED Hat: https://www.adafruit.com/product/2345 Rainbow Ribbon Cable: https://amzn.to/3V3pz62 5v/10a AC to DC Power Supply: https://amzn.to/3K5b5MT Desk Mount for Camera - https://amzn.to/4dDvSV8 Phone Mount Adapter - https://amzn.to/3yquo0m(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)NotesThis project was built using rpi-rgb-led-matrixAfter getting the new power supply I noticed a few odd things When powered via hat only with the new 5v/10a AC to DC power supply, the USB drive wasn‚Äôt recognized When powering via USB-C 5v/5a the LED panel was too dim to display some colors so it looked distortedI read the Pi hat documentation over and over, and no where did it mention that anything else was needed other than a large power supply. I thought for sure it was now a hardware issue and was in over my head. I dropped a message in a Discord that both Jeff Geerling and I are in and he mentioned checking out this postIn that post it suggests to add max_usb_current=1 to your config.txt.I tested it and sure enough the Pi can now power the LED panel, the Pi, and the USB drive all from a single power supply connected to the hat. üéâThanks Jeff!Join the conversationI just posted my first video on the new (3rd) channel &quot;Techno Tim Tinkers&quot;. üéâ. . It&#39;s a project that I have been putting off forever...https://t.co/aL1k98Z9rO&lt;/p&gt;&mdash; Techno Tim (@TechnoTimLive) May 17, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Building My ULTIMATE, All-inOne, HomeLab Server", "url": "/posts/ultimate-homelab-server/", "categories": "homelab, hardware", "tags": "homelab, hardware, 45drives, nas, proxmox, unraid, ubuntu", "date": "2024-05-10 08:00:00 -0500", "snippet": "Today I built the ultimate, all in one, HomeLab Home Server to handle everything.üì∫ Watch VideoDisclosures: Sliger did send this case to me however asked for nothing in return.Other 4u Cases Slige...", "content": "Today I built the ultimate, all in one, HomeLab Home Server to handle everything.üì∫ Watch VideoDisclosures: Sliger did send this case to me however asked for nothing in return.Other 4u Cases Sliger CX4150a - https://www.sliger.com/products/rackmount/4u/cx4150a/ SilverStone RM44 4U - https://amzn.to/3K0wpmk RackChoice 4U - https://amzn.to/3UB8bEfOther Parts Samsung SSDs - https://amzn.to/3USTxtj Corsair Airflow Case (newer) - https://amzn.to/44BV0HI 10g Ethernet adapter - https://amzn.to/3wkN0hP LSI HBA - https://amzn.to/3UWBuCN(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Join the conversationToday I built the ultimate, all in one, HomeLab server to handle everything.https://t.co/K8YbJ3XKTl pic.twitter.com/qD2K6A46D5&mdash; Techno Tim (@TechnoTimLive) May 10, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Traefik 3 and FREE Wildcard Certificates with Docker", "url": "/posts/traefik-3-docker-certificates/", "categories": "homelab", "tags": "traefik, docker, cloudflare, pihole, lets-encrypt", "date": "2024-04-30 08:00:00 -0500", "snippet": "In today‚Äôs Traefik tutorial we‚Äôll get FREE Wildcard certificates to use in our HomeLab and with all of our internal self-hosted services. We‚Äôre going to set up Traefik 3 in Docker and get Let‚Äôs En...", "content": "In today‚Äôs Traefik tutorial we‚Äôll get FREE Wildcard certificates to use in our HomeLab and with all of our internal self-hosted services. We‚Äôre going to set up Traefik 3 in Docker and get Let‚Äôs Encrypt certificates using Cloudflare as our DNS Provider (we‚Äôll cover how to set up others too). Then we‚Äôll configure local DNS using PiHole (or any other local DNS) to route to our services that are now protected with secure certificates!üì∫ Watch VideoDisclosures Video was sponsored by UptimeRobot Save 20% on UptimeRobot https://l.technotim.live/uptime-robot-technotim! Looking to do this same thing in Kubernetes? Check out traefik + cert-manager on Kubernetes Looking for the Traefik + Portainer guide? Check out traefik + portainer on DockerFor reference, the following folder structure was used:./traefik‚îú‚îÄ‚îÄ data‚îÇ¬†¬† ‚îú‚îÄ‚îÄ acme.json‚îÇ¬†¬† ‚îú‚îÄ‚îÄ config.yml‚îÇ¬†¬† ‚îî‚îÄ‚îÄ traefik.yml‚îî‚îÄ‚îÄ cf_api_token.txt‚îî‚îÄ‚îÄ docker-compose.ymlYou can also do this with other DNS providers too!Docker SetupSee this post on how to install docker and docker-composePrepare Our ServerCreate folder for your compose and mountsmkdir docker_volumescd docker_volumesthen we‚Äôll create a folder to hold traefik filesmkdir traefikcd traefikcreate docker compose file and add contentstouch docker-compose.yamlnano docker-compose.yamlTasks from Our Compose FileDocker Compose Contentsdocker-compose.yamlversion: \"3.8\"services: traefik: image: traefik:v3.0 container_name: traefik restart: unless-stopped security_opt: - no-new-privileges:true networks: - proxy ports: - 80:80 - 443:443 # - 443:443/tcp # Uncomment if you want HTTP3 # - 443:443/udp # Uncomment if you want HTTP3 environment: CF_DNS_API_TOKEN_FILE: /run/secrets/cf_api_token # note using _FILE for docker secrets # CF_DNS_API_TOKEN: ${CF_DNS_API_TOKEN} # if using .env TRAEFIK_DASHBOARD_CREDENTIALS: ${TRAEFIK_DASHBOARD_CREDENTIALS} secrets: - cf_api_token env_file: .env # use .env volumes: - /etc/localtime:/etc/localtime:ro - /var/run/docker.sock:/var/run/docker.sock:ro - ./data/traefik.yml:/traefik.yml:ro - ./data/acme.json:/acme.json # - ./data/config.yml:/config.yml:ro labels: - \"traefik.enable=true\" - \"traefik.http.routers.traefik.entrypoints=http\" - \"traefik.http.routers.traefik.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.middlewares.traefik-auth.basicauth.users=${TRAEFIK_DASHBOARD_CREDENTIALS}\" - \"traefik.http.middlewares.traefik-https-redirect.redirectscheme.scheme=https\" - \"traefik.http.middlewares.sslheader.headers.customrequestheaders.X-Forwarded-Proto=https\" - \"traefik.http.routers.traefik.middlewares=traefik-https-redirect\" - \"traefik.http.routers.traefik-secure.entrypoints=https\" - \"traefik.http.routers.traefik-secure.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.routers.traefik-secure.middlewares=traefik-auth\" - \"traefik.http.routers.traefik-secure.tls=true\" - \"traefik.http.routers.traefik-secure.tls.certresolver=cloudflare\" - \"traefik.http.routers.traefik-secure.tls.domains[0].main=local.example.com\" - \"traefik.http.routers.traefik-secure.tls.domains[0].sans=*.local.example.com\" - \"traefik.http.routers.traefik-secure.service=api@internal\"secrets: cf_api_token: file: ./cf_api_token.txtnetworks: proxy: external: truedata foldermkdir datacd datatouch acme.jsonchmod 600 acme.jsonTraefik Configtouch traefik.ymlnano traefik.ymltraefik.yml contents:api: dashboard: true debug: trueentryPoints: http: address: \":80\" http: redirections: entryPoint: to: https scheme: https https: address: \":443\"serversTransport: insecureSkipVerify: trueproviders: docker: endpoint: \"unix:///var/run/docker.sock\" exposedByDefault: false # file: # filename: /config.ymlcertificatesResolvers: cloudflare: acme: email: youremail@email.com storage: acme.json # caServer: https://acme-v02.api.letsencrypt.org/directory # prod (default) caServer: https://acme-staging-v02.api.letsencrypt.org/directory # staging dnsChallenge: provider: cloudflare #disablePropagationCheck: true # uncomment this if you have issues pulling certificates through cloudflare, By setting this flag to true disables the need to wait for the propagation of the TXT record to all authoritative name servers. #delayBeforeCheck: 60s # uncomment along with disablePropagationCheck if needed to ensure the TXT record is ready before verification is attempted resolvers: - \"1.1.1.1:53\" - \"1.0.0.1:53\"Create Docker Networkdocker network create proxyCloudflare API Token Secrettouch cf_api_token.txtnano cf_api_token.txtPaste your token into file from CloudflareTraefik Dashboard Password &amp; .envmake sure you have htpasswd installed.To install on Linuxsudo apt updatesudo apt install apache2-utilsMac OS (should already be installed)Windowshtpasswd.exe Should already be installed on WindowsGenerate credential pairecho $(htpasswd -nB user) | sed -e s/\\\\$/\\\\$\\\\$/gtouch .envnano .envpaste your credential pair:e.g.TRAEFIK_DASHBOARD_CREDENTIALS=user:$$2y$$05$$lSaEi.G.aIygyXRdiFpt7OqmUMW9QUG5I1N.j0bXoXxIjxQmoGOWuStart the stackdocker compose up -d --force-recreateTroubleshootingCommon ways to troubleshootdocker psdocker logs traefikdocker exec -it traefik /bin/shinside of containertoplscat acme.jsoncat traefik.ymlls /run/secretscat /run/secrets/cf_api_tokenecho ${CF_DNS_API_TOKEN_FILE}echo ${TRAEFIK_DASHBOARD_CREDENTIALS}DNSnslookup traefik-dashboard.local.example.comSwitch to Production Acme Endpoints... caServer: https://acme-v02.api.letsencrypt.org/directory # prod (default) #caServer: https://acme-staging-v02.api.letsencrypt.org/directory # staging...Clear out the existing staging certificatescd datanano acme.jsonClear and saveRestart the stackdocker compose up -d --force-recreateAdding Another Workload (NGINX Demo)mkdir nginxcd nginxtouch docker-compose.yamlnano docker-compose.yamlContents of docker-compose.yamlversion: '3.8'services: nginx: image: nginxdemos/nginx-hello labels: - \"traefik.enable=true\" - \"traefik.http.routers.nginx.rule=Host(`nginx.local.example.com`)\" - \"traefik.http.routers.nginx.entrypoints=https\" - \"traefik.http.routers.nginx.tls=true\" - \"traefik.http.services.nginx.loadbalancer.server.port=8080\" networks: - proxynetworks: proxy: external: trueCheck DNSnslookup nginx.local.example.comStart the new NGINX Stackdocker compose up -d --force-recreateAdding External RoutesUncomment a few things:In docker-compose.yaml... - ./data/config.yml:/config.yml:ro...in traefik.yml... file: filename: /config.yml...Create configcd datatouch config.ymlnano config.ymlContents of config.ymlhttp: #region routers routers: proxmox: entryPoints: - \"https\" rule: \"Host(`proxmox.local.example.com`)\" middlewares: - default-headers - https-redirectscheme tls: {} service: proxmox pihole: #endregion#region services services: proxmox: loadBalancer: servers: - url: \"https://192.168.0.17:8006\" passHostHeader: true#endregion middlewares: https-redirectscheme: redirectScheme: scheme: https permanent: true default-headers: headers: frameDeny: true browserXssFilter: true contentTypeNosniff: true forceSTSHeader: true stsIncludeSubdomains: true stsPreload: true stsSeconds: 15552000 customFrameOptionsValue: SAMEORIGIN customRequestHeaders: X-Forwarded-Proto: https default-whitelist: ipAllowList: sourceRange: - \"10.0.0.0/8\" - \"192.168.0.0/16\" - \"172.16.0.0/12\" secured: chain: middlewares: - default-whitelist - default-headersRestart the stackdocker compose up -d --force-recreateTo see more examples of commonly used services check out config.yml in the reference filesFinal Production FilesTraefik docker-compose.yamlversion: \"3.8\"services: traefik: image: traefik:v3.0 container_name: traefik restart: unless-stopped security_opt: - no-new-privileges:true networks: - proxy ports: - 80:80 - 443:443 # - 443:443/tcp # Uncomment if you want HTTP3 # - 443:443/udp # Uncomment if you want HTTP3 environment: CF_DNS_API_TOKEN_FILE: /run/secrets/cf_api_token # note using _FILE for docker secrets # CF_DNS_API_TOKEN: ${CF_DNS_API_TOKEN} # if using .env TRAEFIK_DASHBOARD_CREDENTIALS: ${TRAEFIK_DASHBOARD_CREDENTIALS} secrets: - cf_api_token env_file: .env # use .env volumes: - /etc/localtime:/etc/localtime:ro - /var/run/docker.sock:/var/run/docker.sock:ro - ./data/traefik.yml:/traefik.yml:ro - ./data/acme.json:/acme.json - ./data/config.yml:/config.yml:ro labels: - \"traefik.enable=true\" - \"traefik.http.routers.traefik.entrypoints=http\" - \"traefik.http.routers.traefik.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.middlewares.traefik-auth.basicauth.users=${TRAEFIK_DASHBOARD_CREDENTIALS}\" - \"traefik.http.middlewares.traefik-https-redirect.redirectscheme.scheme=https\" - \"traefik.http.middlewares.sslheader.headers.customrequestheaders.X-Forwarded-Proto=https\" - \"traefik.http.routers.traefik.middlewares=traefik-https-redirect\" - \"traefik.http.routers.traefik-secure.entrypoints=https\" - \"traefik.http.routers.traefik-secure.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.routers.traefik-secure.middlewares=traefik-auth\" - \"traefik.http.routers.traefik-secure.tls=true\" - \"traefik.http.routers.traefik-secure.tls.certresolver=cloudflare\" - \"traefik.http.routers.traefik-secure.tls.domains[0].main=local.example.com\" - \"traefik.http.routers.traefik-secure.tls.domains[0].sans=*.local.example.com\" - \"traefik.http.routers.traefik-secure.service=api@internal\"secrets: cf_api_token: file: ./cf_api_token.txtnetworks: proxy: external: truetraefik.ymlapi: dashboard: true debug: trueentryPoints: http: address: \":80\" http: redirections: entryPoint: to: https scheme: https https: address: \":443\"serversTransport: insecureSkipVerify: trueproviders: docker: endpoint: \"unix:///var/run/docker.sock\" exposedByDefault: false file: filename: /config.ymlcertificatesResolvers: cloudflare: acme: email: youremail@email.com storage: acme.json caServer: https://acme-v02.api.letsencrypt.org/directory # prod (default) # caServer: https://acme-staging-v02.api.letsencrypt.org/directory # staging dnsChallenge: provider: cloudflare #disablePropagationCheck: true # uncomment this if you have issues pulling certificates through cloudflare, By setting this flag to true disables the need to wait for the propagation of the TXT record to all authoritative name servers. #delayBeforeCheck: 60s # uncomment along with disablePropagationCheck if needed to ensure the TXT record is ready before verification is attempted resolvers: - \"1.1.1.1:53\" - \"1.0.0.1:53\"config.ymlhttp: #region routers routers: proxmox: entryPoints: - \"https\" rule: \"Host(`proxmox.local.example.com`)\" middlewares: - default-headers - https-redirectscheme tls: {} service: proxmox pihole: #endregion#region services services: proxmox: loadBalancer: servers: - url: \"https://192.168.0.17:8006\" passHostHeader: true#endregion middlewares: https-redirectscheme: redirectScheme: scheme: https permanent: true default-headers: headers: frameDeny: true browserXssFilter: true contentTypeNosniff: true forceSTSHeader: true stsIncludeSubdomains: true stsPreload: true stsSeconds: 15552000 customFrameOptionsValue: SAMEORIGIN customRequestHeaders: X-Forwarded-Proto: https default-whitelist: ipAllowList: sourceRange: - \"10.0.0.0/8\" - \"192.168.0.0/16\" - \"172.16.0.0/12\" secured: chain: middlewares: - default-whitelist - default-headersJoin the conversationTraefik 3 is here! So, today we&#39;ll get trusted certificates with Let&#39;s Encrypt for all of our self-hosted services! No more https warnings and no more weird ports!https://t.co/MoRKYXvA0M pic.twitter.com/5OR22iRJRJ&mdash; Techno Tim (@TechnoTimLive) April 30, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "FINALLY! A New UniFi Dream Machine!", "url": "/posts/udm-pro-max/", "categories": "homelab", "tags": "udm, unifi, ubiquiti, networking", "date": "2024-04-23 08:00:00 -0500", "snippet": "The UDM Pro Max is here and it‚Äôs packed with upgrades like a faster CPU, more RAM, an internal SSD, more eMMC, Dual Drive bays and more! Today we check on the new UniFi Dream Machine Pro Max, conf...", "content": "The UDM Pro Max is here and it‚Äôs packed with upgrades like a faster CPU, more RAM, an internal SSD, more eMMC, Dual Drive bays and more! Today we check on the new UniFi Dream Machine Pro Max, configure and test Shadow Mode, and test network throughput to see if this really is the fastest UniFi Dram Machine yet.üì∫ Watch Video Get your UDM Pro Max here: https://l.technotim.live/udm-pro-max (affiliate link)Disclosures: Nothing in this video was sponsored Products were given for testing the new Shadow Mode feature and the new UniFi OS4 (coming soon). I wasn‚Äôt paid money.Join the conversationA new UDM, the UniFi Dream Machine Pro Max.I spent a lot of time testing this device, does it out perform its predecessors? https://t.co/t5UjJxJ61H pic.twitter.com/s9vjJnaeWy&mdash; Techno Tim (@TechnoTimLive) April 23, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Advanced Kubernetes Networking with Multus (It's easier than you think)", "url": "/posts/advanced-kubernetes-networking/", "categories": "homelab", "tags": "multus, kubernetes, networking, rke2, k3s, cni, cilium", "date": "2024-04-14 08:00:00 -0500", "snippet": "I just discovered Multus and it fixed Kubernetes networking! In this video we cover a lot of Kubernetes networking topics from beginner topics like CNIs, to advanced topics like adding Multus for ...", "content": "I just discovered Multus and it fixed Kubernetes networking! In this video we cover a lot of Kubernetes networking topics from beginner topics like CNIs, to advanced topics like adding Multus for more traditional networking within Kubernetes - which fixes a lot of problems you see with Kubernetes networking. Also, I had to turn the nerd up to 11 on this one.üì∫ Watch Video Be sure to check out and ‚≠ê the Multus repo on GitHub! Network diagram created with Excalidraw https://github.com/excalidraw/excalidraw Much of the documentation and diagrams we walked through can be found on DevOpsTales Huge thanks to the folks over in the Home Operations Discord too! Huge thanks to Andy (@clemenko) for helping me troubleshoot and diagnose issues with Multus/RKE2/CiliumDisclosures: Nothing in this video was sponsoredInstalling MultusMultus can be installed a few different ways. The best thing to do is check with your Kubernetes distribution if they support enabling this with configuration. If they do, this is much easier than installing it yourself Installing Multus with K3s Installing Multus on RKE2 Installing Multus without your distribution‚Äôs helpBe sure to apply any additional config mentioned in the above links. This will most likely include configuration for your CNI to allow multus to plug into it.Since I was using RKE2, I needed to apply this HelmChartConfig to configure Cilium to work with MultusDo not apply this unless you are also using Cilium and RKE2/# /var/lib/rancher/rke2/server/manifests/rke2-cilium-config.yaml---apiVersion: helm.cattle.io/v1kind: HelmChartConfigmetadata: name: rke2-cilium namespace: kube-systemspec: valuesContent: |- cni: exclusive: falseConfiguring MultusFirst check to see that it‚Äôs installedkubectl get pods --all-namespaces | grep -i multusYou should see something similar to the output below. This will vary depending on how you installed multus.kube-system rke2-multus-4kbbv 1/1 Running 0 30hkube-system rke2-multus-qbhrb 1/1 Running 0 30hkube-system rke2-multus-rmh9l 1/1 Running 0 30hkube-system rke2-multus-vbpr5 1/1 Running 0 30hkube-system rke2-multus-x4bpg 1/1 Running 0 30hkube-system rke2-multus-z22sq 1/1 Running 0 30hWe will need to create a NetworkAttachmentDefinition# network-attachment-definition.yaml---apiVersion: \"k8s.cni.cncf.io/v1\"kind: NetworkAttachmentDefinitionmetadata: name: multus-iot namespace: defaultspec: config: |- { \"cniVersion\": \"0.3.1\", \"type\": \"ipvlan\", \"master\": \"eth1\", \"ipam\": { \"type\": \"static\", \"routes\": [ { \"dst\": \"192.168.0.0/16\", \"gw\": \"192.168.20.1\" } ] } }Then apply this NetworkAttachmentDefinitionkubectl apply -f network-attachment-definition.yamlThen check to see if it was createdkubectl get network-attachment-definitions.k8s.cni.cncf.io multus-iotShould see something like:NAME AGEmultus-iot 30hYou can also describe it to see it contentskubectl describe network-attachment-definitions.k8s.cni.cncf.io multus-iotYou should see something like:Name: multus-iotNamespace: defaultLabels: &lt;none&gt;Annotations: &lt;none&gt;API Version: k8s.cni.cncf.io/v1Kind: NetworkAttachmentDefinitionMetadata: Creation Timestamp: 2024-04-14T04:56:02Z Generation: 1 Resource Version: 3215172 UID: 89b7f3d0-c094-4831-9b94-5ecdf6b38232Spec: Config: { \"cniVersion\": \"0.3.1\", \"type\": \"ipvlan\", \"master\": \"eth1\", \"ipam\": { \"type\": \"static\", \"routes\": [ { \"dst\": \"192.168.0.0/16\", \"gw\": \"192.168.20.1\" } ] }}Events: &lt;none&gt;Creating a Sample WorkloadLet‚Äôs create a sample pod and see if it gets our IP# sample-pod.yamlapiVersion: v1kind: Podmetadata: name: sample-pod namespace: default annotations: k8s.v1.cni.cncf.io/networks: | [{ \"name\": \"multus-iot\", \"namespace\": \"default\", \"mac\": \"c6:5e:a4:8e:7a:59\", \"ips\": [\"192.168.20.202/24\"] }]spec: containers: - name: sample-pod command: [\"/bin/ash\", \"-c\", \"trap : TERM INT; sleep infinity &amp; wait\"] image: alpineCheck to see if it‚Äôs runningkubectl get pod sample-podYou should see something like:NAME READY STATUS RESTARTS AGEsample-pod 1/1 Running 0 30hNow let‚Äôs describe the pod to see if it got our IPkubectl describe pod sample-podYou should see something like:‚ûú home-ops git:(master) k describe pod sample-podName: sample-podNamespace: defaultPriority: 0Service Account: defaultNode: k8s-home-worker-01/192.168.20.70Start Time: Sun, 14 Apr 2024 00:01:28 -0500Labels: &lt;none&gt;Annotations: k8s.v1.cni.cncf.io/network-status: [{ \"name\": \"portmap\", \"interface\": \"eth0\", \"ips\": [ \"10.42.4.89\" ], \"mac\": \"1a:af:f2:3f:32:f8\", \"default\": true, \"dns\": {}, \"gateway\": [ \"10.42.4.163\" ] },{ \"name\": \"default/multus-iot\", \"interface\": \"net1\", \"ips\": [ \"192.168.20.202\" ], \"mac\": \"bc:24:11:a0:4b:35\", \"dns\": {} }] k8s.v1.cni.cncf.io/networks: [{ \"name\": \"multus-iot\", \"namespace\": \"default\", \"mac\": \"c6:5e:a4:8e:7a:59\", \"ips\": [\"192.168.20.202/24\"] }]Status: RunningIP: 10.42.4.89IPs: IP: 10.42.4.89Containers: sample-pod: Container ID: containerd://fdd56e2fcdb3d587d792878285ef0fe50d076167d2b283dbf42aeb1b210d36cf Image: alpine Image ID: docker.io/library/alpine@sha256:c5b1261d6d3e43071626931fc004f70149baeba2c8ec672bd4f27761f8e1ad6b Port: &lt;none&gt; Host Port: &lt;none&gt; Command: /bin/ash -c trap : TERM INT; sleep infinity &amp; wait State: Running Started: Sun, 14 Apr 2024 00:01:29 -0500 Ready: True Restart Count: 0 Environment: &lt;none&gt; Mounts: /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-lggfv (ro)Conditions: Type Status Initialized True Ready True ContainersReady True PodScheduled TrueVolumes: kube-api-access-lggfv: Type: Projected (a volume that contains injected data from multiple sources) TokenExpirationSeconds: 3607 ConfigMapName: kube-root-ca.crt ConfigMapOptional: &lt;nil&gt; DownwardAPI: trueQoS Class: BestEffortNode-Selectors: &lt;none&gt;Tolerations: node.kubernetes.io/not-ready:NoExecute op=Exists for 300s node.kubernetes.io/unreachable:NoExecute op=Exists for 300sEvents: Type Reason Age From Message ---- ------ ---- ---- ------- Normal Scheduled 8s default-scheduler Successfully assigned default/sample-pod to k8s-home-worker-01 Normal AddedInterface 7s multus Add eth0 [10.42.4.89/32] from portmap Normal AddedInterface 7s multus Add net1 [192.168.20.202/24] from default/multus-iot Normal Pulling 7s kubelet Pulling image \"alpine\" Normal Pulled 7s kubelet Successfully pulled image \"alpine\" in 388.090289ms (388.099785ms including waiting) Normal Created 7s kubelet Created container sample-pod Normal Started 7s kubelet Started container sample-podYou should see an adapter added to the pod as well as an IP:...Normal AddedInterface 7s multus Add net1 [192.168.20.202/24] from default/multus-iot...Testing the WorkloadBe sure you can ping that new IP‚ûú home-ops git:(master) ping 192.168.20.202PING 192.168.20.202 (192.168.20.202): 56 data bytes64 bytes from 192.168.20.202: icmp_seq=0 ttl=63 time=0.839 ms64 bytes from 192.168.20.202: icmp_seq=1 ttl=63 time=0.876 ms64 bytes from 192.168.20.202: icmp_seq=2 ttl=63 time=0.991 ms64 bytes from 192.168.20.202: icmp_seq=3 ttl=63 time=0.812 msexec into the pod and test connectivity and DNSkubectl exec -it pods/sample-pod -- /bin/shOnce in ping your gateway, ping another device on the network, and ping something on the internet/ # ping 192.168.20.1PING 192.168.20.1 (192.168.20.1): 56 data bytes64 bytes from 192.168.20.1: seq=0 ttl=64 time=0.318 ms64 bytes from 192.168.20.1: seq=1 ttl=64 time=0.230 ms64 bytes from 192.168.20.1: seq=2 ttl=64 time=0.531 ms^C--- 192.168.20.1 ping statistics ---3 packets transmitted, 3 packets received, 0% packet lossround-trip min/avg/max = 0.230/0.359/0.531 ms/ # ping 192.168.20.52PING 192.168.20.52 (192.168.20.52): 56 data bytes64 bytes from 192.168.20.52: seq=0 ttl=255 time=88.498 ms64 bytes from 192.168.20.52: seq=1 ttl=255 time=3.375 ms64 bytes from 192.168.20.52: seq=2 ttl=255 time=25.688 ms^C--- 192.168.20.52 ping statistics ---3 packets transmitted, 3 packets received, 0% packet lossround-trip min/avg/max = 3.375/39.187/88.498 ms/ # ping google.comPING google.com (142.250.191.238): 56 data bytes64 bytes from 142.250.191.238: seq=0 ttl=111 time=8.229 ms64 bytes from 142.250.191.238: seq=1 ttl=111 time=8.578 ms64 bytes from 142.250.191.238: seq=2 ttl=111 time=8.579 ms^C--- google.com ping statistics ---3 packets transmitted, 3 packets received, 0% packet lossround-trip min/avg/max = 8.229/8.462/8.579 ms/ #Now test DNS by looking up something on the internet, something on your local network, and something inside of your cluster/ # nslookup google.comServer: 10.43.0.10Address: 10.43.0.10:53Non-authoritative answer:Name: google.comAddress: 142.250.191.238Non-authoritative answer:Name: google.comAddress: 2607:f8b0:4009:81b::200e/ # nslookup k8s-home-worker-01.local.techtronic.usServer: 10.43.0.10Address: 10.43.0.10:53Name: k8s-home-worker-01.local.techtronic.usAddress: 192.168.60.53Non-authoritative answer:/ # nslookup homepageServer: 10.43.0.10Address: 10.43.0.10:53** server can't find homepage.cluster.local: NXDOMAIN** server can't find homepage.svc.cluster.local: NXDOMAIN** server can't find homepage.cluster.local: NXDOMAIN** server can't find homepage.svc.cluster.local: NXDOMAINName: homepage.default.svc.cluster.localAddress: 10.43.143.7If all of the tests passed, you should be good!You can now do the same thing for your other workloads that need to use Multus!GotchasRKE2If you‚Äôre using RKE2 and you notice that your worker nodes are using the wrong IP address after adding an additional NIC, you can override the Node IP with config:# /etc/rancher/rke2/config.yamlnode-ip: 192.168.60.53 # the node's primary IP used for kubernetesnode-external-ip: 192.168.60.53 # the node's primary IP used for kubernetesYou will need to restart the rke service or reboot.Check withkubectl get nodes -o wideYou should then see the IP on the node (note my k8s-home-worker-01 has the fix, but k8s-home-worker-02 and k8s-home-worker-03 don‚Äôt)NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIMEk8s-home-01 Ready control-plane,etcd,master 5d v1.28.8+rke2r1 192.168.60.50 &lt;none&gt; Ubuntu 22.04.4 LTS 5.15.0-102-generic containerd://1.7.11-k3s2k8s-home-02 Ready control-plane,etcd,master 5d v1.28.8+rke2r1 192.168.60.51 &lt;none&gt; Ubuntu 22.04.4 LTS 5.15.0-102-generic containerd://1.7.11-k3s2k8s-home-03 Ready control-plane,etcd,master 5d v1.28.8+rke2r1 192.168.60.52 &lt;none&gt; Ubuntu 22.04.4 LTS 5.15.0-102-generic containerd://1.7.11-k3s2k8s-home-worker-01 Ready worker 5d v1.28.8+rke2r1 192.168.60.53 192.168.60.53 Ubuntu 22.04.4 LTS 5.15.0-102-generic containerd://1.7.11-k3s2k8s-home-worker-02 Ready worker 5d v1.28.8+rke2r1 192.168.20.71 &lt;none&gt; Ubuntu 22.04.4 LTS 5.15.0-102-generic containerd://1.7.11-k3s2k8s-home-worker-03 Ready worker 5d v1.28.8+rke2r1 192.168.20.72 &lt;none&gt; Ubuntu 22.04.4 LTS 5.15.0-102-generic containerd://1.7.11-k3s2You can see more flags on the RKE2 documentation pagecloud-init and routingI have also seen odd issues when with routing and using cloud init. I‚Äôve had to override some settings using netplanYou can see there is a misplaced route in your tables‚ûú ~ ip route192.168.20.0/24 dev eth1 proto kernel scope link src 192.168.20.72 metric 100192.168.20.1 dev eth1 proto dhcp scope link src 192.168.20.72 metric 100192.168.60.0/24 dev eth0 proto kernel scope link src 192.168.60.55 metric 100192.168.60.1 dev eth0 proto dhcp scope link src 192.168.60.55 metric 100192.168.60.10 via 192.168.20.1 dev eth1 proto dhcp src 192.168.20.72 metric 100 # wrong192.168.60.10 dev eth0 proto dhcp scope link src 192.168.60.55 metric 100192.168.60.22 via 192.168.20.1 dev eth1 proto dhcp src 192.168.20.72 metric 100 #wrong192.168.60.22 dev eth0 proto dhcp scope link src 192.168.60.55 metric 100To fix this, we need to override the routes with netplansudo nano /etc/netplan/50-cloud-init.yaml# This file is generated from information provided by the datasource. Changes# to it will not persist across an instance reboot. To disable cloud-init's# network configuration capabilities, write a file# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:# network: {config: disabled}network: version: 2 ethernets: eth0: addresses: - 192.168.60.55/24 match: macaddress: bc:24:11:f1:2a:e7 nameservers: addresses: - 192.168.60.10 - 192.168.60.22 routes: - to: default via: 192.168.60.1 set-name: eth0 eth1: addresses: - 192.168.20.65/24 match: macaddress: bc:29:71:9a:01:29 nameservers: addresses: - 192.168.60.10 - 192.168.60.22 routes: - to: 192.168.20.0/24 via: 192.168.20.1 set-name: eth1 eth2: addresses: - 192.168.40.52/24 match: macaddress: bc:24:11:3d:c9:f7 nameservers: addresses: - 192.168.60.10 - 192.168.60.22 routes: - to: 192.168.40.0/24 via: 192.168.40.1 set-name: eth2If you know of a better way to do this, please let me know in the comments.k3sYou will have to make some changes for this to work with k3s. Thanks ThePCGeek! # k3s multus installapiVersion: helm.cattle.io/v1kind: HelmChartmetadata: name: multus namespace: kube-systemspec: repo: https://rke2-charts.rancher.io chart: rke2-multus targetNamespace: kube-system # createNamespace: true valuesContent: |- config: cni_conf: confDir: /var/lib/rancher/k3s/agent/etc/cni/net.d clusterNetwork: /var/lib/rancher/k3s/agent/etc/cni/net.d/10-flannel.conflist binDir: /var/lib/rancher/k3s/data/current/bin/ kubeconfig: /var/lib/rancher/k3s/agent/etc/cni/net.d/multus.d/multus.kubeconfigmac-vlanI have also used this mac-vlan config below successfully---apiVersion: \"k8s.cni.cncf.io/v1\"kind: NetworkAttachmentDefinitionmetadata: name: multus-iot namespace: defaultspec: config: |- { \"cniVersion\": \"0.3.1\", \"name\": \"multus-iot\", \"plugins\": [ { \"type\": \"macvlan\", \"master\": \"eth1\", \"mode\": \"bridge\", \"capabilities\": { \"ips\": true }, \"ipam\": { \"type\": \"static\", \"routes\": [{ \"dst\": \"192.168.0.0/16\", \"gw\": \"192.168.20.1\" }] } } ] }Sample PodsapiVersion: v1kind: Podmetadata: name: sample-pod namespace: default annotations: k8s.v1.cni.cncf.io/networks: | [{ \"name\": \"multus-iot\", \"namespace\": \"default\", \"mac\": \"c6:5e:a4:8e:7a:59\", \"ips\": [\"192.168.20.210/24\"], \"gateway\": [ \"192.168.20.1\" ] }]spec: containers: - name: sample-pod command: [\"/bin/ash\", \"-c\", \"trap : TERM INT; sleep infinity &amp; wait\"] image: alpineJoin the conversationToday I released 40 minute, super niche technical video on advanced Kubernetes networking with Multus. I didn&#39;t do it for the algorithm, I did it because I loved every minute of it. (Well, after I got it working)https://t.co/O7sLjDIMXt pic.twitter.com/bBnBbmlsDx&mdash; Techno Tim (@TechnoTimLive) April 14, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "YOU Review MY HomeLab and Colocation Architecture!", "url": "/posts/homelab-colo-architecture-review/", "categories": "homelab", "tags": "homelab, datacenter, colocation, architecture, proxmox, rancher, unifi, flux, rke2, pihole", "date": "2024-04-05 08:00:00 -0500", "snippet": "After moving some of my HomeLab servers into the new colocation I have so many choices to make when it comes to services and architecture! From networking, to VPN, to security, to hypervisors, to b...", "content": "After moving some of my HomeLab servers into the new colocation I have so many choices to make when it comes to services and architecture! From networking, to VPN, to security, to hypervisors, to backups, and even DNS! I NEED YOUR HELP! Help me decide if I have created a solid foundation for my new HomeLab in a Colo!Network diagram created with Figmaüì∫ Watch VideoDisclosures: Nothing in this video was sponsoredFind your UniFi cloud gateway here: https://store.ui.com?a_aid=TechnoTim(Affiliate links are included in this description. I may receive a small commission at no cost to you.)Join the conversationAfter moving some of my HomeLab servers into the new colocation I have so many choices to make when it comes to services and architecture! https://t.co/J998yIGsaY&mdash; Techno Tim (@TechnoTimLive) April 5, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "I Colocated My HomeLab in a Data Center", "url": "/posts/homelab-datacenter-1/", "categories": "homelab", "tags": "homelab, datacenter, colocation", "date": "2024-03-21 08:00:00 -0500", "snippet": "After a few months of planning and building, I colocated some of my homelab servers in a data center! There were so many unknowns like, how much does colocating server cost? Do you need to bring y...", "content": "After a few months of planning and building, I colocated some of my homelab servers in a data center! There were so many unknowns like, how much does colocating server cost? Do you need to bring your own networking? How do you even prepare for this? Join me as we figure this all out!And don‚Äôt worry, I still have servers at home too!üì∫ Watch VideoDisclosures: Huge thanks to William for inviting me to his colo rack! Thanks to Ubiquiti for sending a UDM for my rack!Find your UniFi cloud gateway here: https://store.ui.com?a_aid=TechnoTim(Affiliate links are included in this description. I may receive a small commission at no cost to you.)Join the conversationWhat happens when you colocate some of your HomeLab servers into a Data Center? And a better question, is it still called a HomeLab?https://t.co/mfxl6elVEL pic.twitter.com/ee8iMH3R5Q&mdash; Techno Tim (@TechnoTimLive) March 21, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Meet LocalSend - A Cross Platform, Open Source Alternative to AirDrop", "url": "/posts/localsend/", "categories": "apps", "tags": "app, open-source, homelab, localsend, windows, android, ios, macos, linux", "date": "2024-03-09 07:00:00 -0600", "snippet": "LocalSend is an open source application that securely transfers files between devices without the internet. It‚Äôs cross platform meaning that it‚Äôs available for Windows, Mac, Linux, iOS (iPhone, i...", "content": "LocalSend is an open source application that securely transfers files between devices without the internet. It‚Äôs cross platform meaning that it‚Äôs available for Windows, Mac, Linux, iOS (iPhone, iPad), and Android devices. This is a great alternative to AirDrop or QuickSend and can send and receive files to other devices without a 3rd party service like Google Drive.üì∫ Watch VideoDisclosures: Nothing in this video was sponsoredDon‚Äôt forget to ‚≠ê localsend on GitHub!Installing on WindowsFrom a terminal:Using Wingetwinget install localsendUsing Chocolateychoco install localsendInstall from GitHubhttps://github.com/localsend/localsend/releasesInstalling on iOSApp Store recommended for most users.Download on the App StoreInstalling on AndroidApp Store recommended for most users.Get it on Google PlayInstall using an APK https://github.com/localsend/localsend/releasesInstalling on LinuxPackage Manager:Install with terminal.Ubuntu / DebianDownload deb file https://github.com/localsend/localsend/releasescd ~/Downloads #change to download foldersudo dpkg -i LocalSend-1.14.0-linux-x86-64.deb #change version to match downloadsudo apt install -f # install missing dependenciessudo dpkg -i LocalSend-1.14.0-linux-x86-64.deb #change version to match downloadFlathubflatpak install flathub org.localsend.localsend_appflatpak run org.localsend.localsend_appAURyay -S localsend-binNixnix-shell -p localsendpkgs.localsend # ConfigInstalling on macOSPackage Managers:Install with terminal.Homebrewbrew tap localsend/localsendbrew install localsendNixnix-shell -p localsendpkgs.localsend # ConfigBinaries:Download for offline usage. https://github.com/localsend/localsend/releasesApp Store recommended for most users.Download on the App StoreSee all releaseshttps://github.com/localsend/localsend/releasesJoin the conversationI found a free and open source alternative to AirDrop called LocalSend! It works with Windows, macOS, Android, and even Linux! Join me as I test it on every platform and see if I can transfer a file to every platform using this app!üëâhttps://t.co/iWcGjDL476 pic.twitter.com/K24T37TOoq&mdash; Techno Tim (@TechnoTimLive) March 9, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Meet Gatus - An Advanced Uptime Health Dashboard", "url": "/posts/gatus-uptime-monitoring/", "categories": "self-hosted", "tags": "gatus, dashboard, docker, open-source, homelab", "date": "2024-02-26 07:00:00 -0600", "snippet": "Meet Gatus a self-hosted, open source, health dashboard that lets you monitor all of you services and systems! This dashboard not only tracks your uptime, but also measure the results plotting the...", "content": "Meet Gatus a self-hosted, open source, health dashboard that lets you monitor all of you services and systems! This dashboard not only tracks your uptime, but also measure the results plotting the results on a chart over time. It also hooks into systems like Slack, Team, Discord, Twilio, and more! Join me as we configure and deploy Gatus into our own environment to measure and monitor all the things!üì∫ Watch VideoDisclosures: Nothing in this video was sponsoredDon‚Äôt forget to ‚≠ê Gatus on GitHub!Create Docker Composessh into serverMake a directory and cd into itmkdir gatus_uptimecd gatus_uptimeIn here we‚Äôre going to create a docker compose filetouch docker-compose.yamlnano docker-compose.yamlBasic Docker Composeversion: \"3.9\"services: gatus: image: twinproduction/gatus:latest restart: always ports: - \"8080:8080\" environment: - POSTGRES_USER=gatus_uptime_user # postgres user with access to the database - POSTGRES_PASSWORD=gatuspassword # postgres user password - POSTGRES_DB=gatus_uptime # this should be the name of your postgres database volumes: - ./config:/configPostgres DatabaseI am going use postgres to hold out data. Postgres is an open source object-relational database system that uses and extends the SQL language combined with many features that safely store and scale the most complicated data workloads. If you need to create a Postgres database, here‚Äôs the official Docker image. If you want to include Postgres in the same stack, you can see an example here. It also supports SQLite if you don‚Äôt want to use postgresUsing pgadmin (Windows/macOS/Linux support) or similar tools: Create database: gatus_uptime Create user: gatus_uptime_user Give user access to dbOnce you have that you should test your connection before proceeding.Gatus ConfigMake a config folder to house our config and create a config file.mkdir configcd configtouch config.yamlNow we need to create a config file for the sites we want to monitor.Place the following contents inside of the config.yamlstorage: type: postgres path: \"postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?sslmode=disable\"endpoints: - name: back-end group: core url: \"https://example.org/\" interval: 5m conditions: - \"[STATUS] == 200\" - \"[CERTIFICATE_EXPIRATION] &gt; 48h\" - name: monitoring group: internal url: \"https://example.org/\" interval: 5m conditions: - \"[STATUS] == 200\" - name: nas group: internal url: \"https://example.org/\" interval: 5m conditions: - \"[STATUS] == 200\" - name: example-dns-query url: \"8.8.8.8\" # Address of the DNS server to use interval: 5m dns: query-name: \"example.com\" query-type: \"A\" conditions: - \"[BODY] == 93.184.216.34\" - \"[DNS_RCODE] == NOERROR\" - name: icmp-ping url: \"icmp://example.org\" interval: 1m conditions: - \"[CONNECTED] == true\"Be sure to update the DB hostname with your IP if you‚Äôre using an external database.path: \"postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@192.168.30.240:5432/${POSTGRES_DB}?sslmode=disable\"You can use DNS here too if you like e.g. @database.example.com:5432Starting GatusNow we can start our containergatus docker compose up -dCheck to be sure the container is running with out errorsdocker logs gatus-gatus-1Before we check out the UI, let‚Äôs look at postgres and verify that tables were created in our database. You should see them listed here: gatus_uptime&gt;Schemas&gt;public&gt;TablesOnce we can seethat tables were created, now lets check out the UI.Gatus is hosted on the default port of 8080.Visit the IP with port in your browser:http://192.168.10.125:8080/Real World ExampleHere‚Äôs how I monitor my sites:storage: type: postgres path: \"postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@192.168.30.240:5432/${POSTGRES_DB}?sslmode=disable\"endpoint-defaults: &amp;defaults group: External interval: 30s client: timeout: 10s conditions: - \"[STATUS] == 200\" - \"[CERTIFICATE_EXPIRATION] &gt; 48h\"endpoints: - name: shop.technotim.live - HTTP &lt;&lt;: *defaults url: \"https://shop.technotim.live\" - name: technotim.live - HTTP &lt;&lt;: *defaults url: \"https://technotim.live\" - name: links.technotim.live - HTTP &lt;&lt;: *defaults url: \"https://links.technotim.live\" - name: l.technotim.live - HTTP &lt;&lt;: *defaults url: \"https://l.technotim.live\" - name: shop.technotim.live - DNS group: External url: \"8.8.8.8\" # Address of the DNS server to use interval: 5m dns: query-name: \"shop.technotim.live\" query-type: \"A\" conditions: - \"[BODY] == 23.227.38.74\" - \"[DNS_RCODE] == NOERROR\" - name: shop.technotim.live - Ping group: External url: \"icmp://shop.technotim.live\" interval: 1m conditions: - \"[CONNECTED] == true\" - name: Postgres group: Internal url: \"tcp://192.168.30.240:5432\" interval: 30s conditions: - \"[CONNECTED] == true\"AlertsGatus supports many systems for alertsTo keep it simple, we‚Äôre going to create a discord alert. First create a webhook in your discord server Then use that hook url in your configWe‚Äôll configure some defaults too so we can keep our endpoints tidy like so:alerting: discord: webhook-url: \"https://discord.com/api/webhooks/**********/**********\" default-alert: description: \"Health Check Failed\" send-on-resolved: true failure-threshold: 2 success-threshold: 2Then you‚Äôll need to update each endpoint with the alert: alerts: - type: discordOr, you can just add it to your anchor which will add it to allendpoint-defaults: &amp;defaults group: External interval: 30s client: timeout: 10s conditions: - \"[STATUS] == 200\" - \"[CERTIFICATE_EXPIRATION] &gt; 48h\" alerts: - type: discordNow let‚Äôs create some chaos. Take your site down After 2 time outs we get the alertsNow let‚Äôs test recovery Bring Site back up After 2 checks we can see the recovery alertFull config example:storage: type: postgres path: \"postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@192.168.30.240:5432/${POSTGRES_DB}?sslmode=disable\"alerting: discord: webhook-url: \"https://discord.com/api/webhooks/**********/**********\" default-alert: description: \"Health Check Failed\" send-on-resolved: true failure-threshold: 2 success-threshold: 2endpoint-defaults: &amp;defaults group: External interval: 15s client: timeout: 10s conditions: - \"[STATUS] == 200\" - \"[CERTIFICATE_EXPIRATION] &gt; 48h\" alerts: - type: discordendpoints: - name: shop.technotim.live - HTTP &lt;&lt;: *defaults url: \"https://shop.technotim.live\" - name: technotim.live - HTTP &lt;&lt;: *defaults url: \"https://technotim.live\" - name: links.technotim.live - HTTP &lt;&lt;: *defaults url: \"https://links.technotim.live\" - name: l.technotim.live - HTTP &lt;&lt;: *defaults url: \"https://l.technotim.live\" - name: shop.technotim.live - DNS group: External url: \"8.8.8.8\" # Address of the DNS server to use interval: 5m dns: query-name: \"shop.technotim.live\" query-type: \"A\" conditions: - \"[BODY] == 23.227.38.74\" - \"[DNS_RCODE] == NOERROR\" - name: shop.technotim.live - Ping group: External url: \"icmp://shop.technotim.live\" interval: 1m conditions: - \"[CONNECTED] == true\" - name: Postgres group: Internal url: \"tcp://192.168.30.240:5432\" interval: 30s conditions: - \"[CONNECTED] == true\"Join the conversationOver the last few weeks I have been looking for a more advanced self-hosted monitoring system. One that gives me more than just a simple up and down status and one that is config based. I think I found it!Check it out!üëâhttps://t.co/7Z2xGA0w65 pic.twitter.com/LkDOo3hPzo&mdash; Techno Tim (@TechnoTimLive) February 26, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Introducing, the Techno Tim Shop", "url": "/posts/techno-tim-shop-launch/", "categories": "life", "tags": "merch, dark-mode, homelab", "date": "2024-02-17 07:00:00 -0600", "snippet": "Today marks a very special day for me. It‚Äôs something I‚Äôve been working on for quite some time, and it‚Äôs finally ready for everyone to see! üéâToday, I launched the Techno Tim Shop with its first dro...", "content": "Today marks a very special day for me. It‚Äôs something I‚Äôve been working on for quite some time, and it‚Äôs finally ready for everyone to see! üéâToday, I launched the Techno Tim Shop with its first drop: the ‚ÄúDark Mode Everything‚Äù collection. This collection was designed in-house, quite literally, by my wife in our own house, and it represents my love for Dark Mode. There‚Äôs something for everyone in this collection.Keep in mind that this is not a print-on-demand service, so supplies are truly limited for this initial drop. Thank you all for helping me get to this point! I couldn‚Äôt have done it without you!https://shop.technotim.liveWhere to BuyYou can see all of the items I offer in my shop here: https://shop.technotim.live(Affiliate links may be included. I may receive a small commission at no cost to you.)Join the conversationToday marks a very special day for me. It&#39;s something I&#39;ve been working on for quite some time, and it&#39;s finally ready for everyone to see! üéâ Today, I launched the Techno Tim Shop with its first drop: the &quot;Dark Mode Everything&quot; collection. https://t.co/ZBMUFcvjjJ pic.twitter.com/KZYRFYAoAB&mdash; Techno Tim (@TechnoTimLive) February 17, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Optimizing TrueNAS for SPEED (and Safety)", "url": "/posts/truenas-performance-guide/", "categories": "truenas", "tags": "homelab, truenas, zfs", "date": "2024-02-09 07:00:00 -0600", "snippet": "After setting up your TrueNAS server there are lots of things to configure when it comes to tuning ZFS. From pools, to disk configuration, to cache to networking, backups and more. This guide wil...", "content": "After setting up your TrueNAS server there are lots of things to configure when it comes to tuning ZFS. From pools, to disk configuration, to cache to networking, backups and more. This guide will walk you through everything you should do after installing TrueNAS with a focus on speed, safety, and optimization.üì∫ Watch VideoDisclosures: Nothing in this video was sponsoredPool OptimizationsI chose Mirrored VDEVs for a few reasons:Upsides Provides redundancy Increased performance Great for small random reads Expansion, much easier than any other raid type You can expand by adding an additional pair This means I only need to buy 2 disks to expand my pool Resilvering is fast Downsides Write performance can be impacted since each write involves updating all VDEVS in a mirror Adding a separate ZIP like an SSD can improve write performance, which we‚Äôll talk about If I lose 2 drives in the same mirror I lose the whole pool Which means that I need to replace disks fast If your pool of mirrored VDEVs is big enough, the chances are less likely to happen 50% capacity lossDatasets Encryption: On Sync: Standard Compression: LZ4 Enabled Atime: Off ZFS Deduplication: OffARC Adaptive Replacement Cache, this is where data is stored that is frequently accessed along with metadata about the files. Algorithm for adding and evicting data for least recently used. This makes accessing files quicker because it doesn‚Äôt need to read from disk and takes the load off those disks so they can do another tasks This isn‚Äôt really used for write, that‚Äôs ZIL, but some async writes and write directly to ARC There‚Äôs a general rule of thumb that you should have 1GB for each TB, however the more the better. One tweak that you might have to do if using ZFS on a Linux system like TrueNAS Scale and that‚Äôs adjusting the ARC allocation This is not needed after this patch is released By default linux only allocates 50% You can override this with a quick command while the system is running and then you can also follow that up with a startup command to be sure that this persists between reboots Generally speaking you should let your system run for a few days before making this adjustment as well as running any services and VMs to be sure you don‚Äôt over allocate your RAM to ARC. See Tom Lawrence‚Äôs Video on this topic Read SpeedsTo increase read speeds: More RAM More disks / spindles L2ARC Stripe these, even 1 large SSD is good Write SpeedsTo increase write speeds: More Disks - spinning disks can only read/write at about 150 MB/s Disable Sync write? (No!, not safe) Create SLOG device Should use disks fast that in the pool like SSDs Be sure you have at least a mirror for this This moves ZIL off the main pool, which frees up the pool to do other things Network Considerations LAGG / LACP gives you 2 lanes Gives you redundancy Generally speaking if your switch supports it, a great ideaNetwork and disk speed go hand in hand If your pool can‚Äôt read at 10 Gb/s there‚Äôs no sense of having 10 gb/s networking If your disks have huge IOSps (think all SSD) your network can‚Äôt handle the throughput Somewhere in the middleVLAN Routing Another huge consideration is inter VLAN routing. If you have to cross VLANs, be sure that your switch or router can handle these speeds or you might have to get creative with a dedicated data network that doesn‚Äôt traverse VLANs.Snapshots This is diff based Fist will be relatively large Subsequent will be smaller My Settings: Lifetime of 2 weeks Enable Recursion Don‚Äôt allow taking empty snapshots Enable the scheduleBackups Yes, but hard to do on a budget Ideally you want to replicate these snapshots to another pool, preferably on another machineAlerts Check to be sure alerts are enabled and workingUPS Yes, enough saidWhere to BuyHere are some items I found useful when building my NAS Supermicro NVMe Add-in Card - https://www.ebay.com/itm/375100900409?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1 Dell NVMe Add-in Card - https://www.ebay.com/itm/164864777644?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1 M.2 Heatsink SSD Cooler for PS5 PCIE NVME - https://amzn.to/4bwsYAq Intel OPTANE SSD P1600X Series 118GB M.2 PCIE - https://amzn.to/497Np53 SAMSUNG 990 PRO Series - 2TB PCIe Gen4. X4 NVMe 2.0c - M.2 Internal SSD - https://amzn.to/4buzeZz Seagate IronWolf 12TB NAS Internal Hard Drive HDD - https://amzn.to/3usqnH8 Seagate Exos X18 ST14000NM000J 14 TB Hard Drive - https://amzn.to/3SC6ntT APC UPS 1500VA UPS Battery Backup and Surge Protector - https://amzn.to/499JvZx Tripp Lite SMART1500LCD 1500VA UPS Smart Battery Backup (rackmount) - https://amzn.to/3SOXhLr(Affiliate links may be included. I may receive a small commission at no cost to you.)Join the conversationOver the last few weeks while building my new TrueNAS server I learned a lot about ZFS and how to optimize my new NAS for performance.https://t.co/qvAJBBSCkA pic.twitter.com/6LB5IqHZo7&mdash; Techno Tim (@TechnoTimLive) February 9, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "PiKVM with TESmart KVM Fixed!", "url": "/posts/pikvm-tesmart/", "categories": "homelab", "tags": "homelab, hardware, pikvm, tesmart", "date": "2024-01-19 07:00:00 -0600", "snippet": "After many hours and testing, swapping, resetting, and EDID training, all of my PiKVM and TESmart issues were solved with with a simple, cheap dongle. If you aren‚Äôt aware of the struggles I faced ...", "content": "After many hours and testing, swapping, resetting, and EDID training, all of my PiKVM and TESmart issues were solved with with a simple, cheap dongle. If you aren‚Äôt aware of the struggles I faced when using the PiKVM with a TESmart switch, all of it is detailed in a previous post where I ended up settling on another switch altogether. That‚Äôs all changed now with a simple EDID emulator passthrough adapter (affiliate link). However, for the uninformed, I‚Äôll summarize the symptoms I experienced with the PiKVM and TESmart KVM and how I was able to fix these issues.My ExperienceWhen I originally set up my PiKVM (v3 at the time) I wanted to remote control more than one machine. I have a server rack and I rationalized that 8 would be a good number of machines to remote control and ultimately justify the cost of the hardware (cost spread over 8 machines). I also wanted something to rackmount since, after all, I have a server rack. That‚Äôs when I found the TESmart 8X1 HDMI KVM Switch 8 (affiliate link).It met all of my requirements: 8 ports Rackmountable Compatible with PiKVM (or so I thought)This device was listed as compatible with PiKVM so I thought it was a safe bet.I have (3) Intel NUC 11th Gen device I planned on connecting to this switch along with an old PC that has a ASUS Z87-PRO motherboard. I figured since they were all Intel based GPUs it was a safe bet. Boy was I wrong‚Ä¶Shortly after configuring the PiKVM with the TESmart KVM and my devices it was clear that something was definitely wrong.As you can see, 1 out of 3 devices work. All 3 are the same model. Usually none of them work even after properly training them.Some of the symptoms were: Black screen without any video When switching machines, you see video but quickly goes to black When switching to some devices, you see a green screen While getting a green screen, the CPU spikes on the PiKVM to where you have to rebootThings I triedI knew this was not good, however I figured it was something that could be fixed in software, after all the PiKVM is open source and running Linux. I did the obvious first, which was training the PiKVM and the TESmart switch according to TESmart‚Äôs YouTube video (which is excellent by the way). This kind of helped and by kind of I mean that 1 device would sometimes work but then after adding additional devices it would start experiencing the same symptoms as above. So I thought I could fix it in software‚Ä¶I tried updating the device, testing different EDIDs,and even working with the creator of the PiKVM, Max Devaev, to see if we could tweak any settings to make it work with the TESmart KVM. After capturing logs and EDIDs, Max determined that the EDID was getting ‚Äúpoisoned‚Äù with some other EDID when switching. So we decided that it was a hardware issue. I ended up purchasing an EZCOO switch (affiliate link) which ended up working perfectly, albeit not rackmountable.I reached out to TESmart around the same time to see if maybe it was something they had experience in the past, or something that might be addressed in a firmware update. They were great to work with (huge shout out to Ray from TESmart!) and walked me though some additional troubleshooting steps. Each step still yielded the same results. When we exhausted everything we could try, they sent a replacement to see if that might resolve the issue, but sadly it did not.PiKVM v4 and MoreAll of this troubleshooting was done on the PiKVM v3, which I had purchased pretty late in its lifecycle, and v4 was right around the corner. Max from PiKVM said that he felt the issue could be resolved in their v4 model and mentioned he would send one when it launched. I was hopeful that this work. A few months later, the PiKVM v4 Plus arrived on my doorstep.PiKVM v4 Plus &amp; PiKVM v4 MiniAfter receiving the PiKVM v4 and hooking it up to the TESmart switch I found that I had the same issue as before. This told me it was most likely something with the TESmart switch. I reached out to them again after discovering that I had the 4k 30 fps model and hoped that the 4k 60 fps model would make a difference, after all there were some people who said theirs worked just fine and internet rumors that the 60 fps model worked better.I talked to TESmart again and they shipped a replacement, this time the 4k 60 fps model. I quickly hooked it up and once again experienced all of the same symptoms. I was really puzzled as to why this was happening to me when it works fine with other switches and others claimed to use this switch fine.Community to the Rescue!After testing all of this, I was convinced that I would never be able to use my rackmount KVM. I have to admit that I wasn‚Äôt that upset that it didn‚Äôt work, I was more upset that I didn‚Äôt know when to quit. I was frustrated that I sunk over 80 hours of my time trying to fix this when in fact there was no fix. Sometimes you gotta just let go‚Ä¶That‚Äôs when I got lucky and someone posted a comment on my previous post with something new to try. The comment from juristoeckli that mentioned something about an ‚ÄúEDID Emulator‚Äù. I had never heard of these before nor was I sure that this was the issue. Then NateDiTo also left a comment about how they had used these EDID emulators (affiliate link) and they worked for them. Finally, I wasn‚Äôt alone! Someone else who was experiencing the same thing or at least knew my struggle!That‚Äôs when I decided to give it a shot. I told myself ‚ÄúIf these don‚Äôt work, I am giving up!‚Äù and I meant it this time (maybe‚Ä¶ üòÇ).This little device will override your EDID possibly making it compatible with the device it‚Äôs connecting to.How I fixed itI purchased a cheaper version of the EDID emulator (affiliate link) hoping they would work. Also, serendipitously, Ray from TESmart had mentioned an EDID emulator in an email that same night. He mentioned this as a last resort, however in my mind this was my last resort. After the devices arrived, I quickly inserted the emulators into the TESmart and connected my machines to them.I plugged them directly into the TESmart switch and all devices started working immediately!I retrained the devices per the video, and sure enough after powering the first one one it worked! I could see my machine in the PiKVM without issues! I quickly tempered my expectations because I have been here before. One device would sometimes work fine, but never more than one. Sure enough after training the next 2 devices it worked fine. I could now control all 3 devices from the PiKVM with the TESmart KVM switch. I tested by rebooting the devices and even the PiKVM and everything still works! They now work as reliably as they did with the EZCOO switch.So why does this work?When I think about the solution, it‚Äôs challenging to know how and why this is working. As I understand it, EDID emulators are meant to override a device‚Äôs EDID, basically telling the connected device which capabilities it supports. You would think that my devices were sending the proper EDID to the TESmart switch, however as I experienced with 4 devices (2 unique), this was not the case.Some people have mentioned that this happens more often when running Linux, and I even experienced that myself too. When one of my Intel NUCs was running Windows it seemed to work fine but when running Proxmox (Debian Linux) it seemed to experience these issues. This could be a Windows vs. Linux issue, or it could be chalked up to my other experience where 1 device would work fine but none of the others. I‚Äôve tested quite a bit over the span of a year and it‚Äôs challenging to know for sure. Oddly enough, this doesn‚Äôt happen to everyone who uses TESmart switches. I do think it‚Äôs a combination of TESmart + Device + OS/driver that triggers the problem, because again, it works with my with EZCOO switch. I also have a hunch that these emulators might be instructing the device‚Äôs GPU to stay powered on even when a device isn‚Äôt plugged into it (just like HDMI dummy plugs), however I don‚Äôt know if that‚Äôs true. If you know, let me know in the comments below!I am considering this ‚Äúfixed‚Äù now even though technically this is a ‚Äúworkaround.‚Äù A huge thanks to Max from PiKVM, Ray from TESmart (and the TESmart team), and juristoeckli and NateDiTo in the comments because without all of you I would have given up. Each new idea or additional troubleshooting step motivated me to keep going. I can finally use this switch and recommend it to those who want something rackmountable (with workarounds).ConfigHere is the configuration I use:/etc/kvmd/override.yaml# /etc/kvmd/override.yaml.bak.tesmart##################################################################### ## Override Pi-KVM system settings. This file uses the YAML syntax. ## ## https://github.com/pikvm/pikvm/blob/master/pages/config.md ## ## All overridden parameters will be applied AFTER other configs ## and \"!include\" directives and BEFORE validation. ## Not: Sections should be combined under shared keys. ## #####################################################################kvmd: gpio: drivers: tes: type: tesmart host: 192.168.20.63 port: 5000 wol_server0: type: wol mac: 1c:69:7a:ad:11:85 wol_server1: type: wol mac: 88:ae:dd:05:cf:09 wol_server2: type: wol mac: 88:ae:dd:05:c6:3b wol_server3: type: wol mac: 3c:ec:ef:0e:d3:a4 wol_server3a: type: wol mac: 3c:ec:ef:0e:d3:a5 wol_server4: type: wol mac: 3c:ec:ef:90:c8:0c wol_server4a: type: wol mac: 3c:ec:ef:90:c8:0d reboot: type: cmd cmd: [/usr/bin/sudo, reboot] restart_service: type: cmd cmd: [/usr/bin/sudo, systemctl, restart, kvmd] scheme: ch0_led: driver: tes pin: 0 mode: input ch1_led: driver: tes pin: 1 mode: input ch2_led: driver: tes pin: 2 mode: input ch3_led: driver: tes pin: 3 mode: input ch4_led: driver: tes pin: 4 mode: input pikvm_led: pin: 0 mode: input ch0_button: driver: tes pin: 0 mode: output switch: false ch1_button: driver: tes pin: 1 mode: output switch: false ch2_button: driver: tes pin: 2 mode: output switch: false ch3_button: driver: tes pin: 3 mode: output switch: false ch4_button: driver: tes pin: 4 mode: output switch: false wol_server0: driver: wol_server0 pin: 0 mode: output switch: false wol_server1: driver: wol_server1 pin: 0 mode: output switch: false wol_server2: driver: wol_server2 pin: 0 mode: output switch: false wol_server3: driver: wol_server3 pin: 0 mode: output switch: false wol_server3a: driver: wol_server3a pin: 0 mode: output switch: false wol_server4: driver: wol_server4 pin: 0 mode: output switch: false wol_server4a: driver: wol_server4a pin: 0 mode: output switch: false reboot_button: driver: reboot pin: 0 mode: output switch: false restart_service_button: driver: restart_service pin: 0 mode: output switch: false view: table: - [\"#NUC1\", ch0_led, ch0_button, \"wol_server0 | WoL\"] - [\"#NUC2\", ch1_led, ch1_button, \"wol_server1 | WoL\"] - [\"#NUC3\", ch2_led, ch2_button, \"wol_server2 | WoL\"] - [\"#HL15\", ch3_led, ch3_button, \"wol_server3 | WoL-10g\", \"wol_server3a | WoL-10g\"] - [\"#Storinator\", ch4_led, ch4_button, \"wol_server4 | WoL-10g\", \"wol_server4a | WoL-10g\"] - [\"#PiKVM\", \"pikvm_led|green\", \"restart_service_button|confirm|Service\", \"reboot_button|confirm|Reboot\"]edit /etc/sudoers.d/99_kvmdadd to the end:kvmd ALL=(ALL) NOPASSWD: /usr/bin/rebootkvmd ALL=(ALL) NOPASSWD: /usr/bin/systemctlThen reboot or restart services.Where to BuyHere are the items that I used during this project. PiKVM - https://pikvm.org TESmart Switch - https://amzn.to/3YV0Gsi TESmart Switch (buy direct, usually cheaper) - https://l.technotim.live/tesmart HDMI Cables - https://amzn.to/3SgJ34g USB B Cables - https://amzn.to/3Eel0wU EDID emulator (the ones I use) - https://amzn.to/3tQp04Z EDID emulators (3 pack recommended by the community) - https://amzn.to/47MUtCO VGA to HDMI Adapter (great for connecting VGA devices to a PiKVM) - https://amzn.to/491uAAo Intel NUC 11 kit - https://amzn.to/3vRDAJK(Affiliate links may be included. I may receive a small commission at no cost to you.)Join the conversationAll the problems I had with the PiKVM and TESmart KVM switch were fixed with this one cheap little device.https://t.co/yOGjQTywYy&mdash; Techno Tim (@TechnoTimLive) January 19, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Meet Homepage - Your HomeLab Services Dashboard", "url": "/posts/homepage-dashboard/", "categories": "self-hosted", "tags": "homepage, dashboard, docker, open-source, homelab", "date": "2024-01-15 07:00:00 -0600", "snippet": "Meet Homepage, your new HomeLab services dashboard homepage! Homepage is an open source, highly customizable homepage (or startpage) dashboard that runs on Docker and is integrated with over 100 ...", "content": "Meet Homepage, your new HomeLab services dashboard homepage! Homepage is an open source, highly customizable homepage (or startpage) dashboard that runs on Docker and is integrated with over 100 API services. It‚Äôs easy to set up, looks good by default, and helps you keep track of everything you are running in your HomeLab and more. Today we‚Äôll set up Homepage and get it running in Docker in no time.üì∫ Watch VideoDisclosures: Nothing in this video was sponsoredDon‚Äôt forget to ‚≠ê homepage on GitHub!Requirements docker (and compose)Docker SetupSee this post on how to install docker and docker composeInstallMake a directorymkdir homepagecd into itcd homepagecreate a docker-compose.yaml filetouch docker-compose.yamlEdit itnano docker-compose.yamlPlace the contentsversion: \"3.3\"services: homepage: image: ghcr.io/gethomepage/homepage:latest container_name: homepage ports: - 3000:3000 env_file: .env # use .env volumes: - /path/to/config:/app/config # Make sure your local config directory exists - /var/run/docker.sock:/var/run/docker.sock # (optional) For docker integrations, see alternative methods environment: PUID: $PUID # read them from .env PGID: $PGID # read them from .envCreate an .env file for variablestouch .envEdit itnano .envadd to file:PUID=1000PGID=1000Save and exitStart the containerdocker compose up -d Note: The container can take up to 60 seconds to start the first time. It‚Äôs a good idea to check the container to see if it is passing health checks before browsing to your site.Check to be sure you see that the container is healthy.You can check by running:docker psYou should see something like:CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES8d841cf77e6f ghcr.io/gethomepage/homepage:latest \"docker-entrypoint.s‚Ä¶\" 2 minutes ago Up 2 minutes (healthy) 0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp homepageOnce it‚Äôs healthy, visit http://&lt;IP-ADDRESS-DOCKER-MACHINE&gt;:3000You should see your new homepage!ConfigureOn docker machine, cd into config directorycd configYou‚Äôll see yaml files, these are configurations we can edit to configure our homepageedit settings.yamlnano config/settings.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/settingstitle: My Awesome Homepage # &lt;----- add this lineproviders: openweathermap: openweathermapapikey weatherapi: weatherapiapikeySave, exit, and revisit your homepageShould refresh, if not click the refresh in lower right hand cornerTitle of document should now be My Awesome HomepageIf we want, we can also customize the background but updating this file tooEdit settings.yamlnano settings.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/settingstitle: My Awesome Homepage background: https://images.unsplash.com/photo-1502790671504-542ad42d5189?auto=format&amp;fit=crop&amp;w=2560&amp;q=80 # &lt;----- add this lineproviders: openweathermap: openweathermapapikey weatherapi: weatherapiapikeySave and exit again, and the background should be updated.You can also mount your own image rather than reference one on the web however I am going to stick with one from the web that I don‚Äôt have to worry about additional mounts and configuration in the future.If we want to add some additional filters to the image using tailwind css, we can like so---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/settingstitle: My Awesome Homepage background: image: https://images.unsplash.com/photo-1502790671504-542ad42d5189?auto=format&amp;fit=crop&amp;w=2560&amp;q=80 blur: sm # sm, \"\", md, xl... see https://tailwindcss.com/docs/backdrop-blur saturate: 50 # 0, 50, 100... see https://tailwindcss.com/docs/backdrop-saturate brightness: 50 # 0, 50, 75... see https://tailwindcss.com/docs/backdrop-brightness opacity: 50 # 0-100# ^^^^ add the above block providers: openweathermap: openweathermapapikey weatherapi: weatherapiapikeyIf we want to set out homepage to dark mode and the color to slate, we can like:---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/settingstitle: My Awesome Homepage theme: dark # &lt;----- add this linecolor: slate # &lt;----- add this linebackground: image: https://images.unsplash.com/photo-1502790671504-542ad42d5189?auto=format&amp;fit=crop&amp;w=2560&amp;q=80 blur: sm # sm, \"\", md, xl... see https://tailwindcss.com/docs/backdrop-blur saturate: 50 # 0, 50, 100... see https://tailwindcss.com/docs/backdrop-saturate brightness: 50 # 0, 50, 75... see https://tailwindcss.com/docs/backdrop-brightness opacity: 50 # 0-100# ^^^^ add the above block providers: openweathermap: openweathermapapikey weatherapi: weatherapiapikey Why do this? Isn‚Äôt this a lot of work? 1 word, it‚Äôs ‚Äúrepeatable‚Äù. We can back up our yaml files and even share them if we want. Also works great with Kubernetes since you can pass a ConfigMap file to your deployment thus not needing a volume.ServicesServices are configured in service.yaml and really are button for accessing some of your servicesEdit service.yamlnano config/service.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/services- My First Group: - My First Service: href: http://localhost/ description: Homepage is awesome- My Second Group: - My Second Service: href: http://localhost/ description: Homepage is the best- My Third Group: - My Third Service: href: http://localhost/ description: Homepage is üòé- Top Services: - Proxmox: icon: proxmox.png # icons found here https://github.com/walkxcode/dashboard-icons href: https://192.168.0.15:8006 description: Proxmox VE - PiHole: icon: pi-hole.svg # icons found here https://github.com/walkxcode/dashboard-icons href: http://192.168.60.10/admin description: Server 1 - Cowboy: icon: mdi-account-cowboy-hat-#FF0000 # icons found here https://pictogrammers.com/library/mdi/ href: https://localhost/ description: giddyup service - McDonald‚Äôs: icon: si-mcdonalds-#FFD700 # icons found here https://simpleicons.org/ href: https://www.mcdonalds.com/ description: homepage # ^^^ add this blockAs you can see we configured 4 services: one that use png images one that used svg images one that use Material Design icons one that used Simple Icons Note: If you‚Äôre using Material Design Icons or Simple Icons you can change the color of the icon by appending the hex values to the icon name as shown above.Service WidgetsThese extend the functionality of service buttons. Optional but cool.Edit service.yamlnano config/service.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/services- My First Group: - My First Service: href: http://localhost/ description: Homepage is awesome- My Second Group: - My Second Service: href: http://localhost/ description: Homepage is the best- My Third Group: - My Third Service: href: http://localhost/ description: Homepage is üòé- Top Services: - Proxmox: icon: proxmox.png # icons found here https://github.com/walkxcode/dashboard-icons href: https://192.168.0.15:8006 description: Proxmox VE - PiHole: icon: pi-hole.svg # icons found here https://github.com/walkxcode/dashboard-icons href: http://192.168.60.10/admin description: Server 1 widget: type: pihole url: http://192.168.60.10 key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY}}\" # &lt;--- updated with API key from PiHole - Cowboy: icon: mdi-account-cowboy-hat-#FF0000 # icons found here https://pictogrammers.com/library/mdi/ href: https://localhost/ description: giddyup service - McDonald‚Äôs: icon: si-mcdonalds-#FFD700 # icons found here https://simpleicons.org/ href: https://www.mcdonalds.com/ description: homepageStop the Docker containerdocker stop homepageStart the Docker containerdocker start homepage Note: I have noticed that sometimes you need to recreate the container in order for the variables from your .env to be replaced. Not sure if this is a feature or a bug, but docker compose up -d --force-recreate will stop the old container, remove it, and create a new oneWe should now see pi hole statisticsWidgetsWidgets are standalone items like the resource and search at the top.If you want to edit these items:nano config/widgets.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/service-widgets- resources: cpu: true memory: true disk: /- search: provider: google # &lt;--- updated with google target: _blank- datetime: text_size: xl format: timeStyle: short # ^^^ add this blockNow we can see that search has been changed to Google and we‚Äôve added a date widget.My DashboardHere‚Äôs a fully working example of my own Homepage dashboard that I use!As promised, here is both the config for Docker and even Kubernetes!Docker Configdocker-compose.yamlversion: \"3.3\"services: homepage: image: ghcr.io/gethomepage/homepage:latest container_name: homepage restart: unless-stopped ports: - 3000:3000 env_file: .env volumes: - ./config:/app/config # Make sure your local config directory exists - /var/run/docker.sock:/var/run/docker.sock # (optional) For docker integrations, see alternative methods environment: PUID: $PUID PGID: $PGIDconfig/bookmarks.yaml---config/services.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/services# icons found here https://github.com/walkxcode/dashboard-icons- Hypervisor: - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve1 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: xing-01 - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve2 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: xing-02 - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve2 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: xing-03 - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve4 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: storinator- Containers: - Rancher: icon: rancher.svg href: \"{{HOMEPAGE_VAR_RACNHER_URL}}\" description: k8s - Longhorn: icon: longhorn.svg href: \"{{HOMEPAGE_VAR_LONGHORN_URL}}\" description: k8s storage - Portainer: icon: portainer.svg href: \"{{HOMEPAGE_VAR_PORTAINER_URL}}\" description: docker widget: type: portainer url: \"{{HOMEPAGE_VAR_PORTAINER_URL}}\" env: 2 key: \"{{HOMEPAGE_VAR_PORTAINER_API_KEY}}\"- DNS: - Pi-Hole1: icon: pi-hole.svg href: \"{{HOMEPAGE_VAR_PIHOLE_URL_1}}\" description: quasar widget: type: pihole url: \"{{HOMEPAGE_VAR_PIHOLE_URL_1}}\" key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY_1}}\" - Pi-Hole2: icon: pi-hole.svg href: \"{{HOMEPAGE_VAR_PIHOLE_URL_2}}\" description: blazar widget: type: pihole url: \"{{HOMEPAGE_VAR_PIHOLE_URL_2}}\" key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY_2}}\" - Pi-Hole3: icon: pi-hole.svg href: \"{{HOMEPAGE_VAR_PIHOLE_URL_3}}\" description: electron widget: type: pihole url: \"{{HOMEPAGE_VAR_PIHOLE_URL_3}}\" key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY_3}}\"- Network: - UniFi: icon: unifi.svg href: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_URL}}\" description: network widget: type: unifi url: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_URL}}\" username: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_USERNAME}}\" password: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_PASSWORD}}\" - Uptime Kuma: icon: uptime-kuma.svg href: \"{{HOMEPAGE_VAR_UPTIME_KUMA_URL}}\" description: internal widget: type: uptimekuma url: \"{{HOMEPAGE_VAR_UPTIME_KUMA_URL}}\" slug: home - Uptime Robot: icon: https://play-lh.googleusercontent.com/cUrv0t00FYQ1GKLuOTvv8qjo1lSDjqZC16IOp3Fb6ijew6Br5m4o16HhDp0GBu_Bw8Y=w240-h480-rw href: https://uptimerobot.com/dashboard description: external widget: type: uptimerobot url: https://api.uptimerobot.com key: \"{{HOMEPAGE_VAR_UPTIME_ROBOT_API_KEY}}\"- Storage: - TrueNAS: icon: truenas.svg href: \"{{HOMEPAGE_VAR_TRUENAS_URL}}\" description: scale widget: type: truenas url: \"{{HOMEPAGE_VAR_TRUENAS_URL}}\" key: \"{{HOMEPAGE_VAR_TRUENAS_API_KEY}}\" - MinIO: icon: minio.svg href: \"{{HOMEPAGE_VAR_MINIO_URL}}\" description: object storage- Media: - Plex: icon: plex.svg href: \"{{HOMEPAGE_VAR_PLEX_URL}}\" description: media server widget: type: plex url: \"{{HOMEPAGE_VAR_PLEX_URL}}\" key: \"{{HOMEPAGE_VAR_PLEX_API_TOKEN}}\" - Tautulli: icon: tautulli.svg href: \"{{HOMEPAGE_VAR_TAUTULLI_URL}}\" description: plex stats widget: type: tautulli url: \"{{HOMEPAGE_VAR_TAUTULLI_URL}}\" key: \"{{HOMEPAGE_VAR_TAUTULLI_API_KEY}}\" - HDHomerun: icon: hdhomerun.png href: \"{{HOMEPAGE_VAR_HDHOMERUN_URL}}\" description: flex 4k widget: type: hdhomerun url: \"{{HOMEPAGE_VAR_HDHOMERUN_URL}}\"- Remote Access: - PiKVM: icon: https://avatars.githubusercontent.com/u/41749659?s=200&amp;v=4 href: \"{{HOMEPAGE_VAR_PIKVM_URL}}\" description: remote kvm - IPMI: icon: https://upload.wikimedia.org/wikipedia/commons/1/1d/Super_Micro_Computer_Logo.svg href: \"{{HOMEPAGE_VAR_IPMI_1_URL}}\" description: storinator - IPMI: icon: https://upload.wikimedia.org/wikipedia/commons/1/1d/Super_Micro_Computer_Logo.svg href: \"{{HOMEPAGE_VAR_IPMI_2_URL}}\" description: hl15 - Netboot: icon: https://netboot.xyz/img/nbxyz-laptop.gif href: \"{{HOMEPAGE_VAR_NETBOOT_URL}}\" description: network boot utility - Tripp Lite: icon: https://upload.wikimedia.org/wikipedia/commons/f/f9/Tripp_Lite_logo.svg href: \"{{HOMEPAGE_VAR_UPS_1_URL}}\" description: 1500 - Eaton: icon: https://cdn11.bigcommerce.com/s-fg272t4iw0/images/stencil/1280x1280/products/2549/2802/C-12556__63907.1557814942.jpg?c=2 href: \"{{HOMEPAGE_VAR_UPS_2_URL}}\" description: 5p- Home Automation: - Home Assistant: icon: home-assistant.svg href: \"{{HOMEPAGE_VAR_HOME_ASSISTANT_URL}}\" description: home widget: type: homeassistant url: \"{{HOMEPAGE_VAR_HOME_ASSISTANT_URL}}\" key: \"{{HOMEPAGE_VAR_HOME_ASSISTANT_API_KEY}}\" - UniFi: icon: https://play-lh.googleusercontent.com/DmgQvSdocOrGr0D0rxSBE9sqh23Fw3ck3BgKRN788cZnOKgcZlcEAFRYwmUbp6vMTVI href: \"{{HOMEPAGE_VAR_UNIFI_PROTECT_URL}}\" description: protect - Scryped: icon: https://www.scrypted.app/images/web_hi_res_512.png href: \"{{HOMEPAGE_VAR_SCRYPTED_URL}}\" description: mgmt console - Broadlink Control: icon: https://nwzimg.wezhan.net/contents/sitefiles3606/18030899/images/5430245.png href: \"{{HOMEPAGE_VAR_BROADLINK_CONTROL_URL}}\" description: light control- Other: - GitLab: icon: gitlab.svg href: https://gitlab.com description: source code - GitHub: icon: github.svg href: https://github.com description: source code - Shlink: icon: https://shlink.io/images/shlink-logo-blue.svg href: \"{{HOMEPAGE_VAR_SHLINK_URL}}\" description: dashboardconfig/settings.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/settingstitle: Techno Tim Homepagebackground: image: https://cdnb.artstation.com/p/assets/images/images/006/897/659/large/mikael-gustafsson-wallpaper-mikael-gustafsson.jpg blur: sm # sm, md, xl... see https://tailwindcss.com/docs/backdrop-blur saturate: 100 # 0, 50, 100... see https://tailwindcss.com/docs/backdrop-saturate brightness: 50 # 0, 50, 75... see https://tailwindcss.com/docs/backdrop-brightness opacity: 100 # 0-100theme: darkcolor: slateuseEqualHeights: truelayout: Hypervisor: header: true style: row columns: 4 Containers: header: true style: row columns: 4 DNS: header: true style: row columns: 4 Network: header: true style: row columns: 4 Remote Access: header: true style: row columns: 4 Storage: header: true style: row columns: 4 Media: header: true style: row columns: 4 Home Automation: header: true style: row columns: 4 Other: header: true style: row columns: 4config/widgets.yaml---# For configuration options and examples, please see:# https://gethomepage.dev/latest/configs/service-widgets- resources: cpu: true memory: true disk: /- datetime: text_size: xl format: timeStyle: short.env Note: These variables will be replace in the configuration above. You will need to supply your own values here in your file.PUID=1000PGID=1000HOMEPAGE_VAR_PIHOLE_API_KEY_1=HOMEPAGE_VAR_PIHOLE_API_KEY_2=HOMEPAGE_VAR_PIHOLE_API_KEY_3=HOMEPAGE_VAR_PIHOLE_URL_1=HOMEPAGE_VAR_PIHOLE_URL_2=HOMEPAGE_VAR_PIHOLE_URL_3=HOMEPAGE_VAR_PLEX_URL=HOMEPAGE_VAR_PLEX_API_TOKEN=HOMEPAGE_VAR_TAUTULLI_URL=HOMEPAGE_VAR_TAUTULLI_API_KEY=HOMEPAGE_VAR_HDHOMERUN_URL=HOMEPAGE_VAR_HOME_ASSISTANT_URL=HOMEPAGE_VAR_HOME_ASSISTANT_API_KEY=HOMEPAGE_VAR_TRUENAS_URL=HOMEPAGE_VAR_TRUENAS_API_KEY=HOMEPAGE_VAR_UNIFI_NETWORK_URL=HOMEPAGE_VAR_UNIFI_NETWORK_USERNAME=HOMEPAGE_VAR_UNIFI_NETWORK_PASSWORD=HOMEPAGE_VAR_UNIFI_PROTECT_URL=HOMEPAGE_VAR_UPTIME_KUMA_URL=HOMEPAGE_VAR_MINIO_URL=HOMEPAGE_VAR_RACNHER_URL=HOMEPAGE_VAR_LONGHORN_URL=HOMEPAGE_VAR_PORTAINER_URL=HOMEPAGE_VAR_PORTAINER_API_KEY=HOMEPAGE_VAR_PROXMOX_URL=HOMEPAGE_VAR_PROXMOX_USER=HOMEPAGE_VAR_PROXMOX_API_KEY=HOMEPAGE_VAR_UPTIME_ROBOT_API_KEY=HOMEPAGE_VAR_SCRYPTED_URL=HOMEPAGE_VAR_PIKVM_URL=HOMEPAGE_VAR_NETBOOT_URL=HOMEPAGE_VAR_BROADLINK_CONTROL_URL=HOMEPAGE_VAR_IPMI_1_URL=HOMEPAGE_VAR_IPMI_2_URL=HOMEPAGE_VAR_UPS_1_URL=HOMEPAGE_VAR_UPS_2_URL=HOMEPAGE_VAR_SHLINK_URL=Kubernetes ConfigHere‚Äôs my Kubernetes config!deployment.yaml---apiVersion: apps/v1kind: Deploymentmetadata: name: homepage namespace: default labels: app: homepage annotations: reloader.stakater.com/auto: \"true\"spec: selector: matchLabels: app: homepage replicas: 3 progressDeadlineSeconds: 600 revisionHistoryLimit: 1 strategy: type: RollingUpdate rollingUpdate: maxUnavailable: 25% maxSurge: 1 template: metadata: labels: app: homepage annotations: deploy-date: \"deploy-date-value\" spec: containers: - name: homepage image: ghcr.io/gethomepage/homepage:v0.8.4 resources: requests: memory: 128Mi cpu: 200m envFrom: - secretRef: name: homepage-secret ports: - containerPort: 3000 name: http readinessProbe: httpGet: path: / port: http initialDelaySeconds: 60 periodSeconds: 10 failureThreshold: 5 timeoutSeconds: 5 livenessProbe: httpGet: path: / port: http initialDelaySeconds: 10 periodSeconds: 10 timeoutSeconds: 5 volumeMounts: - mountPath: /app/config/custom.js name: homepage-config subPath: custom.js - mountPath: /app/config/custom.css name: homepage-config subPath: custom.css - mountPath: /app/config/bookmarks.yaml name: homepage-config subPath: bookmarks.yaml - mountPath: /app/config/docker.yaml name: homepage-config subPath: docker.yaml - mountPath: /app/config/kubernetes.yaml name: homepage-config subPath: kubernetes.yaml - mountPath: /app/config/services.yaml name: homepage-config subPath: services.yaml - mountPath: /app/config/settings.yaml name: homepage-config subPath: settings.yaml - mountPath: /app/config/widgets.yaml name: homepage-config subPath: widgets.yaml - mountPath: /app/config/logs name: logs volumes: - name: homepage-config configMap: name: homepage - name: logs emptyDir: {} topologySpreadConstraints: - maxSkew: 1 topologyKey: topology.kubernetes.io/zone whenUnsatisfiable: DoNotSchedule labelSelector: matchLabels: app: homepageconfig.yamlapiVersion: v1kind: ConfigMapmetadata: name: homepage namespace: default labels: app: homepagedata: kubernetes.yaml: | mode: cluster settings.yaml: | title: Techno Tim Homepage background: image: https://cdnb.artstation.com/p/assets/images/images/006/897/659/large/mikael-gustafsson-wallpaper-mikael-gustafsson.jpg blur: sm # sm, md, xl... see https://tailwindcss.com/docs/backdrop-blur saturate: 100 # 0, 50, 100... see https://tailwindcss.com/docs/backdrop-saturate brightness: 50 # 0, 50, 75... see https://tailwindcss.com/docs/backdrop-brightness opacity: 100 # 0-100 theme: dark color: slate useEqualHeights: true layout: Hypervisor: header: true style: row columns: 4 Containers: header: true style: row columns: 4 DNS: header: true style: row columns: 4 Network: header: true style: row columns: 4 Remote Access: header: true style: row columns: 4 Storage: header: true style: row columns: 4 Media: header: true style: row columns: 4 Home Automation: header: true style: row columns: 4 Other: header: true style: row columns: 4 custom.css: \"\" custom.js: \"\" bookmarks.yaml: \"\" services.yaml: | - Hypervisor: - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve1 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: xing-01 - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve2 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: xing-02 - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve2 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: xing-03 - Proxmox: icon: proxmox.svg href: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" description: pve4 widget: type: proxmox url: \"{{HOMEPAGE_VAR_PROXMOX_URL}}\" username: \"{{HOMEPAGE_VAR_PROXMOX_USER}}\" password: \"{{HOMEPAGE_VAR_PROXMOX_API_KEY}}\" node: storinator - Containers: - Rancher: icon: rancher.svg href: \"{{HOMEPAGE_VAR_RACNHER_URL}}\" description: k8s - Longhorn: icon: longhorn.svg href: \"{{HOMEPAGE_VAR_LONGHORN_URL}}\" description: k8s storage - Portainer: icon: portainer.svg href: \"{{HOMEPAGE_VAR_PORTAINER_URL}}\" description: docker widget: type: portainer url: \"{{HOMEPAGE_VAR_PORTAINER_URL}}\" env: 2 key: \"{{HOMEPAGE_VAR_PORTAINER_API_KEY}}\" - DNS: - Pi-Hole1: icon: pi-hole.svg href: \"{{HOMEPAGE_VAR_PIHOLE_URL_1}}\" description: quasar widget: type: pihole url: \"{{HOMEPAGE_VAR_PIHOLE_URL_1}}\" key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY_1}}\" - Pi-Hole2: icon: pi-hole.svg href: \"{{HOMEPAGE_VAR_PIHOLE_URL_2}}\" description: blazar widget: type: pihole url: \"{{HOMEPAGE_VAR_PIHOLE_URL_2}}\" key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY_2}}\" - Pi-Hole3: icon: pi-hole.svg href: \"{{HOMEPAGE_VAR_PIHOLE_URL_3}}\" description: electron widget: type: pihole url: \"{{HOMEPAGE_VAR_PIHOLE_URL_3}}\" key: \"{{HOMEPAGE_VAR_PIHOLE_API_KEY_3}}\" - Network: - UniFi: icon: unifi.svg href: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_URL}}\" description: network widget: type: unifi url: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_URL}}\" username: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_USERNAME}}\" password: \"{{HOMEPAGE_VAR_UNIFI_NETWORK_PASSWORD}}\" - Uptime Kuma: icon: uptime-kuma.svg href: \"{{HOMEPAGE_VAR_UPTIME_KUMA_URL}}\" description: internal widget: type: uptimekuma url: \"{{HOMEPAGE_VAR_UPTIME_KUMA_URL}}\" slug: home - Uptime Robot: icon: https://play-lh.googleusercontent.com/cUrv0t00FYQ1GKLuOTvv8qjo1lSDjqZC16IOp3Fb6ijew6Br5m4o16HhDp0GBu_Bw8Y=w240-h480-rw href: https://uptimerobot.com/dashboard description: external widget: type: uptimerobot url: https://api.uptimerobot.com key: \"{{HOMEPAGE_VAR_UPTIME_ROBOT_API_KEY}}\" - Storage: - TrueNAS: icon: truenas.svg href: \"{{HOMEPAGE_VAR_TRUENAS_URL}}\" description: scale widget: type: truenas url: \"{{HOMEPAGE_VAR_TRUENAS_URL}}\" key: \"{{HOMEPAGE_VAR_TRUENAS_API_KEY}}\" - MinIO: icon: minio.svg href: \"{{HOMEPAGE_VAR_MINIO_URL}}\" description: object storage - Media: - Plex: icon: plex.svg href: \"{{HOMEPAGE_VAR_PLEX_URL}}\" description: media server widget: type: plex url: \"{{HOMEPAGE_VAR_PLEX_URL}}\" key: \"{{HOMEPAGE_VAR_PLEX_API_TOKEN}}\" - Tautulla: icon: tautulli.svg href: \"{{HOMEPAGE_VAR_TAUTULLI_URL}}\" description: plex stats widget: type: tautulli url: \"{{HOMEPAGE_VAR_TAUTULLI_URL}}\" key: \"{{HOMEPAGE_VAR_TAUTULLI_API_KEY}}\" - HDHomerun: icon: hdhomerun.png href: \"{{HOMEPAGE_VAR_HDHOMERUN_URL}}\" description: flex 4k widget: type: hdhomerun url: \"{{HOMEPAGE_VAR_HDHOMERUN_URL}}\" - Remote Access: - PiKVM: icon: https://avatars.githubusercontent.com/u/41749659?s=200&amp;v=4 href: \"{{HOMEPAGE_VAR_PIKVM_URL}}\" description: remote kvm - IPMI: icon: https://upload.wikimedia.org/wikipedia/commons/1/1d/Super_Micro_Computer_Logo.svg href: \"{{HOMEPAGE_VAR_IPMI_1_URL}}\" description: storinator - IPMI: icon: https://upload.wikimedia.org/wikipedia/commons/1/1d/Super_Micro_Computer_Logo.svg href: \"{{HOMEPAGE_VAR_IPMI_2_URL}}\" description: hl15 - Netboot: icon: https://netboot.xyz/img/nbxyz-laptop.gif href: \"{{HOMEPAGE_VAR_NETBOOT_URL}}\" description: network boot utility - Tripp Lite: icon: https://upload.wikimedia.org/wikipedia/commons/f/f9/Tripp_Lite_logo.svg href: \"{{HOMEPAGE_VAR_UPS_1_URL}}\" description: 1500 - Eaton: icon: https://cdn11.bigcommerce.com/s-fg272t4iw0/images/stencil/1280x1280/products/2549/2802/C-12556__63907.1557814942.jpg?c=2 href: \"{{HOMEPAGE_VAR_UPS_2_URL}}\" description: 5p - Home Automation: - Home Assistant: icon: home-assistant.svg href: \"{{HOMEPAGE_VAR_HOME_ASSISTANT_URL}}\" description: home widget: type: homeassistant url: \"{{HOMEPAGE_VAR_HOME_ASSISTANT_URL}}\" key: \"{{HOMEPAGE_VAR_HOME_ASSISTANT_API_KEY}}\" - UniFi: icon: https://play-lh.googleusercontent.com/DmgQvSdocOrGr0D0rxSBE9sqh23Fw3ck3BgKRN788cZnOKgcZlcEAFRYwmUbp6vMTVI href: \"{{HOMEPAGE_VAR_UNIFI_PROTECT_URL}}\" description: protect - Scryped: icon: https://www.scrypted.app/images/web_hi_res_512.png href: \"{{HOMEPAGE_VAR_SCRYPTED_URL}}\" description: mgmt console - Broadlink Control: icon: https://nwzimg.wezhan.net/contents/sitefiles3606/18030899/images/5430245.png href: \"{{HOMEPAGE_VAR_BROADLINK_CONTROL_URL}}\" description: light control - Other: - GitLab: icon: gitlab.svg href: https://gitlab.com description: source code - GitHub: icon: github.svg href: https://github.com description: source code - Shlink: icon: https://shlink.io/images/shlink-logo-blue.svg href: \"{{HOMEPAGE_VAR_SHLINK_URL}}\" description: dashboard widgets.yaml: | - resources: cpu: true memory: true disk: / - datetime: text_size: xl format: timeStyle: short docker.yaml: \"\"secret.yamlkind: SecretapiVersion: v1type: Opaquemetadata: name: homepage-secret namespace: defaultstringData: HOMEPAGE_VAR_PIHOLE_API_KEY_1: \"\" HOMEPAGE_VAR_PIHOLE_API_KEY_2: \"\" HOMEPAGE_VAR_PIHOLE_API_KEY_3: \"\" HOMEPAGE_VAR_PIHOLE_URL_1: \"\" HOMEPAGE_VAR_PIHOLE_URL_2: \"\" HOMEPAGE_VAR_PIHOLE_URL_3: \"\" HOMEPAGE_VAR_PLEX_url: \"\" HOMEPAGE_VAR_PLEX_API_TOKEN: \"\" HOMEPAGE_VAR_TAUTULLI_url: \"\" HOMEPAGE_VAR_TAUTULLI_API_key: \"\" HOMEPAGE_VAR_HDHOMERUN_url: \"\" HOMEPAGE_VAR_HOME_ASSISTANT_url: \"\" HOMEPAGE_VAR_HOME_ASSISTANT_API_key: \"\" HOMEPAGE_VAR_TRUENAS_url: \"\" HOMEPAGE_VAR_TRUENAS_API_key: \"\" HOMEPAGE_VAR_UNIFI_NETWORK_url: \"\" HOMEPAGE_VAR_UNIFI_NETWORK_username: \"\" HOMEPAGE_VAR_UNIFI_NETWORK_password: \"\" HOMEPAGE_VAR_UNIFI_PROTECT_url: \"\" HOMEPAGE_VAR_UPTIME_KUMA_url: \"\" HOMEPAGE_VAR_MINIO_url: \"\" HOMEPAGE_VAR_RACNHER_url: \"\" HOMEPAGE_VAR_LONGHORN_url: \"\" HOMEPAGE_VAR_PORTAINER_url: \"\" HOMEPAGE_VAR_PORTAINER_API_key: \"\" HOMEPAGE_VAR_PROXMOX_url: \"\" HOMEPAGE_VAR_PROXMOX_USER: \"\" HOMEPAGE_VAR_PROXMOX_API_key: \"\" HOMEPAGE_VAR_UPTIME_ROBOT_API_key: \"\" HOMEPAGE_VAR_SCRYPTED_url: \"\" HOMEPAGE_VAR_PIKVM_url: \"\" HOMEPAGE_VAR_NETBOOT_url: \"\" HOMEPAGE_VAR_BROADLINK_CONTROL_url: \"\" HOMEPAGE_VAR_IPMI_1_url: \"\" HOMEPAGE_VAR_IPMI_2_url: \"\" HOMEPAGE_VAR_UPS_1_url: \"\" HOMEPAGE_VAR_UPS_2_url: \"\" HOMEPAGE_VAR_SHLINK_url: \"\"Join the conversationI finally replaced my homepage Dashboard!https://t.co/e571uMSQ89 pic.twitter.com/eN5sFrsVyN&mdash; Techno Tim (@TechnoTimLive) January 15, 2024LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "HomeLab Services Tour 2024 - What Am I Self Hosting?", "url": "/posts/homelab-services-tour-2024/", "categories": "homelab", "tags": "homelab, hardware, network, server, self-hosted, kubernetes, k3s, linux", "date": "2024-01-04 07:00:00 -0600", "snippet": "What a year of self-hosting! Join me as we walk though my entire infrastructure and services that I have running in my HomeLab! This time I also include network diagrams and dive deep into which ...", "content": "What a year of self-hosting! Join me as we walk though my entire infrastructure and services that I have running in my HomeLab! This time I also include network diagrams and dive deep into which services I have running, where they are running, and why I chose them!üì∫ Watch VideoIn case you missed it, check out my HomeLab Hardware Tour (late 2023)!Logical Network DiagramHere is the diagram for my network!A logical Network Diagram of my HomeLab including VLANs and serversSince many have asked, I use Figma to design my network diagrams. (affiliate link but they have a free plan)Services I useHere‚Äôs a breakdown of all the services I useDashboardSites: HeimdallTutorials: Meet Heimdall, Your Homelab Application DashboardHypervisorSites: ProxmoxTutorials: Before I do anything on Proxmox, I do this first‚Ä¶StorageSites: TrueNAS SCALE MinIOTutorials: TrueNAS Scale Apps - Official, Unofficial, Docker, and Kubernetes The EASIEST way to Expand Your ZFS Pool in TrueNAS (But is it the Best?)DNSSites: PiHole Cloudflare Tutorials: Automate Cloudflare with Terraform and GitHub Actions! - Terraform Tutorial for Beginners High Availability Pi-Hole? Yes please! Is adding 3 MILLION domains to your Pi-Hole Block List a good thing?Network ManagementSites: UniFi Network Controller (affiliate link)Tutorials: Setting up your UniFi Express Configuring VLANs, Firewall Rules, and WiFi Networks - UniFi Network ApplicationHome SecuritySites: UniFi Protect (affiliate link)Tutorials: My HUGE Home Security UpgradeContainerizationSites: k3s Portainer RancherTutorials: Fully Automated K3S etcd High Availability Install High Availability Rancher on Kubernetes How to Update Portainer Fast, Simple, and Easy GuideGitOpsSites: Flux RenovateTutorials: The FASTEST way to deploy apps to Kubernetes - GitOps with FLUX Meet Renovate - Your Update Automation Bot for Kubernetes and More! Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGEReverse Proxy (and Ingress Controller)Sites: Traefik cert-managerTutorials: Wildcard Certificates with Traefik + cert-manager + Let‚Äôs Encrypt in Kubernetes Tutorial Put Wildcard Certificates and SSL on EVERYTHINGMonitoring &amp; LoggingSites: Uptime Kuma Uptime Robot (affiliate link)Tutorials: Meet Uptime Kuma, a Fancy Open Source Uptime Monitor for all your HomeLab Monitoring NeedsData VisualizationSites: Loki Grafana Prometheus Alert managerTutorials: Meet Grafana LOKI, a Log Aggregation System for Everything Installing Grafana Loki with Helm on Kubernetes Beautiful Dashboards with Grafana and Prometheus - Monitoring Kubernetes Tutorial Monitoring Your Kubernetes Cluster with Grafana, Prometheus, and Alertmanager (Rancher Monitoring)Home AutomationSites: Home Assistant Scrypted Broadlink ControlTutorials: Home Assistant on Docker and Kubernetes (Open Source Home Automation) Meet Scrypted - Stream ANY Camera to ANY Home Hub I Built Something for Your Homelab‚Ä¶ (Broadlink Control)Data SynchronizationSites: SyncThingLinks PageSites: littlelink-serverTutorials: Self-Hosted, DIY, Open Source Alternative to LinktreeLink ShortenerSites: ShlinkMedia ServerSites: PlexTutorials: Turn Plex into a Powerful DVRPower ManagementSites: NUT Server Automated NUT installTutorials: Network UPS Tools (NUT) Ultimate Guide Automated NUT Server InstallContent Management Systems (CMS)Sites: Wordpress Ghost Blog WikiJSStatic Site Generators (SSG)Sites: Jekyll HugoTutorials: Meet Jekyll - The Static Site GeneratorContinuous Integration / Continuous Delivery (CI /CD)Sites: GitLab GitHubTutorials: Build &amp; Deploy Your Own Code in Your Homelab!Everything else‚Ä¶Sites: Longhorn Netboot.xyz much, much more!Tutorials: Cloud Native Distributed Storage in Kubernetes with Longhorn Meet netboot xyz - Network Boot Any Operating System much, much more!Join the conversationWhat a year of self-hosting! Join me as we walk though my entire infrastructure and services that I have running in my HomeLab! https://t.co/9b2hGFzoPz pic.twitter.com/zqEVKy8rhy&mdash; Techno Tim (@TechnoTimLive) January 4, 2024(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "UniFi Pro Max Switches & Etherlighting‚Ñ¢ Patch Cables!", "url": "/posts/unifi-pro-max/", "categories": "network", "tags": "hardware, unifi, network", "date": "2023-12-15 07:00:00 -0600", "snippet": "Introducing the UniFi Pro Max 24 PoE and UniFi Etherlighting‚Ñ¢ Patch Cables from Ubiquiti! We‚Äôll discuss what makes this switch unique, how they are different from the existing pro line, and even t...", "content": "Introducing the UniFi Pro Max 24 PoE and UniFi Etherlighting‚Ñ¢ Patch Cables from Ubiquiti! We‚Äôll discuss what makes this switch unique, how they are different from the existing pro line, and even take a close look at their new cables that are meant for this switch. Is it useful or just a gimmick?üì∫ Watch VideoDisclosures: I was sent a UniFi Pro Max PoE and cables for evaluation I was not paidJoin the conversationThis past week I got to test out a Switch with RGB from Ubiquiti, yes RGB. They call it Etherlighting and have even made their own patch cables to emphasis the effect.Are they any good?üëâhttps://t.co/DhOY0XBtz6 pic.twitter.com/7yOXZSK5a3&mdash; Techno Tim (@TechnoTimLive) December 15, 2023Where to Buy UniFi Pro Max Switches https://l.technotim.live/ubiquiti(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "HomeLab Hardware Tour! (Late 2023)", "url": "/posts/homelab-hardware-tour-2023/", "categories": "homelab", "tags": "homelab, hardware, network, server, server-rack", "date": "2023-12-08 07:00:00 -0600", "snippet": "Well, here it is! My Late 2023 Server Rack and HomeLab tour! I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my last tour! New servers, new networking, UPS, cabling, power man...", "content": "Well, here it is! My Late 2023 Server Rack and HomeLab tour! I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my last tour! New servers, new networking, UPS, cabling, power management, and more new tech on the wall!üì∫ Watch VideoIn case you missed it, check out my HomeLab Services Tour (2024)!Join the conversationIt&#39;s time of year again! Time for my Server Rack and HomeLab tour! If you&#39;ve ever wondered what servers, networking, and even low power PCs I am running in my setup, check it out!üëâhttps://t.co/IolyDljMuq pic.twitter.com/jo1qzchS8S&mdash; Techno Tim (@TechnoTimLive) December 8, 2023Where to BuyRack &amp; Accessories 32u Rack https://amzn.to/3TlhdXb D Ring Hooks https://amzn.to/3FSxk5Y 1u Brush Panels https://amzn.to/3hKNiaf 1u Rack Mount Full Depth Shelf https://amzn.to/3jrm5Kp Right Angle Extension Cord https://amzn.to/3Wl7gay Black Outlet Covers https://amzn.to/3jrf7Vu UniFi SmartPower PDU Pro https://l.technotim.live/ubiquitiNetwork Patch Panel https://amzn.to/3YIKtHq Wall Mount Patch Panel https://amzn.to/3WyvnCk Slim Network Cables https://amzn.to/3kbYV85 SFP+ Dust Covers https://amzn.to/3TmGfou SFP+ DAC https://amzn.to/3TajUut UniFi Flex https://l.technotim.live/ubiquiti UDM SE https://l.technotim.live/ubiquiti UDM Pro https://l.technotim.live/ubiquiti UniFi 48 Port Enterprise https://l.technotim.live/ubiquitiServers &amp; Accessories SuperMicro 1u Servers https://amzn.to/3YBQy8u SuperMicro 1u Servers (Used) https://www.ebay.com/sch/i.html?_nkw=SuperMicro+813M-3+SYS-5018R-M+Server+NO+HDD%2FOS+Boots&amp;mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1 1 TB Samsung SSDs https://amzn.to/41gNbWu 14 TB Exos Seagate Drives https://amzn.to/3GbtXsk 14 TB Exos Seagate Drives (Used) https://www.ebay.com/itm/115776895931?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1 PC Conversion Case https://amzn.to/3YGXx03 Smart ZigBee LED Controller https://amzn.to/3jtCpKI Cooler Master SickleFlow 120mm RGB Fans https://amzn.to/3I68AtA DDR-4 for AV15 &amp; HL15 (used) https://www.ebay.com/sch/i.html?_from=R40&amp;_trksid=R40&amp;_nkw=MTA18ASF2G72PDZ-3G2R1&amp;_sacat=0&amp;mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1Accessories Axxtra Power Strip https://amzn.to/3qbzIhT Eaton 5P1500R UPS https://amzn.to/3OC2D90 Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack https://amzn.to/3XxwBzd APC 1500VA UPS https://amzn.to/3GXLJh6 APC 600 VA UPS https://amzn.to/3mMxsM1 Wall Control Galvanized Steel Pegboard https://amzn.to/3bJ8R4s Elgato Key Light Mini https://amzn.to/41d9Fre Hue Light Strip https://amzn.to/3I124o3 Hue Motion &amp; Temp https://amzn.to/3qb1FXf Hue v2 Dimmer Switch https://amzn.to/3hH6pCh Hue Smart Bulb Starter Kit https://amzn.to/3jljCRA Nest Protect https://amzn.to/3hMZcR8 Cloud Lamp https://amzn.to/3GZji24 Fire Extinguisher https://amzn.to/3GeB2s4Over the Air TV Gear (Plex or JellyFin) TV Tuner that supports 4K and up to 4 streams!: https://amzn.to/3r1v3SL TV Tuner that supports 2 streams: https://amzn.to/3EKeGx5 Flat Indoor Antenna: https://amzn.to/3Z5AQmR Indoor Outdoor Antenna with 60+ mile range!: https://amzn.to/3sHLST3 Adjustable Gain TV Antenna Preamplifier with LTE Filter: https://amzn.to/3LgwB26 LTE / 5G Filter: https://amzn.to/3Pax72J Antenna Splitter with Power Passthrough: https://amzn.to/3sLTZy4 Solid Copper Coax Cable (NOT copper clad): https://amzn.to/3r3fhqk LTE / 5G Filter Alternative: https://amzn.to/489SHvZIntel NUC Mini Cluster Intel NUC 11 https://amzn.to/43TK8nS Intel NUC 12 https://amzn.to/3MZjC6C SAMSUNG 980 PRO SSD 2TB PCIe NVMe https://amzn.to/41vUOrk SAMSUNG 870 EVO SATA https://amzn.to/3KQMriU G.Skill RipJaws DDR4 SO-DIMM Series 64GB https://amzn.to/3AlstI8 Rackmount Kit Mk1 Manufacturing - https://www.mk1manufacturing.com/cart.php(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Setting up your UniFi Express", "url": "/posts/unifi-express/", "categories": "network", "tags": "hardware, unifi, network", "date": "2023-11-29 07:00:00 -0600", "snippet": "The UniFi Express from Ubiquiti is here and it‚Äôs going to shake up how we connect small and home networks. It‚Äôs a gateway that has WiFi 6 that runs the UniFi network application and can transform ...", "content": "The UniFi Express from Ubiquiti is here and it‚Äôs going to shake up how we connect small and home networks. It‚Äôs a gateway that has WiFi 6 that runs the UniFi network application and can transform into an access point or mesh when your network grows. We‚Äôll be taking a look at this device, its features, how to configure and manage it, and discuss all the uses cases for this versatile device.üì∫ Watch VideoDisclosures: I was not paid I was sent UniFi Express devices for reviewWhat is the UniFi Express?Introducing the UniFi ExpressThis newly released UniFi Express device is here and it‚Äôs here to shake up small networks. It‚Äôs a device that‚Äôs flexible enough to be used in just about any situation and comes in a small compact form factor with a small footprint. It‚Äôs a compact device that can act as a gateway and provide WiFI 6 to power your entire network, or can transform into a mesh device to expand your wireless network, or you can add it to an existing network and run it in access point only mode. Yes, it‚Äôs that flexible.If you‚Äôve not yet experienced UniFi‚Äôs network app and wireless access points, this might be the best entry point for you, and if you‚Äôre already using devices in their ecosystem, this can fight seamlessly with your existing network deployments.SpecsIt has a nice little LCM screen that can display useful informationIt‚Äôs a small compact device that‚Äôs all white. It measures about 3 ¬Ω inches long and wide, and sits only about an inch high. It‚Äôs made of plastic but has an aluminum bottom, I assume to help dissipate heat. It‚Äôs powered by USB C Has 2 network interfaces, a gigabit LAN port and a gigabit WAN port. It has 2x2 2.4 GHz MIMO support and 2x2 5 GHz MIMO support which has a max throughput rate of 573 Mb/s for 2.4 Ghz and 2.4 Gb/s for 5 Ghz. It supports most WiFi standards including WiFi6, and supports the typical WiFi security WPA standards from enterprise all the way up to WPA3. It supports up to 8 unique SSIDS and can service over 60 clients at once, all from this little device. It also has this awesome LCM screen that displays the network status reported by the UniFi network application.Setting up this device is easy too.Setting up / Network AppAfter powering it on you‚Äôll want to adopt this device. It has bluetooth built in so you can adopt it if you have an existing unifi device on your network that also has bluetooth, or even easier from the UniFi network app on your phone.Then you have the choice of setting up a new system, which is what we‚Äôll choose, but you can also add this to an existing system which we‚Äôll talk about later.You‚Äôll name your device and set up WiFi, and then it will set up this device for you automatically.It will prepare the system for a few minutes and after that you‚Äôll be able to connect to your newly created wifi network.Once you‚Äôre connected, you can choose to manage the UniFi network via mobile app, or even the web.If you want to manage this from the cloud you can do this easily in the UniFi site manager. Once you land there you should see your UniFi Express ad clicking on that will bring you to the Network manager app.If you‚Äôre familiar with the UniFi network app, you‚Äôll feel right at home because it‚Äôs the same network application you‚Äôre used to with other UniFi products. But if you‚Äôre not, we‚Äôll walk through some of the highlights of the application so you can understand how you can use your UniFi express.DashboardIt comes with the UniFi DashboardThis is going to give you a heads up display of your network health and statistics. First we‚Äôll need to turn on dark mode, there that‚Äôs better. The dashboard is great for seeing how your network is doing at a glance. From here you can drill into the different aspects of your network or for example if you wanted to see why this device is the most active, you can drill into it, see details and insights about the device, and even test the latency right from here.You can also discover these features using the navigation on the left.TopologyTopology shows how data flows through your networkTopology will show you your network typology and how each device connects to your network. It also has this cool visualization of how traffic flows through your network, I would watch that all day.UniFi DevicesThis section shows all of your UniFi devicesThe unifi devices will just show your unifi devices on the network. This will look pretty bare with only a unifi express but if you have a more complicated network like I do at home, you can visually see how each device is connected. We‚Äôll make this light up a little later with another device, and even create a mesh network with that additional device just waiting to be adopted.Client DevicesThis section shows all of your client devices, non-UniFi devicesIn the client devices section you will see all of your client devices, your non unifi devices that are connected to the network. You‚Äôll also see some more details about each device and you can always drill into each to see more information about them.For example we can see that this device here is connected to the unifi express, using WiFI 6, and the connection is excellent. And here, again, you see insights, settings, and even test the latency for the device.PortsThis section shows the port manager. The UniFi express only has 2.In the ports section you see the port manager for each device. This is where you can manage the ports on your device. With the unifi express, we only have 2 ports. 1 LAN and One LAN. As far as port management goes on the WAN device, we can only manage the negotiation, but on the LAN side we can manage all aspects of the port.We can rename it, disable it or enable it, we can change the VLAN (if we had more set up, which we‚Äôll do in a bit) Allow or block tagged VLANs, and even some advanced configurations/RadiosThis section shows the radio manager.The radios section is where you will get lots of wireless insights. You can see which network you are managing and other information. But if you look at the top this is where you will see some really interesting insights. Coverage is going to show you how dense your network is compared to the clients that are connecting. This is helpful because it will let you know if clients are too far away and if adding another AP is recommended. Connectivity is going to show you if any clients have connectivity issues which is super helpful if some of your clients have issues connecting.This section shows other SSIDs in the areaEnvironment is going to show you all of the other networks in your area. This is really helpful for choosing your network channels for WiFi, something that UniFi can do for you automatically that we‚Äôll see later. And speed tests are where all of your client speed tests are. This is a hidden gem and yet another reason I love UniFi products.WiFiMan is a great app that works with UniFi network application to test your network and save the resultsThey have great mobile apps like WiFi man. WiFI man will help you test your network speeds from the client to the internet, check your WiFI signal, and even help you connect your device to VPN. Once you run a speed test on your device, the results will be stored in the Speed Tests section so you can compare results later.GatewayGateway shows which clients are using which services across your entire networkThe gateway section is going to show some of the metrics from your gateway. This includes classification of services being used across your network. You can see which apps, services, and protocols along with the amount of data they are using.System LogIn the system log section you can see different types of alerts and logs for your device and even manage push notifications for alerts.SettingsIn the settings section is where you can find all of the configuration options for your network.WiFiIn the wifi section you can create new networks, like a guest network in just a couple of clicks. You have a whole host of options for configuring wireless networks here.One of the other options you might have seen in the WiFi section is the option to optimize now. This option scans for wireless networks and tries to find the best wifi channel for you to use. I would recommend doing this right away, and then again on a schedule which we‚Äôll cover in a bit.NetworksIn the network sections this is where you will configure some advanced options like VLANs. I won‚Äôt cover this here because I‚Äôve already covered this in depth in a video, but this is where you would do it.InternetThe internet section is for configuring some of your WAN options, things like static IP addresses, dynamic DNS, and others can be configured here.VPNThe next section is for VPN and that‚Äôs where this device really gets awesome, not that it wasn‚Äôt already, but you can set up Teleport, which is UniFi‚Äôs 0 configuration VPN we talked about earlier with the WiFi Man app which will allow you to create a VPN connection just by sending a link. It‚Äôs super handy. If you don‚Äôt want to go that route you have your more traditional methods for doing that, with WireGuard, OpenVPN, and L2TP. You can also configure this to be a VPN client of another network, or set up a site to site VPN connecting this network to another network. Again, these are the same options you see across all unifi devices that support the UniFi network app.SecurityIn the security section you do see a slight difference between this device and some of their other devices. This device does have IDS and IPS so you‚Äôre going to see any configuration options there. IDS and IPS will help detect and block different security volitions based on rules and heuristics. You do see this option on devices like the UDM pro but it‚Äôs missing on this device.I think the reason for this is: cost performance make it more modularIt seems they are breaking this up a bit but we‚Äôll cover this a little later. But here we can configure general security including ad blocking and country blocking, traffic rules that can apply to different categories, port forwarding, probably the most important thing in this section, firewall rules for your VLANs and your WAN.RoutingWe also have routing which is for creating static routesProfilesProfiles where you get to create groups and settings that can be applied to ports, speed limits, RADIUS users, and IPs.SystemAnd lastly in System we can change UI settings, schedule automatic updates, schedule automatic backups, and turn on some additional services in the advanced section.Who is this for MeshingUse CasesAfter looking at all of the features that are supported in the UniFi network application and those that aren‚Äôt, you might be wondering who this device is for. The more I thought about this the more use cases I came up with!Small Business / Small NetworksFirst of all, it‚Äôs obvious that this is for any small business that wants a low cost but powerful network management with WiFi 6. It lets you create and manage a new site with vpn capabilities for a fraction of the cost of a typical deployment and on top of that it gives you WiFi 6. It then allows you to expand the network by adding additional switches and other UniFi access points.And if that site expands in the future, you can add additional UniFi Express devices that can act as an access point only and even mesh mode. That‚Äôs right, if you adopt this device to a network that already has a network controller running it will run in access point mode allowing you to extend your wifi range.Existing NetworksThis also works for existing UniFi networks. Say for instance you have a network set up already and want to add a simple, small access point, you can plug this in, adapt it to your existing network, and have a wifi range extender in minutes.Remote WorkersThis is great for remote workers too, since it can connect back to your corporate network with a VPN connection.Home NetworkUniFi express is an easy recommendation for home useThis could also be used at home for the home user. It‚Äôs more device than most will even need at home but provides a simple way to create a mesh network at home. You can start with one and expand as you need. And a majority of home users only use wireless anyway so the fact that it only has one network port is fine for most people.Mesh Network for ExpansionThis also applies to anyone that has a Dream Router that wants to add some more coverage to their network without running ethernet cables and worrying about Power over ethernet. With an express you just plug one of these in, mesh it, and you‚Äôve expanded your network. This is really helpful if you also have UniFi Protect Wireless cameras or DoorBells that aren‚Äôt near your router.Remote Tech SupportAnd a few personal use cases that I‚Äôve thought about are installing one of these at my family‚Äôs house for the occasional remote support that comes up every now and then. This makes troubleshooting their networks remotely so much easier than walking them through it.Travel RouterThis might replace my travel router‚Ä¶ time will tellAnd lastly something that I plan to use this for is for my travel router. I‚Äôve always wanted a UniFi device that‚Äôs small enough to travel with that provides secure access back to my home. Now I know that‚Äôs super specialized but it‚Äôs something that I‚Äôve been trying to build on my own for quite some time.UniFi Express is VersatileUniFi express is a great way to expand your networkThe more I think about this device the more use cases I come up with, from the first time home user that wants reliable WiFi at home, to the ‚Äúpro-sumer‚Äù at home that wants to dip their toes in the UnFi ecosystem at a budget, to the company that wants to give a small remote site wifi access and the ability to expand while still managing their network, to the remote user that wants access back to their corporate LAN without a bunch of network gear in their home, to me, the odd ball, who just wants to bring a device with them when the travel so that all devices can securely connect back to home. I am sure there are plenty more use cases I missed, so let me know your thoughts in the comments below.Well I learned a ton about the net UniFi Express, how to mesh wireless networks, and I hope you learned something too, and remember if you found anything in this post helpful, don‚Äôt forget share with a friend!Join the conversationThe past week I have been testing out a new device from Ubiquiti. It&#39;s the UniFi Express and it&#39;s here to shake up small networks! üëâhttps://t.co/E1CNDH5uNw pic.twitter.com/svs44LnsqW&mdash; Techno Tim (@TechnoTimLive) November 29, 2023Where to BuyUniFi Express: https://l.technotim.live/ubiquitiOther items in this video (because I know you will ask) Slim Patch Cables: https://amzn.to/3SXNGm0 Cozy Digital Fireplace LED Light: https://amzn.to/3SVJQKf Flickering Fireplace Lights : https://amzn.to/3uvqcud(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "EVERYTHING You Should Know About the HL15", "url": "/posts/hl15-review/", "categories": "homelab", "tags": "homelab, hardware, hl15, 45drives, 45, homelab", "date": "2023-11-22 07:00:00 -0600", "snippet": "The HL15 from 45Drives is here. It brings a lot of unique features and was built and designed with the HomeLab community in mind. In this in-depth review we‚Äôll cover everything you want to know a...", "content": "The HL15 from 45Drives is here. It brings a lot of unique features and was built and designed with the HomeLab community in mind. In this in-depth review we‚Äôll cover everything you want to know about this new storage server.üì∫ Watch VideoDisclosures: I was not paid I was sent an HL15 for reviewIntroHL15 from 45HomeLabThis is the newly released HL15 from 45 Homelab division of 45 Drives. It‚Äôs a server meant to meet the needs of the HomeLab community while bringing the build quality and design from their enterprise offerings. It‚Äôs a 15 bay server that can be used for just about whatever you want to use it for but it goes without saying that you‚Äôre most likely thinking about buying this to be your next storage server.There‚Äôs a lot to unpack with this new server so this will be an in-depth look at the H15 HomeLab Storage Server. We‚Äôll cover everything from the chassis, the backplane, the motherboard, the CPU, the power supply and power consumption, cooling, software selection, and even the price and value proposition, because at the end of the day if you don‚Äôt think it‚Äôs worth it, you‚Äôre probably not going to buy it. So, is it any good? Let‚Äôs find out.Purchasing OptionsWhen purchasing this machine you have a few options. Now you might have sticker shock when seeing these prices, but we‚Äôll talk about that later in the video. But your options are: Chassis &amp; backplane only Chassis, backplane, PSU, Data Cables, and PSU or fully loaded and tested which is the machine that they sent to me for testing.You have your choice of color, power cable, and additional add ons if you like. They sent a white for me, which is what I was hoping for.First let‚Äôs dive into the chassis and the case.Chassis / CaseSteel chassis with screws. I really dig the white and blueThis chassis is made of steel and it‚Äôs solid. Like really solid. If you‚Äôve only had aluminum cases in the past you‚Äôll notice the difference right away.It has a powder coat finish that comes in white or black, mine is obviously in white. This design is really nice, it has sort of this Star Wars Hoth vibe to it, which I am a fan of. Now looking at this case you can see that it‚Äôs almost entirely metal metal and screws, which I think is a good thing. Why does that matter? We‚Äôll, if you‚Äôve ever had a rivet pop off of one of your cases it‚Äôs near impossible to fix, at least for me, I‚Äôve never used rivets and wouldn‚Äôt know where to start.You can open this case up using these thumb screws and the first thing you see is the top loading drive cage.Holds 15 drives that can easily slide in and out, easy to see serial numbers (no more labels) and has these nice little springs to keep the drives in place. You‚Äôll also notice No caddies, which is something 45 Drives does not like and after loading quite a few drives in other systems I think it‚Äôs starting to rub off on me. Caddies just add more parts, more screws, and ultimately more time and complexity when servicing drives. It‚Äôs something that I can now appreciate after dealing with the status quo for so many years.The back of the chassis is pretty basic, I do wish it used PCIe blanks vs breakawaysOne of the downsides is that the PCIe slots have breakaways. Great if you never need to add an item (less parts, less screws, less things banging around) but awkward if you do shuffle around hardware. This is a carry over from their enterprise servers, something I also have in my AV15.The other nice thing about this case is that it can lay flat or even stack up like a desktop with the included feet. If you‚Äôre choosing to rack mount this, you‚Äôll just need to attach the included rack ears and then also pick up a pair of rack rails, which do not come with the server. If you don‚Äôt want the official rack rails, one of the universal rack shelves will work just fine.Motherboard &amp; ConnectivityLots of this connectivity options on this motherboardWe‚Äôll go a little more in depth on the backplane and some of its features a little bit later but let‚Äôs first focus on the motherboard and connectivity to help you understand how it all works.This motherboard is the SuperMicro X11SPH-nCTPF. It comes in 2 flavors, one with SFP+ networking and the other with 10Gbe networking.X11SPH-nCTF https://www.supermicro.com/en/products/motherboard/x11sph-nctpfCPU &amp; RAMThis is an intro level Xeon, great for PCIe lane, storage services, and a few containers or VMs but not too much after that Single Socket LGA-3647 Motherboard Up to 28 cores we‚Äôll cover the specific CPU a little bit later Up to 2 TB of RAM across the 8 DIMM slots DDR4-3200 Dual Rank ECC Registered RAMI opted for 32 GB of 2x16 and picked up more RAM from eBay and now have 128GB. It‚Äôs priced pretty fairly there if you‚Äôre thinking about buying some.I made sure that I tested it and it all passedIf you do decide to do this, be sure to populate your DIMs in dual rank mode according to the motherboard manual.SATA / SAS If you‚Äôre looking at the specs and read 10 SATA, that‚Äôs because it has 8 SATA ports and 2 SATA DOM. 7 SAS wired up to backplane, along with 8 SATA. 2 SATA DOM for OS or something else. NVMe on onboard. Mine came with a Kingston drive. Can support 2 more via OCuLink (u.2 spec) which I am not sure where you would put the drives but it‚Äôs possible. https://store.supermicro.com/supermicro-55cm-oculink-to-u-2-pcie-with-power-cable-cbl-sast-0956.html You can also look for SuperMicro NVMe add-on cards if you need more NVMe. (Where to Buy section)PCIe 4 PCIe 3.0 slots: 16x, 8x, 8x, 4x in 8x slot They are 3.0 3.0 is 1 GB/s and 4.0 is 2 GB/s but real world not sure if you‚Äôre notice This gives you plenty of room for expandabilityBackplaneCustom backplane created by 45 drives. It can address up to 15 drives. They‚Äôve wired up 8 to SATA and 7 to SAS The 8 SATA run though the C622 onboard controller 6 GB ports 7 SAS run through the Intel 3008 controller 12 GB/s ports Can push up to 2,000 MB /s? You can saturate a 10g link easily with this much storage Basically NVMe speeds over the network This backplane has some custom features. It‚Äôs the same backplane that they put in their enterprise Storinators they just developed Universal Hot Swap Power limiting features so that when plugging in drives it won‚Äôt affect its neighbors voltage Staggered spin up Staggers the spin up of the hard drives Starting all at the same time can create a surge I think this is why one of my old JBOD servers trips my power supply when I power it on. Power SupplyThe HL15 has a modest power supply. Great for 15 drives but might need some additional wattage if you‚Äôre going to add more components Rm750e from Corsair ATX, Fully Modular make sure that you only use the cables you need reducing clutter in the case. This is welcomed because when swapping out the power supply in my AV15 there were lots of cables and it was a specialized power supply. Great to see they are using a standard ATX now. Low noise because of its 120mm fan, and can even spin down to 0 RPMs on low loads. It also has an 80 plus gold certified rating meaning that it‚Äôs up to 90% efficient at steady loads. Could you get a more efficient one, sure, but it‚Äôs going to cost a lot more. Overall solid power supply but 750w might not leave too much headroom if you‚Äôre planning on adding all 15 drives and some additional components.Networking Dual 10g SFP+ ports I went this route because I feel like it‚Äôs a little more flexible than going 10g ethernet I ended up buying a few 10g RJ45 transceivers to connect to 10g ethernet on my switch (Where to Buy section)IPMI IPMI onboard typical ASPEED IPMI you need on SuperMicro boards Works great for getting into your machine when it‚Äôs powered down or before it has an OS. I used it to flash the BMC and firmware shortly after getting it powered on. I did buy the remote license update from SuperMicro, which I typically do with all my boards that allows you to flash bios through the UI. It costs about 27 bucks and while it stinks to pay for this license, there‚Äôs no easy way around it if you do want to flash your BIOS remotely or want access to some of the other features.MiscThere are lots of additional headers on the board if you need, like TPM, USB, and even additional serial.IO VGA, which honestly doesn‚Äôt matter since you have IPMI, but this is pretty typical with servers USB 2 and 3.0 ports, network again, and serial.Overall, I think this is a solid server board for this configuration.CPUIntel(R) Xeon(R) Bronze 3204 CPU @ 1.90GHzhttps://ark.intel.com/content/www/us/en/ark/products/193381/intel-xeon-bronze-3204-processor-8-25m-cache-1-90-ghz.html 2nd gen Intel Xeon Scalable processors Cascade Lake 6 Cores, no Hyper-threading Max clock 1.9, low for single thread performance but fine for me Can address up to 48 PCIe lanes which is great for the board we have TDP 85w VTx, VtD, AES-NI and more of the typical tech you see in Xeon CPUsReal world, is the CPU enough? It is for me. I will be doing very little compute on this server. If you plan on using this as a hypervisor like Proxmox, you might want to look into another CPU. I checked other CPU options on the used market and it‚Äôs actually not to bad if you want to upgrade this CPU later on down the road.Power Consumption &amp; Efficiency Turning it on without anything plugged in it‚Äôs going to pull about 80 watts of power while doing system tests and if you plug in a few additional USB devices, the monitor, a couple of GBICs it‚Äôs going to pull an additional 10. When fully booted into Ubuntu 22.04 LTS without anything plugged in it‚Äôs going to pull about 70 watts. The only drives I had free to test with here these 8TB Seagate Ironwolf 7200 RPM NAS drives After inserting each drive and letting them spin up and normalizing, each drive added about an additional 8-9 watts of power. After inserting 6 without anything else plugged in, we‚Äôre sitting at about 114 watts After pulling in the 2 10g transceivers and the IPMI nic, we‚Äôre sitting at right around 125 watts. Not too bad all things considered. I disconnected the fans just to see and it looks like they are using about 4 watts a a pieceCooling 6 x 120mm CoolerGuys fans 1700 RPM 32.5dBA 73CFM - cubic feet per minute 2.47mm H2O - static pressure (measures in inches of water) 6 of these total 3 in the front to take in cool air and cool the drives and another 3 to push air across the motherboard and keep components cool.These fans move a lot of air and you don‚Äôt need to worry about your components ever overheating. They do this at the cost of noise though. How loud are the fans? I am not sure how to put this but they are quiet for enterprise servers and loud for a home server. They are much quieter than its enterprise counterpart, the AV15, but still not something you want to put in your living room. I am thinking about replacing them with Zigbee controller RGB fans like I did with my AV15 customization video but haven‚Äôt had the time to rip it apart yet.If you do decide to replace the fans, just be sure that you‚Äôre getting something on par with these and specifically ones with enough static pressure.The CPU cooler is passive and I think that has a lot to do with why they‚Äôre using these fans. On my AV15 I did swap this out for a noctua cpu cooler that kept it just as cool, if not more, which then allowed me to replace the fans with quieter fans. You can find the fans I used in the AV15 in the Where to Buy section.OS &amp; SoftwareThe HL15 ships with Rocky Linux but I assume that‚Äôs there just to run their QA tests. Since this is an open system x86 you can install anything you like on it from Proxmox, to TrueNAS, VMware or any operating system. If you‚Äôre buying this as a storage server, most likely it‚Äôs going to be something that handles storage nicely.I took a slightly different approach with this system and decided to not install a hypervisor and install Ubuntu LTS. This time I am going to go bare metal and see how manageable Ubuntu is with services like SMB, NFS, ZFS, some docker containers, and possibly some KVM if I want virtualization.I am also going to give Cockpit a shot, or the Houston UI as 45Drives calls it. This gives me a friendly UI to manage some of these services which are otherwise pretty complex.That‚Äôs when I found out that they don‚Äôt yet support 22.04, only 20.04 which is the previous LTS from 3 years ago. With all of that being said, I am going to install Cockpit without the 45Drives special sauce.This was super simple with a command‚Ä¶Or so I thought‚Ä¶And that had its own issues so for the sake of showing off what Cockpit / Houston can do I decided to install Ubuntu 20.04, which is still supported. Hopefully 22.04 will be supported, or even 24.04 in the spring.Installing is as easy as downloading a script and then executing it. It will install many different modules to help you manage your server. After setup is complete you‚Äôll reboot.Once installed you can see Houston or Cockpit running on your server IP https 9090At the time of testing Houston for this video, it seems like some of these modules are not working properly with the HL15, for example the 45Drives Disks and the 45Drives Motherboard do not load, and the 45Drives System area is partially loaded and there are some services that fail to load like ZnapZend. These few things aside, the rest of the UI seems to be working.I can create ZFS pools, create SMB and NFS Shares, and even create some virtual machines if I like, although the UI is pretty basic for this. Creating users, Charts, metrics, benchmarks, and even accessing the terminal all seem fine. You can also install additional applications by using the cli and finding an application on their project page however most of them are already installed. For example I installed and open LDAP server on my machine and that worked just fine, however beta applications like Tailscale and cloudflare tunnels aren‚Äôt available on this version of cockpit so you won‚Äôt be able to install them, arguably that‚Äôs probably better suited for something like Docker and containers, and if you‚Äôre going to install manage containers, you‚Äôll want to install Portainer to manage them.If I do end up going this route, I would leave Cockpit for managing hardware type services and configuration and leave the rest to Docker and I will manage Docker with Portainer since it‚Äôs only a few clicks away. All that being said, I know that this is a new line for 45 drives, but it would be nice if this were working so that I wouldn‚Äôt be forced to use proxmox because I don‚Äôt need virtualization, and TrueNAS because I don‚Äôt want to run their apps. I might just go bare metal without any gui, but managing configs for smb, zfs, zfs, etc is such a pain.So more to come on the OS for this server, I still have time to make my decision and the nice thing is it‚Äôs flexible!Hardware &amp; Network Stress TestThe HL15 with a standard config can easily push 20 G/bsYou‚Äôll have to see the video for this section. Spoiler alert, I can push 20 Gb/s with this configuration, no problem at all.Price &amp; ValueOne of the first products that is targeting the HomeLab communitySo let‚Äôs talk about some of the configuration options you saw earlier along with the value you‚Äôre getting.You can choose: Chassis + Backplane for $799 which is going to get you the chassis with the direct wire backplane. Everything else is up to you to supply and connect. The next option at $910.00 is the Chassis + Backplane &amp; PSU which is going to get you the chassis, the direct wire backplane, data cables, and the 750w ATX power supply. The final option for $1999.99 is the fully built and tested system.Let‚Äôs not beat around the bush, all of these options are priced pretty high. No matter which way you look at it, $800, $900, $2,000 dollars is a lot of money no matter what you are spending it on and I think you have to determine if there‚Äôs enough value here for you. Is getting a steel, repairable case with a backplane that can hold 15 caddie-less drives and give you NVMe speeds over the network important to you? If it is, you have few options out there. This isn‚Äôt a chassis you buy that comes with a proprietary motherboard and components, it‚Äôs a chassis that is open enough to accommodate any motherboard / CPU combination you throw at it, now and in the future. If you‚Äôre comparing it to other storage vendors, like synology, it‚Äôs on par for price, but if you‚Äôre comparing it to old used gear you‚Äôre going to think it‚Äôs expensive.That being said, I would love to see cheaper options for those that are in the market for a homelab chassis like this one. And if not, maybe they will see these on the second hand market later in life.If you can get past the price, I think you‚Äôll find a case that has everything you‚Äôre going to want for a storage server, now and in the future. It looks like 45Drives addressed everything I mentioned in the AV15 with the HL15, well, except RGB, unless you‚Äôre counting the power switch. Also, I have to give them credit because they took a huge risk at bringing something to market that is as niche as HomeLab, because to my knowledge, they are one of the first to do it and brand it with the ‚ÄúHomeLab‚Äù Title.Well I learned a lot about the HL15, storage servers, and network throughput testing and I hope you learned something too. And remember if you found anything in this video helpful, don‚Äôt forget share this post!Join the conversationAfter a week of using and testing the HL15, I finally released my in-depth review of this new storage server. Does it meet the HomeLab community needs?üëâhttps://t.co/qCutlEbYYs pic.twitter.com/xGGOHodgaq&mdash; Techno Tim (@TechnoTimLive) November 22, 2023Where to BuyHL15: https://45homelab.com/HL15 Accessories: Universal Rack Shelves: https://amzn.to/3usoh9Q Blank PCIe Covers (Black): https://amzn.to/3sK8ZwE Blank PCIe Covers (White): https://amzn.to/3sLTSCY RGB Case Fans: https://amzn.to/3SURBAc Heavy Duty Noctua Fans: https://amzn.to/3QT2M9E 8 TB NAS Drives: https://amzn.to/3sUCz2x SATA DOM: https://amzn.to/3QT30h0 Samsung NVMe: https://amzn.to/46o6v4R SuperMicro 2 NVMe PCIe Card: https://amzn.to/47ENblz SuperMicro 4 NVMe PCIe Card: https://amzn.to/3sNIdni 10g SFP+ to RJ45 Transceiver: https://amzn.to/3GbKonB Noctua CPU Cooler: https://amzn.to/46qHKFh 16 GB DDR4-3200 RDIMM RAM: https://www.ebay.com/itm/204230531994?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet netboot xyz - Network Boot Any Operating System", "url": "/posts/netbootxyz-tutorial/", "categories": "self-hosted", "tags": "netbootxyz, pxe, docker, open-source, homelab", "date": "2023-11-11 07:00:00 -0600", "snippet": "Imagine all of your favorite operating systems in one place, available anywhere on your network, and you‚Äôll never need to use your flash drive again. That‚Äôs the promise of netboot.xyz, a network b...", "content": "Imagine all of your favorite operating systems in one place, available anywhere on your network, and you‚Äôll never need to use your flash drive again. That‚Äôs the promise of netboot.xyz, a network boot service that lets you install or boot to any operating system simply by booting to the network.üì∫ Watch VideoDisclosures: Nothing in this video was sponsoredDon‚Äôt forget to ‚≠ê netboot.xyz on GitHub!Requirements docker (and compose) docker machine has a static IP dhcp server &amp; access to settings (or install your own)Docker SetupSee this post on how to install docker and docker composeInstallcreate folders netboot_xyz, netboot_xyz/assets, netboot_xyz/configmkdir netboot_xyzcd netboot_xyzmkdir assetsmkdir configCopy yaml to server or portainer, etcContainer Imageslinuxserver.io container imageParameter Docs---version: \"2.1\"services: netbootxyz: image: lscr.io/linuxserver/netbootxyz:latest container_name: netbootxyz environment: - PUID=1000 #current user - PGID=1000 #current group - TZ=Etc/UTC # - MENU_VERSION=1.9.9 #optional, sets menus version, unset uses latest - PORT_RANGE=30000:30010 #optional - SUBFOLDER=/ #optional volumes: - ./config:/config - ./assets:/assets #optional ports: - 3000:3000 - 69:69/udp - 8080:80 #optional restart: unless-stoppedOfficial container imageParameter Docs---version: \"2.1\"services: netbootxyz: image: ghcr.io/netbootxyz/netbootxyz container_name: netbootxyz environment: # - MENU_VERSION=2.0.47 # optional, sets menus version, unset uses latest volumes: - ./config:/config # optional - ./assets:/assets # optional ports: - 3000:3000 - 69:69/udp - 8080:80 #optional restart: unless-stoppedRunningbring up stackdocker compose up -dcheck to be sure it‚Äôs running‚ûú netboot_xyz docker psCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES83e6c5192156 lscr.io/linuxserver/netbootxyz:latest \"/init\" 14 seconds ago Up 12 seconds 0.0.0.0:69-&gt;69/udp, :::69-&gt;69/udp, 0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp, 0.0.0.0:8080-&gt;80/tcp, :::8080-&gt;80/tcp netbootxyzshould see something like:Check the logs‚ûú netboot_xyz docker logs netbootxyz[migrations] started[migrations] no migrations found‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïê‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ñà‚ñà‚ïë ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù Brought to you by linuxserver.io‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄTo support the app dev(s) visit:netboot.xyz: https://opencollective.com/netbootxyz/donateTo support LSIO projects visit:https://www.linuxserver.io/donate/‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄGID/UID‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄUser UID: 1000User GID: 1000‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ[netbootxyz-init] Downloading Netboot.xyz at 2.0.73[custom-init] No custom files found, skipping...crontab: can't open 'abc': No such file or directorylistening on *:3000[ls.io-init] done.4Lg88gNm_wqDORftAAAB connected time=1699460581160ConfiguringYou can now browse to the container‚Äôs homepagehttp://192.168.10.125:3000/You should see a list of pxe boot menu items and the option to cache the pre boot environment locallyLocal MirrorIf you want to serve the files from a local mirror, you can edit the boot.cfg file from the boot menuschange:set live_endpoint https://github.com/netbootxyzto:set live_endpoint http://192.168.10.125:8080Keep in mind that you will not be able to boot from any environments you haven‚Äôt downloaded.DHCP ConfigurationSince I cannot cover configuring every DHCP service out there, I will cover the basics. Fortunately linuxserver.io has many routers covered as well as the official netboot.xyz docs.UniFi UDM Pro / SESettings &gt; Network &gt; Choose Network &gt; DHCP Service Management &gt; Show OptionsHere you‚Äôll want to check ‚ÄúNetwork Boot‚Äù and fill in the server IP and the file nameFor me, it‚Äôs:Server IP: 192.168.10.125Filename: netboot.xyz.kpxe (this is the default BIOS option)Save.Preferably we would like to offer a PXE boot per architecture, and UDM supports it however not in the UI. Follow these instructions to do it via CLIIf you‚Äôre up to it, here‚Äôs my config:## Generated automatically by ## Configuration of PXE boot for '# The boot filename, Server name, Server Ip Addressdhcp-boot=netboot.xyz.kpxe,netboot.xyz,192.168.10.125# inspect the vendor class string and match the text to set the tagdhcp-vendorclass=BIOS,PXEClient:Arch:00000dhcp-vendorclass=UEFI32,PXEClient:Arch:00006dhcp-vendorclass=UEFI,PXEClient:Arch:00007dhcp-vendorclass=UEFI64,PXEClient:Arch:00009# Set the boot file name based on the matching tag from the vendor class (above)dhcp-boot=net:UEFI32,netboot.xyz.efi,netboot.xyz,192.168.10.125dhcp-boot=net:BIOS,netboot.xyz.kpxe,netboot.xyz,192.168.10.125dhcp-boot=net:UEFI64,netboot.xyz.efi,netboot.xyz,192.168.10.125dhcp-boot=net:UEFI,netboot.xyz.efi,netboot.xyz,192.168.10.125Verifycat /run/dnsmasq.conf.d/PXE.confCopy file to /run/dnsmasq.conf.d/PXE.conf on UDMrunkill `cat /run/dnsmasq.pid`You‚Äôll have to do this on each rebootIf you don‚Äôt want to do this, you‚Äôll have to change the image file each time.Booting to networkTo boot to the network you‚Äôll need a BIOS and NIC that supports it enable in BIOS enable EFI PXE Boot enable Legacy (BIOS) PXE Boot Figure out boot override or network boot key Power on and boot to network (BIOS of EFI)See the boot menu, choose OS and go! Word of caution, there might be some that do not work. This is a moving target.e.g. Ubuntu 23.10 isn‚Äôt working for me now, but could soon. Other OS are fine. You may need to try different NICs if you are using virtualizationWhat about Windows?Requirements Windows 10/11 machine Windows ISO Windows ADK for Windows 10/11 Windows PE add-on for the Windows ADKWindows 11 ADK downloads hereInstall Windows ADK for Windows 10/11.Install Windows PE add-on for the Windows ADK.Run Deployment and Imaging Tools Environment as administrator from the start menu.Navigate to foldercd \"..\\Windows Preinstallation Environment\\amd64\"Mount the Windows PE boot image.md C:\\WinPE_amd64\\mountDism /Mount-Image /ImageFile:\"en-us\\winpe.wim\" /index:1 /MountDir:\"C:\\WinPE_amd64\\mount\"Copy filesXcopy \"C:\\WinPE_amd64\\mount\\Windows\\Boot\\EFI\\bootmgr.efi\" \"Media\\bootmgr.efi\" /YXcopy \"C:\\WinPE_amd64\\mount\\Windows\\Boot\\EFI\\bootmgfw.efi\" \"Media\\EFI\\Boot\\bootx64.efi\" /YUnmount the WinPE image, committing changes.Dism /Unmount-Image /MountDir:\"C:\\WinPE_amd64\\mount\" /commitDelete the temp folder that was created earlier (so we don‚Äôt get an error when copying)rmdir /s C:\\WinPE_amd64Create working filescopype amd64 C:\\WinPE_amd64Create a bootable WinPE ISOMakeWinPEMedia /ISO C:\\WinPE_amd64 C:\\WinPE_amd64\\WinPE_amd64.isoThen copy the contents of WinPE_amd64.iso to netboot.xyz container‚Äôs /assets/WinPE/x64/ folder (need to create folders first)Then you‚Äôll want to create an SMB share named Windows in your environment. You can create or download a Windows ISO by visiting Microsoft‚Äôs siteOnce you have created your Windows ISO, you can then extract the files to the root of the Windows share you just created above.Now we need to configure netboot.xyzIn netboot.xyz UI, update boot.cfg to set win_base_url http://192.168.10.125:8080/WinPE and save.Now you can PXE boot to the network (be sure you are using the EFI boot image and your device supports UEFI) and then choose Windows from the netboot.xyz menu.This should boot to a DOS prompt in the Windows Pre-boot EnvironmentTypewpeinitthen typenet use F: \\\\&lt;server-ip-address&gt;\\&lt;share-name&gt; /user:&lt;server-ip-address&gt;\\&lt;username-if-needed&gt; &lt;password-if-needed&gt;If you want it to prompt for a username and password, remove the user argumentnet use F: \\\\&lt;server-ip-address&gt;\\&lt;share-name&gt;This will map the F: drive to your Windows share that the Windows ISO extractedthen typeF:\\setup.exeThen hit enter and Windows installer should launch!I‚Äôd love to also automate the mounting of the share however I haven‚Äôt found a clean way to do it yet. If you know, let me know in the comments below and I can add it!Join the conversationBack in my tech support days I thought that if I had PXE network boot at home, that I &quot;made it&quot;. We&#39;ll, that day has come! This past week I learned all about netboot xyz! I can now boot and install any operating system over the network!Check it out! https://t.co/PzPmYzKWLH pic.twitter.com/FQr4W4TPtp&mdash; Techno Tim (@TechnoTimLive) November 11, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Introducing the ZimaBlade! - An affordable Low Power Single Board Computer!", "url": "/posts/zimablade-review/", "categories": "homelab", "tags": "zimablade, hardware, casaos, linux, windows", "date": "2023-10-30 08:00:00 -0500", "snippet": "Introducing the ZimaBlade, an affordable, low power, single board computer that‚Äôs great for a home server, homelabs, tinkering, NAS, retro gaming, or even a dual boot desktop system like me.üì∫ Watch...", "content": "Introducing the ZimaBlade, an affordable, low power, single board computer that‚Äôs great for a home server, homelabs, tinkering, NAS, retro gaming, or even a dual boot desktop system like me.üì∫ Watch VideoDisclosures: I was not paid Ice Whale provided ZimaBlades and accessories for testing I bought everything else with my own moneyIntroZimaBlade stands outEvery so often a device comes into focus that‚Äôs a little different than the rest. It looks familiar yet different. It stands out among the others in the sea of familiar devices and once you use it and hold it in your hands you understand why it‚Äôs different and why that matters. This is the ZimaBlade, a single board computer from Ice Whale. It‚Äôs the second device we‚Äôve seen from them and it‚Äôs much different from their first device, the ZimaBoard. There are a few features that make you think that this might be a successor to the ZimBoard, but there are many others which show that the ZimaBlade can stand on its own as a new product in their lineup. Today I am taking a look at the ZimaBlade and discussing some of my thoughts around this device, how it compares to the ZimaBoard, and some of the interesting quirks I found that you might be interested in.Unbox ExperienceZimaBlade looks like a Walkman from the 80s, and that‚Äôs a good thingUpon opening you can‚Äôt help but notice the cyber punk theme on the packaging and the device. I am a fan of this design and it fits right in with the renegade, self-hosting, cyber native vibe they are going for. Next, they chose to make the case transparent, which again plays well with the theme they have going and gives this device some character. And last, how much it looks like a Walkman from the 80s. Now that‚Äôs not a bad thing, Walkmans had a ton of style, came in all shapes and sizes, and was an icon in 80s culture. But I digress.Hardware SpecsZiaBlade without its caseThe ZimaBlade comes with either an Intel Celeron J3455 Quad core Apollo Lake processor or an Intel Celeron Dual core processor depending on which model you choose.This CPU supports AES NI for encryption, VT-x for virtualization, and VT-d for directed I/O or hardware passthrough.This processor is paired with the Intel integrated HD 500 graphics processor which is clocked at around 700 Mhz. This chip also supports QuickSync and a handful of other features that help ensure that video playback is smooth as well as enough processing power to do some lightweight retro gaming. You output the video with this mini display port that supports up to 4k at 60Hz.It has a SODIMM slot that supports up to 16 GB of DDR3 RAM which is removable and not soldered on. As far as storage goes it has 32GB eMMC for storage and dual SATA 3.0 ports for connecting additional drives if you choose to do so.It has a 1 Gb ethernet port and as far as USB goes it has one USB A 3.0 port and one USB C port that supports power, data, and display.The back of this case is also aluminum alloy that is fused to the heatsink which will help dissipate heat without a fan,Last but not least is this bump you see here and that‚Äôs the PCIe 2.0 x4 slot. This slot is what made the ZimaBoard unique, was not only creating an x86 single board computer but also including a PCI slot to connect devices that you can‚Äôt use on other mini PCs, laptops, or similar devices without using a Thunderbolt enclosure. And as you can see the ZimaBlade also gets this slot.This slot can be used for almost any PCIe device you can think of that can fit into a 4x slot and doesn‚Äôt require external power. This includes things like 10g network adapters, 2.5g network adapters, additional USB ports, WiFi 6 adapters, additional SATA ports, NVMe adapters, cards and for AI and ML.First Boot experienceZimaBlade with its case, showing off some of its portsAfter installing the RAM and plugging in the device you will boot into Debian Linux which comes preinstalled. You can sign in using the username and password of casaos. You‚Äôll want to change this as soon as possible and update your system.You might want to grab the IP too because you‚Äôll need it to get into the CasaOS web UI that also comes preinstalled. CasaOS is an open source management interface to help you install over 50 docker apps with a single click along with supporting any other docker image you can find. It makes setting up a NAS with Docker apps a snap and great for a beginner although if you‚Äôre already familiar with other open source NAS solutions you might be missing some features when evaluating CasaOS.If you‚Äôre interested in a deeper dive into what CasaOS is, I‚Äôve done a video on 20 different projects you can run on your ZimaBoard and now ZimaBlade, including CasaOS.One thing that was mentioned in the instructions, yes I read them, if you go out to you can easily find your Zima device by clicking this button. Now this didn‚Äôt work for me even though my devices were on the same network but that might be because this feature isn‚Äôt ready yet.You‚Äôll also see that they have released Windows and Mac clients too. After downloading and installing these clients you‚Äôll notice that it also installs ZeroTier. Again, there isn‚Äôt documentation on this stuff yet because it‚Äôs pretty new but it looks like they might allow you to connect to your Zima device easily over the internet no matter where you are and if you have an edge connection or not. This might be for the upcoming ZimaOS that I peeped on their Github. Oh and if you‚Äôre worried about the code or client that‚Äôs running, all of this is open source and on GitHub so you‚Äôre free to check it out if you don‚Äôt trust it.My Workbench Testing SystemPCIe connectivity is often not found on mini PCsThe nice thing about this hardware being open is that you are not locked into how the vendor wants to use it. If you don‚Äôt like Debian or CasaOS, fine, just wipe it and install whatever you like. Want to build your own NAS using OpenMediaVault or TrueNAS, go for it. Just get a bootable flash drive, install it, connect a couple of drives and you‚Äôre good to go. If you do go this route I would recommend picking up the NAS kit that includes this dual 3.5‚Äù storage drive stand and a special Y SATA cable that helps you connect and power 2 additional drives. And just like that you have a NAS‚Ä¶. or do what I did and create a dual boot Windows and Linux system!I use both Windows and Linux a ton on my workbench and I always find myself toggling back and forth when testing hardware. Plugging in When I saw the ZimaBlade had a case for 2 additional drives I knew right away that this is how I was going to use it. I grabbed a few old SSDs out of my drawer, picked up a couple of cheap 3.5 to 2.5‚Äù drive adapters, installed the drives, and then connected them all with this Y SATA splitter and it was ready to go.Installing a dual boot system on this was relatively easy however I‚Äôve had some experience with this in past and I even did a video on it, but if you‚Äôre interested on how to do this I will have a link to my documentation that will explain exactly how to do dual boot with a ZimaBlade.Now when booting I can choose Windows or Linux when booting up. You can see that this little quad core processor is working its tail off during the boot process but it tapers off after a few seconds. The integrated intel video card works decent enough for watching videos and I assume it works fine too for retro games but this is just enough for what I need to test out hardware and flash and wipe drives.This device can boot into Windows 11 and play videos, no problem!On the Windows side it‚Äôs using anywhere from 6-10 watts of power after signing in and letting the machine sit for about 5 minutes to ensure that most sign in tasks were complete. This variance we see here is due to a lot of the background tasks that run on Windows and a little bit for the task manager.When launching the default browser of Edge and playing a video on YouTube we can see the power usage jump from 10‚Äì18 watts. The other thing when looking at the task manager is that the integrated graphics have kicked in to decode the video. If we look at the stats for nerds there were only a few dropped frames and most of them were when starting the video and resizing the window to full screen.It‚Äôs no surprise that this also works with Linux! (Ubuntu 23.10 shown in picture)The same goes for Linux, when booting this Ubuntu 23.10 machine the machine I can choose Linux from the GRUB menu and boot into Ubuntu Desktop and as you can see the CPU and resources taper off after a few seconds and everything runs smoothly. Power usage after letting the machine sit for about 5 minutes is anywhere between 5 - 7 watts, again the variance is due to background tasks and System Monitor. Playing a YouTube video with the default browser of Firefox we can see the power usage jump from 11 - 17 watts. System monitor doesn‚Äôt report GPU status so I installed intel gpu utilities and was able to see the intel video card decoding the video.One of the things I use this for most often is flashing SSDs and wiping and formatting drives. These two things are pretty cumbersome to do without physically plugging them into a system via SATA, PCIe, or Thunderbolt. Each of these solutions take up a lot of space or require additional hardware requirements. I found that having an ‚Äúopen air‚Äù PCIe slot on this machine makes it super simple to test complete any of these tasks, and with a small footprint. And this is just one of many possibilities with the ZimaBlade because at the end of the day, it‚Äôs really just a mini desktop.My Thoughts About the ZimaBladeThe engineering sample came with a white PCB, let‚Äôs hope it sticks aroundI do have some thoughts after using this for a couple of days. Overall it‚Äôs great and hard to complain about something when there‚Äôs so much to like.I think my biggest gripe has been power. I went into this thinking that I can use any USB C power adapter since it supports Power Delivery 3.0. Turns out that this is a 12v Power Delivery 3.0 power supply and I couldn‚Äôt find any power adapters here at home that supported it, not my Macbook charger, an Anker charger, or even this no-name charger. This really isn‚Äôt a big deal however if I used one of my existing adapters, it seemed to also do something weird to the device to where I had to reset the CMOS a few times. I reached out to IceWhale and they pointed out that I needed to use a Power Delivery 3.0 12v/3a power adapter like the one that is included. I 100% agree that the provided adapter works but USB C Power Delivery 3.0 with 12v/3a is less common in North America with a lot of power adapters, at least the ones I have access to. IceWhale did say that they were going to try to make it compatible with more adapters before production so we‚Äôll see. Moral of the story is just use the adapter they ship and you‚Äôll be fine, which means you might want to buy their power adapter to be sure. When using the correct power adapter with a USB C hub, everything worked fine including USB, HDMI, and power delivery.Another small gripe is that you can‚Äôt see the power LED when you have it in the case. The only reason I am bringing this up is because I had to check the LED over and over when figuring out the previous issue related to power. Not a big deal but one little hole or clear cutout in the case would go a long way.While we‚Äôre on the topic of LEDs it would be nice to have a pair of lights for the NIC for status and activity and also I noticed that the HD activity light doesn‚Äôt flash for eMMC. Again, not deal breakers, just nice to haves.Also a small power button would have been awesome. I still feel odd pulling out the power to reset or power down this machine. I did check for pins and I could only make out the reset switch. It would be great to add these pins to the documentation, I am sure others will ask about this if they haven‚Äôt already, and everything else is documented nicely in the booklet that shipped with the device.Oh, and they sent me 2 devices, one was an engineering sample with a white PCB and one that is closer to the final product which has a black PCB. Honestly I love the white PCB model even though I am a huge fan of dark mode! This white PCB just makes it feel more SciFi and futuristic and really makes all of the componentry pop. I dunno, what do you think? Light Mode PCB or Dark Mode?Hopefully some printed caddies or the like make their way into the ecosystemAlso, it would be cool if there were some sort of printable adapter to prop up your PCIe devices when they are plugged in. When you aren‚Äôt using the 2 drive base stand it‚Äôs easy to prop something under it, but when it‚Äôs dangling about 6 inches up it‚Äôs kind of scary. A printable tray or stand that could hook into the existing stand would go a long way. You could even sprinkle in some of the Cyber Punk designs from the device.OK it sounds like I am nitpicking now but these are just small things that I think would really put some polish on this device.It‚Äôs hard to complain when there‚Äôs so much to like about this $64 board. I know that it has an older CPU in it, along with DDR3, and the PCI is only 2.0, but considering the cost and what I will use it for I would rather keep the cost down than pay for features I personally won‚Äôt use.And I think that‚Äôs the goal of this device as stated by IceWhale: ‚ÄúThe ZimaBoard was built on top of a relatively expensive ($120-$200) x86 single-board computer compared with the popular Raspberry Pi. Since most people can‚Äôt afford such expensive hardware without knowing what exactly it can do, we decided to create something better suited for the broader cyber native ‚Äì something that is cheaper, smaller, and easier to use and carry around.‚ÄùIf this is something you want to support, check out the links for more information: ZimaBlade on CrowdSupply: https://bit.ly/3PeSpxv ZimaBlade Official Site: https://bit.ly/3tOlpUxWell I learned a lot about the new ZimaBlade, Power Delivery over USB C, Dual Booting Windows and Linux and I hope you learned something too. And remember if you found anything in this post helpful, don‚Äôt forget to share!Join the conversationThe past week I got to play with and configure the ZimaBlade, a new single board computer. Super fun device with some quirks. Did it replace my ZimaBoard? üëâhttps://t.co/GfuWbkqXMJ(Also I couldn&#39;t pass up doing a Halloween themed thumbnail!) pic.twitter.com/HzW7mxE35n&mdash; Techno Tim (@TechnoTimLive) October 31, 2023Where to BuyZimaBlade: https://bit.ly/3PeSpxvZimaBlade Accessories: 10g NIC: https://amzn.to/47aLJXl Quad 2.5g NIC: https://amzn.to/3sl2Bf1 4 Port USB Card: https://amzn.to/3FFIzPr WiFi 6 PCIe: https://amzn.to/3sfwLQY PCIe SATA Expansion: https://amzn.to/3sbNdlj SAMSUNG SSDs: https://amzn.to/3Sf5bxU 8GB SODIMM RAM: https://amzn.to/40iXUiw Anker USB C Hub: https://amzn.to/49tQCwL Slim Cat6 Cables: https://amzn.to/45NVj1e 2.5 to 3.5 Bracket: https://amzn.to/3s6q7fZLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My NEW Ultimate Desk & Setup Tour 2023!", "url": "/posts/desk-tour-2023/", "categories": "vlog", "tags": "desk, tour, windows, mac, linux, studio, hardware, ultrawide", "date": "2023-10-21 08:00:00 -0500", "snippet": "Ever wonder what my home office and studio looks like and which tools I use? Check out my NEW ultimate desk &amp; setup Tour for 2023! (My setup, my desk, my workbench, and even my studio rack for ...", "content": "Ever wonder what my home office and studio looks like and which tools I use? Check out my NEW ultimate desk &amp; setup Tour for 2023! (My setup, my desk, my workbench, and even my studio rack for 2023!)Disclosures: I was not paid Elgato provided some items for free, the rest I chose and bought with my own money over the years Grovemade provided desk shelf and desk pad for free I bought everything else with my own moneyThanks to Grovemade for helping me organize my desk! Use code TECHNOTIM for 10% off! https://l.technotim.live/grovemadeHuge shout out to Elgato for helping me get my stream in check! https://www.elgato.comüì∫ Watch VideoNotesHere are my notes from the video in case you wanted a little more context than I was able to provide in the video! This was such a fun project but yet I am glad I am done! Let me know if you have any questions in the comments below! All parts are linked in the Where to Buy section below!MonitorsSamsung 57‚Äù Ultrawide and my Dell 4k monitor!Samsung Odyssey Neo G9 57‚Äù Dual 4k UHD Dual 4k means they put 2 4k panels together 240Hz refresh rate and 1ms response time I don‚Äôt need this at all, 120Hz is great but what I really wanted was a specific ratio. Ratio is Important to me because I wanted to have a 16:9 ratio so that I could put 2 windows side by side and have them each be 4k, or one large one for editing One other cool thing is that it has a 1000R curve, which for me I think is one of the best curves, although I haven‚Äôt used any other. This makes it feel more natural where the monitor is almost equidistant as I move my head when looking left and right. So how do you hold up a 40 lbs monitor? Very carefully. Took a while to find the right arm, since most monitor arms max out at about 30-40 lbs. Ended up finding one that supports 44 lbs and it‚Äôs working great. I did this so I can adjust and and because the legs are gigantic It has RGB, kind of pointless unless someone is sitting behind you and you want to annoy them. I only have it on for this video. Also, this arm has RGB too, which I promise is not the reason I bought it. It can be toggled off too.Dell U2720Q 27‚Äù 4k IPS Panel You might be wondering why I have this when I have a gigantic monitor below? This is great when sharing my screen on zoom calls or when I do screen recordings for my videos so that I don‚Äôt have to share a super wide desktop that no one can see or have to only share a section of my screen. I typically have it off until I need to do one of those things.Desk OrganizationGrovemadeHaving a desk system like this one from Grovemade freed up a lot of space on my desk Designed and made in Portland, Oregon Simple materials - wood, aluminum, cork 46 inches wide, 9 inches deep Solid maple - warm, natural look Desk Shelf - Large Maple Also opted for a tray to store some things. This gives me 3 layers to store things that need to be out of the way but still have quick access to. I also went with this light gray desk pad. This is my first real desk pad and I have to say, I think this one is perfect. It has a great modem look, it‚Äôs just wide and deep enough, and it‚Äôs super smooth with some cushion. My mouse slides so easily on it with the perfect amount of friction, it‚Äôs hard to explain but I really feel like this material helps me be more precise when using my mouse at the crazy high DPI I have it set at. Huge shout out to Grovemade for sending this desk set to help get my digital life in order! If you‚Äôre interested, there are links in the Where to Buy section. You can get 10% off by using the code TechnoTim` I am also using this on my workbench.Audio &amp; VideoElgato GearStreaming has never been easier with my Elgato gear! Elgato Stream Deck + and Wave Link control audio live streaming and even my music. - I have a Wave XLR for my microphones and I control all of the audio levels using the stream deck plus. Huge shout out to Elgato for sending these after struggling so much with other audio setups. Then I have the first stream deck which I‚Äôve had for years which mostly controls OBS and smart lights in the room.AttachmentsLights, Cameras, Action?You might be noticing all of these things attached to my desk, up here I have a pair of Elgato Key Lights that help control my lighting when streaming and recording, then a bunch of arms. These arms help move my gear into the best place possibleCable ManagementThis consists of velcro, the right power strips, an under desk basket, and a few systems underneath to hold cables and cords. USB Hubs and switchers help tidy this up too and allow me to switch between Windows and Mac.WorkbenchAlthough my workbench is small, organizing it is key to getting projects done on time! Behind me is my workbench This is where I build and test most of the things you see on my channel You can see a ZimaBoard and ZimaBlade here that I am testing and working on As you can see I also have the Grovemade desk shelf I can hide lots of things in the shelf I use this primarily for charging Wish there were a better way to to charge all usb devices, but tucking them under here is the best I‚Äôve found. If you know of a better way let me know in the comments!Where to BuyProducts in this video:Here are the items in the video, let me know if I missed anything! (some are affiliate links)On my desk: SAMSUNG 57‚Äù Odyssey Neo G9: https://amzn.to/3M9J9su Ultrawide Monitor Arm: https://amzn.to/46JQh79 Dell 4k Monitor: https://amzn.to/406AXz1 Tall Monitor Arm: https://amzn.to/45CEQNb Grovemade Shelf: https://l.technotim.live/grovemade-shelf Grovemade Desk Pad: https://l.technotim.live/grovemade-deskpad Elgato Stream Deck +: https://amzn.to/46Wm8Be Elgato Stream Deck: https://amzn.to/3tCMw4F Elgato Wave XLR: https://amzn.to/3Qrq4o7 Elgato Wave Mic Arm LP: https://amzn.to/470DyfU Elgato Key Light: https://amzn.to/3McCKwO Keychron Q3 Keyboard: https://amzn.to/46D3ZbL Razer Mouse: https://amzn.to/3tP7Xj1 Rode PodMic: https://amzn.to/46FDNxt RODE PSA1 Arm: https://amzn.to/3QrKYUj Sony A6400 Camera: https://amzn.to/3tIxH0E DJI Mic: https://amzn.to/3Q9aLzj Camera Arm: https://amzn.to/45IQJkC Hue Play Lights: https://amzn.to/46TKFa2 USB Switch: https://amzn.to/3S9npB0 Powered USB Hub: https://amzn.to/496cMF8 HDMI Switch: https://amzn.to/3QozssL Desk Legs: https://amzn.to/3SeBOffCable management: Under Desk Trays: https://amzn.to/45AK1NP Power Strips: https://amzn.to/405nuHA Velcro: https://amzn.to/405gFWt Long Display Port: https://amzn.to/3Q4HCoI Long USB: https://amzn.to/3MbaCtR Long HDM: https://amzn.to/46Yfs5x Long PC Power: https://amzn.to/3s12y89 Long Active USB C: https://amzn.to/45IgMbV Long Cat 6 Ethernet: https://amzn.to/4968w8C Label Maker: https://amzn.to/3tDPjuxStudio Rack: 12u Server Rack: https://amzn.to/46HlUOIWorkbench: Grovemade Shelf: https://l.technotim.live/grovemade-shelf Desk Mat: https://amzn.to/405hHSl Slim Network Cables: https://amzn.to/3tIUERr UniFi 16 Port Switch with POE+: https://l.technotim.live/ubiquiti ZimaBoard: https://amzn.to/3Ft7iXo Desk Legs: https://amzn.to/4709rpe Elgato Key Light: https://amzn.to/3McCKwO Elgato Multi Mount: https://amzn.to/3MahaJe Anker Charger: https://amzn.to/46CrpOHMobile Workbench / Storage: Mobile Workbench: https://www.homedepot.com/p/Husky-46-in-W-x-24-5-in-D-Standard-Duty-9-Drawer-Mobile-Workbench-Cabinet-with-Solid-Wood-Top-in-Gloss-White-H46MWC9GWV2/313615422 Best USB C Dongle: https://amzn.to/471IKjVüõçÔ∏è See the whole kithttps://kit.co/TechnoTim/techno-tim-desk-studio-2023(Affiliate links are included in this description. I may receive a small commission at no cost to you.)Join the conversationEver wonder what my home office and studio looks like and which tools I use? Check out my NEW ultimate desk &amp; setup Tour for 2023! (My setup, my desk, my workbench, and even my studio rack for 2023!)Check it out!üëâhttps://t.co/j9W5LMZPNi pic.twitter.com/7bTlAmiER7&mdash; Techno Tim (@TechnoTimLive) October 21, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "More than a Rackmount Case for a Mac", "url": "/posts/mac-studio-rack/", "categories": "homelab", "tags": "mac, apple, thunderbolt, mac-studio, nvme, xmac-studio, sonnet", "date": "2023-10-05 08:00:00 -0500", "snippet": "I debated buying a new Mac due to its limited options for expandability. This all changed when I found a way to not only rackmount my Mac, but add PCIe slots to add additional components like NVMe ...", "content": "I debated buying a new Mac due to its limited options for expandability. This all changed when I found a way to not only rackmount my Mac, but add PCIe slots to add additional components like NVMe SSDs, video capture cards, dual 10 gig networking, and even testing a video card.Thank you to Sonnet for sending this xMac Studio / Echo III / M.2 8x4 Silent Gen4 PCIe Card to help complete my video editing / software development Machine!Disclosures: I was not paid I chose Sonnet and contacted them after researching alternatives SSDs are on loan and will be sent backThinking about expanding your Mac/Windows/Linux Machines? Check out Sonnet!üì∫ Watch VideoMore than a Rackmount CaseI racked my Mac Studio using this rackmount case and it gives me so many connectivity options. It not only serves as a rackmount but it also expands its capabilities by adding a Thunderbolt enclosure that can fit 3 full length PCIe cards and connects over Thunderbolt 3 or 4. This unlocks the Mac‚Äôs full potential by allowing you to connect PCIe cards like network adapters, video capture cards, or even add super fast storage using this 16x PCIe card that can fit up to 8 NVMe SSD drives. the xMac Studio rackmount case also has a built-in USB hub, cut outs that still let you access the IO ports, an easy to reach out button, and even an area to keep USB or Thunderbolt drives if you‚Äôve decided to connect those.Sonnet xMac Studio enclosure with the Echo III expansion systemToday we‚Äôre going to take a look at the xMac Studio Pro Rackmount System from Sonnet, with the Echo III expansion system, and even one of their m.2 8x4 silent gen4 PCIe cards to add some additional storage. We‚Äôre going through all of this today, including the rackmount case, the enclosure, testing different cards that work with a Mac, and even do some speed tests using the included PCIe NVMe card. This kind of expandability makes it hard to know why the Mac pro even exists.I tested lots of PCIe cardsWhy a Mac Studio over a Mac Mini?I bet you‚Äôre wondering, why a Mac Studio, and why not a Mac Mini? I debated this for quite some time and even started configuring a Mac Mini and after I started comparing the specs of what I wanted out of a Mac Mini m2 and a Mac Studio m2, I found that for only 100 dollars more I was able to get twice the GPU cores (38 in total), twice the RAM (64 in total), 2 additional USB C ports, a media card reader, faster on board SSDs and even faster memory. I did have to reduce the storage down to 1 TB but that‚Äôs a sacrifice I was willing to make and knew I could supplement storage with a system like this from Sonnet. Don‚Äôt get me wrong, the Mac Mini is a great Machine but once you start getting into the upper end of the specs, you‚Äôre better off going with a Mac Studio. Oh, also sonnet makes a Mac Mini rack too, which I‚Äôd love to test out in the future as a Mac build / render server.If you‚Äôre going to increase the specs of the Mac Mini, at some point you‚Äôre better off getting a Mac StudioWhy Rack a Mac?The next question you‚Äôre probably asking is why rack a Mac system at all, I mean, aren‚Äôt they meant to be looked at? Joking. Kind of. I chose to rackmount my Mac Studio, not because it‚Äôs on brand (ding), but because I wanted better cable management. Wait, cable management? Yeah, cable management. Being a content creator, streamer, and developer, I have lots of cables and cords to connect lots of devices, like this 4kHDMI capture card that I connect cameras and devices to capture their output. The same goes for audio equipment, USB devices, XLR cables, and on and on. While building my server rack in my basement, I found that having everything in one cabinet, like a server rack, makes wire management much easier, or at least easier to hide. So recently I picked up a smaller server rack to rack both my Mac and my upcoming Windows / Linux build in a Sliger water cooled case.But there are many audio and video creative professionals who do rack their equipment and I am adapting it to fit my needs. Will it work? Let‚Äôs find out.xMac Studio Rack CaseThe xMac Studio rack mount case isn‚Äôt just a case to keep it safe, but a way to expand the capabilities of your Mac Studio.xMac Studio rakcmount case by SonnetFeatures: 3u rackmount Rack mountable with rails (we‚Äôll mount it later) Rugged Easy to access, front panel is removable Power button 4 USB-A 3.0 Hub PCIe expansion Module SSD Storage Space for up to 2 Thunderbolt or USB SSDs Great for extra storage or even time Machine backups on the go Front to back airflow so nothing is recirculatedEcho III PCIe EnclosureThe enclosure that comes with the xMac Studio / Echo III combo is actually a desktop enclosure that converts to a rack mount enclosure. It‚Äôs the same internals but without the outer case from the desktop module. This is a professional level enclosure for creative pros and can be connected to any device that has a Thunderbolt connection, but I opted for the rack mounted version without the desktop case. Let‚Äôs take a look at it.Echo III PCIe EnclosureFeatures: 3 PCIe Slots One is 16x and the other 2 are 8x These slots can be filled with any cards you can think of with the exception of video cards due to Apple‚Äôs limitation, but we‚Äôll populate some here in a few, even a video card for fun All 3 are PCIe 3 Power supply is a 400w power supply easily power everything connected 75w auxiliary power connector for cards that require extra power Automatically power on and off based on your Machine‚Äôs power 2 Noctua fans that are temperature controlled and variable speed Thunderbolt 3 (which is better than Thunderbolt for for this use case. See Sonnet‚Äôs video explaining the differences)So what am I going to put in the slots? Well one of them for sure is the Sonnet M.2 8x4 silent Gen4 PCIe CardM.2 8x4 Silent Gen4 PCIe Card (NVMe SSD)This is the Sonnet M.2 8x4 Silent Gen4 PCIe Card and it‚Äôs a professional level card. That‚Äôs blazing fast! It‚Äôs a 16x card, and the bandwidth is available to all of the connected NVMe SSD which help facilitate maximum speeds.It works with Windows, Mac, or Linux computers that have an x16 slot and is compatible with a variety of m.2 NVMe Gen4 and Gen3 SSDs, but you‚Äôll want Gen 4 if you‚Äôre going for speed.This card is blazing fast!Here‚Äôs the cool thing about this card too, is that it doesn‚Äôt require a specific motherboard for raid or any other features, and it does not require PCIe bifurcation. PCIe bifurcation is just a fancy word that means taking something and dividing it into parts. If the card didn‚Äôt support this, we would only see one device or need a special motherboard, but because this card does support bifurcation the card presents multiple devices to the computer so we can see each individual drive. That makes this card very flexible. I did install 8 NVMe SSDs into this card, installed the thermal transfer pad to transfer the heat from the ssd drives to the cooler. This helps keep the drive cool and avoid any kind of thermal throttling.Loaded it up with 8 NVMe drives!Features: Eight M.2 NVMe SSD Slots on a PCIe 4.0 x16 Card Works with Windows / Mac / Linux Up to 64 GB Silent, no fans Though the case does have super quiet noctua fans This Sonnet card doesn‚Äôt require a specific motherboard to operate or specific SSDs to support RAID features ‚Äì no PCIe bifurcation requiredThis allows me to connect 8 NVMe SSDs via Thunderbolt port using Echo III PCIe expansion enclosure which pops right into the xMac Studio.So let‚Äôs put all of this together, add some PCIe cards, and test various speeds and compatibility.Testing PCIe cards on a MacFirst of all, it‚Äôs worth mentioning that this card is really intended for a high performance server or desktop that is connected to a PCIe 4.0 device and can take advantage of all 16 lanes of PCIe. This is not the case with my Mac Studio since it is limited by Thunderbolt and the enclosure only supports PCIe 3.0. This because Thunderbolt does not support PCIe 4.0. I know this all sounds complicated, because it is üòÄ.When testing in this enclosure over Thunderbolt, here are the speeds I was able to achieve: ~2800 MB/s Read / Write.This speed test maxed out Thunderbolt speeds!This is roughly 22 Gbs, which is no slouch, but that‚Äôs a far cry from the 40 Gbs that Thunderbolt supports?This is actually the theoretical max of Thunderbolt, it reserves half for downstream devices like monitors so that card, enclosure, and even Thunderbolt is performing as it should. This isn‚Äôt a limitation of the card or the enclosure, it‚Äôs a limitation of Thunderbolt.I will test this some more in my next rackmount project which is building my new Windows/Linux workstation in a Sliger case that‚Äôs water cooled.As a side note, I tested many other cards which aren‚Äôt covered here but can be seen in the video!More than a Rackmount for a MacThis speed test maxed out Thunderbolt speeds!Overall, I am very happy with my Sonnet xMac Studio and Echo III module. If you‚Äôre looking to rack your Mac Studio, there are few mounting options, but xMac Studio offers the additional Thunderbolt expansion system that really takes this to the next level. The combination of these two give me the flexibility I need to use my Mac how I want to use it. Thunderbolt connectivity ensures that I can connect this to any system I want, a new, a Windows Machine, or Linux, and even if they are a laptop. Overall it‚Äôs a great system even if Thunderbolt has some limitations. Well, I learned a lot about Thunderbolt 3 and 4, the Mac Studio, the xMac Studio system and I hope you learned something too. And remember if you found anything in this post helpful, don‚Äôt forget share! Thanks for reading!Join the conversationI found a way to rackmount a Mac, add PCIe devices, and even add 8 NVMe SSDs! Spoiler alert, I tested a GPU and it did not work.https://t.co/btbnQ5SlKw pic.twitter.com/9per30lu5a&mdash; Techno Tim (@TechnoTimLive) October 5, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Turn Plex into a Powerful DVR", "url": "/posts/ota-tv-with-plex/", "categories": "homelab", "tags": "plex, tv, ota, epg, dvr", "date": "2023-09-18 08:00:00 -0500", "snippet": "Cut the cord and get free over the air TV with Plex! Today we‚Äôll dive deep into selecting a TV tuner, an antenna, dialing in your TV signal, and configuring Plex to help you get the most out of Li...", "content": "Cut the cord and get free over the air TV with Plex! Today we‚Äôll dive deep into selecting a TV tuner, an antenna, dialing in your TV signal, and configuring Plex to help you get the most out of Live TV and DVR!A huge THANK YOU to Plex for sponsoring this video during Plex Pro Week!Get started with Plex today! https://www.plex.tv/üì∫ Watch VideoTurn Plex into a Powerful DVRThere‚Äôs this great free resource out there that many people aren‚Äôt taking advantage of. It‚Äôs something that most homes can access absolutely free and that‚Äôs over the air TV. Now I know what you‚Äôre thinking, what year is this?? I know, it sounds odd talking about over the air TV in this day and age but I found a way to modernize it and make it more accessible with a little bit of hardware and a little bit of software from Plex.I have been using Plex for almost 10 years and one of the features that isn‚Äôt talked about that much and is one of my favorites is Live TV &amp; DVR. I‚Äôm not talking about the free TV channels that Plex offers, although I will be talking about that a little bit later, I am talking about over the air channels like ABC, NBC, PBS, and many others to watch Sports, Local News, and more. And with ATSC 3.0 or NextGen TV rolling out in some areas, you can be sure that you‚Äôre getting the clearest broadcast possible with up to 4k resolution and uncompressed when over the air vs. 1080p and compressed from most providers. You‚Äôll need a few simple things that I will cover in this video so you can start watching and recording Live TV today. So, full disclosure Plex is the sponsor of the original video and I want to thank them for asking me to share my deep dive on Live TV &amp; DVR with Plex.Plex can be a powerful DVR to record or watch your favorite TV showsPlex TV &amp; DVRWith a TV Tuner, an antenna, and a Plex Pass you can turn your media server into a powerful DVR to record your favorite shows or watch them live, even on the go. You can record any show in your area, whether that be sports, local news, or your favorite TV series and watch it from any device. Plex has apps for mobile devices, SmartTVs, gaming consoles, Apple TV, on the web and more. It‚Äôs hard to find a device that doesn‚Äôt have Plex.Watching Live TV is as simple as launching the app and picking a channel. This will stream the channel from your Plex Media Server to your device. After the Live TV stream starts, you can pause or even rewind Live TV. But if you start watching something that‚Äôs currently being recorded, you have the option to watch from the beginning or watch live. If you choose to watch from the start you can skip through commercials and get caught up to the live broadcast. This is a little life hack I use to watch something that‚Äôs live without the commercials. For something you‚Äôve already recorded, there‚Äôs also this awesome feature that will allow you to skip commercials or remove them altogether. This is a great time saver and we‚Äôll get this set up today too a little bit later.One of the best parts of Plex Live TV is you get the best EPG out there. EPG stands for electronic programming guide and it lists all shows for all channels along with some additional data like episode information and more. It‚Äôs how I know that Jeopardy! is on NBC at 4:30 local time, or that the episode of Nature is a rerun. It‚Äôs also what helps populate their powerful search in the Live TV section. I can‚Äôt stress enough how important it is to have a solid EPG when using a DVR, without accurate data you could schedule the wrong show to record or miss your show altogether. The EPG is even interactive on some clients, giving you a picture-in-picture guide while you browse the guide looking for the next thing to watch. And if you only watch a handful of local channels you can add channels to your favorites so you can quickly access them. Plex Live TV lets you prioritize your recordings so that I don‚Äôt get in trouble recording a rerun of Nature instead of the latest episode of The Bachelor. We‚Äôll talk more about the EPG, recording priority, how not to miss your favorite shows when scheduling recordings a little bit later.Plex‚Äôs EPG is the best Electronic Programming Guide out there!Setting Up Live TV &amp; DVRSo, what do we need in order to have our very own DVR? I know all of this sounds complicated but it‚Äôs much easier than you think. You‚Äôll need a couple of things, all of which I use in my own home and have been recording TV for years, so you can be sure that this setup will also work for you.TV TunersFirst, you‚Äôre going to need a Plex server and a Plex pass. Next you‚Äôll need a TV Tuner and an antenna. I‚Äôve used a lot of TV Tuners in the past but the best tuner by far is one from SiliconDust, it‚Äôs the HDHomeRun Flex 4k. This nice little device sits on your network and converts a TV signal into a video stream so that your Plex Media Server can consume it and even change the channels when requested. This one in particular has 4 tuners inside that allows you to watch or record up to 4 channels at once. This one also supports the new ATSC 3.0 NextGen TV that we talked about earlier - so it‚Äôs future proof!Silicon Dust‚Äôs HDHomerun TV Tuner will get you up and running in no time!AntennasAnother important thing you‚Äôll want to have is an antenna that connects to our tuner. Antennas come in all shapes and sizes and depending on where you live, you might be able to get by with a small indoor antenna. If you‚Äôre in the US, there‚Äôs a great site to help you determine your distance from TV towers which might help you choose the right antenna. You can visit the site, enter your location, and see how far away you are from TV towers, their location, and get an estimate of the signal strength to your location. Based on this legend you can make a better decision about the antenna you choose.Selecting an antenna is key to getting the right reception!Here are my recommendation for choosing an antenna: If you‚Äôre close to the TV towers and want something low profile, or you live in an apartment or condo and can‚Äôt put an antenna outside, go with a flat antenna which is thin, low profile, and can be placed in a window or on the wall. This flat antenna from Channel Master (affiliate link) should work great if most TV towers are in the green or yellow. It‚Äôs slim, low profile, and can be attached to a window or wall. If you‚Äôre further away from the TV tower or you just want the best reception, I recommend picking up something like this Antennas Direct antenna (affiliate link) that can be used indoors or outdoors. It‚Äôs not the best looking antenna but it has a great range and will work better than the flat antenna if you can hide it or aren‚Äôt concerned about aesthetics. Either way, you‚Äôll want to mount it somewhere in your home, the higher the better, outdoors or an attic will work best. I got lucky when I moved into my house because the previous owner installed a massive long range antenna in the attic and ran a coax cable to the basement. Having one in the attic above the trees and other houses is one of the best places for an antenna.Hooking Up Your Antenna &amp; TunerOnce you have your antenna and tuner, go ahead and connect your tuner to the network and connect your antenna to the coaxial terminal and then finally, connect the power to the tuner.A word of caution, you might be tempted to buy an amplifier but I would recommend against it until you truly know that you have a weak signal, you run the risk of introducing noise and interference. We‚Äôll see this later on and from there you can determine if you need a signal amplifier (affiliate link) or not.Once your tuner is on the network, visit tuner‚Äôs web page by typing in the IP address in a browser. Here you will see the landing page for your device. If you see a message to update your firmware I would update it before continuing, it will only take a minute, plus, who doesn‚Äôt love updating firmware üòÄOnce it‚Äôs updated you can see the tuner status and more information about your tuner. Next we want to see which channels our tuner can detect. We can do this by going into the channel lineup and clicking ‚ÄúDetect Channels‚Äù.This will scan for all of the channels you can pick up using your antenna. Now your mileage may vary depending on your area and how close you are to the TV towers, but it‚Äôs a good idea to compare the results to what you expect. If you aren‚Äôt seeing the channels you expect, you might need to adjust your antenna or think about getting a signal amplifier, however I‚Äôll show you how to check the signal strength in a little bit.One thing you might have noticed is that little plug that I have connected to my HDHomeRun. This is a signal filter (affiliate link) that will filter out LTE and 5G signals from the line. I‚Äôve noticed that as more cell phone towers go up, the more they can interfere with my antenna, so I popped this little filter on to filter out those frequencies. If you‚Äôre wondering what interference looks like, it‚Äôs that weird pixelated blocking that you see sometimes when watching TV. This isn‚Äôt going to magically make channels appear out of nowhere or boost the signal, it‚Äôs just there to take away the noise created by cell phone towers.Once we‚Äôve got our tuner all set up, make note of the IP address because we‚Äôll need this for configuring Plex.You might need to pick up an LTE filter to filter out 5G noise!Setting up Plex for Live TVNow that we have our TV Tuner and antenna set up, we can now configure this in Plex! You‚Äôll need to sign in to your Plex Media Server and then go to settings. In the Manage section you should see Live TV &amp; DVR. Here you‚Äôll want to configure a new tuner. When you try to add a new tuner, it will try to search for your tuner and in most cases it will find your device. If it doesn‚Äôt you can manually add your device by typing in the IP address of our tuner. Once it‚Äôs added you‚Äôll need to set a few settings for Plex. You should choose an antenna, your home country, and your Postal Code. The postal code is needed to download the EPG. Once you‚Äôve set this, you will then see a list of all the channels we found earlier. You can scan again or even remove channels however I wouldn‚Äôt remove channels here, I would just create favorites later. If you‚Äôre happy with the list, click continue. Plex will start to download the latest guide and after a few minutes we should see all of the TV shows that are available!Recording Live TVThe channel guide can be found in the Live TV section. Here we can see a list of all of the shows we can watch or record. This will look different on different clients but the experience is mostly the same. The live TV feature is pretty self explanatory, we can scroll through channels and when we see something we want to watch, we just click on it. This will start a live stream. You can even pause or rewind a Live TV show, pretty cool.So you can see that I have a pretty good signal and quality but what do you do if you don‚Äôt have the greatest picture quality? Well, earlier I mentioned that we could check our signal strength for a broadcast to determine if we need to adjust our antenna or think about a signal booster. This might work differently depending on your tuner, but if you‚Äôre using a SiliconDust tuner like the one I am using, the easiest way I have found to do this is to start a live show and then go to your tuner‚Äôs homepage while the show is playing. Once here go into Tuner Status and choose the tuner that‚Äôs being used, which you can see in the Summary. Click on the tuner that is in use and here you can see the status. The most important stat here is Signal Quality. The higher the better. If you notice that this is noticeably low and your TV stream isn‚Äôt the greatest you can try adding a signal booster or a line filter to try and clean it up. I will have links to this and all of the other hardware we talked about today in the video description. So, back to recording from the channel guide‚Ä¶ After selecting a show, if you want to record a show all you have to do is click the record button. From here you can choose whether you want to record new airings only, new and repeat, and which library you want to save it to. I have multiple libraries, TV Shows and Recorded TV. That‚Äôs because I wanted to separate the two but that‚Äôs totally up to you. It‚Äôs as simple as creating a new library and setting the type to TV Shows. You will then see this option when scheduling recordings.Scheduling to shows to record couldn‚Äôt be easier with their great EPG!You also have some additional settings in ‚ÄúShow Advanced‚Äù but we won‚Äôt change them here, we‚Äôll apply these to all recorded TV a little bit later. After clicking record we can now see that we have a record icon on the show, letting us know that it‚Äôs currently being recorded. You also have lots of quick actions when hovering or clicking on shows where you can schedule recordings or even cancel recordings, it‚Äôs pretty handy.One thing you might have noticed is the categories across the top. Most of these are self-explanatory, however there‚Äôs one named Plex Channels that is different from the rest of the TV channels. These are FAST channels or Free Ad-Supported Streaming Television. It‚Äôs streaming TV that can be watched at any time. They aren‚Äôt channels that you can find over the air from your local TV stations, but channels that stream content 24/7, like for instance if you wanted to binge watch Top Gear or the Price is Right classics, there‚Äôs a channel for that. But, back to recorded TV.Watching Recorded TVOnce a show has recorded it will be in your Library you set for recorded TV, the default is TV Shows. Once here you‚Äôll see a similar experience that we see for Movies, you‚Äôll have a ‚ÄúRecommended‚Äù section, a ‚ÄúLibrary‚Äù section, and a ‚ÄúCategory‚Äù section, and view controls for your media. Clicking on your show will bring you to that show and from there you can see all of the recorded seasons for that show and if you want to get to your show you click into the season to get to your episodes. Once you are on your episode you can see more details about it like the date it aired, how long the recording is, the rating, and even details about this episode. You can also switch the track to another language and choose your subtitles if the broadcast supports it. After clicking play the video will start and you can watch it as you normally would!Watching recorded TV is just like watching other media, complete with all of the artwork and metadata you‚Äôre use to seeing with other content!AutoSkip Intro, Commercials, CreditsOne of the best features that comes with Live TV &amp; DVR is Intro Skip and Commercial Skip. If enabled Plex can detect intros, commercials, and even credits to help you watch more TV without interruptions. When playing a show where an intro is detected, you will see a skip intro button in the bottom right corner that you can click on and it will skip right to the show. This also works for commercials too! When a commercial break starts you will see a button to skip Ads which will skip right to where the show picks back up! Now it‚Äôs not perfect but I‚Äôd say it‚Äôs pretty close for the shows that I watch. It‚Äôs not enabled by default so let‚Äôs enable it!We can do this in our library settings which you can find in the Manage section. If we edit our Recorded TV library and go to ‚ÄúAdvanced‚Äú we should see a few settings in here that help us skip unwanted content. Be sure that ‚ÄúEnable Intro detection‚Äù and ‚ÄúEnable Credits detection‚Äù is turned on and then for the ‚ÄúAds detection‚Äù setting you‚Äôll want to choose ‚ÄúFor recorded items‚Äù . This enables ad detection for new recordings. If you‚Äôve already recorded TV with Plex or from another TV you can turn on ‚ÄúFor all items‚Äù to force a scan of all items in this folder.Great, once that‚Äôs turned on it should now add these markers so we can skip unwanted content. This detection does take a few minutes and only starts after a show is done recording. Also, you won‚Äôt see new recordings in your Library until it is done doing the detection. Now we can skip all of that unwanted content and watch TV like a pro. Like this show right here, if we start playing you can see it detects the intro that we can skip through if we like, and then once we get to a commercial break it will prompt us to skip it we like, and if it detects credits it will do the same.Skipping commercials, intros, and credits makes watching OTA a breeze. No more wasting time!DVR SettingsNow there are some additional settings you can choose for skipping commercials like removing them altogether. This is in the DVR settings where we can set our default settings for new recordings. In the ‚ÄúDetect Commercials‚Äù setting you can choose from ‚ÄúDisabled‚Äù, ‚ÄúDetect‚Äù, ‚ÄúMark for Skip‚Äù, or ‚ÄúDelete‚Äù. ‚ÄúI would recommend setting this to ‚ÄúDetect and Mark for skip‚Äù rather than setting it to ‚ÄúDetect and Delete‚Äù because deleting is a destructive action and while Plex commercial skip is really good at detecting commercials, it‚Äôs a lot safer to just add markers than accidentally delete part of your show. As for the rest of the settings in here, I have only adjusted a few. I set the resolution to Prefer HD. I don‚Äôt replace lower resolution items, I do allow partial airings, and I don‚Äôt adjust the minutes before and after a recording. Shows are pretty good at starting and ending on time, but if you find that you want to record a minute or two before and after, adjust the setting here. Live broadcasts that go over the scheduled time like sports might be a good good reason to add some padding at the end of the recording so you don‚Äôt miss overtime! Also I enable a refresh of the guide data during the maintenance window and for me that‚Äôs 2am.Adjusting Recording PrioritySo now that we have scheduled some recordings, how do we make sure that my reruns of Nature and NOVA don‚Äôt get scheduled instead of my wife‚Äôs show The Bachelor? (You‚Äôll only make that mistake once). We can do this easily by adjusting our recording priority. If we go back into the Live TV area and choose the DVR Schedule we can see everything that‚Äôs scheduled to record and on the far right we can see our Recording Priority. This is where we can drag and drop to reorder our shows with the highest priority being at the top. This helps when there are scheduling conflicts due to the tuners being in use when recording or watching live TV. I have 4 tuners so I rarely have a conflict but if I did this is how it will choose to prioritize one recording over the other. Let‚Äôs say for instance I wanted to get in trouble again and prioritize Nature over The Bachelor, Survivor, and even Big Brother, I would just drag Nature all above all of those shows like. This would ensure that if there was ever a conflict or not enough free tuners, Nature would record instead of all of these shows. OK, let‚Äôs move this back before I get in trouble again.Be sure to adjust your recording priority so that you can be sure your tops shows record over others if you run out of tuners!Channel FavoritesNow that we have everything set, there‚Äôs also this small feature to make your life a little easier when channel surfing and that‚Äôs Favorites. As you can see from my list of local channels, I have a lot of channels that I almost never watch but at the same time I don‚Äôt want to remove them from my channel lined up. This is where favorites come in. I like to add all of my favorite channels to my favorites list so that I can easily browse them when I am looking for something to watch. You can even add some of the Plex FAST channels to your favorites too! I really like the BBC Earth channel, PBS Nature, and the Modern Marvels channel and I have added those to my favorites too. They have over 600 to choose from, so there‚Äôs no shortage of content there. Now, if I switch and go to my favorites, I can see a quick list of my favorite channels without skipping around through all of the channels I rarely watch.MobileNow just because I did all of this from a browser doesn‚Äôt mean you have to do it here too. Plex‚Äôs mobile app works great for watching live TV, previously recorded TV, and even scheduling recordings. There have been many times where my wife and I are out and about and hear about a new show that‚Äôs airing soon and it‚Äôs now second nature to immediately schedule it to record. I just open up the app, go to Live TV, Search for the show, and schedule the recording. It‚Äôs super simple and convenient to do.The mobile app is not only great for watching shows, but also scheduling a recording while you are on the go!ConclusionSo that‚Äôs everything you need to get started today to record live TV like a pro. I‚Äôve been using this setup with Plex for years and it‚Äôs everything I could want in a DVR system, from high quality over the air uncompressed video and audio, to an accurate EPG, to how easy it is to schedule recordings anywhere on any device, to commercial skipping and so much more. I want to thank Plex again for sponsoring this video and thank you for watching. Well, I learned a ton about live TV, antennas, network tuners, and Plex, and I hope you learned something too. And remember if you found anything in this post helpful, don‚Äôt forget to share!Join the conversationSTOP Paying for TV and cut the Cord for good. I haven&#39;t paid for OTA TV in over a decade, and neither should you. I made a guide on how to build your own DVR with @plex for their Pro Week!Check it out üëâhttps://t.co/3dZ7Ca9ru3 pic.twitter.com/bmAoSOEl8t&mdash; Techno Tim (@TechnoTimLive) September 18, 2023Where to Buyüì¶ Products in this videoTV Tuner that supports 4K and up to 4 streams!https://amzn.to/3r1v3SLFlat Indoor Antennahttps://amzn.to/3Z5AQmRIndoor Outdoor Antenna with 60+ mile range!https://amzn.to/3sHLST3Adjustable Gain TV Antenna Preamplifier with LTE Filterhttps://amzn.to/3LgwB26LTE / 5G Filterhttps://amzn.to/3Pax72JAntenna Splitter with Power Passthroughhttps://amzn.to/3sLTZy4Solid Copper Coax Cable (NOT copper clad)https://amzn.to/3r3fhqkLTE / 5G Filter Alternativehttps://amzn.to/3PtSV9VSee the whole kit!https://kit.co/TechnoTim/build-you-own-dvrLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "45 HomeLab HL15 and more at the Creator Summit", "url": "/posts/45homelab-hl15-creator-summit/", "categories": "homelab", "tags": "hardware, 45drives, hl15, 45homelab", "date": "2023-09-14 08:00:00 -0500", "snippet": "I took a trip with 3 other Tech YouTubers to 45 Drives Headquarters to see the new 45 HomeLab HL15 and other devices during their first ever Creator Summit to discuss storage! We take a look at lo...", "content": "I took a trip with 3 other Tech YouTubers to 45 Drives Headquarters to see the new 45 HomeLab HL15 and other devices during their first ever Creator Summit to discuss storage! We take a look at lots of Storinators, the HL15 HomeLab, all flash Stornados, and even the Storinator Jr.!üì∫ Watch VideoInfoIf you‚Äôre looking for details on the Creator Summit, you can read all about it in a previous post!Thank you so much to 45Drives for paying for this trip to the Creator Summit!Thank you to Jeff Geerling, Wendell, Jeff from Craft Computing, Tom Lawrence, Alan Nagl, and Dave Dickerson for teaching me so much during this trip!Where to BuyPre-sales for the 45HomeLab here: https://presale.45homelab.comYou can check out the 45HomeLab here: https://45homelab.comJoin the conversationI took a trip with other Tech YouTubers to 45 Drives Headquarters to see the new 45 HomeLab HL15 and other devices during their first ever Creator Summit to discuss storage!@45Drives @Level1Techs @geerlingguy @CraftComputing @TomLawrenceTechhttps://t.co/0oOd22mHB7 pic.twitter.com/U1VO6IlQb0&mdash; Techno Tim (@TechnoTimLive) September 14, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "45Drives Creators Summit on Data Storage - Day 1", "url": "/posts/45drives-creator-summit-day-1/", "categories": "conferences", "tags": "45drives, storage, ceph", "date": "2023-08-20 08:00:00 -0500", "snippet": "45Drives HQ Located in Sydney, Nova Scotia, CanadaI was invited to 45Drives Headquarters in Sydney Nova Scotia Canada for a Creator Summit on Data Storage. 45Drives invited Tech YouTubers like Jef...", "content": "45Drives HQ Located in Sydney, Nova Scotia, CanadaI was invited to 45Drives Headquarters in Sydney Nova Scotia Canada for a Creator Summit on Data Storage. 45Drives invited Tech YouTubers like Jeff Geerling, Wendell Wilson, Jeff from Craft Computing, Tom Lawrence, and myself for a 3 day event to meet the 45Drives team and other experts in the storage space and discuss the future of storage.If you want to see the video of this tour, you can check it out here!The TourWe got a tour of the labs where they are cooking up some new storage systemsDay 1 started out with a tour of the 45Drives HQ. The office is new, fully of natural light, and very modern. One of the last stops was to visit the labs area where they were testing hardware, cluster configurations, and even had some prototype devices.A Storinator that includes both 2.5‚Äù drives and 3.5‚Äù drivesStorage SolutionsThe first stop was the Storiantor Hybrid F8 x1. This is an interesting configuration because it combines both 3.5‚Äù slots of high density drives and 2.5‚Äù slots for SSDs. THis something I have been particularly interested in because I‚Äôve modified my Storinator to do just that. This one solution would allow me to keep my workloads that need fast storage, like virtual machines, on up to 8 SSDs, while still giving me 12 bays for HDDs that could store all of my ‚Äúslow‚Äù data like videos, images, and documents.All flash Storinator!The next stop was the Stornado Gen II 2U SATA. This machine is specifically designed for speed and offers 32 slots for all flash storage. This is also something that I am interested in, not only because it would allow me to move to an all flash solution, but also because it comes in a 2U factor and would help reduce energy costs. THis does mean however that I will have to spend more on SSDs so not sure if there‚Äôs a real cost benefit for my specific application. (Still want all flash storage though! üòÇ)The Storinator Homelab H15 (prototype)The next stop was one of the most anticipated devices for me (being part of the HomeLab community) that was the 45 Homelab HL15. This device is meant to meet the needs of Homelab enthusiasts. This machine has the same build quality you would expect from a 45Drives system and has very similar parts and storage as their enterprise versions. One of the cool things about this version is that it can be rack mounted or stand alone as a desktop. One thing you‚Äôll notice too is that it uses a standard ATX power supply which is a welcome addition for something that will be primarily used by consumers which will allow them to use commodity hardware. 45Drives have said that they will sell this devices in a few configurations, per their website:The current server under development is a 15-bay, 4U chassis that will be offered in three options: Fully built system ‚Äì including CPU, RAM, etc. Chassis with backplanes and PSU Chassis with only backplanesIf you‚Äôre interested I would highly recommend signing up for their newsletterThe Storinator Jr., a Raspberry Pi based storage server (prototype)The next stop was the Storinator Jr. This device is only a prototype but was inspired by Jeff Geerling‚Äôs Petabyte Pi project. The idea is simple, create a ‚Äúmini‚Äù Storinator that is backed by a Raspberry Pi, but the technical limitations of the Pu were almost insurmountable. You‚Äôll have to check out Jeff‚Äôs video for all of the challenges he had to overcome. To be clear, this was only a R&amp;D Project and this product may never come to market, cool nonetheless.Mitch Hall discussing Ceph at 45 Drives_Creator Led DiscussionsWith the tour out of the way it was time to hop into our tech discussions. 45Drives kicked it off with talks from their CO-founder, architects, sales, and more. The topics ranged from the history of 45Drives, Ceph Clustering and ‚ÄúCluster for Everyone‚Äù, to even ransomware protection using Snapshield which can quickly terminate connections from a suspected infected device.Me (Timothy Stewart) discussing 45Drives at Home(Lab)After that, it was my turn. For context, all creators were asked to share a topic related to storage, and I felt the most valuable thing I could talk about was my experience with a 45Drives Storinator at home. Also, in case you didn‚Äôt know, all current Storinators target enterprise customers and so I thought it was a rare opportunity to give them feedback about using and converting one of their storage servers for home use. This might be something that they would incorporate into their Homelab product. And yes, I did throw in the RGB idea. We‚Äôll see how that goes‚Ä¶Jeff Geerling discussing the history of 45Drives &amp; Content CreatorsUp next was a discussion led by Jeff Geerling. This was an interesting talk about the history of 45Drives involvement with content creators raging from Linus, to MKBHD, to iJustine, and even their recent round of creators (all of us). Jeff also analyzed each of the videos and broke them down into why they were successful vs ones that weren‚Äôt particularly successful (from a YouTube views perspective). He talked about his process, script writing, and even storytelling and offered some feedback on how they could improve their reach on their own content if they focused more on story storytelling with a hook. This is something that I definitely need to work on too, so I will be trying to apply this more to my future content.Alan Nagl giving a deep dive on hard drive technologyNext was Alan Nagl from HDStor who did a deep dive on hard drives, how they work, and how the ‚ÄúSSD will never replace the HDD‚Äù. I learned quite a bit about about hard drives, how they work, HAMR hard drives and as a bonus learned all about helium filled drives at dinner. Alan is a wealth of information when it comes to storage!Tom Lawrence discussing ZFS and Ceph solutionsLast but not least was Tom Lawrence from Lawrence systems. He joined virtual because he couldn‚Äôt attend in person but his topic was a discussion on how to position clustering in the market vs single server solutions. Tom had a lot of the same questions I had about Ceph, when to use Ceph, and at what point does Ceph make sense over a large ZFS pool.Outside of lunch, dinner, and lots of snacks, that pretty much summed up the day. Lots of great talked and more to come tomorrow!Join the conversationIf you&#39;re curios what we&#39;ve been up to here at at 45 Drives here&#39;s my recap of Day 1https://t.co/qWvzC4XdHd&mdash; Techno Tim (@TechnoTimLive) August 25, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Use Windows like a Pro! - PowerToys Tutorial", "url": "/posts/windows-powertoys/", "categories": "utilities", "tags": "windows, powertoys, productivity, microsoft, open-source", "date": "2023-08-20 08:00:00 -0500", "snippet": "Today we‚Äôre going to maximize your Productivity on Windows with Microsoft PowerToys. I‚Äôll show you step-by-step how you can use, customize, and be more efficient when using Microsoft PowerToys.üì∫ Wa...", "content": "Today we‚Äôre going to maximize your Productivity on Windows with Microsoft PowerToys. I‚Äôll show you step-by-step how you can use, customize, and be more efficient when using Microsoft PowerToys.üì∫ Watch VideoWhat are PowerToys for Windows?PowerToys is a set of utilities and apps that help you enhance the functionality of Windows and maximize your productivity. These tools provide a range of features, shortcuts, enhancements, and various ways to make you more efficient when using Windows. It also has some features that you might have seen in other operating systems but can be enabled in Windows too with PowerToys.If you haven‚Äôt heard of PowerToys or it‚Äôs been a while since you‚Äôve looked at all the features, sit back as we go through every utility in the PowerToys suite and by the end of this video you‚Äôll be be a pro, or at least you‚Äôll look like one while using Windows. PowerToys is open source and is being rapidly developed and they are adding new features with almost every release. So hopefully byu the end of this video I will have convinced you to install PowerToys and hit the like and subscribe button. Once installed you‚Äôll have a little icon in your system tray where you can launch individual applications, toggle features on and off, or see all settings for all applications.To get started, download and install PowerToys.Always On TopKeep a windows on top with Always On TopWe‚Äôll start with Always on Top. This allows you to pin windows on top of all of your other windows. This is helpful for those times when you want a window to always hover above all other windows, regardless of which window is in focus.To activate it you press: ‚äû Win+Ctrl+TThis will play a sound and show a border around the window that will always be on top. Now if you try to drag a window on top of this window it will remain on top. You can adjust the color mode for the border and choose any color you like or just stick with your theme‚Äôs default. You can also adjust the thickness of the border and choose whether or not you want to round the corners. Finally, you can also choose to enable or disable the sound when activating. You can also choose to exclude apps from pinning on top by entering the process name here. After adding it here, this process will ignore the shortcut to activate Always on Top.AwakeKeep your computer awake without adjusting your power settings!Awake is a quick way to keep your computer away without having to adjust any of your power &amp; sleep settings. This is helpful when running demos, conferences, or any other task where you want to be sure that your device doesn‚Äôt go to sleep or turn off its screen.In the settings for this utility you can choose to keep using the selected power plan, which means it will not affect your power settings at all.If you change it Keep away indefinitely, your computer will stay awake until you explicitly put the machine to sleep or your exit or disable the utility. This also activates the Keep screen on setting, which gives you the option to also keep your screen on too.If you choose to keep away for a time interval you can choose how long you want the utility to stay in this mode before reverting back to the previous state. Once the timer is up, it will revert back to the default setting.The last setting, keep awake until expiration allows you to choose a date and time to end awake mode. This is Like the previous setting, after this expires, it will revert back to your previous setting. This is handy if you have a specific date and time you want to end awake mode.Color PickerPick a color from any running application using Color Picker!Next up is Color Picker and this is one of my favorite utilities in Power Toys. It lets you choose a color from any currently running application and you can copy it in a configurable format to your clipboard. Unlike color pickers for browsers, this works system wide and is great for creatives and developers.To activate the Color Picker press: ‚äû Win+Shift+CThis will activate the color picker window where you can drag your cursor to any item on the screen. You will see a color preview and the color value in a specific format that we can change. To sample the color, just click and it‚Äôs on your clipboard ready for you to paste.We have lots of nice options we can change in the settings for this utility, for example, we can choose what happens when we activate the color picker, we can choose to open the editor, pick a color and open the editor, or only pick a color. I set mine to pick a color and open editor because this gives me a popup after choosing my color where I can choose the one of the supported color formats to choose from. I can copy the value to my clipboard to use it. It also has a history feature on the left where I can choose previously sampled colors which is nice if you use this tool often. If you want to fine tune the color you picked, the editor will also show 2 shades darker and 2 shades lighter in the editor window at the top. If you want to go back to the previously selected color it will be in your history. Also, you can choose to customize the color even more by clicking on the color at the top middle and making adjustments using the slider.You can also choose the default color formats to choose from and even add your own if you don‚Äôt see one of the 3 that come out of the box. I typically only use HEX and RGB in my day tyo day but it‚Äôs nice to know you have the option to add more.Another thing I usually turn on is showing the color name. This is handy if you aren‚Äôt great at color recognition and need a way to describe this color to someone else. Just toggle it on, activate the color picker and you will see the name of the color that it matches.FancyZonesCustomize your windows layout using FancyZones!The Windows manager in Windows is ok and is improved in later versions of Windows but FancyZones take this to the next level. FancyZones is a windows manager utility for arranging and snapping windows into custom layouts to help you work the way you want to with your windows and allows you to quickly restore them too. This is one of the most feature rich utilities in the stack so I‚Äôll try to break down the most important parts to get you going fast.If you‚Äôre going to FancyZones I would recommend letting FancyZones override the default Windows Snap that‚Äôs built in. You can do this in the settings and toggling on the override settingsNext let‚Äôs choose a default layout for our zones.You can activate this by pressing: ‚äû Win+Shift+`Here you can choose one of the existing templates or create your own. Let‚Äôs choose one of the existing ones for now.After choosing a template you can now drag a window while holding Shift and you will see your zones appear. As you move the window around you will see zones you can snap this window too. If you want to snap zone 3, just drop it in zone 3 and it will fill this area. You can repeat this for any window you have open.If you want to do this without using the mouse, you can press: ‚äû Win+left/rightFor example if you want to move a window into one of the zones, while the window is in focus press ‚äû Win + right multiple times to cycle through the zones. Once you find the zone you want, just let go of the ‚äû Win key and you‚Äôre done!Once you start snapping windows in the same zone, you might find that you want to switch between windows that are snapped to the same zone, you can easily do this by selecting a window in that zone and then pressing ‚äû Win+PgUp/PgDn. This will cycle through all windows snapped to this zone.If you want to customize a zone template you can do so by pressing ‚äû Win+Shift+` and then editing your template and adjusting some of the options. You can increase the number of zones, increase the space around zones, and even the distance to highlight adjacent zones which is helpful when trying to merge 2 zones together when dragging a window around.If you‚Äôre not happy with existing zone templates you can create your own by using the Zone EditorIf you activate the Zone picker with: ‚äû Win+Shift+` You will see this button at the bottom that says create new layout. If you click, you can create your own custom zones in either a grid layout that snaps windows into place without overlapping, or canvas which is kind of free form and will allow you to overlap windows.Now there are many more customization options in the settings like changed colors, multi monitor supportFile LocksmithUnlock those pesky locked files using File Locksmith!File Locksmith is a nice little utility to help you know which files are in use and by which process. This is really helpful if you are trying to figure out which application is locking a file. For example if I right click on this folder and select ‚ÄúWhat‚Äôs using this file?‚Äù it will check to see if any of the files in this folder are being used. We can see here that I have a document opened with Word, Excel, VSCode, and even explorer. I can expand the details of each and see what the specific files are. I can even end the task from here, killing the process and removing the lock. Just be careful if you end the task, it will kill all instances of it.File Explorer Add-onsMake Windows Explorer more useful with these add-ons!This File Explorer add-on utility adds some additional functionality to Windows Explorer. The first setting allows you to preview additional file types in the preview pane on the right. To toggle on the preview pane you can press Alt + P. With this setting toggled on you can now see previews for SVGs, Markdown, Source code files, PDFs, and gcode files. The other setting with this the File Explorer add-on utility allows you to see more thumbnails inside of explorer when browsing your file system. This can be handy if you work with these types of files, letting you easily see a preview of the file before opening.Host File EditorNever make a mistake again editing your host file with Host File Editor!The Host File Editor utility allows you to quickly make changes to your host file. Your host file is the first place Windows looks to resolve IP addresses and although not common unless you are in IT, you might have some non standard items in this list. The host file editor makes it easy to edit this file without making mistakes. You‚Äôll want to be sure that most of the settings are at default in order to get the most out of this utility and that‚Äôs ‚Äúlaunch as administrator‚Äù, ‚Äúshow a warning at startup‚Äù, ‚Äútop being the position of additional content‚Äù, and the encoding being ‚ÄúUTF-8‚Äù. You can then launch the host file editor and quickly add additional host entries without having to edit them manually. You can add comments, toggle them on and off, reorder entries moving them up and down, run a test ping, and even see the original host file by clicking on this button.Image ResizerBulk resize images with Image Resizer!Another great feature of Power Toys is the image resizer. The image resizer lets you bulk resize images just by right clicking and then choosing ‚ÄúResize pictures‚Äù This will pop up some options where you can choose the output for the resize. There are some presets that you can adjust in the settings but the default options are best. After choosing your size and clicking resize, Windows will batch convert all of them files for you. By default it will make copies so it‚Äôs safe to run, but this can be changed easily when resizing your files. There are also more settings you can choose from in the image Resizer settings. Still waiting on that webp option.Keyboard ManagerTake control of your keyboard mapping using Keyboard Manager!The Keyboard Manage is a nice little utility that allows you to remap your keys on your keyboard. This is handy if you have an odd keyboard or want to customize some unused keys. For example if we want to remap a keep that is rarely used, at least form, like the CapsLock key, we can easily do that by opening the utility and then either selecting or pressing our physical key of CapsLock and then selecting or typing the key you want to map it to. I chose to enter. When saving you will see a warning about CapsLock no longer being mapped but that‚Äôs ok since I never use it. You‚Äôre free to remap this if you like. After saving this, you can now see that my CapsLock key is working just like my Enter key! Well, looks like I can‚Äôt yell at anyone on the internet anymore, so let‚Äôs un do that. JKYou can also remap shortcuts if you like. If we wanted to remap the control + c shortcut to control +v in chrome only, we can do it like this. This will now override the copy function with the paste function only when in chrome. Confusing, but it works great.Mouse UtilitiesGet some help for your cursor with Mouse Utilities!Mouse Utilities is another one of my favorite Power Toys in this suite. It is a collection of features that enhance the mouse and cursor functions on Windows. It has 4 different features, the first being FInd my Mouse.Find My Mouse highlights the position of the cursor when you press the left Control key twice. This is helpful if you can‚Äôt find your mouse or even when giving demos to emphasize an area in your demonstration. I use this quite a bit to help viewers focus on what I am focusing on. You can change many aspects of this spotlight and animation, making it just the way you like. You can even change the activation method so if you don‚Äôt like pressing left control twice, you can just shake your mouse until it activates.The next is Mouse Highlighter, this will highlight left and right clicks of your mouse. You can activate it by pressing ‚äû Win+Shift+H. Once activated left clicks will be the default color of yellow and right clicks will be the default color of blue. If you want a different color or experience all of these can be adjusted in the settings.The next is Mouse Jump. You can activate it with ‚äû Win+Shift+D and then it will show you a screenshot of your desktop. If you click on an area in the image, it will jump your cursor to the location that was clicked. This is great for large monitors where you need to travel great distances. Maybe one day I will have a monitor with a resolution this high to where I need something like this.The last one in Mouse Utilities is Mouse Pointer Crosshairs. If you activate this with ‚äû Win+Alt+P it will draw crosshairs centered on your mouse pointer. You can adjust any of the settings for the crosshairs in the Appearance &amp; Behavior section.Mouse Without BordersRemote control up to 4 machines using one mouse and keyboard with Mouse Without Borders!This is by far one of the coolest features of Power Toys and probably the most complicated. Mouse Without Borders allows you to control up to 4 computers from the same machine with only one keyboard and mouse. Think of it like extending your desktop across multiple machines but you can remote control all machines from all machines. This will make more sense in a bit. You‚Äôll need at least one additional machine with Power Toys installed. Once you have Power Toys installed on all machines, be sure that Enable Mouse Without Borders is turned on.On the first computer, select New Key to generate a new security key so you can securely connect. Then on the second machine enter the Security Key that was generated on the first machine and enter the first machine‚Äôs name. Then select connect. You will then see both machines appear in the device layout. You can rearrange them here to match their physical layout. Now you can switch between each computer by just moving your mouse cursor to the edge of the screen and it will transition between computers! You can add additional computers by repeating this process! Another cool thing I learned is that you can also go the other way too and control your primary machine from the secondary, just start moving the mouse over the shared edge and it will jump back to your main machine!There are lots of settings and features that you can play with, but some worth mentioning are:sharing the clipboard between machines. This is allows you to copy text from one machine and paste it into another andCopying files between machines. Files less than 100 MB can be transferred too! This is as simple as copying a file and then pasting it. You will see the file transferred using the clipboard. Pretty cool!If you ever want to disconnect from other remote machines, you can simply generate a new key and the others will drop.There are additional settings, keyboard shortcuts, and even a troubleshooting section that I encourage you to explore once you‚Äôve set this up.Paste As Plain TextRemove all formatting when copying and pasting text with Paste As Plain Text!Paste as plain text is just what it sounds like, it will paste text as plain text without the additional formatting. This is super helpful when you are copying something from the web and pasting it into a document. To fix this all you need to do is enable Paste as Plain Text in Power Toys and then when pasting just ‚äû Win+Ctrl+Alt+V and it will paste your text without the formatting.PeekGet a quick preview of your files without switching context with Peek!Peek is a nice little utility that lets you preview a file without opening it up and without scaling up explorer. To use Peek, be sure it‚Äôs turned on and then select a file in explorer and press Ctrl+Space. THis will bring up a preview window where you can check out the file and even arrow through files if you have multiple. Then to close just press the same keys Ctrl+Space and it will close the preview.PowerRenameRename multiple files like a pro with PowerRename!PowerRename is another one of my top used Power Toys. It‚Äôs a bulk renaming tool that has a ton of flexibility for managing file names in bulk. To use it, be sure it‚Äôs enabled and then select a group of files you want to rename and right click. From there you will see the PowerRename option. After clicking it you will see a new interface that will help you rename files along with a preview. You search within a file name for specific text and even use regex if you like. You can then add text to replace the found text. You can apply it to extensions, files, folders, and sub folders. You can also shift the case to lower, upper, title case, or capitalize each word. You can even enumerate each item, basically giving them a numeric suffix. One other cool thing you can do is use variables in the file name. You can see a list of variables by licking the info button. From here you can click variables and it will add them to the text to replace. Once you are satisfied with the text, you can apply it and it will batch rename all of your files!PowerToys RunQuickly launch applications, do calculations, and more using the missing app launcher for Windows, Run!PowerToys Run is one of those features that once you start using it‚Äôs hard to go back to the old way of doing things. It saves so much time and you look cool doing it too. PowerToys run is a quick launch utility that when pressed will allow you to launch applications, do calculations, even search the web just by typing and it‚Äôs way faster than the start menu.To launch PowerTypes Run press: Alt+SpaceFrom here you can do simple things like launch applications. If you want to launch Chrome just type ‚Äúchrome‚Äù then hit enter. Easy enough. You can also search for files, settings, and even the web. You can also do some advanced searches using plugins. For example if you want to do calculations, you just type in the expression and it will compute it and if you want to copy the value to your clipboard you just hit enter. If you want to base64 encode something you can just type #base64 abcdef and see the value and hit enter to copy it to your clipboard. If you want a guid, just type #guid and it will generate one for you. There are lots of plugins you can explore in the settings or toggle off if you don‚Äôt plan on using them. Definitely worth checking out all of the available settings you can change if you‚Äôre going to use this feature. Super powerful, super cool.Quick AccentNever misspell jalape√±os again with Quick Accent!Quick Accent is a quick way to type accented characters, this is especially useful when using a keyboard layout that doesn‚Äôt support the specific accent.For example on a US English keyboard layout there isn‚Äôt an easy to type ‚Äú√±‚Äù. This makes it hard to type jalape√±os. But don‚Äôt worry, with the Quick Accent power toy it‚Äôs super easy to do. After enabling Quick Accent you can activate it by pressing the key you want to accent along with space. Here we‚Äôll hold N while pressing space. Then you can keep pressing the spacebar to cycle through the different characters. Once you find the one you want, just let go of the N and it will insert it. If you want to insert ‚Äú√∂‚Äù in German, you hold O, and tap spacebar until you find it, then let go of O. There are many settings you can change, especially the activation key if you want to switch from using the spacebar.Registry PreviewGet a visual preview of Registry files using Registry Preview!Registry preview is a quick little utility to visually preview registry changes. If you‚Äôve ever opened a registry file with a text editor, you know the struggle of trying to validate these files, especially when editing. Registry Preview makes that a little easier. After opening Registry Preview you‚Äôll then want to select a registry file to open. On the right you can see a preview of where this key lives in your registry along with any of the values. If you want to edit this file, you can on the right. Once edited you can save the file and then reload the file and you can then see the changes in the preview window. If you‚Äôre satisfied with these changes you can write them to the registry. You can also use the ‚ÄúOpen Key‚Äù button to open the registry editor directly to your key. A word of caution, only edit the registry if you know what you‚Äôre doing.Screen RulerMeasure pixels anywhere with Screen Ruler!Screen Ruler is a PowerToy that‚Äôs not only helpful if you‚Äôre a designer or developer, but it‚Äôs also super fun to use! Screen ruler helps you measure the pixels on your screen based on image edge detection. You can activate it with ‚äû Win+Shift+M and then from here you can choose your measure style.Bounds will create a bounding box where you can click and drag your mouse to measure the pixels in the box you draw. You can also hold Shift to have your boxes persist until you cancel your selections.Spacing Will measure both vertical and horizontal pixels at the same time as you move your cursor around the screen. Horizontal and Vertical measure will do the same but only measuring one at a time. You can cancel any of these at any time by clicking the X or just hitting escape.There are a handful of options you can configure if you want to in settings.Shortcut GuideForget what a Windows keyboard shortcut does? Check it quickly with Shortcut Guide!The shortcut guide is a nice little utility that shows common Windows shortcuts in an overlay. You can activate this by pressing ‚äû Win+Shift+/ or ‚äû Win+Shift+? If you‚Äôre looking for the forward slash. From here you can see all of the items you can lunch by pressing the ‚äû Win + the key you see on the screen. For example, it says the emoji panel can be opened with ;, so all we need to do is press ‚äû Win+;. Feel free to explore the other shortcuts on the screen.Text ExtractorExtract text from any image using Text Extractor!Text extractor is a great utility to extract text from any image and copy it to your clipboard. It uses OCR to do this and it actually works pretty good. THis is great when you want to quickly grab text from an image or a screenshot. To activate it all you need to do it press ‚äû Win+Shift+T and then with your crosshair select the area that you want to extra text from. After selecting it will be copied to your clipboard where you can paste it. The text extractor can only extract languages that have the OCR language pack installed, so if you need to install additional languages I‚Äôll have a link in my documentation on how to do that.Video Conference MuteTake control of your microphone and camera during conferences using Video Conference Mute!Now this PowerToy is in legacy mode meaning they won‚Äôt release any updates to it but it‚Äôs worth mentioning because it‚Äôs still available. I wouldn‚Äôt be surprised to see this go away since Windows is starting to support this natively without this Power Toy. Anyway‚Ä¶First you‚Äôll need to be sure you run Power Toys as Administrator. You‚Äôll need to close it first, then right-click and run as administrator. After you do this and visit the Video Conference Mute section you will see shortcuts for muting the camera and microphone.To mute both your camera and microphone you can press ‚äû Win+Shift+Q and you will see a little bar appear that shows that both are muted. You can press this combination again to toggle them both on. To toggle just the microphone you press ‚äû Win+Shift+A and to toggle the just the camera it‚Äôs ‚äû Win+Shift+O. If you want toi mute your microphone and toggle it only when you want to speak, you can use the push to talk feature by pressing ‚äû Win+Shift+I. This will unmute your microphone when you are holding this combination of keys. Again, this is a legacy feature that I personally don‚Äôt use but I want to cover it for completeness.ConclusionI hope you can see how powerful the Windows Power Toys are and how they can help you be more efficient at using Windows. There are so many useful utilities in this suite and more being added with each new release. I learned quite a few new shortcuts, and new ways of working on Windows, and I hope you learned something too! And remember if you found anything in this post helpful, don‚Äôt forget to share!Join the conversationOver the last few weeks I dove deep into PowerToys (open source utilities for Windows) and learned how to be more productive using Windows. Finally, a decent app launcher, color pickers, remote controlling multiple machines, and more!Check it out!üëâhttps://t.co/rENRbEM5tB pic.twitter.com/MZLRXQCDAR&mdash; Techno Tim (@TechnoTimLive) August 20, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Power Over Ethernet is AWESOME!", "url": "/posts/poe-adapters/", "categories": "homelab", "tags": "hardware, zimaboard, poe", "date": "2023-07-28 08:00:00 -0500", "snippet": "I was unsatisfied with the huge wall adapter that many products ship with, so I replaced it! Want to power a mini PC or a smaller device with Power Over Ethernet (POE)? No problem!üì∫ Watch VideoHow...", "content": "I was unsatisfied with the huge wall adapter that many products ship with, so I replaced it! Want to power a mini PC or a smaller device with Power Over Ethernet (POE)? No problem!üì∫ Watch VideoHow I use it Power Disclaimer: Be sure to check your device for the appropriate voltage and wattage. As with all power adapters, using something that isn‚Äôt intended for your device can break your device, switch, or both!Power Over Ethernet or POE. It‚Äôs awesome!. I have some small low power devices that have barrel plugs and they have these power adapters that take up a lot of space. Also, this ZimaBoard (and even Raspberry Pis) have a power switch to power on and off. To power it on and off I have to unplug it and plug it back in and unplug it and then plug it back in.I wanted to find a better way to power these devices, and that‚Äôs when I stumbled on this little POE adapter. This little adapter plugs into my POE switch and delivers power to the device. So it will pass through the network too. So if I plug it into my switch and plug it into the device, the device will power on. My POE Switch is managed too so I can use its console to power the device on and off.Now to power the device, I can just unplug the network cable!This adapter splits power and ether so you can power your low power devicesIt also has Gigabit ethernet!Where to BuyProducts in this video (see power disclaimer above): POE Splitter Gb 2.5mm (featured in video): https://amzn.to/3rNhvKw POE Splitter Gb 2.1mm: (other plug size): https://amzn.to/3KG5g9p POE Splitter Gb USB C: https://amzn.to/3KfvE9G POE Splitter Gb Micro USB: https://amzn.to/3KjMWlU 2.1mm to 2.5mm adapters: https://amzn.to/3OAt6poSee the kit here:https://kit.co/TechnoTim/power-over-ethernet-poe-devices(Affiliate links are included in this description. I may receive a small commission at no cost to you.)Join the conversationPower Over Ethernet is AWESOME! (POE) #homelab pic.twitter.com/HCFhuDyc1z&mdash; Techno Tim (@TechnoTimLive) July 28, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "A Mini Rack for Your Home!", "url": "/posts/sysracks-12u/", "categories": "homelab", "tags": "sysracks, rackstuds, hardware, homelab", "date": "2023-07-26 08:00:00 -0500", "snippet": "I decided to go with another rack in my home but this time much smaller! Thanks to Rackstuds for sending a few packs of Rackstuds!üì∫ Watch VideoWhere to BuyProducts in this video: SYSRACKS 12u Serv...", "content": "I decided to go with another rack in my home but this time much smaller! Thanks to Rackstuds for sending a few packs of Rackstuds!üì∫ Watch VideoWhere to BuyProducts in this video: SYSRACKS 12u Server Rack (Gray): https://amzn.to/44EREmL SYSRACKS 12u Server Rack (Black): https://amzn.to/3Khv1fP Rackstuds Duo 1RU: https://amzn.to/3Y7BkIG Rackstuds R100: https://amzn.to/3Kf3yLD Rackstuds R100: https://amzn.to/3Kf3yLD Tripp Lite UPS: https://amzn.to/3YbI5Js Casters for Rack: https://amzn.to/45mDeaT(Affiliate links are included in this description. I may receive a small commission at no cost to you.)My New RackOver the years I‚Äôve gone from machines on a shelf, to racking machines in an open rack, to centralizing everything and racking it in an enclosed 36u rack, to what I am building now, and that‚Äôs this new 12u closed rack. It‚Äôs a smaller version of my 36u rack with a few changes that make this the perfect rack for a small office, home office, or even just at home. But is it right for you? Let‚Äôs check it out and see.HardwareIntroducing my 12u Sysracks Server RackThis is the Sysracks 12u 24‚Äù Wall mount 19‚Äù enclosure server rack. It measures almost 24‚Äù wide, almost 24‚Äù deep, and almost 25‚Äù tall. It‚Äôs a standard 19‚Äù rack and if you‚Äôre wondering why they call it a 19‚Äù in rack, 19‚Äù refers to the mountable width of servers and equipment. It‚Äôs made of steel and has a powder paint finish in either gray or black. It has 2 brush panels with cable managers at the top and bottom to help with cable management and block dust from coming in. All around the case you are going to see lots of perforated edges, especially around the front doors. This is to help passively cool the entire enclosure. It also includes active cooling with this top 120mm fan module that connects to any standard outlet. There are models, especially the larger units like my 36u rack that come with temperature control units, but I opted to keep this one simple and will probably add temp sensors and smart switches to control this fan if it ever gets to that point. Wait, I thought I said I was keeping it simple???Speaking of power it also comes with a PDU where you can plug in up to 8 devices and has a a secure on/off switch covered in a detachable cap.I finally realized why they call these 19‚Äù racksIn the back we can see wall mounting hooks which makes this easy to wall mount if you choose to do so but I am choosing to attach some casters so I can move it around freely in my office if needed. The back panel is attached with screws but can be easily removed if needed.On each side we have locking removable panels that can help you secure your enclosure and prevent anyone from getting in while still giving you access to get inside and make adjustments to your equipment.Coming around to the front we have this nice glass door that has perforated edges on the side and a handle that can also be locked if needed. I like having a glass panel door because it lets me easily see inside to check on my equipment plus it looks cool with all the blinky lights.Inside the rack has 4 posts to rack up to 12u of equipment making it great for small servers, networking equipment, DVRs, AV equipment, and anything else that can fit in a 19‚Äù short depth rack. It also comes with this shelf for equipment however I am not sure if I am going to use it or not yet.AssemblingPutting it together was so much easier than my 36u rack. You can do it alone but it might help to have someone for the very first step and that‚Äôs putting together the frame. Don‚Äôt worry though, I was able to manage it alone. After securing the fame, you‚Äôll then need to mount all of the posts so you can rack your equipment. Before you go too far like I did, if you‚Äôre going to use the supplied shelf be sure you adjust the posts so that you can mount the shelf later if needed.The back panel can be attached with a few screws. While I would have loved to see a door like on the 36u model, it makes sense for this to be a panel since it‚Äôs also wall mountable.The sides are removable and can easily pop in and out with these clips. It also comes with a lock and key to secure it if you like.Assembling the rack was pretty easy, you can do it with one personThis model supports both legs and casters however it only ships with the legs. If you‚Äôre going to use casters too you‚Äôll need to pick some up or buy them separately. I did choose to go with casters because I want to move it around the room when needed. The casters lock in place and are very secure, so secure that I didn‚Äôt worry one bit about assembling this on my workbench.Attaching the front door is pretty easy, but is a little challenging using the shims to get the door to hang just right. I love the look of the rack and I think the perforated edges and glass give it that premium feel. The door has a handle to keep the door shut and can also be locked with the included keys.AssembledAs I mentioned the back is removable via screws, I do wish it was a door but it‚Äôs easy enough to take off and most people are going to wall mount this anyway. Once it‚Äôs all put together, It‚Äôs pretty easy to work on and get inside of the rack when it‚Äôs empty, plenty of room to work on everything I plan on installing.You can see the vents on the top for cables as well as the fan for cooling. I am glad I have a fan however it doesn‚Äôt have a switch to easily toggle on and off so I will end up wiring this up to a smart switch and put a temperature control inside if I ever really need to turn this fan on.Installing ThingsI started out by installing my UniFi 24 port POE switch. This was a switch that I replaced in my other rack but decided to hang on to it for this rack. I don‚Äôt think I will be using all 24 ports here in my office but it‚Äôs better than buying another switch.RackstudsAs you can see I am using RackStuds for this install. RackStuds reached out and sent me a few packs of studs including their new 1ru rack studs. These are awesome and so simple to use. You just squeeze them, pop them in, and then hook up your devices. These new 1ru RackStuds are great for 1u devices like my switch and PDU I put in back. Simple solution. But then I decided to put them to the test. I wanted to rack mount my UPS and that thing weighs 22 lbs and only has rack ears in the front rather than the front and back. I tightened all 4 using their combo pack studs and so far so good. RackStuds are able to hold them without issue and without sagging. Oh, and I wasn‚Äôt paying attention when racking my UPS and I racked it upside down, which I then quickly flipped around after noticing, but it was super simple with RackStuds. If you‚Äôre interested in the ones I used I‚Äôll have some links below.This was my first time using Rackstuds, they were really easy to use.My ThoughtsAfter installing the UPS, the network switch, and my PDU I took a look at the rack. It‚Äôs a really nice rack for short depth items, not to mention that you can use shelves for anything that can‚Äôt be rack mounted natively. I am really impressed by the build quality and attention to detail, glass door, and all of the other features - especially for the price. At just 210 dollars I was expecting a lot less but what I got was a perfect rack for my office. This is going to house a few projects coming up so be sure you‚Äôre subscribed to see what else I am going to put in it. Well I learned a ton about racking smaller components, building a mini rack, and I hope you learned something too. And remember if you found anything in this post helpful, don‚Äôt forget share!All in all, I am super happy with this new rack!Join the conversationI decided to go with another server rack in my home but this time much smaller!Check it out! üëâhttps://t.co/CncKenusZx pic.twitter.com/mwbkO1fA4c&mdash; Techno Tim (@TechnoTimLive) July 26, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "20 Home Server Projects You Can Start TODAY - CasaOS + ZimaBoard", "url": "/posts/zimaboard-projects/", "categories": "homelab", "tags": "zimaboard, hardware, casaos, linux, windows", "date": "2023-07-14 08:00:00 -0500", "snippet": "I‚Äôve had a ton of fun setting up and configuring a ZimaBoard and CasaOS over the last few weeks! While CasaOS is a great fit for your Home Server projects, I also decided to walk through over 20 o...", "content": "I‚Äôve had a ton of fun setting up and configuring a ZimaBoard and CasaOS over the last few weeks! While CasaOS is a great fit for your Home Server projects, I also decided to walk through over 20 other home server projects you can start today. These projects are for everyone, from the beginner, to the tinkerer, to the hardcore enthusiast! Thanks to ZimaBoard for sending this device!üì∫ Watch VideoWhere to BuyCheck out ZimaBoard today! ZimaBoard Official: https://bit.ly/3K9WZu7 ZimaBoard Official Shop: https://bit.ly/3DlTm0l ZimaBoard on Amazon: https://bit.ly/4478n1bSee the whole kit here! - See the entire Kit https://kit.co/TechnoTim/zimaboard-project-kit(Affiliate links are included in this description. I may receive a small commission at no cost to you.)What is a ZimaBoardThe ZimaBoard has been out for a little while now but I thought it would be a great time to check in and see how it‚Äôs doing, along with the open source project CasaOS which ships with every ZimaBoard. I also wanted to share with you lots of projects you can start today with a ZimaBoard in case you need some inspiration for your tech projects. I‚Äôll cover some of the easy or ‚Äúbeginner‚Äù projects that don‚Äôt take a lot of work to get going, then we‚Äôll cover some of the projects for the Tinkerer, and then those projects for the hardcore weekend warrior tech types. But first, what is a ZimaBoard?HardwareThe ZimaBoard is a self proclaimed ‚ÄúWorld‚Äôs First Hackable Single Board Server‚Äù Which means that it‚Äôs a complete functioning computer built on a single board circuit and while most don‚Äôt have expansion slots, this one actually does. The ZimaBoard comes in 3 varieties, the 232 has an Intel Celeron N3350 Dual core CPU, 2G of RAM, the 432 which has quad core Intel Celeron N3450 CPU with 4G of RAM, and the 832 which has the same Quad core Intel Celeron N3450 but has twice the RAM of the 432 for a total of 8GB of RAM.Introducing the ZimaBoard!Outside of those differences each ZimBoard comes with 32 GB eMMC storage, 2 SATA ports for disk drives, 2 Gigabit LAN ports, 2 USB 3.0 ports, and what makes this different than most kits you see out there is the PCIe slot that you can connect PCIe devices to, but more on that later.It also has a mini display port that can output up to 4k 60 and has a TDP of only 6 watts.It has a mini Display Port, (2) 1 Gbs NICs, (2) USB 3.0 Ports, and 12v powerA few other things you might be interested in if you are a geek like me is that the CPU supports Intel VT-x for virtualization, VT-d for hardware passthrough, AES-NI for encryption, and video transcoding, all which will come in handy with some of the projects we‚Äôre going to talking about today.BeginnerSo first, we‚Äôre going to start with the ‚Äúbeginner‚Äù projects, but don‚Äôt be fooled by the name, this doesn‚Äôt mean that these projects aren‚Äôt technical, it just means that they take very little to get started. We‚Äôre going to start with one of the best uses for your ZimaBoard and that‚Äôs CasaOS.CasaOSCasasOS comes preinstalled with your ZimaBoard. CasaOS is an open source service, I‚Äôll say and not necessarily an OS, it‚Äôs installed on top of Debian and many other Linux distributions but I still think that name is fitting. It‚Äôs software that focuses on delivering simple personal cloud experiences around the Docker ecosystem, and I think they‚Äôve done a great job on delivering on that promise. You can launch it from the desktop on your ZimaBoard or you can simply connect to it from a web browser on your network.You‚Äôll be greeted with a dashboard and a few widgets. We can see the time and date, our system status including CPU and RAM usage, our storage along with any additional connected drives, and our network status where we can toggle between our two network adapters. We also get a built-in search bar where we can search using our favorite search engine.There are two things you‚Äôll be using this dashboard for: Installing and managing apps Managing the file system including shares.AppsIf we launch the app store and take a look, we can see lots of applications that we can choose to install. The nice thing about CasaOS, is that every app you see here can be installed and configured with a single click. That means no messing with ports, account names, volumes, or any of the other typical things you have to do when installing Docker containers. Also, you don‚Äôt even need to know what a Docker container is. You can almost treat this as an app store without knowing any of the implementation details. Some of the apps included in the app store are: PiHole for network-wide ad blocking Plex or Jellyfin a media server Home Assistant for home automation - Nextcloud for a Google Workspaces like experienceand many others that will help you build up your own little personal cloud in no time!CasaOS is a nice little open source service to run on your ZimaBoard and more!And if you can‚Äôt find the application you want in their app store, you can also run any Docker container you like by using the custom install feature in the app store and then either filling out a form, or using the import feature to paste the docker commands, Docker compose file, or appfile (which is an export you create to share with friends from your own apps). Importing configs will fill out the form for you. It‚Äôs kind of hit or miss if all the settings will be imported properly so it‚Äôs worth a look to make sure they are right.Once these apps are installed, if they have a web management page we can simply click on the app to launch it and configure it from there.Files AppThe other place where you‚Äôll probably spend a lot of time is in the Files ‚Äúapp‚Äù. This app is a super elegant way to manage files and share and I think it‚Äôs one of the cleanest web file management UIs out there, not only because it looks good and is fast, but also because it makes sharing files super easy, let‚Äôs take a look‚Ä¶The Files app is a nice way to manage your files!After launching the files app we can see a default storage location for our media and documents and from here we can upload, download, and manage files if we like and it even has a built-in file previewer for different file types. If you want to share a file from here, you can simply share the folder from the menu, and then open it from any machine on your local network. That has to be one of the simplest ways of sharing files I‚Äôve seen. If you want to see all your shares you can simply click on this share icon at the bottom and it will list all of your shares.Since we‚Äôre talking about sharing and we‚Äôre down here in the bottom left, we should talk about the FilesDrop feature. This is a cool feature similar to AirDrop for Apple devices, except it works on the web and with any device that has a browser.Let‚Äôs say for instance we are on our Windows machine and want to share a file with our phone. Instead of transferring the files through Google Drive and uploading and then downloading them on our phone we can simply do it all through CasaOS. If we click on the FilesDrop button it will launch a new experience where it shows my machine (the Windows Chrome machine) and then any other device that connects to CasaOS and visits this page will also show up here. When I connect my phone you should see another icon pop up. (It says macOS Chrome but should say iOS Chrome but that‚Äôs not important.) From my Windows machine I can click on my phone icon and then choose files I want to send to it. If I want to send this photo right here, I choose it, and then on my phone I will get a prompt to save it, I can then save it to my phone! I can also go the other way and upload files from my phone back to my machine, all without the cloud and from any device that has a web browser!FilesDrop is like AirDrop, but for any machine with a browser and only uses your local network connection!One other feature that you might be interested in when using the Files app is the availability to connect cloud storage. If we click on the plus we can add a Dropbox account, Google Drive, or even another network share on our local network. This feature is really cool for connecting and transferring things from your Google Drive to your own cloud or vice versa. This is also helpful for migrating to or from the cloud and could be even more useful if one day you can back up your data from CasaOS to one of these locations.Another thing you might be interested in is the storage feature. This feature is limited but allows you to add additional drives to your ZimaBoard in a snap. You just open the storage manager, and click create storage. You‚Äôll get a prompt asking you if you want to add this device and that it will erase all contents from the device. Once it‚Äôs created you will see the device in the files app and you can use it for additional storage. There‚Äôs also this new merge storage option that will merge all of your storage into one, which seems like a simple way of expanding your storage but this also means that if one drive dies you might lose all of your data. I did enable it and it does exactly what it says, it merges multiple drives into one using mergefs. It‚Äôs also pretty easy to undo this too.You can add and wipe additional drives, and even merge them if you want!Now don‚Äôt let the simplicity of this UI fool you, you can still do some advanced things from the web dashboard like access to logs, access to a terminal, as well as the logs from each individual docker container and the ability to exec into them. All in all, I think CasaOS is probably one of the best projects for this ZimaBoard.Operating SystemsThe next project I can see people using this for is installing and running operating systems. Windows and Linux run fine on a ZimaBoard and I‚Äôve tested it with Windows 10, Ubuntu Desktop, and Ubuntu server and I am sure many other distributions will run on this board because at the end of the day it‚Äôs a x86 intel based system. You won‚Äôt have any issues getting or installing drivers because it‚Äôs running on Intel hardware. Most things will be plug and plug and play and if you are going to go this route I would recommend picking up a USB hub and a solid state drive for additional storage. Then, you can run or test your software on this tiny little package. It does output to 4k 60Hz so it will look great on your display though it will start to push the limits on what you can do with this little board. Office apps, web browsing, watching video are all fine, anything outside of that and you might need a little more power. You could even dual boot Windows and Linux with 2 drives either by connecting 2 drives or by swapping them each time you want to boot but that‚Äôs starting to get into some of the more advanced use cases, and more for the Tinkerer.I‚Äôve tested on Windows 10, Ubuntu Desktop, and Ubuntu Server and all run great!TinkerersThis next group of things you can do with your ZimaBoard is dedicated to the Tinkerers. These are folks who aren‚Äôt afraid of running Linux headless, know their way around a terminal, know how to exit VIM (first make sure you are not in edit mode and that you are in command mode and then press :quit, but if you‚Äôve made changes‚Ä¶ nevermind, you get the picture)The first thing I would recommend running on a ZimaBoard for this group is Portainer. Portainer is a great UI to run all of your containerized applications, some of the same applications we talked about earlier like Plex, Jellyfin, Nextcloud, and many others. This gives you a lot more control over which OS you run and which applications you run and you can keep it as minimal as you want, saving on resources. But with that comes a little complexity. But you‚Äôre a tinkerer, right?Emulation StationAnother quick project that sounds like a ton of fun is Emulation Station which is the same software that Retro Pi is based on. Just install your OS, Windows or Linux, and then install Emulation Station and your emulators, connect to a few controllers and you are good to go. The ZimaBoard has all of the rest of the hardware you need to play retro games and is compact enough to bring with you on a road trip.You can easily build out an Emulation Station with a couple of USB powered controllers!Other uses for a ZimaBoard include some projects that I will definitely use this for and these are diagnostic and troubleshooting projects.Diagnostic &amp; TroubleshootingFirst is a disk wiping station. Having a dedicated little machine to securely wipe disks that I am no longer using is welcomed because my current solution is using an old janky PC. Having something this small and dedicated to wiping disks just makes sense after you use it. I can just boot to killdisk, start a wipe and walk away.You can easily connect HDDs and SSDs for a disk wiping station and more!Another thing I use that old janky PC for is updating firmware on devices, especially SSDs. This is usually the case when building new systems or replacing drives in existing systems. I can even do the same for NVMe drives with this PCIe adapter.You can also connect NVMe drives with this adapterAnother thing I do with that old janky PC (sorry old PC) is clone disks. I use CloneZilla every now and then to backup or clone hard drives from one to another. CloneZilla has been my go to for years either backing up and restoring images over the network or doing a disk to disk clone. If you‚Äôre doing a disk to disk clone you will need to pick up this special Y adapter that lets you connect 2 drives at once, but it‚Äôs like 4 dollars in their store. One of the other use cases is simple data recovery. It‚Äôs nice to have a small simple machine that I can plug a drive into and run and try to recover files if the drive is no longer bootable. And all of this is easy and accessible using a ZimaBoard.What about a NAS?Now you may have noticed I didn‚Äôt mention NAS, that‚Äôs because I honestly think the best NAS you can use on this tiny little machine is using CasaOS, sure TrueNAS and OpenMediaVault should work but CasaOS already does this beautifully. And since you are a Tinkerer, you might as well install Debian headless then CasaOS to save resources!Hard CoreThe last group of projects is geared towards the hardcore. It‚Äôs for those folks who like to push hardware to the limits or experiment with something that they‚Äôve never tried before. This is where I think the PCIe slot really comes into play. This PCIe slot can be used to connect any PCIe device as long as it can run in a x4 slot, which should be most because the slot is open here at the end.Most PCIe devices will fit into this slot since they end is slotted (Power but has limited power)While I know it‚Äôs technically possible to attach a video card to this device, I am not sure that a majority of the people who pick up this device will be doing so. I could be wrong, but I think more people will be attaching smaller devices like extra NICs, wireless adapters, and possibly more sata drives.While GPUs will fit, your mileage may vary on whether they work or not.Network Firewall, Hypervisor, and More!This opens the door for turning this device into a router or firewall. Having 4 cores, 2 gigabit NICs, AES-NI, and up to 8 GB of RAM make this a solid choice for pfSense or OPNSense, it‚Äôs small, compact, has enough compute and RAM, has dual NICs, and is completely silent. And if you want to turn this into an access point, all you need to do is add a wireless NIC and you a nice little OpenWRT system!Yup, you can even turn this into a Firewall / Router with a few extra NICs!But even if you‚Äôre not into creating a router or firewall and you‚Äôre the hardcore type there are plenty of projects for you. If you know RaidOwl, he created a high availability cluster with 3 using Proxmox. Which is another use case, and that‚Äôs installing a hypervisor. Because the ZimaBoard supports both VT-x and VT-d it can be used to test out the latest HyperVisor.And if creating and testing virtualization isn‚Äôt your thing, there‚Äôs the use case that I think that this is great for and it‚Äôs for developing and testing hardware. Most developers I know have laptops and don‚Äôt have access to a PCIe slot and that can be painful if you are working on a project that requires it, for example machine learning and AI. The Coral TPU from Google is a great example of how you can add a small PCIe device that is capable of doing AI in a small package, and if you can get your hands on one it could fit right in this slot. Having access to AI on a small board like this could let you do local detections from your video feeds so you can detect things like people, cars, and more. There are so many use cases for the hardcore that I could go on all day!If I could get my hands on a Google Coral TPU, it would fit right here (Hey Google, call me!)What do I think?ZimaBoards are super flexible and can be applied to many projects, whether you are a beginner, a tinkerer, or a hardcore enthusiast there‚Äôs bound to be a project for you. I am sure that I didn‚Äôt cover all of the projects you can do with a ZimaBoard and if I missed one let me know what you‚Äôd use it for in the comments below. Well, I learned a lot about ZimaBoards, lots of cool projects, and I hope you learned something too. And remember if you found anything in this blog post helpful, don‚Äôt forget to share!You can get an idea of how small the ZimaBoard really is next to this AAA battery!Join the conversationI&#39;ve had a ton of fun setting up and configuring a ZimaBoard and CasaOS over the last few weeks! I decided to walk through over 20 other home server projects you can start today. Check it out!üëâhttps://t.co/htIeMyXC8W pic.twitter.com/G7PAImfWya&mdash; Techno Tim (@TechnoTimLive) July 14, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Automated Watering My Lawn & Garden!", "url": "/posts/automate-lawn-garden/", "categories": "vlog", "tags": "home-assistant, homekit, lawn, weather, gardening", "date": "2023-07-04 08:00:00 -0500", "snippet": "This week I finally decided to automate the watering of my lawn and garden without irrigation, here‚Äôs how‚Ä¶üì∫ Watch VideoAutomation Without IrrigationSince I don‚Äôt have irrigation, I have to use hose...", "content": "This week I finally decided to automate the watering of my lawn and garden without irrigation, here‚Äôs how‚Ä¶üì∫ Watch VideoAutomation Without IrrigationSince I don‚Äôt have irrigation, I have to use hoses, but that‚Äôs OK because I picked up these hose faucet timers. They‚Äôre great because you can hook them up to any hose faucet. I picked up this manifold and connected 4 of these faucet timers, one for each zone. As you can see I also split one zone into 2, we‚Äôll talk about that in a sec. I can program each zone in the b-hyve app app to turn on each individually, and these sprinklers have a ton of watering options. The app also takes into consideration the rainfall so you‚Äôre not wasting water. And it‚Äôs not just for lawns, I also automated watering my garden giving it just the right amount of water each day. These soakers, along with a pressure reducer, help deliver water exactly where I want it. The soakers also works great for flower boxes that doesn‚Äôt receive any rain. If you‚Äôre a geek like me, you can even connect this to Home Assistant or even HomeKit.If you‚Äôre looking for the Home Assistant plugin I used to managed these timers, you can find it here Don‚Äôt forget to ‚≠ê the repo!Here‚Äôs the 4 port manifold I used to create 4 zonesHere are the 4 faucet timers I used to create 4 separate zones!Here are the sprinklers in action! Highly recommend these because they have a ton of watering options and they are silentWhere to Buy Orbit B-hyve Smart Hose Faucet Timer with Hub - https://amzn.to/3O2BqxW Orbit B-hyve Smart Hose Faucet Timer - https://amzn.to/43e0A0y Orbit Hose Faucet Manifold - https://amzn.to/3XGUbtJ Orbit Gear Drive Sprinkler - https://amzn.to/3JIMgqf Flat Soaker Hose - https://amzn.to/3PLtLFh Hose Bibb Connector Backflow Preventer Vacuum Breaker - https://amzn.to/3JLeuR8 Drip Irrigation 25 PSI Pressure Regulator - https://amzn.to/44suD5V Garden Hose Connector 90 Degree Brass Garden Hose Elbow - https://amzn.to/3NXc2JN Garden Hose Splitter - https://amzn.to/3raafrP Plumbers Tape - https://amzn.to/3pHEdTw Black Heavy Duty Cold Water Garden Hose - https://amzn.to/3pHI6I9See the whole kit here! - https://kit.co/TechnoTim/automated-lawn-and-garden-care(Affiliate links are included in this description. I may receive a small commission at no cost to you.)Join the conversationI Automated Watering my Lawn &amp; Garden! Have I gone too far with automation???https://t.co/HcPdCNKXbJ&mdash; Techno Tim (@TechnoTimLive) July 3, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Renovate - Your Update Automation Bot for Kubernetes and More!", "url": "/posts/renovate-bot-kubernetes/", "categories": "kubernetes", "tags": "renovate, kubernetes, docker, github, gitlab, gitops, devops, automation", "date": "2023-07-01 08:00:00 -0500", "snippet": "Keeping track of container image updates is hard. I started using Renovate Bot to to track these for me and I now get pull requests from a bot for my Docker and Kubernetes container images. It‚Äôs a ...", "content": "Keeping track of container image updates is hard. I started using Renovate Bot to to track these for me and I now get pull requests from a bot for my Docker and Kubernetes container images. It‚Äôs a game changer.A HUGE thanks to Datree for sponsoring this video!Secure Your Kubernetes, Prevent Misconfigurationshttps://www.datree.ioüì∫ Watch VideoWhy use Renovate?How much time do you spend looking for updated container images for services you have running in your Kubernetes cluster? 5 minutes, 5 hours? Never? I used to spend hours a week checking for new container images, reading up on the changes, and not really knowing if it was going to break my cluster or not. It was super tedious doing this to the point where I almost stopped doing it. That‚Äôs when I discovered Renovate Bot. Renovate is a dependency update automation tool that scans your software, discovers dependencies, and checks to see if an update exists, and if there is one, it will automatically help you out by submitting a pull request on your code base. It works out of the box and supports a wide variety of languages and technologies, it‚Äôs highly configurable putting you in control of what gets updated and when, and it‚Äôs pretty smart too and can automatically detect dependencies and suggest ideas for improvement.Here‚Äôs the cool thing about it too, not only can it scan for all sorts of dependencies, it also gives you your choice of how you want to run it. Want to run it locally as a node module or from a CLI? Or in a Docker container? Or ever self host it in your Kubernetes cluster? No problem! Want to scan dependencies in GitHub, GitLab, AWS CodeCommit or other Git providers? No problem at all. One of the great things about Renovate is that because it‚Äôs open source, it puts you in control of how you want to run it, where you want to run it, and when you want to run it. So today we‚Äôll be setting up Renovate bot to give us a helping hand with our Kubernetes resources. We‚Äôll create a GitHub repo to house our Kubernetes deployments, add the Renovate bot to our repo, and then let it help us out by opening pull requests when it sees updates to any of the container images we‚Äôre using. Yeah‚Ä¶ I feel like I just hired a devops engineer for free.Renovate works with many different source control providers like GitHub, GitLab, CodeCommit, and many others. You also have your choice of how you want to manage Renovate, meaning you can self-host it with Docker or Kubernetes, or run it as a GitHub app for free that‚Äôs hosted by Renovate‚Äôs parent company Mend.Create GitHub RepoWe‚Äôre going to go with GitHub and the GitHub app because it‚Äôs super simple to set up. First we need to create a github repo, this is as simple as going to GitHub and well, creating a new repo. After naming your repo you‚Äôll want to choose whether to make this public or private. The choice is up to you and Renovate will work either way. Note: if you want to see the repo I created in this post and video, you can check it out here technotim-k8s-renovateCreate a repo in GitHubAfter creating the repo you‚Äôll want to clone it to your machine. Now, I know that it‚Äôs empty, but we‚Äôll be adding some things here shortly. After cloning it, I am going to open it up with a VSCode but any editor will do.Now that our repo is cloned, we‚Äôre going to add some Kubernetes resources so that Renovate can start analyzing our resources for updates. We‚Äôre going to create a simple nginx deployment and service.---apiVersion: apps/v1kind: Deploymentmetadata: name: nginxspec: selector: matchLabels: app: nginx replicas: 3 template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginx:1.24-alpine ports: - containerPort: 80---apiVersion: v1kind: Servicemetadata: name: nginxspec: selector: app: nginx ports: - port: 80 targetPort: 80 type: LoadBalancerFor this deployment we‚Äôre going to use an older nginx container image tag because we want to see the Renovate bot actually work, so we‚Äôll go out to Docker Hub and choose an older tag. We‚Äôll then put that image tag in our deployment. Now that we have this manifest, let‚Äôs commit this code and push it up.Add Renovate BotNow that we have a simple Kubernetes deployment committed to our repo, we should add the Renovate bot to start analyzing our code. We can do this by going out to GitHub, finding the Renovate app, and installing it in our repo. You need to authorize this app for your repo or org. Once you authorize this app and choose which repos it has access to you are all set!If you ever decide to change your mind and remove this app for your repo, you can go to the repo settings and remove this app at any time.Once the Renovate bot is authorized and installed, it won‚Äôt actually do anything until you merge a Pull Request that will be opened by the bot on your repo! This pull request is a special ‚Äúonboarding‚Äù pull request that will show you what the bot has detected along with adding a default config for the bot. Renovate won‚Äôt take any further actions until you accept and merge this pull request. Once you have reviewed this PR, you can merge it in and it will activate the bot on your repo.Add the Renovate app to your repoOur First (Real) Pull RequestAfter merging the onboarding PR, we can go and take a look at the logs for the bot on Mend‚Äôs bot page. Here we can see that it is trying to auto detect all of the various dependencies that the bot supports. It‚Äôs checking for ansible, docker-compose, flux, gradle, helm, and many other dependencies. But it doesn‚Äôt know how to handle Kubernetes files out of the box because Kubernetes files don‚Äôt really have a naming convention because there really isn‚Äôt one. So we‚Äôll need to tell Renovate how to check for Kubernetes files in our config.Here you can see Renovate trying to scan our repo and automatically detect dependenciesSo we‚Äôll need to git pull to get latest and we should see our Renovate config file. We‚Äôll need to add the file match for Kubernetes files. You‚Äôll want to be sure that you use the right extension here, whether that be yml or yaml, both are acceptable but I typically use yml so that‚Äôs what I am going to use here.{ \"$schema\": \"https://docs.renovatebot.com/renovate-schema.json\", \"extends\": [ \"config:base\" ], \"kubernetes\": { \"fileMatch\": [\"\\\\.yml$\"] }}If you‚Äôre using FluxCD (as shown here) you also want add the flux extension and filematch. This will allow Renovate to scan your FluxCD manifests as well as creating Pull Requests for your Helm chart versions.{ \"$schema\": \"https://docs.renovatebot.com/renovate-schema.json\", \"extends\": [ \"config:base\" ], \"flux\": { \"fileMatch\": [\"\\\\.yml$\"] }, \"kubernetes\": { \"fileMatch\": [\"\\\\.yml$\"] }}Once we‚Äôve made that change to our config locally, we‚Äôll then commit that change and push it up.Once we push this change up and it scans our repo, we can see a new issue that was created! This is a special type of issue that Renovate creates for us and it is kind of like a dashboard for all of our dependencies.If we look at this issue, it‚Äôs telling us that it detected a new dependency that‚Äôs related to Kubernetes and that it detected not only our nginx tag but also our Kubernetes API version for the deployment. Super awesome. If you like you can choose to disable this dashboard issue in your config, but I would recommend keeping it.If we look at the logs again from Renovate, we can also see that it detected our nginx deployment and that it created a PR for us to review. Now for the actual PR. We should see a new PR that was opened from the Renovate bot!If we look at this PR we can see the proposed changes, it‚Äôs suggesting that we change our nginx container image from 1.24 to 1.25 which is the current latest tag. If we‚Äôre happy with the change we can merge it into our code with just a click.How to Handle ‚Äúlatest‚Äù tagNow our code base is up to date with the latest container image. What happens if a container you are using only has one tag, say like the ‚Äúlatest‚Äù tag? Well, let‚Äôs find out.Let‚Äôs say for instance we‚Äôre running Wordpress in our cluster, and we create a deployment.yml and in our deployment.yml we specify the ‚Äúlatest‚Äù tag vs. a versioned tag.---apiVersion: apps/v1kind: Deploymentmetadata: name: wordpressspec: selector: matchLabels: app: wordpress replicas: 1 template: metadata: labels: app: wordpress spec: containers: - name: wordpress image: wordpress:latest ports: - containerPort: 80---apiVersion: v1kind: Servicemetadata: name: wordpressspec: selector: app: wordpress ports: - port: 80 targetPort: 80 type: LoadBalancerAfter we commit and push this up, we can wait for Renovate to check our repository again for new dependencies, or we can manually trigger one by going back to the dependency dashboard issue and check this box to trigger it to run again.Now, if we look at the logs again we should see that it detected Wordpress, however it is unversioned. The latest tag is nondeterministic, meaning that it is not deterministic, or simply put, it can mean more than one thing. Renovate can‚Äôt use this because it can‚Äôt determine what the current version is and what the next possible version is. So, instead of pinning this version to ‚Äúlatest‚Äù, we can actually pin it to a digest.So if we look at the current latest tag in Docker Hub and inspect the digest, we can see it here.It‚Äôs this long string of characters:DIGEST:sha256:75ba772cce073ec2aa6cec95c5ca229dfde9029c49874350a971499d567adae7The digest is an immutable identifier for a container image and it is deterministic, meaning it can‚Äôt be changed and it only references one image. We can use that for Renovate. Once we have that, we can then pin our Wordpress container to this digest by using the like this, it‚Äôs:container image @ sha256 : digestNow if we make this change, commit this and push it up, we are now pinned to the digest which is also the same as ‚Äúlatest‚Äù. Again, if we want to force a scan instead of waiting, we can go back to this Dashboard issue, check the check box and then go look at the logs. We can now see that it detected our Wordpress container image along with the digest and it can now compare this to the current digest and open a PR if it needs to. If we take a look at the issue Dependency dashboard, we can now see that it detected Wordpress pinned to the digest. We won‚Äôt see a PR now because this digest is the latest digest, however if Wordpress releases a new container image with a new digest we will get a pull request to replace the digest. Awesome, so that solves the ‚Äúlatest‚Äù problem.Working with Helm ChartsSo that‚Äôs awesome, we have ways to work with Kubernetes manifests whether they are pinned to a versioned tag or an unversioned tag, but what about helm charts? Well, helm charts are just as easy. Let‚Äôs say we wanted to source control our mysql helm deployment, all we have to do is create a our helm values file and include the version as well as the repository.---image: repository: bitnamicharts/mysql version: 9.9.0persistence: enabled: true size: 10Giarchitecture: replicationauth: existingSecret: mysql-secretprimary: replicaCount: 1If you don‚Äôt specify the repository it will default to Docker hub, but as you can see here I am getting this chart from Bitnami. After we commit and push this up, we should now see a new dependency type of helm and since it detected an update we should also see a pull request to update this file!updating helm charts with Renovate are just as easy!Wrapping UpSo now with Renovate bot we can keep track and upgrade our Kubernetes deployment and even helm charts but I bet you are wondering how you can deploy them? There are quite a few ways to deploy these resources using GitOps tools like Flux and ArgoCD, or even just a simple CI task that runs kubectl and or helm. I have a few videos on this topic. What about Docker deployments? Well if you‚Äôre interested in how to automate deployments with Docker and Renovate let me know in the comments below.Well, I learned a ton about Renovate Bot, how to add it to your Git Repository and how to automate Pull Requests when there are updates available, and I hope you learned something too! And remember if you found anything in this post helpful, don‚Äôt forget to share. Thanks for Reading!Join the conversationKeeping track of container image updates is hard. I started using Renovate Bot to to track these for me and I now get pull requests from a bot for my Docker and Kubernetes container images. Automation is awesome. It&#39;s a game changer. Check it out!üëâhttps://t.co/2ku5EayOIO pic.twitter.com/uLF1PC7Swi&mdash; Techno Tim (@TechnoTimLive) July 1, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Upgrade Proxmox 7 to 8", "url": "/posts/upgrade-proxmox-to-8/", "categories": "proxmox", "tags": "homelab, proxmox, debian", "date": "2023-06-24 10:00:00 -0500", "snippet": "Proxmox 8.0 has been released (June, 22, 2023) and includes several new features and a Debian version upgrade. Among the changes are: Debian 12 ‚ÄúBookworm‚Äù, but using a newer Linux kernel 6.2 QEMU...", "content": "Proxmox 8.0 has been released (June, 22, 2023) and includes several new features and a Debian version upgrade. Among the changes are: Debian 12 ‚ÄúBookworm‚Äù, but using a newer Linux kernel 6.2 QEMU 8.0.2, LXC 5.0.2, ZFS 2.1.12 Optional Text mode installer (TUI) New default CPU type x86-64-v2-AES for VMs Ceph Quincy 17.2.6 and a new, stable Ceph Enterprise repository Authentication realm sync jobs ACL for network resources Resource mappings between PCI(e) or USB devices and nodes in a cluster and more‚Ä¶.Many have been asking how to upgrade, so I decided to put together an easy-to-follow post to get your Proxmox server upgraded to 8!Preparing the Upgrade to Proxmox 8This might go without saying, but you‚Äôll want to be sure you back up your Proxmox server‚Äôs configs as well as any virtual machines running on thi server. After you‚Äôve done that, you‚Äôll need to check to be sure you are running at least 7.4.15 or newer (If you need to upgrade from 6 to 7, see my post on how to do this). If you aren‚Äôt sure which version you are running, you can run this to check:pveversionThis should output something similar to:pve-manager/7.4-15/a5d2a31e (running kernel: 5.15.108-1-pve)Next we‚Äôll want to run an upgrade script to check to if there are any potential issues during the upgrade process. Don‚Äôt worry, this does not execute anything other than checks and is safe to run multiple times.You can run it by executing:pve7to8You can also run it with all checks enabled by executing: pve7to8 --fullYou should see something similar to the following in the output:‚ûú ~ pve7to8 --full= CHECKING VERSION INFORMATION FOR PVE PACKAGES =Checking for package updates..PASS: all packages up-to-dateChecking proxmox-ve package version..PASS: proxmox-ve package has version &gt;= 7.4-1Checking running kernel version..PASS: running kernel '5.15.108-1-pve' is considered suitable for upgrade.= CHECKING CLUSTER HEALTH/SETTINGS =PASS: systemd unit 'pve-cluster.service' is in state 'active'PASS: systemd unit 'corosync.service' is in state 'active'PASS: Cluster Filesystem is quorate.Analzying quorum settings and state..INFO: configured votes - nodes: 3INFO: configured votes - qdevice: 0INFO: current expected votes: 3INFO: current total votes: 3Checking nodelist entries..PASS: nodelist settings OKChecking totem settings..PASS: totem settings OKINFO: run 'pvecm status' to get detailed cluster status..= CHECKING HYPER-CONVERGED CEPH STATUS =SKIP: no hyper-converged ceph setup detected!= CHECKING CONFIGURED STORAGES =PASS: storage 'backups' enabled and active.PASS: storage 'fast10' enabled and active.PASS: storage 'local' enabled and active.INFO: Checking storage content type configuration..PASS: no storage content problems foundPASS: no storage re-uses a directory for multiple content types.= MISCELLANEOUS CHECKS =INFO: Checking common daemon services..PASS: systemd unit 'pveproxy.service' is in state 'active'PASS: systemd unit 'pvedaemon.service' is in state 'active'PASS: systemd unit 'pvescheduler.service' is in state 'active'PASS: systemd unit 'pvestatd.service' is in state 'active'INFO: Checking for supported &amp; active NTP service..WARN: systemd-timesyncd is not the best choice for time-keeping on servers, due to only applying updates on boot. While not necessary for the upgrade it's recommended to use one of: * chrony (Default in new Proxmox VE installations) * ntpsec * openntpdINFO: Checking for running guests..WARN: 6 running guest(s) detected - consider migrating or stopping them.INFO: Checking if the local node's hostname 'draco' is resolvable..INFO: Checking if resolved IP is configured on local node..PASS: Resolved node IP '192.168.0.11' configured and active on single interface.INFO: Check node certificate's RSA key sizePASS: Certificate 'pve-root-ca.pem' passed Debian Busters (and newer) security level for TLS connections (4096 &gt;= 2048)PASS: Certificate 'pve-ssl.pem' passed Debian Busters (and newer) security level for TLS connections (2048 &gt;= 2048)INFO: Checking backup retention settings..PASS: no backup retention problems found.INFO: checking CIFS credential location..PASS: no CIFS credentials at outdated location found.INFO: Checking permission system changes..INFO: Checking custom role IDs for clashes with new 'PVE' namespace..PASS: no custom roles defined, so no clash with 'PVE' role ID namespace enforced in Proxmox VE 8INFO: Checking if LXCFS is running with FUSE3 library, if already upgraded..SKIP: not yet upgraded, no need to check the FUSE library version LXCFS usesINFO: Checking node and guest description/note length..PASS: All node config descriptions fit in the new limit of 64 KiBPASS: All guest config descriptions fit in the new limit of 8 KiBINFO: Checking container configs for deprecated lxc.cgroup entriesPASS: No legacy 'lxc.cgroup' keys found.INFO: Checking if the suite for the Debian security repository is correct..INFO: Checking for existence of NVIDIA vGPU Manager..PASS: No NVIDIA vGPU Service found.INFO: Checking bootloader configuration...SKIP: not yet upgraded, no need to check the presence of systemd-bootSKIP: No containers on node detected.= SUMMARY =TOTAL: 33PASSED: 27SKIPPED: 4WARNINGS: 2FAILURES: 0ATTENTION: Please check the output for detailed information!As you can see there are a few warnings but nothing failing. The warnings I have listed are ones related to time packages (which I am going to ignore) and one related to machines still running. To resolve the second warning I will shutdown all the machines before I upgrade.Upgrade APT PackagesWe‚Äôll want to be sure that we‚Äôve applied all updates to our current installation before upgrading to 8. You can do this by running:apt updateapt dist-upgradeIf there are updates, I recommend applying them all, rebooting, and upgrading again if needed. Repeat this until there aren‚Äôt any up updates to apply.‚ûú ~ apt updateHit:1 http://security.debian.org bullseye-security InReleaseHit:2 http://download.proxmox.com/debian/pve bullseye InReleaseHit:3 http://ftp.us.debian.org/debian bullseye InReleaseHit:4 http://ftp.us.debian.org/debian bullseye-updates InReleaseReading package lists... DoneBuilding dependency tree... DoneReading state information... DoneAll packages are up to date.‚ûú ~ apt dist-upgradeReading package lists... DoneBuilding dependency tree... DoneReading state information... DoneCalculating upgrade... Done0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.Updating APT RepositoriesWell need to update our Debian and Proxmox apt repositories to Bookworm:sed -i 's/bullseye/bookworm/g' /etc/apt/sources.listIf you‚Äôre also using the ‚Äúno-subscription‚Äù repository, you‚Äôll also want to update those too:sed -i -e 's/bullseye/bookworm/g' /etc/apt/sources.list.d/pve-install-repo.listMine is actually at /etc/apt/sources.list.d/pve-no-enterprise.list so I will run instead:sed -i -e 's/bullseye/bookworm/g' /etc/apt/sources.list.d/pve-no-enterprise.listYou can verify these files by checking to be sure they were updated with bookworm:cat /etc/apt/sources.listcat /etc/apt/sources.list.d/pve-install-repo.listor for me personally:cat /etc/apt/sources.list.d/pve-no-enterprise.listYou should see something like this:deb http://download.proxmox.com/debian/pve bookworm pve-no-subscriptionRemember, you are just verifying the sed replaced bullseye with bookworm in each file.Upgrading CephIf you‚Äôre running ceph you‚Äôll want to check the Proxmox 7 to 8 Upgrade Wiki for a few additional steps. I am not running ceph so I will skip this part.Upgrade the system to Debian Bookworm and Proxmox VE 8.0Now all that‚Äôs left is updating the system! If you‚Äôve made it this far it‚Äôs now time to upgrade! I would recommend stopping or migrating any virtual machines and LXC containers before proceeding.apt updateapt dist-upgradeThis step may take some time depending on your internet speed and server resources.The upgrade might ask you to approve changes to configurations files. I am going to defer to the Proxmox documentation for this step, which is shown below: It‚Äôs suggested to check the difference for each file in question and choose the answer accordingly to what‚Äôs most appropriate for your setup.Common configuration files with changes, and the recommended choices are: /etc/issue -&gt; Proxmox VE will auto-generate this file on boot, and it has only cosmetic effects on the login console. Using the default ‚ÄúNo‚Äù (keep your currently-installed version) is safe here. /etc/lvm/lvm.conf -&gt; Changes relevant for Proxmox VE will be updated, and a newer config version might be useful. If you did not make extra changes yourself and are unsure it‚Äôs suggested to choose ‚ÄúYes‚Äù (install the package maintainer‚Äôs version) here. /etc/default/grub -&gt; Here you may want to take special care, as this is normally only asked for if you changed it manually, e.g., for adding some kernel command line option. It‚Äôs recommended to check the difference for any relevant change, note that changes in comments (lines starting with #) are not relevant. If unsure, we suggested to selected ‚ÄúNo‚Äù (keep your currently-installed version) Verifying the UpgradeAfter upgrading all packages you can verify the upgrade by running:pve7to8If all went well, you should see everything pass (or with minimal warnings).You can now reboot your system.After rebooting and logging into the system for the first time, you‚Äôll want to clear your browser‚Äôs cache for pve web, or just hard reload: Windows (CTRL + SHIFT + R) macOS (‚åò + Alt + R)If you have more servers in your cluster, repeat this for each server!Enjoy Proxmox 8!Check to be sure you see Proxmox 8 here!Join the conversationIf you were looking to upgrade to Proxmox 8 today, I wrote a quick guide to help! I&#39;ve already tested it on my production cluster and it works great!https://t.co/NFqv0XXyWB&mdash; Techno Tim (@TechnoTimLive) June 25, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "100 Days of HomeLab - 1 Year Later", "url": "/posts/100-days-of-homelab-1-year-later/", "categories": "homelab", "tags": "homelab", "date": "2023-06-20 10:00:00 -0500", "snippet": "A year ago I started a challenge that encouraged everyone to join the #100DaysOfHomeLab challenge, a challenge designed to help improve your skills in IT. This is similar to any of the ‚Äú100 Days‚Äù c...", "content": "A year ago I started a challenge that encouraged everyone to join the #100DaysOfHomeLab challenge, a challenge designed to help improve your skills in IT. This is similar to any of the ‚Äú100 Days‚Äù challenges - pick a topic, stick with it for 100 days, and form a habit. Some of you might be asking what a ‚ÄúHomeLab‚Äù is, and I think in it‚Äôs simplest terms it‚Äôs a ‚Äúlab environment‚Äù mostly at home. Think of this as a test environment to learn about technology without the fear of breaking anything. If you‚Äôd like to learn more about HomeLabs and how to get started, I summarized it in a video.After creating the challenge, I had lots of folks join in on Twitter, Mastodon, YouTube, Instagram and many other social networks using the hashtag #100DaysOfHomeLab, and it‚Äôs still going today!365 Days of HomeLabI ended up sticking with it, posting on socials (when I remembered), and took it all the way to 1 year! While some posts seemed redundant and repetitive, I kept on building, breaking, learning, and posting. Once I hit 100 Days, I decided to see how long I could go. 100 days turned into 200 days, and 200 days turned into 300‚Ä¶ and today I hit 365 days. Looking back at my very first tweet, it seems I missed a few days of sharing, or I am really bad at math. If you can spot where I missed or messed up, let me me know in the comments below! üòÄOK, my turn üòÄDay 1 #100DaysOfHomeLab Since Day 0 was spent launching the video, planning, connecting with people, and celebrating 100k - today will be spent:Operationalizing the self-hosted website &amp; Bot pic.twitter.com/5EObleZiAV&mdash; Techno Tim (@TechnoTimLive) June 12, 2022So what did you learn?Over the last year I learned so much about HomeLabbing, but specifically Docker, Kubernetes, networking, ZFS, GitOps, and many other related technologies. You can see all of my 100 Days of HomeLab tweets here however I will summarize some of the topics.Bots &amp; WebsiteI started out by creating a Twitter bot that would retweet everyone who was joining the challenge. I felt like this was important to build and grow a community around HomeLab and a simple way to bringing people together. This is a self-hosted bot that I wrote myself, and even open sourced the code!I also decided to create a 100 Days of HomeLab website so people could learn more about the challenge and even showcase some of the creators I worked with to make this possible. Huge thanks to all creators, featured on this page or not, who joined in on the fun!What not to doAnother bucket of learnings were what not to do. This can be seen as mistakes but I looked at them as opportunities. These were things like: Backup everything you can‚Äôt recreate (even if you think you don‚Äôt need it) Test your backups Don‚Äôt run beta firmware in production Don‚Äôt run early access firmware in production (I had to list this twice in case I think about it again) Don‚Äôt deploy and walk away (for hours) Try not to test in production (although sometimes there isn‚Äôt any way around it) Don‚Äôt over buy or over build hardware, unless you think you can repurpose or sell it easily in the future You may not always need the fastest connection like 10G (things will just take a little longer) Don‚Äôt delete CRDs in k8s unless you are certain you don‚Äôt need any of the resourcesWhat to doIt wasn‚Äôt all bad, I also picked up some good habits and learned what I should continue doing in the future: Build a small test environment, even if it‚Äôs hard Create good documentation and write it as if someone other than yourself will have to follow the steps Write tests, when you can, even even when you think you can‚Äôt Have just enough hardware, repurpose what you can A little battery backup goes a long way Use DNS when possible (even if it‚Äôs painful) Use certificates, always Use strong randomized passwords Set up monitoring &amp; alerting, even if it‚Äôs just to yourself! Keep it simple. Seems like an oxymoron for HomeLab, but the simpler you keep it, the easier it will be to supportHardwareI made lots of changes to my HomeLab over the past year, from a pile of machines on a shelf, to an open post rack, to a fully enclosed server rack in a room I converted to a server room. With this came new challenges like networking, power, and even RGB. I was sent a Storinator from 45 Drives and really expanded my storage while deprecating my old Disk Shelf. I also picked up a handful of low power devices and built a small low power cluster of Intel NUCs and rack mounted them in my server rack!AutomationI also got to dive into Ansible deeper than ever before! Ansible is a powerful tool for automating things, especially infrastructure. I automated things like updates, configuration of my machines, password changes, and even building a fully HA Kubernetes cluster with k3s. The time spent learning this tool has already paid back in dividends compared to the time I would put into doing these task manually or even worse, pile up tech debt because I would skip them.I also picked up Terraform too! Terraform is one of those things you may not ever learn until you need to. It‚Äôs definitely been eye opening building up new infrastructure with Terraform. Every time I see a form or a UI to create some sort of Infra, I automatically think about how I can automate this with Terraform‚Ä¶ but thinking and doing are two different things and I need to start doing this more often. I‚Äôve already figured out how to apply Terraform to Cloudflare DNS and will be applying to more systems in the future.NetworkingOnce of the biggest changes to networking wasn‚Äôt new hardware or network speed, but VLANs. I implemented VLANs here to keep all of my network traffic segmented according to the roles these devices fill. For instance I created an IoT vlan for all of my IoT devices, a Camera VLAN just for secure video devices, and Server VLAN for my servers that are used for public facing services. This helps ensure that not only am I not mixing traffic, but also minimizing the blast radius if one of my devices were to become compromised. I talked about this and more security recommendations in a video here. Highly recommended if you are going to self-host anything.KubernetesThe next big theme is Kubernetes and has been a theme on my channel almost since the beginning. I now run 3 HA Kubernetes clusters at home. That might sound crazy, but it‚Äôs true. It‚Äôs taught me so much about how to build, support, and maintain one of the most popular technologies in the world. It‚Äôs been challenging but rewarding at the same time. I ended up going all in and migrating all of my Docker only hosts to Kubernetes. I no longer have single Docker hosts (pets) and now have more Kubernetes nodes (cattle). Once I moved everything to Kubernetes, I quickly learned that I needed a better way to manage it than just a UI or applying manifests from the CLI.(GitOps has entered the chat)GitOpsGit Ops, such a such a huge term and people have varying opinions on where it starts and where it ends - but it‚Äôs the idea that Git is the source of truth to deliver infrastructure as code. What does that mean for me and in my HomeLab? For me it means that my Kubernetes cluster (and custom code) is source controlled in Git and the only way to get those changes applied is through CI. This was one of the most rewarding things I have learned about during my 100 Days of HomeLab. All 3 of my Kubernetes clusters are defined in code (YAML) in a Git repository and when I need to make changes I just commit them to my repo and push them up and FLUX takes care of the rest. It has not only taught me how to deliver infrastructure as code but also taught me about secret management with SOPS which is such a valuable lesson, Kubernetes or not. I will be looking to expand into more IaC this year and beyond because this is truly the future of infrastructure.CommunityLast but definitely not least is community. Doing this challenge has taught me that there are so many other people out there just like me, trying to build/break/fix/learn with a lab environment at home. There are countless times where I have been inspired from others or even found better, more efficient way to accomplish things by interacting with the HomeLab community. I have even picked up new tech all thanks to you. I have met lots of people on socials and will continue to follow your journey!So, what are you waiting for? Want to join the 100 Days of HomeLab Challenge? You‚Äôre just one click away!Join the conversationDay 365 #100daysofhomelab One year. It&#39;s been a year since I have started the 100 days of #homelab and I&#39;ve learned a lot. Here are my learnings in a thread üßµ&mdash; Techno Tim (@TechnoTimLive) June 20, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My Mobile HomeLab! (Travel Router with Proxmox, Docker, and OpenWRT)", "url": "/posts/mobile-homelab/", "categories": "homelab", "tags": "homelab, travel, hardware, proxmox, docker, portainer, openwrt", "date": "2023-06-18 10:00:00 -0500", "snippet": "This has been months in the making, my new Mobile HomeLab! It‚Äôs a device that I can take with me to provide secure internet access for all of my devices. Not only can it provide secure access, but ...", "content": "This has been months in the making, my new Mobile HomeLab! It‚Äôs a device that I can take with me to provide secure internet access for all of my devices. Not only can it provide secure access, but it can also let me bring apps and services with me when I travel. It‚Äôs built on Proxmox, OpenWRT, Pi-hole, and many other services. I‚Äôm taking this with me everywhere!A huge thank you to Protectli for sending this device!üì∫ Watch VideoWhere to Buy Protectli VP2420 - https://amzn.to/443wb68 Crucial 16 GB RAM - https://amzn.to/3qOMK7F Intel Wi-Fi 6 (alternate wifi option) - https://amzn.to/3PfuRZP Samsung 1 TB SSD - https://amzn.to/3Nj7Mme USB WiFI NIC (ralink chipset) - https://amzn.to/3NyP8an Wyze Camera - https://amzn.to/467JVi3 Timbuk2 Backpack - https://amzn.to/3p8L9ZF Slim Cat6a Cables - https://amzn.to/3qOCHPT Anker Charging Station - https://amzn.to/3qOk66r Anker USB C Cables - https://amzn.to/3qOCXhP Anker Surge Protector - https://amzn.to/3Jlq8ll Anker USB Hub - https://amzn.to/42N15yF WD 5 TB USB Hard Drive - https://amzn.to/42Oa3f4 Protectli WiFi Kit - https://protectli.com/product/m2-wifi/ Protectli 4G LTE Modem - https://protectli.com/product/mdg200-m2/See the whole kit here! - https://kit.co/TechnoTim/mobile-homelab(Affiliate links are included in this description. I may receive a small commission at no cost to you.)My Mobile HomeLabThis is my mobile HomeLab, or is it my mobile home lab, or just mobile lab, or a travel router ++, or ultimate mobile HomeLab, anyway, It‚Äôs a computer that I bring with me that serves as a network firewall, an access point, and a platform to run apps, services, and virtual machines. I guess it‚Äôs a cross between Wendell‚Äôs forbidden router and Network Chuck‚Äôs travel router. It‚Äôs something that I am going to take with me every time I travel and will provide internet access whether that be from an existing network, or one I connect to over my carrier‚Äôs mobile data network.A Mobile HomeLab device I can take with me that also provider network access!This is something that I have wanted to create for quite some time because when traveling I bring with me a few pieces of technology to make my life a little easier and keep my nerd brain fed. Some of these are common like a laptop and a tablet, but others aren‚Äôt. You see, when I travel I like to take a router with me to keep all of my devices connected securely, rather than connecting all of my devices to say the Air BnB‚Äôs WiFi. Bringing my own router assures me that my laptop, tablet, phone, pi, even security camera are connected to my router and that no other devices can spy on me.I‚Äôve carried an old Cisco Linksys router with me every time I travel, and it provides a secure private network that only my devices can connect to. I can even take this a step further and use a VPN to connect all of my devices securely to my home network, where I get the same protection as I do when I am physically at home. This little router has worked great for quite some time, but I also started bringing a Raspberry Pi to provide a few more services on my local network. That‚Äôs around the time when I started thinking about how to combine all of the functionality into one package. Protectli reached out to me and said they wanted to give one of their devices a test run on my next trip and see if this combination of form factor and hardware would accomplish everything I needed out of my new ‚Äúmobile homelab, forbidden travel router, plus plus, ultimate mobile homelab - thingie‚Äù?What I usually carry with meThe HardwareThis is a Protectli Vault VP2420 which, if you couldn‚Äôt tell by the huge heatsink on top, it‚Äôs fanless and silent. This model has an intel Celeron J6412, but it‚Äôs not like the Celerons of the past, this Celeron has 4 cores and 4 threads and has a base clock speed of 2 GHz and can burst to 2.6 GHz. What makes this CPU great is that it is super low power but yet still has features like AES-NI and VT-x and VT-d which makes it great for a hypervisor like VMWare or Proxmox. It also has QuickSync which can be used for video transcoding too. I opted for 32 GB of DDR-4 RAM , the most you can get on this device.This model comes with (4) 2.5 Gb ethernet ports for lots of hard wired connectivity options. But even more interesting than the wired options, are the wireless options. You probably noticed all of the antennas sticking out, now one set is pretty obvious and that‚Äôs one for WiFi. It‚Äôs a Protectli WiFi module that supports 802.11 ac/a/b/g/n and fits into the m.2 slot. The other antennas are actually for a 4g LTE modem that works most carriers. It even has a slot on the outside of the case that you can insert your SIM card into without opening the device up.As far as storage goes it has an internal 8GB eMMC module that I really won‚Äôt be using, and I opted for a 1 TB Samsung SSD. I would like to have another option for another drive, but I figure this was good enough for what I am going to use it for.As far as IO goes we have an HDMI port, 2 USB 3.0 ports, a Display Port, USB C, and a micro USB port for console access. It‚Äôs powered by this little brick and has a barrel plug for power. This is quite a capable machine for something that‚Äôs smaller than a tablet. All in all, it‚Äôs a solid fanless, quiet, yet power build.My Protectli Vault VP2420 with 2.5 Gb/s networkingThe BuildSo now that I have all of this put together (it came assembled) how was I going to build the ultimate mobile HomeLab?My original thought was to just run pfsense or OPNsense on this machine and use it as a router however, FreeBSD, the operating system that these are built on do not have drivers for this wireless NIC. That shut that down really quick. Then I noticed that Protectli have documentation on their site on how to set up this device with OpenWRT. That‚Äôs when I remembered Network Chuck‚Äôs video and decided that if he got it working, I could too. Well, not really because he‚Äôs like a legit networking person and I am just a hack, but anyway I thought I would give it a shot.I should have installed OpenWRT on Proxmox to begin with‚Ä¶So I installed OpenWRT. The process was a little bit complicated but I had some help from Stuart from the Protectli team and they updated their docs with the challenges we worked through. After getting it running, I quickly realized that I should have just used a hypervisor and created it as an OpenWRT virtual machine. This would allow me to make changes and back them up as I go. It would also allow me to install other VMs and containers that I can use while on the go.ProxmoxSo that‚Äôs what I did, I installed Proxmox on this machine since it supports virtualization and hardware passthrough. At first, I wanted to create an LXC container for OpenWRT to use less resources, however, it does not support hardware passthrough like virtualization does for network cards so I created a simple virtual machine. I found this great guide on creating an OpenWRT VM on Proxmox!The steps to create a VM were pretty straight forward and I followed each step on that checklist carefully.Once I had the virtual machine configured, I then passed through the devices that I need to run a router along with an access point. I passed through a NIC for WAN access, the wireless adapter for the access point, a USB wireless NIC for additional WAN access, and the USB modem for, well, WAN access for LTE. I gave it 2GB of RAM and 2 CPU cores, and the disk of only 512 MB. This is how big the disk image is. Now this might not seem like much but this is much more than I will ever need, considering this router that also runs a version of OpenWRT only uses 32MB of RAM and 8 MB of disk space.OpenWRT running as a VM on ProxmoxOpenWRTOnce the machine was up and running, I made some changes to the NIC and then went to the OpenWRT admin interface. The interface is pretty basic although it does come with dark mode, so that‚Äôs a plus for me. They also support a few different themes however I decided to stick with the default bootstrap dark. I configured a few initial settings like NTP, my router‚Äôd name, and then headed over to the software section. Here I can install some additional packages. I installed a few optional packages like nano, zsh, usbutils, and openssh sftp server, and htop for better monitoring. After doing this, it was now time to configure the network.NIC (LAN)First I wanted to be sure I could connect to this device via LAN. This was as simple as just configuring the virtual machine to connect to the bridge on Proxmox. This means when I plug in a network adapter to a port dedicated as LAN, I can connect to anything running on the Proxmox bridge. This will be the local area network for all of my devices on this subnet. If you want, you can configure DHCP on this OpenWRT interface but I am going to do that later with Pi-hole or even pfSense later.NIC (WAN)The next NIC I wanted to configure was the WAN NIC. This will be the NIC that is passed through to this virtual machine and will give it internet access if you have physical access to the modem or another switch. It‚Äôs as simple as assigning this NIC to WAN, and turning on DHCP. Physically plugging an ethernet cable is my preferred method of connecting this router to an upstream network like an Air BnB modem or any other network you don‚Äôt trust.After this step, the LAN and WAN should work by physically connectingWireless NIC (Access Point)Now that I have LAN and WAN NICs configured, I can plug in my laptop and connect to this network. This works fine but really we want to broadcast our own wireless SSID so all of our devices can connect to it. This is where we‚Äôll need to configure our Protectli wireless NIC. In order for this NIC to work, we‚Äôll need to install the drivers and a few packages on OpenWRT to enable the wireless access point feature and we can do this within the software section. You‚Äôll need to install a few packages and then overwrite a few files with ones from Protectli. They‚Äôve found that some of the packages that are available on OpenWRT aren‚Äôt compatible so they‚Äôve provided these files on their website along with instructions. Once that‚Äôs taken care of and we reboot we can now see this wireless section with our wireless NIC! Here we‚Äôll want to configure the wireless network we want to broadcast for our clients to connect to. You‚Äôll need to configure the SSID, security, and wireless mode.Now you should have a fully working router with LAN, WAN, and an access point!Pro tip, I found out that even though this is a dual band NIC, you cannot broadcast on both bands at the same time. So if you aren‚Äôt going to use 2.4 GHz you‚Äôre fine, you can set it to AC mode or N 5GHz, but if you are using any 2.4GHz devices you‚Äôll need to set the mode to the lowest common denominator of 2.4 GHz. Another thing you can do is configure a second NIC to broadcast on 2.4 GHz, but we‚Äôll talk about it a little bit later.Once you apply this, you should be able to see your new SSID and connect to OpenWRT! And if you have the WAN port connected to an upstream network, you should be able to use this as your router! But the fun doesn‚Äôt stop, there, not even close.USB Wireless NIC (Client / WAN / other)At this point you should be able to connect to your router and use the internet from the WAN port, but what if you don‚Äôt have access to the WAN port? This is where a second wireless network device comes into play. Let me be clear, this was the most complicated part of this whole project. OpenWRT supports very few USB wireless adapters. I tested 8 USB wireless network adapters before I finally found one that worked with OpenWRT. I tested name brands, no name brands, USB 2, USB 3, ones with odd antennas, and ones without external antennas at all. It turns out that most wireless USB adapters use a Realtek chipset and this does not play well with OpenWRT. It was hard to find one without a Realtek chip, but it turns out this tiny little no-name one works great and that‚Äôs because it‚Äôs based on a Ralink chipset, one that‚Äôs very hard to find.I tested 8 wireless USB NICs before finally finding one that works with OpenWRTSo you‚Äôll need to install a few more packages for driver support. I chose to install mt7601u-firmware` for this wireless USB NIC. After that you should see another NIC in the wireless section. This time we‚Äôre going to configure it as a client that connects to an existing wireless network, that way you don‚Äôt have to physically connect to the WAN port, we‚Äôll connect over wireless. We can do this by scanning and connecting to an existing wireless network, and after that you‚Äôll then have a completely functional router that can connect a wireless network and share it with all of your clients!I should mention that even though this works fine, this USB NIC only supports 2.4GHz / Wireless N. This is generally fast enough for the internet connection but just know that you are going to be limited by the speed of this NIC, which is around 150 Mb/s at most. Personally I would only use this option if you can‚Äôt physically connect your WAN port to your upstream router. As you can see, when I am connected to the WAN via this USB NIC, I can be a lot slower than when it is connected via ethernet cable.Now you should be able to connect your router to an upstream WiFi connection using this NIC!If you can physically connect to the WAN via ethernet, what I would do is disable this NIC or configure it to broadcast the same private network on 2.4Ghz this way you can set your primary NIC to use A/C/N 5 GHz. I had to do this to connect my Wyze cam since it only supports 2.4 GHz. Yes I take a Wyze cam with me when I travel so that I can keep an eye on the place when I leave and also keep an eye on my pups, Nano and Buddy,I bring a Wyze cam with me to keep an eye on the place!Now that I have this all working, I can now fire up my router and connect any of my devices to it and use my own secure wireless network.(Use my phone and connect )After running a speed test you can see I am getting anywhere from 180/200 Mbps which is pretty decent considering I have 500 up/down here at home. I‚Äôm sure I could squeeze out some more performance if I tweak some settings but this is great considering everything is running on stock settings.LTE ModemSo, not that I have OpenWRT working with an upstream router, what happens if I don‚Äôt have an upstream router at all? This is where the LTE modem that I mentioned earlier comes into play. This is great for times when you don‚Äôt have an internet provider where you are staying or if you decide to go and live the #vanlife.A tiny LTE modem inside!Installing the software on OpenWRt was pretty straightforward, again you install a few packages (kmod-usb-net-rndi, wwan, comgt-ncm) and then reboot. But before I rebooted I inserted this cheap testing SIM into my device. After rebooting, you‚Äôll then go to network interfaces and add the new interface which should be USB0. You‚Äôll want to set this as WAN as the firewall zone and then save and apply. You can then access the modem‚Äôs web GUI on a private IP address of 172.16.0 from a device connected to the LAN port. You should then see your device connected to your cellular provider and !viola! this connection can be shared with anyone connected to this device! Oh yeah, I did update the firmware too because I love updating firmware ü§∑If you use an LTE modem, you can now connect all if your devices to LTE data from your carrier!Pi-holeNow that I had OpenWRT working as an access point, a firewall, and a router that can connect to an upstream router via ethernet, wireless, or LTE, it was now time to focus on the ‚Äúhomelab‚Äù part of this device. Since I installed Proxmox on the host, I can now install anthony I want on this machine. The first thing I decided to install was a Pi-hole to keep every connected device safe and free of ads and tracking.Like all installations on Proxmox you have options of how you want to install things. I typically choose VMs but I wanted to keep this lean and mean, so I went with an LXC container. LXC containers are easy to manage and use less resources than a full VM. So I created an LXC container and set a hostname and password and uploaded my public ssh key. I chose the ubuntu template, then gave it 8 GB of disk space, 2 CPU cores, and 2 GB of RAM. For networking I connected it to the existing bridge, which is my LAN and gave it a static IP address.Once the LXC container was created, I updated it and installed Pi-hole. After installing I updated all of my ad lists. I also added about 5 millions sites to my block list that you can see here.Added Pi-hole to block all those ads and tracking on the go!I did end up enabling DHCP on Pi-hole just to see what it was all about. I usually let my router do this but for this travel router I wanted to have more control over blocking. I ended up disabling DHCP on OpenWRT and enabling it on Pi-hole.PortainerAwesome, so now I have Pi-hole with network wide ad blocking running, so what‚Äôs next? Well, I know I want to have docker as a platform for running applications on this mobile HomeLab device and portainer is the best way to manage them. I chose to create another LXC container based on Ubuntu and gave it a 60 GB hard drive, 4 CPU cores, and 16 GB of ram. I spun up the container and let it grab an IP, and then I reserved that IP inside of Pi-hole. Once the container was up and running, I updated Ubuntu and installed Portainer. Once Portainer was running I then installed a Watchtower to keep all of my containers up to date. I typically use GitOps to handle this in my home production cluster, but I don‚Äôt want to worry about updating containers while traveling. Installing Watchtower was easy, just copy and paste the docker compose and I was good to go.Installed Portainer to manage all of my Docker containersAppsSo now that I have Portainer installed, we can install any container we like to and take it with us. For instance, we could install the super popular Plex or Jellyfin and take our media library with us. This would allow any connected device to stream movies from this device down to theirs, without an internet connection The nice thing about this Intel CPU is that it has QuickSync so you can hardware transcode videos if you need to, making sure that streaming is smooth on any resolution. I bet you‚Äôre wondering about disk space? Well, if you really wanted to take more than 1 TB of media with you, you could simply connect and attach a USB hard drive with your media to this machine and mount the drive to your Plex or Jellyfin machine.Doing some local Plex transcoding while on the go!Also, it does stop there, we can now install any docker container or LXC container we like, or even a full blown Virtual Machine since we‚Äôre running Proxmox! If we really wanted to, we could now install pfsense or OPNSense as a virtual machine and use that as our router and disable all the routing features on OpenWRT, and only use that as an access point. Once you have pFSense or OPNSense running, you can then create a VPN connection back home to get the same protection you have at home. The possibilities are really endless. Want to install other containers, like LANcache, Netcloud, or even a local Minecraft server, no problem.You can even go as far as creating a VPN tunnel back home!And that‚Äôs the nice thing about a general purpose machine like this, you have unlimited possibilities. And using the Intel Celeron platform you get powerful hardware, at a fraction of the power consumption so you get the best of both worlds. A WiFi router and access point that connects all of your devices, internet or not, and lots of services that you can use while you are on the go. I‚Äôll be using this device full time when I travel so I will be sure to report back any modifications I make to this new ‚Äúmobile homelab, forbidden travel router, plus plus, ultimate mobile homelab - thingie‚ÄùJoin the conversationThis has been months in the making, my new Mobile HomeLab! It&#39;s a device that I can take with me to provide secure internet access for all of my devices. Check it out!üëâhttps://t.co/2F5gG5cZn2 pic.twitter.com/5zsXS4VG9X&mdash; Techno Tim (@TechnoTimLive) June 18, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Scrypted - Stream ANY Camera to ANY Home Hub", "url": "/posts/scrypted-home-hub/", "categories": "self-hosted", "tags": "scrypted, smart-home, iot, unifi, apple, google, amazon, alexa, home-assistant, home-security, open-source, homekit", "date": "2023-05-13 10:00:00 -0500", "snippet": "Meet Scrypted an Open Source app that will let you connect almost any camera to any home hub, certified or not! You can connect popular devices from UniFi, Amcrest, Hikvision, Nest &amp; Google, T...", "content": "Meet Scrypted an Open Source app that will let you connect almost any camera to any home hub, certified or not! You can connect popular devices from UniFi, Amcrest, Hikvision, Nest &amp; Google, Tuya, Reolink, and many others to your home hub of choice, whether that be Apple‚Äôs HomeKit, Google Home, Alexa, or even Home Assistant.This lets you choose and reuse your own devices and take advantage of the automation and integration you get with your Smart Home Hub.üì∫ Watch VideoWhere to Buy UniFi UDM SE - https://l.technotim.live/ubiquiti UniFi Cameras - https://l.technotim.live/ubiquiti Apple TV 4k - https://amzn.to/3M1ZFtz Apple iPad - https://amzn.to/3VX1k8z Echo Dot - https://amzn.to/44YmpTW Echo Show 5 - https://amzn.to/3MmFdoN Echo Show 15 - https://amzn.to/3Mo8ZJMSee the whole kit here! - https://kit.co/TechnoTim/smart-home-hubs-devices(Affiliate links are included in this description. I may receive a small commission at no cost to you.)Smart Home Camera FragmentationI have cameras in and around my house.I have cameras on the front door, cameras inside my house, cameras that point outside of my house, cameras in my garage, cameras in my server room, and even cameras in my server rack‚Ä¶.Don‚Äôt ask‚Ä¶All of these cameras work great and I keep all of the recorded footage in my home but what‚Äôs not great is that I am not able to tap into popular Home Hubs like HomeKit, Alexa, Google Home, or even Home Assistant.That‚Äôs because many of these platforms require some very specific requirements for adding cameras to your home hub.That means they might have to be certified, have to be compatible, and both manufacturers have to get along‚Ä¶ and we know how that story goes.Getting ecosystems to play nice togetherSo this left me with using one app to check my video, while leaving a whole host of features that my home hub provides on the table.Things like notifications within my ecosystem, the ability to trigger automation based on my eco system, cool features like picture in a picture on other devices, and all the things that make home hubs, well, hubs.And while I do like my home security choice, I don‚Äôt like that it doesn‚Äôt integrate with my home hub of choice.It‚Äôs not my fault these two companies don‚Äôt get along and I am not going to buy all new cameras just to be compatible with my home hub. That‚Äôs where Scrypted comes in.What is ScryptedScrypted is open source software that you host on your own machine that allows you to connect almost any camera to any hub, that‚Äôs right, certified or not.You can connect popular devices from UniFi, Amcrest, Hikvision, Nest &amp; Google, Tuya, Reolink, and many others to your home hub of choice, whether that be Apple‚Äôs HomeKit, Google Home, Alexa, or even Home Assistant.This lets you choose and reuse your own devices and take advantage of the automation and integration you get with your home hub.That‚Äôs right, something the big players aren‚Äôt offering you, and that‚Äôs choice.This means that you don‚Äôt have to pay for that subscription if you want video outside of your home, you can use scrypted to connect to one of the major hubs or even an open source one like Home Assistant.Scrypted supports many different camera integrations and many Home Hubs!Here‚Äôs where it gets really cool‚Ä¶Scrypted is pluggable, so it allows developers to create and update plugins within Scrypted, giving them and you lots of flexibility.Want to connect a Google Nest Camera to Alexa? Sure! Want to connect a Reolink camera to Google Home, absolutely! Want to connect your UniFi Cameras to HomeKit? No problem! What about connecting some named or no name camera that only supports RTSP or ONVIF? Scrypted has you covered!Scrypted RequirementsYou‚Äôre probably wondering, what does all of this cost? Well, if you already have the hardware it costs nothing but a little bit of your time.The next thing you‚Äôre probably asking what hardware you need to get started, or maybe you‚Äôre not even asking that, but I will tell you that you will need some hardware to get started üòÄThe requirements are actually pretty low and you can run it on the latest raspberry pi, or Windows, Mac, or Linux, and even Docker, either standalone or on many NAS devices like Unraid or Synology.It‚Äôs easy to set up and after you‚Äôve connected your cameras to your home hub, you‚Äôll be able to take advantage of all of the integrations your camera offers as well as automation your hub offers.So that‚Äôs what I am going after today, setting up Scrypted to connect my UniFi cameras to my HomeKit hub, which is one of my Apple TVs so I can use all of my cameras as if they are HomeKit Certified. Now wait, even if you don‚Äôt want or have this combination of devices and hubs, you can still follow along to set this up with any camera or any hub.Installing Scrypted with DockerSo I first created a Linux machine and then installed Docker, which I highly recommend using, but if you don‚Äôt feel comfortable you can install it any other way you like.If you are using Docker, I recommend doing this on Ubuntu, but Windows Mac, or any other version of Linux will work just fine.If you‚Äôre using a Linux machine I recommend using Docker and Portainer.Portainer is a great container management system for Docker that has a great UI.The install is fast and painless and makes managing Docker really easy.Once you‚Äôre in portainer, all you need to do is connect to your Docker instance, add a container, and then set a few properties like the name of the container, the image name and tag, and then you‚Äôll need to map your data volume from the container to the local machine.This should be somewhere your Portainer machine can read and write to, for me it‚Äôs just a simple path to a folder on the machine.The last thing they recommend is setting the network to host mode which means it will use the networking on the host instead of Docker networking.Once all that‚Äôs set, just deploy the container and you‚Äôre good to go.Installing Scrypted with Portainer is simple!Oh, and if you want to use Docker compose, you can use this to get started quickly! Note, this will also include watchtower to updated your stack automatically.If you don‚Äôt want to use watchtower just comment out that section.version: \"3.5\"# The Scrypted docker-compose.yml file typically resides at:# ~/.scrypted/docker-compose.yml# Example volumes SMB (CIFS) and NFS.# Uncomment only one.# volumes:# nvr:# driver_opts:# type: cifs# o: username=[username],password=[password],vers=3.0,file_mode=0777,dir_mode=0777 # device: //[ip-address]/[path-to-directory]# nvr:# driver_opts:# type: \"nfs\"# o: \"addr=[ip-address],nolock,soft,rw\"# device: \":[path-to-directory]\"services: scrypted: image: koush/scrypted environment: - SCRYPTED_WEBHOOK_UPDATE_AUTHORIZATION=Bearer SET_THIS_TO_SOME_RANDOM_TEXT - SCRYPTED_WEBHOOK_UPDATE=http://localhost:10444/v1/update # nvidia support # - NVIDIA_VISIBLE_DEVICES=all # - NVIDIA_DRIVER_CAPABILITIES=all # runtime: nvidia container_name: scrypted restart: unless-stopped network_mode: host devices: # hardware accelerated video decoding, opencl, etc. - /dev/dri:/dev/dri # uncomment below as necessary. # zwave usb serial device # - /dev/ttyACM0:/dev/ttyACM0 # all usb devices, such as coral tpu # - /dev/bus/usb:/dev/bus/usb volumes: - ~/.scrypted/volume:/server/volume # modify and add the additional volume for Scrypted NVR # the following example would mount the /mnt/sda/video path on the host # to the /nvr path inside the docker container. # - /mnt/sda/video:/nvr # or use a network mount from one of the examples above # - type: volume # source: nvr # target: /nvr # volume: # nocopy: true # uncomment the following lines to expose Avahi, an mDNS advertiser. # make sure Avahi is running on the host machine, otherwise this will not work. # - /var/run/dbus:/var/run/dbus # - /var/run/avahi-daemon/socket:/var/run/avahi-daemon/socket # logging is noisy and will unnecessarily wear on flash storage. # scrypted has per device in memory logging that is preferred. logging: driver: \"json-file\" options: max-size: \"10m\" max-file: \"10\" labels: - \"com.centurylinklabs.watchtower.scope=scrypted\" # watchtower manages updates for Scrypted. watchtower: environment: - WATCHTOWER_HTTP_API_TOKEN=SET_THIS_TO_SOME_RANDOM_TEXT - WATCHTOWER_HTTP_API_UPDATE=true - WATCHTOWER_SCOPE=scrypted # remove the following line to never allow docker to auto update. # this is not recommended. - WATCHTOWER_HTTP_API_PERIODIC_POLLS=true image: containrrr/watchtower container_name: scrypted-watchtower restart: unless-stopped volumes: - /var/run/docker.sock:/var/run/docker.sock labels: - \"com.centurylinklabs.watchtower.scope=scrypted\" ports: # The auto update port 10444 can be configured # Must match the port in the auto update url above. - 10444:8080 # check for updates once an hour (interval is in seconds) command: --interval 3600 --cleanup --scope scryptedConfiguring ScryptedOnce the container is running, you‚Äôll want to go to the machines IP address on port 10443Once you get there you will be greeted with a sign in page where you will create an account and password.Once signing in you will see the scripted homepage!The first thing I did was turn on dark mode, of course, and then went into the plugins page and clicked install plugins.Here you‚Äôll want to install the plugin for the platform you want to support.Scripted supports many different cameras and many different hub platforms, for instance you can search for Alex and see the plugins for Amazon Alexa or Google home and see the integrations for Google home, or even Amcrest if you want to find the amcrest camera plugin! There are lots of supported cameras but for me this is going to be unifi so I searched for unifi and installed it.Once it‚Äôs installed it will ask for a username and password for your unifi device.We need to create one in UniFi protect, but you‚Äôll want to create a new local account and not provide yours!Installing the uniFi Protect Plugin for ScryptedCreate UniFi Protect UserSo we need to go into UniFi and create a new user.We‚Äôll have to do this in the UniFi console and what I did was create a new Role first that has Full Management access to Protect.The documentation says that you might be able to drop this down later to a Read Only user, which I may do, but I will create the user and give it admin access to Protect only.Again, be sure to create a local account and set the permissions appropriately.Once that user was created I then added the user and the password as well as the IP address of my UDM SE.Once I saved my credentials I could then see all of my cameras and you can view them now, however since I am going to use HomeKit, I need to add that plugin as well.You‚Äôll need to create an account in UniFi Protect for Scrypted to useAdding Cameras to HomeKitSo I searched for the HomeKit plugin and installed it.We don‚Äôt need to change anything in the plugin, I just reloaded the unifi plugin and went back into my cameras.Now you‚Äôll see some additional options, one being HomeKit.You‚Äôll want to be sure that this is enabled.I also made sure that the SnapSho tplugin was enabled too.Once this was set up, all I had to do now was just add the cameras to HomeKit.I did this by navigating to each individual camera in Scrypted and then clicked on HomeKit and then Clicked on pairing.It will then show you a QR code which you can scan and it will add it to your home in HomeKitI did this for all of my cameras, accepted the message about it not being an officially certified accessory, and then chose the default settings of stream while I am home and while I am away.The reason I didn‚Äôt change any of this is because I still still use my UniFi Protect for camera storage, rather than store it on my docker container. And for those counting, I have nine cameras‚Ä¶. Yes, 9 cameras‚Ä¶Awesome Integration &amp; AutomationNow that we have this set up, what can we do with it?Well, now in the home app I can see all of my cameras at a glance.I can see the latest snapshot of each camera and drill in further to see a live view.I can pin the camera too so that I can multitask.Finally! Notifications on my Apple TV!I get notifications if someone presses the doorbell and I can talk with them too.Not only do I get notifications on my phone, but I also get them on my macbook, ipad, and even AppleTV - so just in case I am ‚Äúsuper busy‚Äù watching something that‚Äôs ‚Äúsuper important‚Äù I can decide whether or not to get my lazy butt off the couch.Here‚Äôs the other cool thing: Since I have an Apple TV, I can even say ‚ÄúHey Siri‚Äù show me my cameras and it will show me all of my connected cameras.From there I can browse them, pick one to watch and even listen to, and even pin it to the screen so I can keep an eye on things or if I am expecting a delivery.If they are in the same zone as other devices, I can interact with these devices too, like toggling on and off the lights on my porch.Picture in a Picture on my TV!_More Scrypted CompatibilityOne of the things I like most about Scrypted is that I can use almost any camera I want and I can connect it to one of many platforms.Now, I obviously connected UniFi cameras to HomeKit, but you can connect almost any camera to any platform.Want to connect some old PoE cameras to Alex or Google Home Hub, or even Home Assistant? No problem.That‚Äôs the beauty of Scrypted, is that it‚Äôs pluggable and can connect almost any camera to any Home Hub.Well, I learned a lot about Scrypted, HomeKit, and Unifi Protect and I hope you learned something too.And remember if you found anything in this video helpful, don‚Äôt forget to like and subscribe.Thanks for reading and watching!Join the conversationWhat a week! I found this awesome open source software that let&#39;s me connect and stream almost ANY camera to ANY Smart Home Hub. No more vendor lock! It&#39;s called Scrypted and it&#39;s awesome!Check it out!üëâhttps://t.co/NdvoQydUEo pic.twitter.com/RIbFIKNJgp&mdash; Techno Tim (@TechnoTimLive) May 13, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Mirror your Kubernetes configs, secrets, and resources to other namespaces", "url": "/posts/k8s-reflector/", "categories": "homelab", "tags": "kubernetes, k8s, cert-manager, reflector, helm", "date": "2023-04-26 21:37:00 -0500", "snippet": "What is Reflector?Reflector is a Kubernetes addon designed to monitor changes to resources (secrets and configmaps) and reflect changes to mirror resources in the same or other namespaces.Since sec...", "content": "What is Reflector?Reflector is a Kubernetes addon designed to monitor changes to resources (secrets and configmaps) and reflect changes to mirror resources in the same or other namespaces.Since secrets and configs are scoped to a single namespace, this helps you create and change resources in one namespace and ‚Äúreflect‚Äù them to resources in other namespaces.This is especially helpful for things like certificates and configs that are needed in multiple namespaces.You can find the GitHub repo here!InstallThis might go without saying but you‚Äôll want to be sure you have a working Kubernetes cluster! If you need help setting on up, check out my Ansible Playbook!You‚Äôll also want to be sure you have helm installed.Then we‚Äôll run:helm repo add emberstack https://emberstack.github.io/helm-chartshelm repo updatehelm upgrade --install reflector emberstack/reflectorThis command will add the helm repo locally, then update the repo, then install reflector in your cluster.Reflecting ResourcesNow that it‚Äôs installed, all we need to do is add some annotations to ‚Äúreflect‚Äù our resources to other namespaces.SecretsLet‚Äôs say you create the following Secret with the annotation below:apiVersion: v1kind: Secretmetadata: name: some-secret annotations: reflector.v1.k8s.emberstack.com/reflection-allowed: \"true\" reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: \"namespace-1,namespace-2,namespace-[0-9]*\"data: ...This will: create a Secret ‚Äúreflect‚Äù the same secret to namespace-1 , namespace-2 and all other namespaces that match the pattern namespace-[0-9]*ConfigMapsConfigMaps are just as easy! Let‚Äôs say you have a ConfigMap with the following contents:apiVersion: v1kind: ConfigMapmetadata: name: source-config-map annotations: reflector.v1.k8s.emberstack.com/reflection-allowed: \"true\" reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: \"namespace-1,namespace-2,namespace-[0-9]*\"data: ...This will: create a ConfigMap ‚Äúreflect‚Äù the same ConfigMap to namespace-1 , namespace-2 and all other namespaces that match the pattern namespace-[0-9]*CertificatesThis is the real reason I brought this chart into my cluster, was support for cert-manager certificates. There are many cases where I need to create the same certificate in multiple namespaces and rather than create them manually, I have reflector create them for me.apiVersion: cert-manager.io/v1kind: Certificate...spec: secretTemplate: annotations: reflector.v1.k8s.emberstack.com/reflection-allowed: \"true\" reflector.v1.k8s.emberstack.com/reflection-allowed-namespaces: \"namespace-1,namespace-2,namespace-[0-9]*\" ...This will: create a Certificate ‚Äúreflect‚Äù the same Certificate to namespace-1 , namespace-2 and all other namespaces that match the pattern namespace-[0-9]*The benefit of doing it this way with cert-manager is that when your certificates are updated with something like Let‚Äôs Encrypt, all certificates you reflect are also updated! Of course you will only want to limit your reflections to other namespaces you trust.If you‚Äôd like to check out cert-manager see my post on how to install traefik and cert-manager!Join the conversationOk, I think I made it just in time! A post on reflector for Kubernetes!https://t.co/IOYIhTk6g5#homelab&mdash; Techno Tim (@TechnoTimLive) April 27, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Low Power Cluster - Small, Efficient, BUT Powerful!", "url": "/posts/low-power-cluster/", "categories": "homelab", "tags": "homelab, k3s, kubernetes, hardware, server-rack, home-assistant", "date": "2023-04-22 10:00:00 -0500", "snippet": "I‚Äôve been running a few clusters in my HomeLab over the past few years but they have always been virtualized inside of Proxmox.That all changed today when I decided to run my Kubernetes cluster on ...", "content": "I‚Äôve been running a few clusters in my HomeLab over the past few years but they have always been virtualized inside of Proxmox.That all changed today when I decided to run my Kubernetes cluster on these 3 low power, small, and efficient, Intel NUCs.üì∫ Watch VideoI built a lower power, efficient, and near silent server cluster! Although this cluster is small and efficient, it‚Äôs still powerful enough to run a high availability Kubernetes cluster with many services running in High Availability mode! There are so many options with running a small cluster like this, the possibilities are endless!Where to BuyA HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.io Intel NUC 11 - https://amzn.to/43TK8nS Intel NUC 12 - https://amzn.to/3MZjC6C SAMSUNG 980 PRO SSD 2TB PCIe NVMe - https://amzn.to/41vUOrk SAMSUNG 870 EVO SATA - https://amzn.to/3KQMriU G.Skill RipJaws DDR4 SO-DIMM Series 64GB - https://amzn.to/3AlstI8 Mk1 Manufacturing - https://www.mk1manufacturing.com/cart.phpSee the whole kit here - https://kit.co/TechnoTim/efficient-low-power-powerful-virtualization-server(Affiliate links are included in this description. I may receive a small commission at no cost to you.)HardwareThese Intel NUCs are probably my favorite small form factor devices.They are only 4x4 inches and pack quite a punch.That‚Äôs because these NUCs have anywhere from a Core i3, to a Core i5, to a Core i7 processor in them.This one has a Core i7 with 4 cores and 8 threads and has a base clock speed of 2.8 GHz and can turbo boost up to 4.70 GHz.It even has QuickSync on this chip too so that I can offload encoding if I need to.You can check out the specs here.My Intel NUC Cluster!I maxed out the ram on each machine, giving it 64 GB of DDR4 RAM.Should just be just enough to run some of my workloads and another reason I chose not to run a hypervisor on these machines, I wanted to conserve resources.I added a 1 TB Samsung NVMe drive for the OS and to run all of my workloads, and then a second SSD for additional Kubernetes storage that will be replicated across all 3 devices.I may expand this in the future however this was one of many SSDs I had laying around.Intel NUC InternalsInstalling in the RackSo once I had all of the hardware buttoned up then I had to decide where exactly I was going to put these devices.Now I could have put these on my workbench or my desk, but I have a server rack in my basement that I wanted to take advantage of.I have a few general purpose shelves but I thought that these NUC deserved a little bit better home than that.I wanted a rack mount system that would hold 3 NUCs, hold them securely in place, and even give me some cable management and that‚Äôs when I found this small company that makes all kinds of small form factor rack mount systems.Mk1 Manufacturing makes all kinds of rack mount kits for small form factor devices like Mac Studios, Lenovo ThinkStations, Mac Minis, and of course Intel NUCs.The nice part about these racks too is that they are made here in the US. I purchased one for my Intel NUCs and quick rack mounted all 3.It was super easy to mount these and they even thought about the cable management for both power and networking.Intel NUC, 1U Rack Mount SystemRemote ControlI bet you‚Äôre wondering how I remote control these devices, because I wondered that too.Well, if you remember from a previous video, I picked up a PiKVM and I was able to attach multiple devices to it using an HDMI switch.Ths current switch lets me connect up to 4 devices, but I am going to try to expand to 8 later on. From the PiKVM I can even power on these devices using WAKE ON LAN that will send a magic packet to wake them up.And in the case that Wake On LAN doesn‚Äôt work, I can then use my UniFI Smart PDU Pro to toggle the power off then on to force them to wake up.Intel NUC, 1U Rack Mount SystemOperating SystemAfter getting this all hooked up and on my network, I then had to figure out how I was going to get an operating system on them.I ended up using MAAS or metal as a service to boot and provision these machines.I chose to go with Ubuntu server for these, well, because I like Ubuntu and so is the rest of my infrastructure so it makes it really easy to manage it.I was sure to reserve a static IP for these devices as well as create a DNS entry for them.Why KubernetesNow, for the most difficult part of this all, installing kubernetes.I bet you‚Äôre asking, why Kubernetes? Because.KubernetesSo to install Kubernetes I can do it one of a million different ways and on top of that I have my distributions to choose from.I ended up going with k3s because I like how lightweight that it is as well as the active community behind it.As far as installation goes I could spend the 20+ hours doing it manually but I‚Äôve already created an Ansible playbook that can do this all for me.It does everything that I need to give me a high availability Kubernetes cluster, with both an HA Kubernetes API as well as an HA service load balancer.With three nodes I can lose 1 node and everything will still function normally.After setting my IP address it was off to the races. üöÄI sat back and watched the automation run for about 3 minutes, and shortly after that I had a highly available Kubernetes cluster to run my workloads.If you‚Äôd like to do the same thing I will leave a link to the documentation and the video where I walk you through all of this.Running the k3s-ansible playbookInstalling Apps &amp; ServicesSo once I had Kubernetes installed I then copied my kube config file locally so I could communicate with the cluster.I was able to ping the Kubernetes API that is really a VIP and it responded.I then asked Kubernetes to show me all of my nodes and there they were, all three of them.So that was there to do next? Next I wanted to install some workloads to test out HA.Now typically I would install Traefik as my reverse proxy and cert-manager to manage my certificates, and LOKI, Grafana, and Prometheus for logging, monitoring, and visualization; however I just wanted to test out a few things before I go all in.So I decided to install a simple web server that runs nginx to host it.This web site is just a tiny nginx web server that services a single page that shows its hostname, IP address, and port, and a few other things.This was going to be a good test to test high availability. My plan was to create this workload with 3 replicas and then pull the plug on one of the nodes and make sure that both Kubernetes was still up as well as this web page.So, that‚Äôs what I did.I created a Kubernetes deployment for this container and set the replicas to this.This will ensure that 3 are running but I wanted to be sure that they were spread out across all three nodes.I did this by setting a typology constraint of hostname.This will make sure that only more than one pod is never scheduled on the same node so that I can ensure HA.---apiVersion: apps/v1kind: Deploymentmetadata: name: nginxspec: selector: matchLabels: app: nginx replicas: 3 template: metadata: labels: app: nginx spec: containers: - name: nginx image: nginxdemos/hello ports: - containerPort: 80 topologySpreadConstraints: - maxSkew: 1 topologyKey: kubernetes.io/hostname whenUnsatisfiable: DoNotSchedule labelSelector: matchLabels: app: nginxSo once this was set, I then deployed the Kubernetes deployment and could see that I had 3 pods, all spread across 3 nodes, awesome.But how to I actually get to this web page? Well, remember how I mentioned that I typically use Traefik as my reverse proxy? Well, that‚Äôs where this would come in handy.It would allow me to expose multiple services on the same IP, but since I don‚Äôt have it installed, I will just expose it on the metal lb load balancer that comes with my playbook.To open up an IP on the virtual load balancer, all I have to do is create a service with a type of LoadBalancer.This will expose the service on one of the Metal LB Ip addresses so that we can see our web page.---apiVersion: v1kind: Servicemetadata: name: nginxspec: ipFamilyPolicy: PreferDualStack selector: app: nginx ports: - port: 80 targetPort: 80 type: LoadBalancerAfter deploying that service, we can then check the service to see which IP address it was assigned.Once we have that IP address we can then get to this web page.After, we see our web page here so we know it‚Äôs working.And it should be HA because we have one of these pods running on each of the servers!NGINX demo pageNow we need to introduce some chaos.No, no no no, not that much chaos, just simply removing one of the nodes.So, before doing that let‚Äôs ping our Kubernetes API to be sure that it ups, and you can see it‚Äôs up and responding.Next let‚Äôs open the web page and keep refreshing it.Now, we can introduce chaos by shutting down one of the nodes.I can pick anyone that I like but let‚Äôs go with 2.Let‚Äôs also ping node 2 so you can see it going down.So we shut down node 2 and wait.We can see that it‚Äôs down but out Kubernetes API is still up.We can do a kubectl get nodes and see all of our nodes, and if we refresh our web page we can see that the web site never went down.Now if we shutdown one more now, we will lose access to our Kubernetes api and web page, so let‚Äôs shutdown node 1.And as you can see we can‚Äôt get to it anymore, but if we bring up node 2 and leave node 1 down we can.Testing my HA NGINX install, you can see that node 2 is down, but the Kubernetes API still responds and the web page is still up!What else can we do?Awesome, so now we have an HA cluster but what can we do with it? Well, I mentioned a few things but you can do some awesome home Kubernetes stuff like install Home Assistant, game servers, web sites, or many other workloads, just remember that not all workloads can be HA out of the box, they have to be stateless like my nginx container, meaning they have no state like storage mounts or state in memory, but they get their state from outside of the container like an external database.This diagram explains how stateless Kubernetes apps should be architectedHow efficient is it?I bet you‚Äôre wondering how much power these three devices use, well I wondered the same thing and I checked my UniFi PDU to be sure.I let all three NUCs run a few workloads and kept them on for a few hours and each of them uses about 20 watts of power.Keep in mind that my PDU only shows average power over time so I think they are using anywhere from 15-25 watts.Is that as good as a raspberry pi? Well, no, but what I do get is an x86 processor with 8 cores, lots of high speed storage, 2.5 Gigabit networking, AES instructions, and even a GPU for quick sync if I wanted to do any kind of transcoding.Also, it has enough compute to run anything I can throw at it because remember it‚Äôs a core i7.Each Intel NUC only uses around 9 watts of power on average, with an idle k3s cluster!What do I think?So, what do I think of these lower power, small, yet powerful devices? Well, I think they are pretty awesome if you couldn‚Äôt tell by the fact that I bought 3.You can find these devices relatively cheap if you go with a model from a previous year.Is it as cheap as picking up older small form factor desktops? It‚Äôs not, what that might be a perfectly fine option for you if you want to save some money, but I didn‚Äôt have 3 devices that I could keep around for years to come, not to mention that I still have my first NUC from almost 9 years ago. These little devices are great for servers, especially if you are considering clustering them.And rack mounting them is a great solution if you‚Äôre thinking about picking up a few.Well, I learned a lot today about low power servers, Intel NUCs, and cluster Kubernetes and I hope you learned something too.And remember if you found anything in this video helpful, don‚Äôt‚Äô forget to share, like, and subscribe. Thanks for reading and watching!Join the conversationWhat a week! I built a lower power, efficient, and near silent server cluster! Although this cluster is small and efficient, it&#39;s still powerful enough to run many services running in High Availability mode! Check it out!üëâhttps://t.co/5VP32kGqP4#homelab pic.twitter.com/8dWy6FQQVj&mdash; Techno Tim (@TechnoTimLive) April 22, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Building a Low Power, All-in-One, Silent Server", "url": "/posts/low-power-efficient-server/", "categories": "homelab", "tags": "homelab, proxmox, pfsense, ubuntu, windows, truenas, hardware, plex, portainer, docker, hardware", "date": "2023-04-08 10:00:00 -0500", "snippet": "What if I told you that this little machine is the perfect Proxmox Virtualization server? And what if I told you I crammed an intel core i5, 64 GB of RAM, a 1 TB NVMe SSD, another 1TB SSD all in t...", "content": "What if I told you that this little machine is the perfect Proxmox Virtualization server? And what if I told you I crammed an intel core i5, 64 GB of RAM, a 1 TB NVMe SSD, another 1TB SSD all in this tiny little box that‚Äôs dead silent without any fans? And what if I told you it can run Proxmox Virtual Server, host a pfsense router, runTrueNAS with a TB of storage, run Ubuntu server with Portainer running a few docker containers, run Windows 10 or Windows 11, and run ubuntu Desktop and pass though all of the hardware so I can use this server as a desktop, all while running a Plex Server and doing hardware transcoding with 3 - 4k streams? No Way!Yeah, I thought you‚Äôd say that.üì∫ Watch VideoYou might have heard of Protectli before.They‚Äôre known for making really great appliances for many open source software distributions.Most people think of Protectli devices as the perfect device for a router like pfSense. And that makes sense considering that their devices come with anywhere from 2 - 6 network ports.But their devices can be used to run almost any software imaginable, from Linux, to Windows, to a dedicated firewall, to even a virtualization host or a hypervisor. How is that possible?Where to BuyA HUGE thanks to Protectli for sending this device for me to test! Protectli Vault FW2B - 2 Port - https://amzn.to/3nRJfM1 Protectli Vault FW4B - 4 Port - https://amzn.to/3nVVU0u Protectli Vault FW6A - 6 Port - https://amzn.to/3zHWHop Protectli Vault Pro VP4630-6 Port - https://amzn.to/3GoYSRy Crucial RAM - https://amzn.to/41eks31 Samsung NVMe - https://amzn.to/3KIsKuD Samsung SSD - https://amzn.to/43fYb6ZSee the whole kit here! - https://kit.co/TechnoTim/building-a-low-power-all-in-one-silent-serverCPUThat‚Äôs possible because of the hardware that these devices ship with.Protectli sent me a VP4560 to help with some of my HomeLab projects and this device is a beast. This is the VP4650 and comes with an intel Core i5 quad core CPU with hyper-threading that is rated at 1.6 GHz and can turbo boost up to 4.2 GHz.The nice thing about this CPU is that it supports VTx for virtualization and VT-d for IOMMU so I can pass through devices though to the guest.And because it‚Äôs an Intel x86 processor it comes with AES-NI support, which is super nice for encryption / decryption for VPN or TLS.MemoryIt supports up to 64GB of RAM which is plenty for what I will be using it for, but you can scale back if you need, all the way down to 4 GB.NetworkIt comes with 6 intel 2.5 gigabit NIC ports giving you enough throughput for most of your networking needs.Protectli VP4650 has 6 - 2.5 Gb/s network ports!StorageIt also ships with a 16GB eMMC module on board and many options for storage.Also, because this machine has an NVMe slot and a SATA port you can mix and match your storage to fit your needs.I opted for a 1 TB Samsung M.2 NVMe and a 1 TB Samsung EVO drive.Protectli VP4650 InternalsExtrasYou also get the choice of adding WiFi modules and 4g LTE modems however I decided not to on this device because they also sent a lower powered VP2420 that has 4 network ports along with WiFI and LTE modules to help me build the ultimate router which you‚Äôll be seeing in a future video.Protectli Ultimate Router (Coming soon!)CoolingIf you noticed from everything I listed, you didn‚Äôt hear anything about fans.That‚Äôs not something that‚Äôs obvious from the specs on paper, but taking one look at this device you can see this huge heatsink that passively cools the entire device.It definitely looks like a grill but I promise you can‚Äôt cook anything on here.ConnectivityProtectli devices come with plenty of options to connect all of your other devices devices_As far as connectivity goes, you have plenty of options for connecting devices, from USB 2.0, 3.0, USB C, to HDMI, to Display power, and even a micro USB port for console access.BIOSYou can choose between AMI BIOS and and open source BIOS called ‚Äúcoreboot‚Äù_One thing that I like about these devices is that you have your choice in firmware to use.You can use a standard AMI BIOS that works great, or your can use coreboot BIOS, which is a bare bones open source BIOS that lets you customize some cool features.For instance, if you flash their devices with core boot, you can boot to the network and download and install many different operating systems from the network.This is a neat feature that I welcome and it saves you the hassle of loading up that Ventoy USB disk with new ISO.I did however opt for AMI BIOS because I did have a few issues with coreboot related to using my Ventoy USB disk.But that‚Äôs the nice thing about this BIOS being open source, it will get better and more secure over time with more eyes looking at it and more engineers contributing to it.The BuildSo what did I do with all of this hardware? The better question is what didn‚Äôt I do?I knew that I wanted thai build to be a complete silent hypervisor and I knew that it was going to run Proxmox.The first decision I had to make was where I was going to install proxmox.Remember I have the choice between the NVMe drive, the SATA drive, and the eMMC module.Turns out the eMMC mobile isn‚Äôt really an option because Proxmox won‚Äôt let you install it there without some hacks and I didn‚Äôt want to hack this device so I decided to install it on the NVMe drive and use the rest of the partition for virtual machines.Typically I would have installed the OS on the slower drive and save the NVMe for VMs but I have other plans for that. Installing Proxmox was straightforward, just like any other Proxmox installation.After it was installed I then configured IOMMU so I can pass devices through to guest machines and everything else I have on my First 11 Things on Proxmox video.After that was all set it was now time to install some VMs.RouterI knew that I wanted to install a router on this machine.This will give me the flexibility to run a network firewall for all of these devices and give me the option to protect any device I use when I travel, but more on that later.So I installed pfsense, and passed through 2 NICs from the host down to the guest. This first NIC is the WAN port, so an upstream provider like an ISP or even some network I don‚Äôt trust, and then one port for LAN if I do want to connect all of these devices to the local network. Passing these through and configuring them was pretty simple and if I forget which port is which they even included some stickers for me to label the ports.I also added another network port that‚Äôs used as a network bridge in case I want these VMs to use an internal network.Protectli Network interface stickersNASNow that the router was done, I wanted to configure a NAS on this device.This NAS could be any open source NAS but I chose to go with TrueNAS SCALE.I went with TrueNAS because, well it‚Äôs TrueNAS,and I went with SCALE because I wanted a Linux based OS that plays better with Proxmox.After installing TrueNAS I then created a 1 TB drive in Proxmox and assigned it to TrueNAS so that I can have 1 TB of storage on my NAS.I know it‚Äôs not ZFS and I don‚Äôt have redundant drives, so if you do the same you‚Äôll want to be sure that you have your data backed up to another machine.Once I had TrueNAS up and running I could set up NFS and Samba shares just like I would normally with a physical install.I can also pass through one of the NICs to my NAS so that it can have a dedicated 2.5 Gb/s NIC if I like.Ubuntu Server + PortainerNext up I needed something to run my containers.Yes, I know I can use TrueNAS to do that but I wanted to go with my preferred combination of Ubuntu Server + Docker + Portainer.Having a dedicated Ubuntu server running Portainer gives me a great UI and so many possibilities.After installing and configuring I then created a few containers.This is a perfect host now to run all of my self-hosted services.DesktopAfter getting my foundation all set up, I then had my choice of desktop OSes.I could choose between Windows and Ubuntu Desktop, then I looked at how much disk space and RAM I had left and I thought to myself, why not both.This is where things got a little bit interesting too.I first installed Windows 11 and configured it, no problems there, but after installing Windows I wanted to passthrough the GPU on the device to the VM, along with sound card and USB devices so I could use this all in one server as a desktop too.After messing with this for hours I could not get the single Intel GPU to display anything on the screen even though it was definitely passed through to the guest machine and I could see it over Remote Desktop.I thought maybe it was Windows 11 so I created a Windows 10 machine and it did the same thing.Ubuntu Virtual machine running on Proxmox with the hardware passed through from host to guest so I can use it as a desktop simultaneouslySo I decided to try it again, but with Ubuntu Desktop and sure enough it worked! I was able to pass through the integrated GPU front he host down to the guest and use this machine as a desktop.I will be the first to admit that it wasn‚Äôt winning any performance awards but I was able to do most tasks that I would expect to do on a laptop.I installed VSCode, customize the desktop, watched some YouTube, and even passed through the thermal subsystem so I could monitor the temperature of the host.After I had this working I decided to install Plex on this machine so that I could see if I could get QuickSync working.QuickSync is a technology and a dedicated chip on most modern intel processors that lets you off load decoding and encoding video from the processor to this chip.This technology is similar to NVENC from NVIDIA, and AMF from AMD, but the idea is that you give this work to another part of the processor instead of pegging all of your CPU cores.Plex can take advantage of this if you have a plex pass and I do, so I wanted to see if I could get it working.That‚Äôs where I started to run into troubles.I thought that since I had the GPU passed through to this Ubuntu machine that Plex would just see QuickSync and use it. No matter what I tried I could not get Plex do hardware encoding, I even tried using Docker containers which supposedly should work if the hardware is mapped properly however I couldn‚Äôt get it to work.I could see the Intel GPU using Remote Desktop on WindowsThen I decided to try my Windows VM.I could see the Intel GPU when using Remote Desktop so there was hope.Sure enough that when I installed plex and started streaming a video the hardware enabled transcoding kicked it and the CPU barely budged! I was able to transcode 3-4k streams down to 1080, 720, and even 480, no problem!I could encode 3 - 4k streams on Plex using Intel‚Äôs Quick Sync!This was awesome and puzzling at the same time.The WIndows machine could see the GPU and take advantage of QuickSync but I couldn‚Äôt output the display from the HDMI or DisplayPort, and the Ubuntu machine could output to the monitor over HDMI but couldn‚Äôt use QuickSync.Judging by the fact that I was able to cover both of these use cases with different operating systems this told me that it‚Äôs something with software and not hardware so I chalked it up as software issue and it may be fixed some day.PowerProtectli VP4650 power draw with 4 virtual machines running and hardware attachedYou might think that running 4 virtual machines on this device would draw a lot of power and generate a lot of heat.Well, I thought the same thing until I pulled out my kill-a-watt and decided to measure it.This Protectli machine running 4 VMs and the host itself with all of these devices plugged in pulled anywhere from 20-30 watts, which I think is pretty good considering I have all of this functionality in one device.If I wanted to save some more power I could power down any of these virtual machines when not using them.Protectli VP4650 temperatures with 4 virtual machines running and hardware attachedAnd as far as heat goes? Well, do you hear that fan? That‚Äôs right, no fan equals no noise but that also means that it‚Äôs going to heat up these fins.As you saw earlier that the thermals were around 56 celsius on the die, it‚Äôs actually much cooler on the heatsink fins so you definitely can‚Äôt cook anything on it.Final ThoughtsAs you saw I was able to create quite a few virtual machines and spin up an absolutely quiet hypervisor and use it as a desktop, which goes to show just how flexible these devices are.If you go with Protectli you are getting a blank slate where you can create and build anything you want.From a full fledged server with virtual machines to a small dedicated development environment.Now it wouldn‚Äôt be fair if I didn‚Äôt mention some of the beefs I have with it too.Remember that eMMC drive I mentioned? Well, if you‚Äôre planning on using it with Proxmox it‚Äôs almost useless.Proxmox can‚Äôt be installed on that device and even if it could it‚Äôs only 16GB.I‚Äôd love to see another option other than the eMMC module or even space for another SSD.The other things that some mention is the price.These devices are a little more expensive than some of the other small form factor devices out there, so I wish the price would come down just a bit.However these devices are purpose built, have lots of customization options like WiFi and 4g LTE, are industrial quality, offer support for all of their devices, and allow you to swap out firmware for coreboot anytime you like and those options might be enough for you to justify the premium cost, because I think these are truly premium devices.Well, I learned a lot about running Proxmox on Protectli devices and I hope you learned something too.And remember if you found anything in this video helpful, don‚Äôt forget to like and subscribe.Thanks for reading and watching!ConfigurationHere is my configuration for each virtual machine on my Proxmox server.Please note that (as seen in this article and the video) I did have issues getting the Windows machines to output their display to a physical monitor however Quick Sync to encode videos worked just fine and I could output the display using Ubuntu desktop however I could not use Quick Sync.If you have a fix, let me know in the comments!pfSenseboot: order=virtio0;ide2;net0cores: 4cpu: host,flags=+aeshostpci0: 0000:06:00ide2: none,media=cdrommemory: 2048meta: creation-qemu=7.2.0,ctime=1680150221name: pfsensenet0: virtio=12:70:A1:22:F9:2F,bridge=vmbr1numa: 0ostype: otherscsihw: virtio-scsi-singlesmbios1: uuid=0388a78d-7950-49e7-8ef9-19a9744e8ee2sockets: 1startup: order=1,up=30,down=30vga: qxlvirtio0: local-lvm:vm-100-disk-0,discard=on,iothread=1,size=20Gvmgenid: 314798d0-820e-40bd-89ad-ac364b03b83cWindows 11agent: 1balloon: 0bios: ovmfboot: order=ide0;ide2;virtio0;net0cores: 8cpu: hostefidisk0: local-lvm:vm-101-disk-0,efitype=4m,pre-enrolled-keys=1,size=4Mhostpci0: 0000:00:02,pcie=1hostpci1: 0000:00:12.0ide0: local:iso/virtio-win-0.1.229.iso,media=cdrom,size=522284Kide2: none,media=cdrommachine: pc-q35-7.2memory: 32768meta: creation-qemu=7.2.0,ctime=1680233057name: windows-11net0: virtio=DE:AB:E8:6B:9F:B7,bridge=vmbr2,firewall=1,tag=60numa: 0ostype: win11scsihw: virtio-scsi-singlesmbios1: uuid=5f7d30a5-b3df-4a29-800c-730c7a43668dsockets: 1tpmstate0: local-lvm:vm-101-disk-1,size=4M,version=v2.0vga: stdvirtio0: local-lvm:vm-101-disk-2,cache=unsafe,discard=on,iothread=1,size=10&gt;vmgenid: 9193bc41-1b82-4069-bc42-8cbb0dfca31dUbuntu Desktopagent: 1balloon: 0boot: order=scsi0;ide2;net0cores: 8cpu: hosthostpci0: 0000:00:02,pcie=1,rombar=0,x-vga=1hostpci1: 0000:00:1fhostpci2: 0000:00:1ahostpci3: 0000:00:12,pcie=1ide2: none,media=cdrommachine: q35memory: 16384meta: creation-qemu=7.2.0,ctime=1680232192name: ubuntunet0: virtio=1E:05:6A:E7:68:85,bridge=vmbr2,tag=60numa: 0ostype: l26scsi0: local-lvm:vm-102-disk-0,cache=writeback,discard=on,iothread=1,size=8&gt;scsihw: virtio-scsi-singlesmbios1: uuid=7b2a286b-197d-4382-9c04-5a0544596b89sockets: 1startup: order=4,up=30,down=30usb0: host=24f0:0142usb1: host=045e:0724vga: nonevmgenid: e93460b1-66f7-4694-a528-98ed006eb770Ubuntu Serveragent: 1balloon: 0boot: order=scsi0;ide2;net0cores: 4cpu: hostide2: none,media=cdrommemory: 8192meta: creation-qemu=7.2.0,ctime=1680232488name: ubuntu-servernet0: virtio=F6:BF:85:17:B6:0F,bridge=vmbr2,firewall=1,tag=60numa: 0ostype: l26scsi0: local-lvm:vm-103-disk-0,cache=unsafe,discard=on,iothread=1,size=32Gscsihw: virtio-scsi-singlesmbios1: uuid=7bc4309c-dc9a-4632-bfd5-2e5f8a5e4fcdsockets: 1startup: order=3,up=30,down=30vmgenid: 2500d141-f7be-4c7b-ab9f-0a0f0075ea97TrueNASagent: 1balloon: 0boot: order=scsi0;ide2;net0cores: 4cpu: hostide2: none,media=cdrommachine: q35memory: 8192meta: creation-qemu=7.2.0,ctime=1680314889name: truenasnet0: virtio=DE:16:B3:D8:6C:C7,bridge=vmbr2,firewall=1,tag=60numa: 0ostype: l26scsi0: local-lvm:vm-104-disk-0,discard=on,iothread=1,size=32G,ssd=1scsi1: evo:vm-104-disk-0,discard=on,iothread=1,size=1000G,ssd=1scsihw: virtio-scsi-singlesmbios1: uuid=2ab225ac-44d8-4fb0-b5eb-0ada70e05f33sockets: 1startup: order=2,up=30,down=30vmgenid: 79db20a3-ff24-457c-8abb-6dc4df3c6e38Windows 10agent: 1balloon: 0bios: ovmfboot: order=ide0;ide2;scsi0;net0cores: 8cpu: hostefidisk0: local-lvm:vm-105-disk-0,efitype=4m,pre-enrolled-keys=1,size=4Mhostpci0: 0000:00:02,pcie=1hostpci1: 0000:00:12,pcie=1hostpci2: 0000:00:1fide0: none,media=cdromide2: none,media=cdrommachine: pc-q35-7.2memory: 32768meta: creation-qemu=7.2.0,ctime=1680459394name: windows-10net0: virtio=72:B4:A4:CD:C6:96,bridge=vmbr2,firewall=1,tag=60net1: virtio=C6:9F:2F:F2:73:7B,bridge=vmbr1,firewall=1,link_down=1numa: 0ostype: win10scsi0: local-lvm:vm-105-disk-1,cache=unsafe,discard=on,iothread=1,size=150G&gt;scsihw: virtio-scsi-singlesmbios1: uuid=74ff8b62-d60d-4d5c-81a0-e3939baa380csockets: 1startup: order=4,up=30,down=30vga: nonevmgenid: f4593d16-12ab-4483-8962-6c27ee576f05Join the conversationOver the last few weeks I built a lower power, efficient, and silent Proxmox server! I can run many virtual machine and even pass through the hardware to use it as a desktop simultaneously! Check it out! üëâhttps://t.co/4u6DW3BS3E#homelab pic.twitter.com/32quyBjXH5&mdash; Techno Tim (@TechnoTimLive) April 8, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Automate Cloudflare with Terraform and GitHub Actions! - Terraform Tutorial for Beginners", "url": "/posts/terraform-cloudflare-github/", "categories": "cloud", "tags": "terraform, hashicorp, cloudflare, github, cloud, homelab", "date": "2023-03-25 10:00:00 -0500", "snippet": "Today, we‚Äôre going to set up and configure Terraform on your machine so we can start using Terraform.Then we‚Äôll configure cf-terraforming to import our Cloudflare state and configuration into Terra...", "content": "Today, we‚Äôre going to set up and configure Terraform on your machine so we can start using Terraform.Then we‚Äôll configure cf-terraforming to import our Cloudflare state and configuration into Terraform.After that we‚Äôll set up a GitHub report and configure GitHub actions so you have CI and CD for deploying your Infrastructure automatically using a Git Flow.If you‚Äôre new to Terraform, that‚Äôs fine! This is a beginner tutorial for Terraform and by the end of this, you will feel like an expert!üì∫ Watch VideoWhat is Terraform and how does it help?Terraform is a powerful infrastructure as code tool to help you create and manage infrastructure across multiple public or private clouds. It can help you provision, configure, and manage infrastructure using their simple and human readable configuration language. Using Terraform helps you automate your infrastructure and your DevOps workflow, do it consistently, and allows you to collaborate with teams in Git.There are 7 key areas where Terraform shines: Automation: Terraform enables automation of infrastructure provisioning, configuration, and management, which reduces human error and saves time. Consistency: Terraform ensures that your infrastructure is consistent across all environments, from development to production. Collaboration: Terraform allows multiple teams to work together on infrastructure changes, using version control systems like Git. Cloud-agnostic: Terraform supports various cloud providers, including AWS, Google Cloud, and Microsoft Azure, allowing you to use the same tool to manage resources across different clouds. Scalability: Terraform is designed to handle large-scale infrastructure deployments and can easily manage thousands of resources. Reusability: Terraform modules enable you to reuse code and infrastructure components across multiple projects, making it easier to manage infrastructure at scale. Flexibility: Terraform is highly flexible and can be extended through plugins to integrate with other tools and services. Installing TerraformThis will work on Ubuntu and Windows + WSLInstall terraform for other platformsInstall dependenciessudo apt updatesudo apt install software-properties-common gnupg2 curlImport the gpg keycurl https://apt.releases.hashicorp.com/gpg | gpg --dearmor &gt; hashicorp.gpgsudo install -o root -g root -m 644 hashicorp.gpg /etc/apt/trusted.gpg.d/Add hashicorp repositorysudo apt-add-repository \"deb [arch=$(dpkg --print-architecture)] https://apt.releases.hashicorp.com $(lsb_release -cs) main\"Install terraformsudo apt install terraformCheck the versionterraform --versionTerraform v1.4.0on linux_amd64Create your Terraform Cloudflare configFirst create a simple terraform config:terraform { required_providers { cloudflare = { source = \"cloudflare/cloudflare\" version = \"~&gt; 3.0\" } }}provider \"cloudflare\" { api_token = var.cloudflare_api_token}# Create a recordresource \"cloudflare_record\" \"www\" { # ...}# Create a page ruleresource \"cloudflare_page_rule\" \"www\" { # ...}Here is my .editorconfig:# http://editorconfig.orgroot = true[*]indent_style = spaceindent_size = 2charset = utf-8trim_trailing_whitespace = trueinsert_final_newline = true[*.md]trim_trailing_whitespace = falseInitialize terraform and Cloudflareterraform initWe should see that it installed plugins, and it should have created a lock file.Terraform Plan and ApplyNext we‚Äôll want to review our plan, we can see our proposed changesterraform planNext we‚Äôll apply our changes.terraform applyVerify on the dashboard.After applying we can verify the results.we can also test with nslookupnslookup yoursite.example.comCheck Cloudflare‚Äôs site.if we run plan again, we can see there‚Äôs no work to doterraform applyShould see that there isn‚Äôt any work to do.Importing Cloudflare StateWe will need to import our Cloudflare state into our local Terraform state. An important point to understand about Terraform is that it can only manage configuration it created or was explicitly told about after the fact. The reason for this limitation is that Terraform expects to be authoritative for the resources it manages. It relies on two types of files to understand what resources it controls and what state they are in. Terraform determines when and how to make changes from the following: A configuration file (ending in .tf) that defines the configuration of resources for Terraform to manage. This is what you worked with in the tutorial steps. A local state file that maps the resource names defined in your configuration file ‚Äî for example, cloudflare_load_balancer.www-lb ‚Äî to the resources that exist in Cloudflare. https://developers.cloudflare.com/terraform/advanced-topics/import-cloudflare-resources/So this means that we need to sync the remote state of Cloudflare, down to our local state.This is where cf-terraforming can helpCheck for the latest version here:https://github.com/cloudflare/cf-terraforming/tagsUpdate this command with the latest tagcurl -L https://github.com/cloudflare/cf-terraforming/releases/download/v0.11.0/cf-terraforming_0.11.0_linux_amd64.tar.gz -o cf-terraforming.tar.gztar -xzf cf-terraforming.tar.gzrm cf-terraforming.tar.gzsudo mv ./cf-terraforming /usr/local/binsudo chmod +x /usr/local/bin/cf-terraformingThen we need to updated our .zshrc or .bashrc with our variablesnano ~/.zshrcexport CLOUDFLARE_API_TOKEN='12345'export CLOUDFLARE_ZONE_ID='abcde'The source your shellsource ~/.zshrcNow let‚Äôs export Cloudflare state(Be sure you have copied your variables into your shell, or ran the export commands above )cf-terraforming generate \\ --resource-type \"cloudflare_record\" \\ --zone $CLOUDFLARE_ZONE_ID &gt; imported.tfLook at the file and copy the contents into your cloudflare.tfthen runterraform planTerraform thinks that we need to apply all of these resources, even though they exist.We need to import them into our local state.cf-terraforming import \\ --resource-type \"cloudflare_record\" \\ --zone $CLOUDFLARE_ZONE_IDThis will export a lot of commands, we now need to run them to import them into our state.All you need to do it copy and paste the commands into your terminal.This will import your local state, you can see it in terraform.tfstateIf we run terraform plan now, we can see that there aren‚Äôt any changes.Remote State with Terraform CloudTerraform CloudBe sure to sign up for an account and then get add your CLOUDFLARE_API_TOKEN and an ENV variable in Terraform Cloud.Mark it as seneitive.Then you‚Äôll want to updated your cloudflare.tfIt should look like this cloud { hostname = \"app.terraform.io\" organization = \"your org\" workspaces { name = \"Cloudflare\" } }Your cloudflare.tf file should now look like:terraform { cloud { hostname = \"app.terraform.io\" organization = \"your org\" workspaces { name = \"Cloudflare\" } } required_providers { cloudflare = { source = \"cloudflare/cloudflare\" version = \"~&gt; 3.0\" } }}provider \"cloudflare\" { api_token = var.cloudflare_api_token}# Create a recordresource \"cloudflare_record\" \"www\" { # ...}# Create a page ruleresource \"cloudflare_page_rule\" \"www\" { # ...}Then runterraform initThis will prompt you to sign in and then import your local state into Terraform cloud.CI / CD with GitHub ActionsIf you want to create a CI / CD pipeline with GitHub actions, you‚Äôll need to create a new repo at GitHubHere is my .gitignore.terraform/terraform.tfstate*Convert your local folder into a git repo:first, cd into your folder Note: Be sure not to commit any of your secrets to git! This includes API tokens, terraform state, and any other files that might include sensitive informationgit initgit commit -m \"first commit\"git branch -M maingit remote add origin git@github.com:username/your-repo-name.gitgit push -u origin mainTo create a branch, add files, commit, and pushgit checkout -b my-new-branchgit add .git commit -m \"fix(terraform): made some changes\"git push --set-upstream origin my-new-branchBe sure you have created a secret TF_API_TOKEN with your Terraform API token.For reference, here is the terraform GitHub Action (with my bug fix)name: 'Terraform'on: push: branches: [ \"main\" ] pull_request:permissions: contents: readjobs: terraform: name: 'Terraform' runs-on: ubuntu-latest environment: production # Use the Bash shell regardless whether the GitHub Actions runner is ubuntu-latest, macos-latest, or windows-latest defaults: run: shell: bash steps: # Checkout the repository to the GitHub Actions runner - name: Checkout uses: actions/checkout@v3 # Install the latest version of Terraform CLI and configure the Terraform CLI configuration file with a Terraform Cloud user API token - name: Setup Terraform uses: hashicorp/setup-terraform@v2 with: cli_config_credentials_token: $ # Initialize a new or existing Terraform working directory by creating initial files, loading any remote state, downloading modules, etc. - name: Terraform Init run: terraform init # Checks that all Terraform configuration files adhere to a canonical format - name: Terraform Format run: terraform fmt -check # Generates an execution plan for Terraform - name: Terraform Plan run: terraform plan -input=false # On push to \"main\", build or change infrastructure according to Terraform configuration files # Note: It is recommended to set up a required \"strict\" status check in your repository for \"Terraform Cloud\". See the documentation on \"strict\" required status checks for more information: https://help.github.com/en/github/administering-a-repository/types-of-required-status-checks - name: Terraform Apply if: github.ref == 'refs/heads/main' &amp;&amp; github.event_name == 'push' run: terraform apply -auto-approve -input=falseWrapping upAt this point you should be able to run terraform and have your Cloudflare state sync‚Äôd with Terraform Cloud and GitHub actions running in CI / CD so you can start deploying your infrastructure using code!Join the conversationOver the past few weeks I learned all about Terraform and it&#39;s awesome! I converted my Cloudflare settings to code and deploy it with CI / CD using GitHub Actions!You can check it out here:üëâ https://t.co/vUnvV8m3Mh#terraform #cloudflare #github #homelab pic.twitter.com/2oWkhtZshu&mdash; Techno Tim (@TechnoTimLive) March 25, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Rotating your Encryption Keys and Updating your Secrets with SOPS", "url": "/posts/rotate-sops-encryption-keys/", "categories": "utilities", "tags": "sops, age, flux, kubernetes", "date": "2023-03-05 09:00:00 -0600", "snippet": "If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age,...", "content": "If you‚Äôve been encrypting your secrets with SOPS and Age you know how useful it is to keep your secrets safe from prying eyes. If you‚Äôre not familiar with encrypting your secrets with SOPS and Age, I highly recommend checking out a post I did a while back that shows you how easy it is to encrypt your secrets and even hide them in plain sight in a Git repo.I am happy (and relieved) that I started doing this for all of my secrets.This works great, until you need to rotate your encryption key that‚Äôs used to encrypt your secrets. I use FLUX for GitOps which helps me deliver changes to my Kubernetes cluster via code and since I can commit my infrastructure, I can also commit my secrets as code too (SOPS, or Secrets Operations).This means that all of my secret files (typically secret.sops.yaml) are all encrypted using my key.But what happens when I need to change the key, either for good security hygiene or because it was compromised? The short answer is, there‚Äôs no easy way other than writing a little bit of code.Scripting it with BashFirst you‚Äôll need to generate a new age file withage-keygen -o age.agekeyThis will output a age.agekey file.Take note of this location.Then you‚Äôll want to execute this script in the folder where you have secrets that need to be updated.This script isn‚Äôt anything ground breaking but hopefully it will help you update all of your secrets without having to go and manually change them yourself.#!/bin/bash# Define the paths to the old/current and new age key filesSOPS_AGE_KEY_FILE=~/.config/sops/age/keys.txtSOPS_AGE_KEY_FILE_NEW=~/.config/sops/age/age.agekey# Define the commands to decrypt and encrypt the fileDECRYPT_COMMAND=\"sops --decrypt --age \\$(cat $SOPS_AGE_KEY_FILE |grep -oP \\\"public key: \\K(.*)\\\") --encrypted-regex '^(data|stringData)$' --in-place\"ENCRYPT_COMMAND=\"sops --encrypt --age \\$(cat $SOPS_AGE_KEY_FILE_NEW |grep -oP \\\"public key: \\K(.*)\\\") --encrypted-regex '^(data|stringData)$' --in-place\"# Find all the *.sops.yaml files recursively in the current directory and apply the decrypt and encrypt commands to themfind . -name \"*.sops.yaml\" -type f -print0 | while IFS= read -r -d '' file; do eval \"$DECRYPT_COMMAND $file\" eval \"$ENCRYPT_COMMAND $file\"doneIt works like this: SOPS_AGE_KEY_FILE is the path to your existing keys.txt or age.agekey file SOPS_AGE_KEY_FILE_NEW is the path to your new age.agekey file. It will look for files matching *.sops.yaml recursively and then decrypt the file using the old key, and encrypt it using the new key.After running this script you should see all of your secrets now encrypted with the new key! You can now replace your old key file with your new one so that SOPS_AGE_KEY_FILE is referencing. You should test decrypting your secrets before saving them.sops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' secret.sops.yamlUpdating your FLUX Secret in KubernetesIf you are able to see the decrypted secret, you are all set as far as the ket goes.Another thing you‚Äôll need to do is delete your old secret in Kubernetes and replace it with this new one so that your secrets can be decrypted in your cluster!kubectl delete -n flux-system secrets sops-ageThen create new secret from the new filecat age.agekey |kubectl create secret generic sops-age \\--namespace=flux-system \\--from-file=age.agekey=/dev/stdinNow you should be all set! Be sure to keep your new age.agekey somewhere safe.Join the conversationI wrote up a quick post on how to rotate your SOPS encryption key and update all of your secrets at once! Great if you&#39;re using SOPS with Kubernetes.https://t.co/iME1iS4Kpl&mdash; Techno Tim (@TechnoTimLive) March 6, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Configuring VLANs, Firewall Rules, and WiFi Networks - UniFi Network Application", "url": "/posts/vlan-firewall-unifi/", "categories": "homelab", "tags": "unifi, vlan, network, hardware", "date": "2023-03-04 09:00:00 -0600", "snippet": "What is a VLAN and How Do They Help?Today we‚Äôre going to cover setting up VLANs using UniFi‚Äôs network controller.We‚Äôll set up a VLAN, from start to finish, which includes creating a new network, co...", "content": "What is a VLAN and How Do They Help?Today we‚Äôre going to cover setting up VLANs using UniFi‚Äôs network controller.We‚Äôll set up a VLAN, from start to finish, which includes creating a new network, configuring a wireless network that uses VLANs, and then we‚Äôll set up firewall rules to make sure we‚Äôre keeping our network safe. If you think VLANs are only for the enterprise, you‚Äôre wrong, I will show you how they are helpful at home too.üì∫ Watch VideoSo what‚Äôs a VLAN? A VLAN or Virtual Local Area Networks, is a group of devices, computers, or servers that communicate with each other as if they are on the same physical LAN, but they are actually located on separate physical LAN segments.VLANs can be created by configuring a managed network switch to segment the network into different broadcast domains.So why are VLANs important, even to the home user? VLANs are important for security. They can help isolate sensitive data and systems from the rest of your network, improving security by preventing unauthorized access. VLANs are important for performance. VLANs can be used to separate network traffic into different segments, reducing network congestion and improving overall performance. VLANS are important for management. VLANS can be used to simplify network management by grouping devices based on location, department, or even function making it much easier to configure, monitor, and troubleshoot. VLANs give you flexibility. VLANS allow for network changes and reconfigurations without physical changes to your network infrastructure saving you time and money, and we all want to save that, right? So what‚Äôs not to love about VLANs if they give you greater control over network traffic, help optimize network performance, give you better security, and give you management and flexibility?Well, for me it was complexity and knowing where to start.HardwareUbiquiti UniFi 6 Lite Access Point - https://l.technotim.live/ubiquitiUniFI UDM SE - https://l.technotim.live/ubiquitiUniFi UDM Pro - https://l.technotim.live/ubiquiti(Affiliate links are included in this description. I may receive a small commission at no cost to you.)How to Create a VLAN with UniFiA list of common VLANs in UniFi Network Application Navigate Settings Choose Networks Choose ‚ÄúCreate New Network‚Äù Name it whatever we like (IoT) Choose something descriptive Choose your router (if applicable), but I wouldn‚Äôt offload routing unless you know what you‚Äôre doing. I typically uncheck auto scale network and define it myself We‚Äôll choose the host address and netmask While we‚Äôre at it we should also choose manual for the advanced section Choose a VLAN Id I typically match the 3rd octet in my case that would be 100 If you‚Äôre using Apple devices or Chromecast (or similar devices) on this network, you‚Äôll want to turn on IGMP snooping &amp; Multicast DNS DHCP Mode - you‚Äôll want to keep as DHCP server For DHCP Range you‚Äôll want to choose the beginning and end of your range.Can be anything within range.At home I usually start at 100 so I know which devices are using DHCP at a glance. There are other options here that you don‚Äôt really need to change but if you do, change them to your likingCongrats you just created your first VLAN! üéâCreating Wireless Network for a VLANA list of common WiFI networks in UniFi Network ApplicationOnce we‚Äôve created our VLAN, we can now add this to a wireless network.This is perfect for IoT devices or really any VLAN that you want to use over your wireless network. First, we‚Äôll go to Settings, then WiFi Then choose create new WiFi Network We‚Äôll name the network and give it a password Then we‚Äôll choose the Network it belongs to (IoT) In the network list we can see our newly created network! You can make any other adjustments you need to your wireless network, but I am going to keep the defaults. Then we‚Äôll hit applyIf you check your access points, you can now see this wireless network being set up and provisioned with the new config that contains our new WiFi network that is bound to our VLAN!Assigning a VLAN to a Switch portUniFi Network application port managementYou can now assign this to one of your switch post by going into your switch and assigning it this VLAN / VLAN IDChoose the new VLAN and let your device get a new DHCP address from the new VLAN. You should expect to see an IP in the range that we set above.Once you choose once we assign it, let‚Äôs connect a device and test it out.Connect a device, check its IP, ping google, then ping another device on another VLAN.Uh-oh!UniFi allows inter VLAN communication out of the box.I guess this was a conscious decision from them to make things easier, but it does make your networks open to other networks.We can fix that, with a firewall rule!Configuring a Network ProfileA list of common WiFI networks in UniFi Network ApplicationBefore we set up our firewall rules, first let‚Äôs create a profile.Profiles are a simple way to group items or alias them.This comes in handy later when creating firewall rules. Navigate to Profiles Create a new Profile Name it something like ‚Äú(VLAN NAME) Only‚Äù Set type to IPv4 Address/Subnet Add all of your other VLANs 192.168.0.0/24 (this is the default network) 192.168.10.0/24 (this is my ‚ÄúTrusted‚Äù network) Again, this Profile is for all other VLANs, not our new VLAN we just created.Configuring Firewall RuleIn order to block inter VLAN Communication we‚Äôll need to set up some firewall rules.The pattern I usually follow is blocking all traffic from one VLAN destined to all other VLANs.This can be done by creating Profiles. Navigate to Firewall &amp; Security Choose the Type For inter VLAN communication you‚Äôll want to choose ‚ÄúLAN In‚Äù Give your Rule a description, I usually follow the convention Block thing to other thing e.g. Block IoT to ALL Be sure this applies before predefined rules for Action, choose ‚ÄúDrop‚Äù For Source Type, Choose ‚ÄúNetwork‚Äù For Network choose your new VLAN e.g. ‚ÄúIoT‚Äù For Destination choose ‚ÄúPort/IP Group‚Äù For IPv4 Address Group choose ‚ÄúIoT Only‚Äù (this is the Profile we created above) For Port Group choose ‚ÄúAny‚ÄùThis rule will block all communication that that originates on your IoT VLAN to all other VLANs (IoT Only).You‚Äôll also want to be sure that this rule applies after every rule that you want to allow in your list of Firewall rules. Navigate to Firewall &amp; Security Check rule order Be sure that any rule you create that Allows / Accepts is above this rule that Blocks / Denies.TestingBe sure to test all of your firewall rules!Once you have these rules in place, I highly recommend you test your firewall rules.Some examples of things you should test Can you communicate with the IoT VLAN from your Trusted VLAN? Can you communicate with the Trusted VLAN from your IoT VLAN? Can you communicate with the gateway (192.168.100.1) from your IoT VLAN? Can you communicate with DNS from your IoT VLAN?Checking these types of things will help you verify that your network rules are being applied properly.Repeat these tests anytime you make changes.Wrapping upAt this point you should have a new VLAN that works on your WiFi access points, your network ports, and should have firewall rules in place to prevent unauthorized access! You can simply repeat this process for every new VLAN that you need! Have you set up VLANs yet?Join the conversationToday I decided to share how I set up my VLANs, Firewall rules, Wireless Networks, and Network Security. üëâhttps://t.co/SOGBrsmKXK#vlan #unifi #homelab pic.twitter.com/x2LovlQVd4&mdash; Techno Tim (@TechnoTimLive) March 4, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The Ultimate Guide to Wake on LAN for Windows, MacOS, and Linux", "url": "/posts/wake-on-lan/", "categories": "utilities", "tags": "wol, windows, mac, linux, network, network, wake-on-lan", "date": "2023-02-19 09:00:00 -0600", "snippet": "What is Wake on LAN and why is it so hard?After releasing my video on the PiKVM I realized that there was so much confusion about Wake on LAN, and rightfully so, that I decided to put together this...", "content": "What is Wake on LAN and why is it so hard?After releasing my video on the PiKVM I realized that there was so much confusion about Wake on LAN, and rightfully so, that I decided to put together this guide on how to configure Wake on LAN on any machine. Wake on LAN (WoL) is a networking standard that allows a computer to be turned on by sending a network packet. The client sends a special packet (sometimes referred to as a ‚Äúmagic packet‚Äù) and the remote machine will wake up either from a cold power state or from sleep.This is where it starts to get complicated because different hardware manufactures have implemented different controls in BIOS to enable or disable this, and to make even more complex operating systems like Windows, macOS, and Linux have also implemented their own way to wake the machine up when it‚Äôs sleeping or in a low powered state.I am just going to throw this out there, Wake on LAN is hard.Since there are many different combinations I will try to cover how to configure your machines wake up successfully regardless of hardware, operating system, and power state.Preparing your hardware for Wake on LANIn order to wake your machine up, we have to be sure that WoL features are turned on in the BIOS and that other features are disabled.Since I cannot test every single BIOS out there, I am going to use my machine as an example for the types of options you will need to enable or disable.Most of the options should be named similarly however where it is located in your BIOS will depend on your manufacturer.First, you‚Äôll need to get into the BIOS of the machine, this is typically done by pressing a key at book like f2 or del but varies by machine.Once you‚Äôre in you‚Äôre in we‚Äôll start changing some settings.Power settingsYou‚Äôll want to look around for something similar to power settings.If you do not see these options in your power settings, it could be in advanced, networking, or onboard devices.Power settings menu for Intel NUC.This will look different for your machine but the idea is still the sameHere are some things to look for: Deep S4/S5 Sleep - You‚Äôll want to disable this, otherwise only the power button will wake the machine which will disable Wake on LAN Wake on LAN from S4/S5 - You‚Äôll want to enable this setting and if it has an option choose Power on - Normal Boot Wake System from S5 - You‚Äôll want to disable this.This is basically an alarm clock for your machine.There‚Äôs no need to enable this unless you want set a time for it to turn on every day.I‚Äôve used this in the past as a contingency plan for some of my servers in case they were powered off accidentally. I would set an alarm for 12 AM. USB S4/S5 Power - I typically disable this if it‚Äôs a server since nothing should be plugged in but if it‚Äôs a desktop with USB devices you want powered you can turn it on safely. Wake on LAN - enable this might sound obvious but some older systems have an option that says exactly that however newer systems have options for waking in all of the different sleep states. What to do when AC Power is restored - This is optional but I usually set it to Stay Off if it‚Äôs a desktop, Power On if it‚Äôs a server that should always be on, and Last power state if it‚Äôs something like a machine that I wake seldomly.There is one exception, which is if you have a way to toggle the power remotely too.I have a USP PDU Pro from UniFi that I can toggle all of my servers on and off.If you are able to toggle them on and off, the best setting is Power On, that way you have a way to power them on, even if they were gracefully shut down previously. Another quick check you can do is power down the machine and check to be sure the network light is lit up on your NIC.If it‚Äôs not, this means Wake on LAN is not enabled on your machine and you‚Äôll have to find the option in your BIOS to make it work.Bare Metal Wake upIf you don‚Äôt have an operating system on your machine yet, you should be able to wake up the machine over the network now.If you do have an operating system on your machine, another way you can test a bare metal / cold boot wake is by pulling the power on the machine and then plugging it back in.The reason this should work is because modern operating systems might not fully shut down (they go into a sort of sleep) or might disable WoL on the NIC when shutting down.We‚Äôll fix this in the next section.Waking up a Windows machineAfter you enabled Wake on LAN in the BIOS, and verified you see the light on your NIC blinking when you power off your machine, we can now enable Wake on LAN at the operating system level for Windows.This will work on all modern versions of Windows (Windows 10 and Windows 11).Device managerFirst we‚Äôll want to open the Device Manager.You can do this from the UI or from a command promptdevmgmt.mscBe sure to select the network card that you use to connect to your network. Once open you‚Äôll want to expand Network adapters and find your network adapter, then right click and choose Properties Then choose the Power Management tab and be sure that all of these options are enabled Allow the computer to turn off this device to save power Allow this device to wake the computer Only allow a magic packet to wake the computer. Power Management options for your network adapter.Then we‚Äôll need to verify a few more settings.These settings may or may not exist and depend on your network adapter manufacturer. Click on the Advanced Tab for your Network Adapter Find Wake on Magic Packet and set it to Enabled Find WOL &amp; Shutdown Link Speed and set it to 10 Mbps You‚Äôll want to be sure that your switch supports this speed, otherwise Auto should be fine Click OKYou should check to see if Wake on LAN works before proceeding to the next step since this might not be necessary with your machine.Fast StartupAnother Windows Feature that can prevent a machine from shutting down properly to allow Wake on LAN is Fast Startup.This disables hibernation.I recommend testing to see if Wake on LAN works before disabling this.First, we‚Äôll need to open the Power Control Panel.You can do this from the UI or from a command promptpowercfg.cplThen we‚Äôll need to change some settings Click Choose what the power buttons do from the left menu Click Change settings that are currently unavailable Uncheck Turn on fast startup (recommended) Click Save changesYou should now check to see if Wake on LAN works for your machine.Waking up a Linux machineAfter you enable Wake on LAN in the BIOS, and verified you see the light on your NIC blinking when you power off your machine, we can now enable Wake on LAN at the operating system level for Linux.This sounds odd but I have found that machines (especially Linux) need WoL turned on for each NIC.Install ethtool if you don‚Äôt have it alreadysudo apt updatesudo apt install ethtoolFirst check to see if WoL is supported by your NICip a # this will list all of your NICssudo ethtool eno1 # replace with one of the NICs you want to checkThis should output something similar toSettings for eno1: Supported ports: [ TP ] Supported link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Supported pause frame use: No Supports auto-negotiation: Yes Supported FEC modes: Not reported Advertised link modes: 10baseT/Half 10baseT/Full 100baseT/Half 100baseT/Full 1000baseT/Full Advertised pause frame use: No Advertised auto-negotiation: Yes Advertised FEC modes: Not reported Speed: 1000Mb/s Duplex: Full Auto-negotiation: on Port: Twisted Pair PHYAD: 1 Transceiver: internal MDI-X: on (auto) Supports Wake-on: pumbg Wake-on: g Current message level: 0x00000007 (7) drv probe link Link detected: yesYou‚Äôre looking for Supports Wake-on: pumbg with at least the letter g in the string.This means that the NIC does support WoL for a magic packet, which is a good thing.If you don‚Äôt see this here, don‚Äôt worry we‚Äôll fix it in netplanUsing NetplanThere are lots of outdated commands you‚Äôll find on the internet that won‚Äôt work or will partially work so I advise that you only do this with netplan.If you don‚Äôt have netplan installed (Debian, etc‚Ä¶) skip to the next section.To edit your netplansudo nano /etc/netplan/01-netcfg.yaml # replace with your netplan yamlOnce here, you‚Äôll see your network settings.You‚Äôll want to turn on wakeonlan in this yaml for each NIC.For example if you have 2 NICs, eno1 and enp2s0 you would add it in both places under that key.# This file describes the network interfaces available on your system# For more information, see netplan(5).network: version: 2 renderer: networkd ethernets: eno1: dhcp4: yes wakeonlan: true enp2s0: dhcp4: yes wakeonlan: trueOnce this is set, you‚Äôll want to apply your netplan.sudo netplan applyThen we‚Äôll want to shutdownsudo shutdown -P nowNow we should be able to wake up the machine using WoL from a remote machine.Without Netplan (Debian, etc‚Ä¶)Since you don‚Äôt have netplan we‚Äôll have to create a service and enable it.Do not do this step if you configure it with netplan.Find the path to ethtoolwhich ethtoolIn my case it‚Äôs at /usr/sbin/ethtool but your may vary.Nest we‚Äôll create a file at /etc/systemd/system/wol.servicenano /etc/systemd/system/wol.serviceIn this file add the following[Unit]Description=Enable Wake On LAN[Service]Type=oneshotExecStart = /usr/sbin/ethtool --change eno1 wol g[Install]WantedBy=basic.targetYou‚Äôll want to be sure to change your path for ethtool as well eno1 to the name of your NICThen we‚Äôll need to enable the servicesudo systemctl daemon-reloadsudo systemctl enable wol.serviceThen we can check to be sure out service is startedsystemctl status wolThen we‚Äôll want to shutdownsudo shutdown -P nowNow we should be able to wake up the machine using WoL from a remote machine.Waking up a MacWaking up a Mac is pretty easy, the easiest of them all.The most challenging part is finding the option in System Preferences.For a Macbook: Open System Preferences and search for power Click on Power Nap in Battery You‚Äôll see Wake for network access here you can choose whether you want to wake up Always or Only on Power Adapter.Either of these options should be fine.For all other Macs you‚Äôll want to search System Preferences for another option. Search for ‚ÄúEnergy Saver‚Äù Here you‚Äôll see an option to Wake for network access.Be sure this is checkThis option might appear different in different versions of macOS and it also varies by form factor, but you‚Äôll want to be sure that the ‚ÄúWake for network access‚Äù option is turned onInstalling a Wake on LAN clientIn order to wake up a remote machine machine up, you will need a tool that can send a wake on LAN packet to the remote machine.Windows Wake On LAN CLientI am a fan of doing this in a terminal however a decent Windows utility with a GUI is WakeOnLAN.It‚Äôs also open source and hosted on GitHub.After installing it and configuring a machine to wake you should be able to wake your machine if it is on the same network and you‚Äôve followed the other steps that are outlined in this guide.WakeOnLAN is an open source Windows utility that has a nice GUILinux Wake on LAN clientI usually prefer installing a command line tool to wake machines up over the network from a Linux machine and I typically using wakeonlan an open source utility that‚Äôs simple to use.To install it on a Debian-like system:sudo apt updatesudo apt install wakeonlanOnce it‚Äôs installed you can now wake machines on the same network by using the command: sudo wakeonlan 00:11:22:33:44:55If your machine is on another network and you can reach the broadcast IP, you can supply it in your command sudo wakeonlan -i 192.168.2.255 00:11:22:33:44:55Be sure to replace the mac address and broadcast IP above with the mac address of the remote machine and set the broadcast IP if on a different network.macOS Wake on LAN clientTo instal a client for macOS it‚Äôs very simple using brewbrew install wakeonlanOnce it‚Äôs installed you can now wake machines on the same network by using the command: wakeonlan 00:11:22:33:44:55If your machine is on another network and you can reach the broadcast IP, you can supply it in your command wakeonlan -i 192.168.2.255 00:11:22:33:44:55Be sure to replace the mac address and broadcast IP above with the mac address of the remote machine and set the broadcast IP if on a different network.Wrapping upAt this point you should be able to power on any machine from any machine on your network. One piece of advice is if you are using VLANs you‚Äôll want to b sure you are sending the WoL packet from the same network, otherwise you‚Äôll have to be sure that you can reach and target the right broadcast IP from the network you are on.As I mentioned in the beginning of this post, Wake on LAN is hard however if you follow these steps for each machine type you should be able to enjoy reliably waking up your machine remotely over the network.Join the conversationDay 252 #100daysofhomelab A day late, but I just wrapped up my Ultimate Guide to Wake on LAN for Windows, MacOS, and Linux! https://t.co/xYMVDoyuo9&mdash; Techno Tim (@TechnoTimLive) February 19, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Using the Raspberry Pi PiKVM with Multiple Machines", "url": "/posts/pikvm-at-scale/", "categories": "homelab", "tags": "pikvm, kvm, raspberry-pi, hardware, arch, homelab, linux", "date": "2023-02-18 09:00:00 -0600", "snippet": " If you‚Äôre looking to configure the TESmart switch with PiKVM, I finally figured it out and you can read all about it here.What is the PiKVM?If you don‚Äôt know what a KVM switch is, it‚Äôs a device t...", "content": " If you‚Äôre looking to configure the TESmart switch with PiKVM, I finally figured it out and you can read all about it here.What is the PiKVM?If you don‚Äôt know what a KVM switch is, it‚Äôs a device that allows you to connect multiple computers to one device which allows you to control them with a single keyboard, monitor, and mouse.They‚Äôre relatively cheap unless you‚Äôre looking for an IP based one that will let you connect over the network.IP KVMs are really expensive, that is until the PiKVM came along. The PiKVM is a Raspberry Pi-based KVM switch, which allows you to remotely control a computer using a keyboard, a web browser, and mouse from anywhere in the world.It runs a web server that lets you connect to any computer connected to it and remote control it as if you‚Äôre sitting right in front of it, without plugins or installing any agents on the device. It‚Äôs much more capable than remote controlling it using a remote desktop client, it can even let you remote control a machine before it boots to let you change things in the bios, or even reformat and reinstall your operating system remotely.This is all great except for one small thing, unlike a traditional KVM that lets you control multiple devices, the PiKVM is really meant for remote controlling just one device.The PiKVM is built with just one HDMI input and one keyboard mouse input while traditional KVMs have multiple inputs for multiple clients.So how can we scale the PiKVM to connect it to more devices so that we aren‚Äôt stuck moving it from machine to machine each time we need to remote control one of our other devices?üì∫ Watch VideoThe little LCD is both cute and functionalYou can build a PiKVM yourself by purchasing the PiKVM v3 HAT which is a great choice if you already have a raspberry pi4 and are willing to build it yourself.Or if you have a Pi Zero you can even build it using some inexpensive parts and without soldering.But chances are you have neither since raspberry pis are impossible to find and buying a pre-assembled kit is the only option.It was for me and that‚Äôs what I ended up doing.I purchased the PiKVM v3 pre-assembled which comes with a Raspberry Pi 4 2GB model, 32GB micro SD card, power supply, an HDMI cable, a USB C to USB A cable, and a nice case.The steel case is solid and feels sturdy and industrial.The PiKVM has lots of connections, connections for power, USB devices, mouse and keyboard emulation, RJ45 to serial connection, HDMI, and even an RJ45 connector for ATX power which lets me hook this up to a motherboard to power it on and off remotely.The other cool thing you get with the pre-assembled kit is the little LCD screen that shows system information and a cute cat when it boots. It comes pre-flashed with PiKVM installed and ready to go.Oh, it runs arch BTW.I had to let you knowSponsorA HUGE THANKS to Micro Center for sponsoring today‚Äôs content.New Customer Exclusive ‚Äì Free 256GB SSD: https://micro.center/18lShop AMD Ryzen 5 3600 &amp; Gigabyte B450M Combo Deal: https://micro.center/69dCheck out Micro Center‚Äôs Custom PC Builder: https://micro.center/d35Submit your build to Micro Center‚Äôs Build Showcase: https://micro.center/dswPiKVM at ScaleBut before we connect everything, remember when I said I wanted to connect it to more than one device? Well, I wanted to connect it to 8x times that, yes 8 devices.I found this HDMI KVM switcher with a USB hub that I thought would be perfect for it. This TESmart allows you to connect up to 8 devices with video and USB and has a built-in USB hub.It also has an RJ45 port that allows me to change the input over IP and that‚Äôs it. It‚Äôs not an IP KVM otherwise I would need the PiKVM, but being able to switch the input over IP is all I needed to automate it with the PiKVM.I thought this device was perfect for remote controlling some of my servers considering it is rack mountable.However there was just one catch that would almost ruin this entire project that I didn‚Äôt know about yet.The Problems AheadI tested PiKVM on my workbench with this old intel NUC and it worked fine.I was able to remote control it and even power it on and off using Wake on LAN.I chalked it up as a success and started moving everything into my server rack.It might not seem like it, but mounting this HDMI KVM Switch took quite some time.I had to run HDMI cables and USB B cables to and from all of my devices that I wanted to remote control.I started running the wires and wiring up 4 devices, just to be sure it worked with my existing machines before wiring up all 8.But, I bet you‚Äôre asking why I just don‚Äôt use IPMI that I have on my servers? Well, this isn‚Äôt to control my servers, it‚Äôs to control my rack mounted PC conversion along my new Intel NUC cluster.None of these machines have IPMI so that‚Äôs why I needed an IP KVM solution like the PiKVM.I decided to put my PiKVM on this little shelf for now but I‚Äôll probably find somewhere a little more permanent to place it. Once I had everything hooked up, that‚Äôs when the troubles began.I could remote into some of the NUCs running Linux and the PC conversion, but not the ones running Windows.I thought for sure that it was something with my connection so I checked all of the connections over and over again.It was right around that time that the creator of PiKVM Max Devaev reach out to me asking me how I was liking the PiKVM and to let him know if I ran into any troubles because he was interested in advanced use cases for the PiKVM.I‚Äôm not sure why he thought I was going to be using this in an advanced way‚Ä¶. But he was right‚Ä¶This was my first attempt with a TESmart SwitchI worked with Max for a few days on and off over discord.He sent snippets of code for me to run and even gave me lots of EDIDs to try. EDIDs (Extended Display Identification Data) are a signature or metadata that tell a device how to work with the monitor.Sometimes we could get the Linux machines running on the TESmart switch working, but not the Windows machines. And other times we could get the Windows machines working but not the Linux machines.We ended up discovering that the TESmart HDMI switch would ‚Äúpoison‚Äù the PiKVM and send the TESmart EDID rather than the one from the PiKVM.TESmart EDID:Section \"Monitor\" Identifier \"ITE-FHD\" ModelName \"ITE-FHD\" VendorName \"ITE\" # Monitor Manufactured week 12 of 2010 # EDID version 1.3 # Digital Display DisplaySize 620 340 Gamma 2.20 Option \"DPMS\" \"false\" Horizsync 13-46 VertRefresh 23-61 # Maximum pixel clock is 170MHzPiKVM EDIDSection \"Monitor\" Identifier \"PiKVM\" ModelName \"PiKVM\" VendorName \"LNX\" # Monitor Manufactured week 28 of 2011 # EDID version 1.3 # Digital Display # Display Physical Size not given. Normal for projectors. Gamma 2.20 Option \"DPMS\" \"false\" Horizsync 15-46 VertRefresh 59-61 # Maximum pixel clock is 150MHz #Not giving standard mode: 256x160, 60HzAt this point, I had to cut my losses and go with a smaller, non rack mountable, but more compatible EZCOO KVM Switch and, I have to say, it‚Äôs fantastic.A New HDMI Switch Enters the ChatThis is the EZCoo HDMI KVM switch. It‚Äôs a 4 port HDMI KVM Switch that allows 4 HDMI ports to be switched to a single display. This single display will be the PiKVM.It also has a built- in USB 3 hub which is awesome for plugging in USB devices that will connect to the machine when you switch the input.It has 4 HDMI inputs and 1 USB 3 input that you‚Äôll connect to each machine and has one HDMI out and one USB for keyboard and one for mouse.We won‚Äôt be using these specific USB ports because we‚Äôll be using mouse &amp; keyboard emulation in one plugged into a generic USB port.The real magic of this device is that it has a micro USB management port on the side that the PiKVM can use to control and toggle the inputs automatically, giving us a way to switch between all of our connected devices without having to manually press the input button.As nice as this device is, I really wish they made an 8 port rack mountable one because I want to control more than 4 devices without swapping them out or daisy chaining them, Which is why I wanted the TESmart switch in the first place.Oh, speaking of the TESmart, after working with Max for a while on this device he mentioned that this might work with the new v4 version of the PiKVM which just recently launched on Kickstarter.He said he was going to send one of their prototypes to test so, fingers crossed it works.I will be sure to create a v4 video once it‚Äôs released and hopefully it supports the TESmart switch.This EZCOO is small, compact, and 100% compatiblePutting it all togetherNow that I had everything working the way it should it was time to connect to each device through the web portal.Once connected, I can toggle between each of my devices here, from my first Intel NUC running Ubuntu, to my Second Intel NUC running Windows 10, to my third Intel NUC running Windows 11, to my PC conversion running Ubuntu server.And you can see that it‚Äôs pretty snappy. The latency is really low and I can even run HD videos no problem at all.If I do run into any latency issues or I am on a slow connection I can change the protocol and even the bitrate to something more fitting.But running HD videos probably isn‚Äôt the reason you want a KVM, it‚Äôs more likely that you want to have access to the machine while it boots, and here‚Äôs where it gets really awesome. The PiKVM is open and it‚Äôs totally hackable and there are some great plugins and drivers that allow you to customize the UI with those plugins. For instance I can shutdown this machine and then wake it up using a Wake on LAN packet to power it back on.Side note, I learned a ton about making Wake on LAN work for Windows and Linux and I will be updating my blogs with complete walk-throughs of how to enable it, but anyway If that wasn‚Äôt cool enough I can then get into the BIOS of this machine to make any changes that I want.I can change the boot order, change boot devices, overclock the machine and do anything that I couldn‚Äôt normally do without being right in front of the machine.I can even upload ISOs to the PiKVM and then attach them to the device virtually and boot from it to install any operating system! This lets me rebuild any of these machines no matter where I am all from a web browser.Want to install Linux on a machine that‚Äôs powered off, no problem.Just attach the virtual drive to the machine, send a wake on lan packet to wake it up, then boot from the virtual drive and install! You could also attach the ATX power control to the header of the motherboard if you like and power it on that way, but I have network access to all of my machines so I will use wake on lan.Plus, it‚Äôs super awesome to be able to wake devices up over the network. And here‚Äôs where it gets really awesome, remember how I said that my KVM also has a USB Hub? Well, I‚Äôve attached a 64GB USB drive to it with Ventoy installed that has every ISO I could ever need.As I switch inputs between machines it attaches the USB drive with Ventoy to each machine allowing me to install any operating system I want.You can make this even more powerful by adding a USB drive and VentoyBecause the PiKVM is hackable, I‚Äôve customized the GPIO menu to let me switch between devices, wake them up, wake them up on different NICs, and restart the kvmd service or the PiKVM itself. (See my config below) I should say that I didn‚Äôt really ‚Äúhack‚Äù it, this isn‚Äôt a ‚Äútechno tim‚Äù hack - there‚Äôs an overrides file that lets you customize most of the PiKVM so I didn‚Äôt go totally off the rails.It even has a web ui to give you terminal access to your PiKVM in case you aren‚Äôt able to use SSH, which is super handy if you‚Äôre mobile. But this little device has so many features already and the fact that the software is open source and continues to be updated makes this solution such a great investment for me.You can customize the menu however you like (my config below), here I added WoL for each network card and even a way to restart the PiKVM from the menuIs it worth it?So I bet you‚Äôre wondering if it‚Äôs worth it? I am going to break this down into 2 parts.Is it worth it to buy pre assembled? And is it worth it for remote control with a PiKVM. Well for me it is for a few reasons.First of all I can‚Äôt find a raspberry pi to assemble this myself, and if you consider it comes with a case, a fan, a 32GB micro sd, additional cables, and even a little LCD screen 100% ready to go for an additional 90 bucks? I would say it is.Now on to the tougher question, is it worth it to have a PiKVM at all? I would say yes for me, but for you it depends.The way I looked at it was that I was going to scale it to 8, which would divide the cost of a PiKVM and switch across 8 machines making it around 70 dollars per machine if you include all of the cables.PiKVM $259 + TESmart $299 / 8 = $70 per machineI‚Äôd say that it‚Äôs worth it for me to have remote access to that many machines for the life of each machine.But, I did have to downgrade to a smaller switch that only gives me access to 4 machines which is roughly 95 dollars per machine.PiKVM $259 + EZCOO $120 / 4 = $95 per machineThat‚Äôs a little bit higher, however it‚Äôs a much better value than remote controlling just one machine with the PiKVM, which would be the cost of the PiKVM.PiKVM $259 / 1 = $259 per machineHardwareHere are the items that I used during this project.PiKVM - https://pikvm.orgEZCOO - HDMI KVM Switch - https://amzn.to/3IyiIv1HDMI Cables - https://amzn.to/3SgJ34gUSB B Cables - https://amzn.to/3Eel0wUUSB C Cables - https://amzn.to/3k8vQhbUSB Flash Drive - https://amzn.to/3XI50u6TESmart Switch (not full compatible) - https://amzn.to/3YV0Gsi(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)PiKVM ConfigHere is my PiKVM config that I use.You will need to edit /etc/kvmd/override.yaml on your device and then restart the kvm service.kvmd: gpio: drivers: ez: type: ezcoo protocol: 2 device: /dev/ttyUSB0 wol_server0: type: wol mac: 1c:69:7a:ad:11:85 wol_server1: type: wol mac: 88:ae:dd:05:cf:09 wol_server2: type: wol mac: 88:ae:dd:05:c6:3b wol_server3: type: wol mac: a0:36:9f:4f:c4:b4 wol_server3a: type: wol mac: d8:50:e6:52:8e:c2 reboot: type: cmd cmd: [/usr/bin/sudo, reboot] restart_service: type: cmd cmd: [/usr/bin/sudo, systemctl, restart, kvmd] scheme: ch0_led: driver: ez pin: 0 mode: input ch1_led: driver: ez pin: 1 mode: input ch2_led: driver: ez pin: 2 mode: input ch3_led: driver: ez pin: 3 mode: input pikvm_led: pin: 0 mode: input ch0_button: driver: ez pin: 0 mode: output switch: false ch1_button: driver: ez pin: 1 mode: output switch: false ch2_button: driver: ez pin: 2 mode: output switch: false ch3_button: driver: ez pin: 3 mode: output switch: false wol_server0: driver: wol_server0 pin: 0 mode: output switch: false wol_server1: driver: wol_server1 pin: 0 mode: output switch: false wol_server2: driver: wol_server2 pin: 0 mode: output switch: false wol_server3: driver: wol_server3 pin: 0 mode: output switch: false wol_server3a: driver: wol_server3a pin: 0 mode: output switch: false reboot_button: driver: reboot pin: 0 mode: output switch: false restart_service_button: driver: restart_service pin: 0 mode: output switch: false view: table: - [\"#NUC1\", ch0_led, ch0_button, \"wol_server0 | WoL\"] - [\"#NUC2\", ch1_led, ch1_button, \"wol_server1 | WoL\"] - [\"#NUC3\", ch2_led, ch2_button, \"wol_server2 | WoL\"] - [\"#PC\", ch3_led, ch3_button, \"wol_server3 | WoL-10g\", \"wol_server3a | WoL-1g\"] - [\"#PiKVM\", \"pikvm_led|green\", \"restart_service_button|confirm|Service\", \"reboot_button|confirm|Reboot\"]Wake on LANIf you‚Äôre having issues with Wake on LAN, see The Ultimate Guide to Wake on LAN for Windows, MacOS, and LinuxJoin the conversationThe last few weeks I have been trying to figure out how to scale the PiKVM to more than one device. It took a lot of twists and turns but I finally figured out a solution, even if the first attempts failed... Check it out ‚¨áÔ∏èhttps://t.co/4qgwcmPwMi#raspberrypi #homelab pic.twitter.com/ljxpIE3cYx&mdash; Techno Tim (@TechnoTimLive) February 18, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source filesü§ù Support me and help keep this site ad-free!" }, { "title": "Test Your Internet Speed from the Linux Terminal with fast", "url": "/posts/fast-internet-test-cli/", "categories": "utilities", "tags": "fast, cli, linux, open-source", "date": "2023-02-05 09:00:00 -0600", "snippet": "What is FAST.com?FAST.com is speed test gives you an estimate of your current Internet speed. It was created by Netflix to bring transparency to your upload / download speeds and to see if your IS...", "content": "What is FAST.com?FAST.com is speed test gives you an estimate of your current Internet speed. It was created by Netflix to bring transparency to your upload / download speeds and to see if your ISP may be prioritizing traffic.I‚Äôve run this quite a bit in a browser to do a quick spot check or my speeds, but I‚Äôve never had a great tool to check this from some of my Linux machines. Let me clarify, some of my Linux servers that do not have a browser - that‚Äôs until I found this utility, fast.fast is an open source utility to run internet speed checks from machines that don‚Äôt have a browser, from the terminal, all in a small, zero dependency binary.You can read more about it on the GitHub repo.Installing fastWe‚Äôre going to use curl so you‚Äôll want to be sure you have it installedcurl -VThis should return something similar to the followingcurl 7.68.0 (x86_64-pc-linux-gnu) libcurl/7.68.0 OpenSSL/1.1.1f zlib/1.2.11 brotli/1.0.7 libidn2/2.2.0 libpsl/0.21.0 (+libidn2/2.2.0) libssh/0.9.3/openssl/zlib nghttp2/1.40.0 librtmp/2.3Release-Date: 2020-01-08Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftpFeatures: AsynchDNS brotli GSS-API HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP UnixSocketsThen we‚Äôll want to download the latest fast binary by runningLATEST_VERSION=$(curl -s \"https://api.github.com/repos/ddo/fast/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')curl -L https://github.com/ddo/fast/releases/download/v${LATEST_VERSION}/fast_linux_$(dpkg --print-architecture) -o fastIf you want to use wget instead of curl, you can run the followingLATEST_VERSION=$(curl -s \"https://api.github.com/repos/ddo/fast/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')wget https://github.com/ddo/fast/releases/download/v${LATEST_VERSION}/fast_linux_$(dpkg --print-architecture) -O fastThen we‚Äôll want to make it executable by runningchmod +x fastThen we can run a speed test by running./fastThis should return something similar to the following‚ûú ~ ./fast -&gt; 477.72 MbpsThat‚Äôs it! You can now run an internet speed test from the Linux cli without a browser! What‚Äôs your download speed?LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Updating Flux Installation Using the Latest Binary from CLI", "url": "/posts/update-flux/", "categories": "kubernetes", "tags": "flux, devops, gitops, kubernetes, open-source", "date": "2023-02-03 19:00:00 -0600", "snippet": "What is Flux?Flux is a tool for keeping Kubernetes clusters in sync with sources of configuration (like Git repositories), and automating updates to configuration when there is new code to deploy. ...", "content": "What is Flux?Flux is a tool for keeping Kubernetes clusters in sync with sources of configuration (like Git repositories), and automating updates to configuration when there is new code to deploy. It‚Äôs open source and you can read more about it on the GitHub repo. Looking for a tutorial on how use this? Check out this video on how to use SOPS and Age for your Git Repos!Updating FluxWe‚Äôre going to use curl so you‚Äôll want to be sure you have it installedcurl -VThis should return something similar to the followingcurl 7.68.0 (x86_64-pc-linux-gnu) libcurl/7.68.0 OpenSSL/1.1.1f zlib/1.2.11 brotli/1.0.7 libidn2/2.2.0 libpsl/0.21.0 (+libidn2/2.2.0) libssh/0.9.3/openssl/zlib nghttp2/1.40.0 librtmp/2.3Release-Date: 2020-01-08Protocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftpFeatures: AsynchDNS brotli GSS-API HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP UnixSocketssudo apt update &amp;&amp; sudo apt install curlThen we‚Äôll want to download the latest Flux binary by runningcurl -s https://fluxcd.io/install.sh | sudo bashThen we‚Äôll want to be sure it‚Äôs installed properly by runningflux -vThis should return something similar to the followingflux version 0.39.0Next we‚Äôll need to locate our gotk-components.yaml file for flux in our git repo.For example, mine lives in clusters/cluster-01/baseclusters‚îú‚îÄ‚îÄ cluster-01‚îÇ¬†¬† ‚îú‚îÄ‚îÄ base‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ flux-system‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ gotk-components.yamlOne you locate gotk-components.yaml we‚Äôll patch it by using the following commandflux install --export &gt; clusters/cluster-01/base/flux-system/gotk-components.yamlAfter this file is updated, you can check to be sure it updated the correct file by runninggit diffYou should see something like the followingdiff --git a/clusters/cluster-01/base/flux-system/gotk-components.yaml b/clusters/cluster-01/base/flux-system/gotk-components.yamlindex 79576f0f..9c26b708 100644--- a/clusters/cluster-01/base/flux-system/gotk-components.yaml+++ b/clusters/cluster-01/base/flux-system/gotk-components.yaml@@ -1,6 +1,6 @@ --- # This manifest was generated by flux. DO NOT EDIT.-# Flux Version: v0.38.3+# Flux Version: v0.39.0 # Components: source-controller,kustomize-controller,helm-controller,notification-controller apiVersion: v1 kind: Namespace@@ -8,7 +8,7 @@ metadata: labels: app.kubernetes.io/instance: flux-system app.kubernetes.io/part-of: flux- app.kubernetes.io/version: v0.38.3+ app.kubernetes.io/version: v0.39.0 pod-security.kubernetes.io/warn: restricted pod-security.kubernetes.io/warn-version: latest name: flux-system@@ -23,7 +23,7 @@ metadata: app.kubernetes.io/component: notification-controller app.kubernetes.io/instance: flux-system app.kubernetes.io/part-of: flux- app.kubernetes.io/version: v0.38.3+ app.kubernetes.io/version: v0.39.0 name: alerts.notification.toolkit.fluxcd.io:if you see something other than the original gotk-components.yaml being updated, you might want to check the location of the file and try again.Once this is updated, you can simply commit and push this up and let GitOps do the rest!git add .git commit -m \"feat(flux): Upgraded flux to 0.39.0\" # replace with your veriongit pushLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Installing Mozilla SOPS Encryption Tool", "url": "/posts/install-mozilla-sops/", "categories": "utilities", "tags": "homelab, secops, mozilla, sops, cli, linux, open-source", "date": "2023-01-30 09:00:00 -0600", "snippet": "What is Mozilla SOPS?SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.It‚Äôs open source an...", "content": "What is Mozilla SOPS?SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.It‚Äôs open source and you can read more about it on the GitHub repo.Looking for a tutorial on how use this? Check out this video on how to use SOPS and Age for your Git Repos!InstallWe want to get the latest release of SOPS so we need to look at their github repo for the latest version.SOPS_LATEST_VERSION=$(curl -s \"https://api.github.com/repos/getsops/sops/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')Then we‚Äôll use curl to download the latest .debcurl -Lo sops.deb \"https://github.com/getsops/sops/releases/download/v${SOPS_LATEST_VERSION}/sops_${SOPS_LATEST_VERSION}_amd64.deb\"Then we‚Äôll want to install sops.deb along with any missing dependenciessudo apt --fix-broken install ./sops.debThen we‚Äôll clean up our downloadrm -rf sops.debThen we can test to make sure sops is working by running:sops -versionUninstallTo uninstall, it‚Äôs as simple as using apt to remove itsudo apt remove sopsLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Installing Age Encryption Tool", "url": "/posts/install-age/", "categories": "utilities", "tags": "homelab, secops, devops, age, cli, linux, open-source", "date": "2023-01-30 09:00:00 -0600", "snippet": "What is Age?age is a simple, modern and secure file encryption tool, format, and Go library. It features small explicit keys, no config options, and UNIX-style composability.It is commonly used in ...", "content": "What is Age?age is a simple, modern and secure file encryption tool, format, and Go library. It features small explicit keys, no config options, and UNIX-style composability.It is commonly used in tandem with Mozilla SOPS.It‚Äôs open source and you can read more about it on the GitHub repo. Looking for a tutorial on how use this? Checkout this video on how to use SOPS and Age for your Git Repos!InstallWe want to get the latest release of age so we need to look at their github repo for the latest version.AGE_LATEST_VERSION=$(curl -s \"https://api.github.com/repos/FiloSottile/age/releases/latest\" | grep -Po '\"tag_name\": \"v\\K[0-9.]+')Then we‚Äôll use curl to download the latest .tar.gzcurl -Lo age.tar.gz \"https://github.com/FiloSottile/age/releases/latest/download/age-v${AGE_LATEST_VERSION}-linux-amd64.tar.gz\"Then we‚Äôll want to extract age.tar.gztar xf age.tar.gzThen we‚Äôll move both binaries (age and age-keygen) to /usr/local/bin so we can use themsudo mv age/age /usr/local/binsudo mv age/age-keygen /usr/local/binThen we‚Äôll clean up our downloads and extractionsrm -rf age.tar.gzrm -rf ageThen we can test to make sure age and age-keygen are working by runningage -versionage-keygen -versionUninstallTo uninstall, it‚Äôs as simple as removing the binariessudo rm -rf /usr/local/bin/agesudo rm -rf /usr/local/bin/age-keygenLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Deploying Machines with MaaS and Packer - Metal as a Service + Hashicorp Packer Tutorial", "url": "/posts/metal-as-a-service-packer/", "categories": "maas", "tags": "homelab, packer, maas, hashicorp, canonical, ubuntu, proxmox, open-source", "date": "2023-01-28 08:00:00 -0600", "snippet": "MaaS or Metal as a service from Canonical is a great way to provision bare metal machines as well as virtual machines.MaaS allows you to deploy Windows, Linux, ESXi, and many other operating system...", "content": "MaaS or Metal as a service from Canonical is a great way to provision bare metal machines as well as virtual machines.MaaS allows you to deploy Windows, Linux, ESXi, and many other operating systems to your systems helping you to build a bare metal cloud.You can even use Packer from Hashicorp to configure custom images too! We‚Äôll cover all of this and more in this tutorial on how to install and configure MaaS from start to finish with Packer!üì∫ Watch VideoSponsorNew Customer Exclusive - $25 Off ALL Processors: https://micro.center/3siCheck out Micro Center‚Äôs Custom PC Builder: https://micro.center/wcxSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/dcmVisit Micro Center‚Äôs Community Page: https://micro.center/2vrInstalling MaaSMaaS can be installed via apt or snap.I had some issues with the apt version so I used snap for this install.snap installBe sure snap is installedsudo apt install snapdsudo snap install --channel=3.2 maasapt installsudo apt-add-repository ppa:maas/3.2sudo apt updatesudo apt install maasInstalling a Test Database(skip this step if you already have postgres in your environment)This should be used if you want to use MaaS test databasesudo snap install maas-test-dbtesting the databasesudo maas-test-db.psqlthen list databases you should see maasdb therepostgres=# \\lInitializing MaaSIf you are using the test database above, initialize MaaSsudo maas init region+rack --database-uri maas-test-db:///If you already have postgres in your environment you can initialize MaaS using your existing postgres service.Be sure to create the database, user, and assign that user permissions before running the init command.sudo maas init region+rack --database-uri \"postgres://username:password@192.168.0.100/maas\" # replace username /password / ip /db name if you don‚Äôt wand to store your secrets in your terminal‚Äôs history, consider using ENV variables:sudo maas init region+rack --database-uri \"postgres://$MAAS_DBUSER:$MAAS_DBPASS@$HOSTNAME/$MAAS_DBNAME\"Create admin accountsudo maas createadminHere you can choose to import your LaunchPad or GitHub public key using gh:githubusernameChecking MaaSsudo maas statusThe output should like something similar to this:bind9 RUNNING pid 1014, uptime 2 days, 10:52:40dhcpd STOPPED Not starteddhcpd6 STOPPED Not startedhttp RUNNING pid 1477, uptime 2 days, 10:52:23ntp RUNNING pid 1143, uptime 2 days, 10:52:37proxy RUNNING pid 1454, uptime 2 days, 10:52:25rackd RUNNING pid 1017, uptime 2 days, 10:52:40regiond RUNNING pid 1018, uptime 2 days, 10:52:40syslog RUNNING pid 1144, uptime 2 days, 10:52:37If you ever need to reinitialize MaaSsudo maas init regionConfiguring Packer ImagesInstall PackerGet key ringwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpgAdd keyringecho \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release --codename --short) main\" | sudo tee /etc/apt/sources.list.d/hashicorp.listadd Hashicorp Reposudo apt-add-repository \"deb [arch=amd64] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" Install Packersudo apt updatesudo apt install packerUpdate and install dependencies needed to build imagessudo apt updatesudo apt install qemu-utils qemu-system ovmf cloud-image-utils make curtain gitBuilding a custom image from canonical/packer-maasClone the canonical/packer-maas repogit clone https://github.com/canonical/packer-maas.gitcd packer-maascd ubuntusudo packer init ubuntu-cloudimg.pkr.hclsudo make custom-cloudimg.tar.gzcheck and change permissions of archive (change root to your username)ls -lsudo chown root:root ./custom-cloudimg.tar.gzUploading Packer image to MaaSecho your MaaS api key to your home directorysudo maas apikey --username=massadmin &gt; ~/api-key-fileYou can check with withcat ~/api-key-fileAuthenticate to MaaS with your api keymaas login massadmin http://localhost:5240/MAAS/api/2.0/ $(head -1 ~/api-key-file)Upload the custom image we made to MaaSmaas massadmin boot-resources create name='custom/cloudimg-tgz' title='Ubuntu Custom TGZ' architecture='amd64/generic' filetype='tgz' content@=custom-cloudimg.tar.gzChapters00:00 - What is MaaS (Metal as a Service) from Canonical?02:00 - Micro Center / $25 Off CPUs! (Sponsor)03:00 - Installing MaaS06:56 - Initial MaaS Configuration09:41 - Importing your SSH Key10:23 - Networking Configuration &amp; Discovery14:05 - PXE &amp; Network Boot with DHCP15:33 - Commissioning a Machine (Initial Discovery)18:45 - Power Types &amp; Wake on LAN (WOL)20:50 - Commissioning a Machine Part 2 (For real this time)24:00 - Deploying Ubuntu26:15 - SSH in to machine26:54 - Creating Custom Images with Hashicorp Packer33:40 - Uploading a Custom Image to MaaS38:05 - What do I think of MaaS from Canonical?39:57 - Stream Highlight - ‚Äú100 + 50 subs dropped ü´≥üé§‚ÄùJoin the conversationThis past week I learned how to solve the challenge of imaging bare metal machines. I settled on MaaS (Metal as a Service) and custom images with Hashicorp Packer. This is the missing link for automation in my #homelab Check out the video here üëáhttps://t.co/5rhHtwaLi4 pic.twitter.com/KgeYCgYzgt&mdash; Techno Tim (@TechnoTimLive) January 28, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Enable Nested Virtualization In Proxmox", "url": "/posts/proxmox-nested-virtualization/", "categories": "proxmox", "tags": "homelab, proxmox, virtualization", "date": "2023-01-21 09:00:00 -0600", "snippet": "What Is Nested Virtualization?Nested Virtualization is a feature that allows you to run a virtual machine within a virtual machine while still using hardware acceleration from the host machine.Put ...", "content": "What Is Nested Virtualization?Nested Virtualization is a feature that allows you to run a virtual machine within a virtual machine while still using hardware acceleration from the host machine.Put simply, it allows you to run a vm inside of a vm.Enabling Nested Virtualization In ProxmoxEverything we do will be done on the host system running Proxmox.Once enabled, the guest can take advantage of it.First we need to check to see if nested virtualization is enabled in Proxmox.If you‚Äôre running an Intel CPU run this command:cat /sys/module/kvm_intel/parameters/nestedIf you‚Äôre running an AMD CPU run this command:cat /sys/module/kvm_amd/parameters/nestedYou should see an output of Y or N.If N this means that nested virtualization is not enabled, so let‚Äôs enabled it!On the Proxmox host, run the following command as root:If you‚Äôre running an Intel CPU run this command:echo \"options kvm-intel nested=Y\" &gt; /etc/modprobe.d/kvm-intel.confIf you‚Äôre running an AMD CPU run this command:echo \"options kvm-amd nested=1\" &gt; /etc/modprobe.d/kvm-amd.conf Next reboot the systemrebootThen check to see if nexted virtualization is enabled on the Proxmox host:If you‚Äôre running an Intel CPU run this command:cat /sys/module/kvm_intel/parameters/nestedIf you‚Äôre running an AMD CPU run this command:cat /sys/module/kvm_amd/parameters/nestedYou should see Y this time.This means that you can now using virtualization inside of a VM, just be sure to set your VM‚Äôs processor accordingly! (use HOST for CPU type)LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The EASIEST way to Expand Your ZFS Pool in TrueNAS (But is it the Best?)", "url": "/posts/truenas-zfs-expand/", "categories": "truenas", "tags": "homelab, truenas, zfs, storage, open-source", "date": "2023-01-14 09:00:00 -0600", "snippet": "ZFS is a great file system that comes with TrueNAS and can meet all of your storage needs.But with it comes some complexity on how to manage and expand your ZFS storage pools.Over the last week I l...", "content": "ZFS is a great file system that comes with TrueNAS and can meet all of your storage needs.But with it comes some complexity on how to manage and expand your ZFS storage pools.Over the last week I learned all about storage pools and how to move them, expand them, and even what not to do when trying to grow your storage pool.Join me as I figure out how to move a 20 TB pool to my new storage server with 100 TB of raw data.üì∫ Watch Videoüì¶ Products in this video üì¶Seagate Exos 14TB Drives https://amzn.to/3kaQnkNSeagate IronWolf 8TB Drives https://amzn.to/3iGq3yHSee all of the storage I recommend in this kit!https://kit.co/TechnoTim/best-ssd-hard-drive-flash-storage(Affiliate links may be included in this description. I may receive a small commission at no cost to you.)Chapters00:00 - What are my options for expanding ZFS?00:25 - Use ZFS Snapshot Replication (My First Attempt)02:20 - Just Copy the Data to the New Pool (My Second Attempt)03:01 - Expand the Pool by Replacing All Disks (My Third Attempt)04:27 - Replacing All of the Drives &amp; Resilvering07:16 - Pool has Expanded!07:43 - My Beef with ZFS and Recommendations09:20 - Stream Highlight - This is how I got into this mess with ZFS‚Ä¶A clip used in this video was from Tom Lawrence‚Äôs channel. Thanks Tom!Join the conversationOver the last week I learned all about storage pools and how to move them, expand them, and even what not to do when trying to grow your storage pool.https://t.co/IoQKKKhEKm#truenas #zfs #nas pic.twitter.com/UFZF4hLSBc&mdash; Techno Tim (@TechnoTimLive) January 14, 2023LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim HomeLab Services Tour (Late 2022) - What am I Self-Hosting in my HomeLab?", "url": "/posts/homelab-services-tour-2022/", "categories": "homelab", "tags": "homelab, hardware, network, server, self-hosted, kubernetes, k3s, linux", "date": "2022-12-31 08:00:00 -0600", "snippet": "Wow, what a year of self-hosting! After showing off my Home Lab hardware in my late 2022 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I dec...", "content": "Wow, what a year of self-hosting! After showing off my Home Lab hardware in my late 2022 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which services I am running here at home.Today, we walk through everything I am hosting including: Dashboard, Hypervisor, Virtualization, Containerization, Network Attached Storage (NAS), DNS, Network Management, Home Security, Kubernetes, Kubernetes Storage, Docker, Reverse Proxy, Certificates, Monitoring, Logging, Syncing Data, File Sharing, Link Page, Link Shortening, Home Entertainment, Home Automation, Battery / UPS Monitoring, CMS, Static Site Generators, Dynamic DNS, CI/CD, Git Ops, Dev Ops, and many, many others.Enjoy the virtual tour!Worth mentioning, I have videos on almost every service mentioned in this video!üì∫ Watch VideoRelated VideosHere are most of the videos mentioned in this video: Techno Tim HomeLab Server Room Tour! (Late 2022) Self-Hosting Security Guide for your HomeLab Meet Heimdall, Your Homelab Application Dashboard Before I do anything on Proxmox, I do this first‚Ä¶ The FASTEST Way to run Kubernetes at Home - k3s Ansible Automation TrueNAS Scale Apps - Official, Unofficial, Docker, and Kubernetes High Availability Pi-Hole? Yes please! Using Pi-Hole for Local DNS - Fast, Simple, and Easy Guide Flux GitOps Tutorial - DevOps and GitOps for Kubernetes Wildcard Certificates with Traefik + cert-manager + Let‚Äôs Encrypt in Kubernetes Tutorial Beautiful Dashboards with Grafana and Prometheus - Monitoring Kubernetes Tutorial Network UPS Tools (NUT Server) Ultimate Guide Self-Hosted, DIY, Open Source Alternative to Linktree Meet keepalived - High Availability and Load Balancing in One Meet Grafana LOKI, a Log Aggregation System for EVERYTHING Meet Uptime Kuma, a Fancy Open Source Uptime Monitor for all your HomeLab Monitoring Needs Meet Jekyll - The Static Site Generatorüì¶ Gear in this video üì¶(Affiliate links are included in this description. I may receive a small commission at no cost to you.)KitWant to see all the gear in this video?Check out the kit here: https://kit.co/TechnoTim/techno-tim-homelab-tour-late-2022Rack &amp; Accessories 42u Rack https://amzn.to/3YIKlrq 18u Rack https://amzn.to/3WqNZVy D Ring Hooks https://amzn.to/3FSxk5Y 1u Brush Panels https://amzn.to/3hKNiaf 1u Rack Mount Full Depth Shelf https://amzn.to/3jrm5Kp Right Angle Extension Cord https://amzn.to/3Wl7gay Black Outlet Covers https://amzn.to/3jrf7Vu UniFi SmartPower PDU Pro https://l.technotim.live/ubiquitiNetwork Patch Panel https://amzn.to/3YIKtHq Wall Mount Patch Panel https://amzn.to/3WyvnCk Slim Network Cables - https://amzn.to/3kbYV85 UniFi Flex Mini - https://l.technotim.live/ubiquiti UDM SE - https://l.technotim.live/ubiquiti UDM Pro - https://l.technotim.live/ubiquiti UniFi 48 Port Pro Switch Gen 2 - https://l.technotim.live/ubiquitiServers &amp; Accessories SuperMicro 1u Servers - https://amzn.to/3YBQy8u 14 TB Exos Seagate Drives - https://amzn.to/3GbtXsk NetApp DD4246 Disk Shelf - https://amzn.to/3o2AOKh PC Conversion Case - https://amzn.to/3YGXx03 Smart ZigBee LED Controller - https://amzn.to/3jtCpKI Cooler Master SickleFlow 120mm RGB Fans - https://amzn.to/3I68AtA 1 TB Samsung SSDs - https://amzn.to/3PPcedoAccessories Axxtra Power Strip - https://amzn.to/3qbzIhT Eaton 5P1500R UPS - https://amzn.to/3OC2D90 Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount - https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack - https://amzn.to/3XxwBzd APC 1500VA UPS https://amzn.to/3GXLJh6 APC 600 VA UPS - https://amzn.to/3mMxsM1 Wall Control Galvanized Steel Pegboard - https://amzn.to/3bJ8R4s HDHomeRun Network Tuner - https://amzn.to/3Gdkd0x Hue Light Strip https://amzn.to/3I124o3 Hue Motion &amp; Temp https://amzn.to/3qb1FXf Hue v2 Dimmer Switch - https://amzn.to/3hH6pCh Hue Smart Bulb Starter Kit - https://amzn.to/3jljCRA Nest Protect - https://amzn.to/3hMZcR8 Cloud Lamp - https://amzn.to/3GZji24 Fire Extinguisher - https://amzn.to/3GeB2s4Chapters00:00 - What is Techno Tim Self-Hosting?01:05 - Dashboard01:36 - Hypervisor07:09 - Network Attached Storage09:37 - DNS11:48 - Network Management13:05 - Home Security13:42 - Containers (Kubernetes &amp; Docker)17:59 - -Kubernetes Storage21:04 - Git Ops22:35 - Reverse Proxy (Internal, External, and Ingress Controller)25:26 - Monitoring26:10 - Metrics &amp; Data Visualization27:02 - Logging28:28 - Home Automation30:08 - Data Synchronization30:55 - Link Page (Contact Page)31:41 - Link Shortener32:24 - Home Entertainment33:00 - UPS Battery Monitoring33:37 - CMS (Content Management System)34:25 - Websites (Static Sites &amp; Custom Code)34:46 - Dynamic DNS (External DNS)35:16 - CI/CD (Continuous Integration &amp; Continuous Delivery)37:04 - Everything Else37:41 - How do I get started self-hosting?38:30 - Thanks for Watching!Join the conversationWow, what a year of self-hosting! After showing off my HomeLab hardware in my late 2022 tour, many of you asked what services are self-hosted in this stack, so I decided it was time to share which services I am running here at home.https://t.co/Z1yKrwKOaP#homelab #selfhosted pic.twitter.com/JW2WdvuIQM&mdash; Techno Tim (@TechnoTimLive) December 31, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim HomeLab Server Room Tour! (Late 2022)", "url": "/posts/homelab-tour-2022/", "categories": "homelab", "tags": "homelab, hardware, network, server, server-rack", "date": "2022-12-24 08:00:00 -0600", "snippet": "Well, here it is! My Late 2022 Server Rack and HomeLab tour! This is a special one because I just revamped my entire rack.I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my las...", "content": "Well, here it is! My Late 2022 Server Rack and HomeLab tour! This is a special one because I just revamped my entire rack.I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my last tour! New servers, new networking, new UPS, new power management, and even a whole entire wall of tech gear.I also added lots of automation and IoT devices! Join me as we walk through my server rack transfer and upgrade!üì∫ Watch Video(Affiliate links are included in this description. I may receive a small commission at no cost to you.)After this, check out the 2022 (late) HomeLab Services Tour!üì¶ Gear in this video üì¶Rack &amp; Accessories 42u Rack https://amzn.to/3YIKlrq 18u Rack https://amzn.to/3WqNZVy D Ring Hooks https://amzn.to/3FSxk5Y 1u Brush Panels https://amzn.to/3hKNiaf 1u Rack Mount Full Depth Shelf https://amzn.to/3jrm5Kp Right Angle Extension Cord https://amzn.to/3Wl7gay Black Outlet Covers https://amzn.to/3jrf7Vu UniFi SmartPower PDU Pro https://l.technotim.live/ubiquitiNetwork Patch Panel https://amzn.to/3YIKtHq Wall Mount Patch Panel https://amzn.to/3WyvnCk Slim Network Cables - https://amzn.to/3kbYV85 UniFi Flex Mini - https://l.technotim.live/ubiquiti UDM SE - https://l.technotim.live/ubiquiti UDM Pro - https://l.technotim.live/ubiquiti UniFi 48 Port Pro Switch Gen 2 - https://l.technotim.live/ubiquitiServers &amp; Accessories SuperMicro 1u Servers - https://amzn.to/3YBQy8u 14 TB Exos Seagate Drives - https://amzn.to/3GbtXsk NetApp DD4246 Disk Shelf - https://amzn.to/3o2AOKh PC Conversion Case - https://amzn.to/3YGXx03 Smart ZigBee LED Controller - https://amzn.to/3jtCpKI Cooler Master SickleFlow 120mm RGB Fans - https://amzn.to/3I68AtA 1 TB Samsung SSDs - https://amzn.to/3PPcedoAccessories Axxtra Power Strip - https://amzn.to/3qbzIhT Eaton 5P1500R UPS - https://amzn.to/3OC2D90 Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount - https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack - https://amzn.to/3XxwBzd APC 1500VA UPS https://amzn.to/3GXLJh6 APC 600 VA UPS - https://amzn.to/3mMxsM1 Wall Control Galvanized Steel Pegboard - https://amzn.to/3bJ8R4s HDHomeRun Network Tuner - https://amzn.to/3Gdkd0x Hue Light Strip https://amzn.to/3I124o3 Hue Motion &amp; Temp https://amzn.to/3qb1FXf Hue v2 Dimmer Switch - https://amzn.to/3hH6pCh Hue Smart Bulb Starter Kit - https://amzn.to/3jljCRA Nest Protect - https://amzn.to/3hMZcR8 Cloud Lamp - https://amzn.to/3GZji24 Fire Extinguisher - https://amzn.to/3GeB2s4KitSee the entire kit here! https://kit.co/TechnoTim/techno-tim-homelab-tour-late-2022Chapters00:00 - What does Techno Tim‚Äôs HomeLab Look Like?00:50 - HomeLab Music Video02:13 - What‚Äôs all that stuff on the wall?04:05 - New Server Rack05:06 - Networking07:13 - Smart PDU (Power in the front???)10:36 - TBD Gear / Room for Growth11:14 - 1u Servers12:21 - Storinator13:42 - PC Conversion Server14:25 - Disk Shelf15:27 - UPS16:08 - Back of the Rack17:08 - Power Channels17:57 - Non Critical Power Devices18:25 - Practical RGB Lighting (it has utility)19:35 - Cable Management20:51 - UPS Battery Extender21:24 - Don‚Äôt be discouraged, Home Labs come in all shapes and sizes23:05 - HomeLab Music Video OutroJoin the conversationWell, here it is! My Late 2022 Server Rack and HomeLab tour! This is a special one because I just revamped my entire rack. I&#39;ve upgraded, replaced, added, and consolidated quite a bit since my last tour! https://t.co/2N04ZDS04c#homelab pic.twitter.com/9BivCrrQgg&mdash; Techno Tim (@TechnoTimLive) December 24, 2022Light Mode vs Dark Mode!Now that I have everything moved to the new rack, &quot;Light Mode&quot; or &quot;Dark Mode&quot;? pic.twitter.com/EKD45Wwl3f&mdash; Techno Tim (@TechnoTimLive) December 25, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Set up alerts in Proxmox before it's too late!", "url": "/posts/proxmox-alerts/", "categories": "proxmox", "tags": "homelab, proxmox, alerting, open-source", "date": "2022-12-17 08:00:00 -0600", "snippet": "Setting up alerts in Proxmox is important and critical to making sure you are notified if something goes wrong with your servers.It‚Äôs so easy, I should have done this years ago! In this tutorial, ...", "content": "Setting up alerts in Proxmox is important and critical to making sure you are notified if something goes wrong with your servers.It‚Äôs so easy, I should have done this years ago! In this tutorial, we‚Äôll set up email notifications using SMTP with Gmail or G Suite that send email alerts when there are disk errors, ZSF Issues, or when backup jobs run.We‚Äôll then test the alerts to make sure they are working by yoinking a drive from my ZFS pool (and hopefully it doesn‚Äôt fail).üì∫ Watch VideoSponsorHuge THANK YOU to Micro Center for Sponsoring Today‚Äôs video!New Customer Exclusive ‚Äì Free 256GB SDD: https://micro.center/24cCheck out Micro Center‚Äôs PC Builder: https://micro.center/1wkSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/tvvShop Micro Center‚Äôs Top Deals: https://micro.center/jb4Configuring Alertsinstall dependenciesapt updateapt install -y libsasl2-modules mailutilsConfigure app passwords on your Google accounthttps://myaccount.google.com/apppasswordsConfigure postfixecho \"smtp.gmail.com your-email@gmail.com:YourAppPassword\" &gt; /etc/postfix/sasl_passwdupdate permissionschmod 600 /etc/postfix/sasl_passwdhash the filepostmap hash:/etc/postfix/sasl_passwdcheck to to be sure the db file was createdcat /etc/postfix/sasl_passwd.dbedit postfix confignano /etc/postfix/main.cf# google mail configurationrelayhost = smtp.gmail.com:587smtp_use_tls = yessmtp_sasl_auth_enable = yessmtp_sasl_security_options =smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwdsmtp_tls_CAfile = /etc/ssl/certs/Entrust_Root_Certification_Authority.pemsmtp_tls_session_cache_database = btree:/var/lib/postfix/smtp_tls_session_cachesmtp_tls_session_cache_timeout = 3600sreload postfixpostfix reloadsend a test emailecho \"This is a test message sent from postfix on my Proxmox Server\" | mail -s \"Test Email from Proxmox\" your-email@gmail.comfix from name in emailinstall dependencyapt updateapt install postfix-pcreedit confignano /etc/postfix/smtp_header_checksadd the following text/^From:.*/ REPLACE From: pve1-alert &lt;pve1-alert@something.com&gt;hash the filepostmap hash:/etc/postfix/smtp_header_checkscheck the contents of the filecat /etc/postfix/smtp_header_checks.dbadd the module to our postfix confignano /etc/postfix/main.cfadd to the end of the filesmtp_header_checks = pcre:/etc/postfix/smtp_header_checksreload postfix servicepostfix reloadChapters00:00 - Why you should set up alerts in Proxmox01:42 - Micro Center / Free SSD (Sponsor)02:56 - Where can I find the documentation03:07 - Installing and configuring dependencies03:54 - Google Email address configuration08:43 - Configuring postfix and customizing the email alert11:47 - Changing the mail sender name with pcre14:20 - Configure where email alerts are sent15:01 - Backup Alerts17:33 - SMART alerts18:53 - ZFS Alerts19:52 - Testing in Production24:03 - How Proxmox alerts could be better25:30 - Stream Highlight - ‚ÄúJust some flashing lights &amp; music‚ÄùJoin the conversationSetting up alerts in Proxmox is important and critical to making sure you are notified if something goes wrong with your servers. It&#39;s so easy, I should have done this years ago!https://t.co/6uRz0eVisA#homelab #proxmox pic.twitter.com/i8E1jrP2pE&mdash; Techno Tim (@TechnoTimLive) December 17, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Automated NUT Server Install", "url": "/posts/nut-server-script/", "categories": "homelab", "tags": "homelab, nut, self-hosted, ups, pdu, open-source, automation", "date": "2022-11-28 08:00:00 -0600", "snippet": "Here‚Äôs a quick way to automate your battery backups and UPSes with and open source service called NUT server and a raspberry Pi.üì∫ Watch VideoNUT Server Install scriptBe sure to check out (and star)...", "content": "Here‚Äôs a quick way to automate your battery backups and UPSes with and open source service called NUT server and a raspberry Pi.üì∫ Watch VideoNUT Server Install scriptBe sure to check out (and star) the repo with an automated NUT server install!‚≠ê https://github.com/dzomaya/NUTandRpiInstructionsBe sure you have a raspberry pi or any machine running Debian / Ubuntu Linux.Then plug in your UPS via USB and then SSH into your Pi.Then download th script.wget https://raw.githubusercontent.com/dzomaya/NUTandRpi/main/scripts/nutinstall.shMake the script executable.sudo chmod +x nutinstall.shRun the script.sudo ./nutinstall.shAnswer a few questions.Be sure to keep your SNMP community string safe and treat this like a password.You can now access NUT in a browser by going to:http://yourRasberryPiIPaddress/cgi-bin/nut/upsstats.cgiYou can also query your device using SNMPsnmpwalk -v2c -c yourSNMPv2cCommunity yourRasberryPiIPaddress .1.3.6.1.4.1.8072.1.3.2.4.1.2AdvancedTo see advanced configuration and configuring NUT Server and NUT client, see my Network UPS Tools (NUT) Ultimate Guide.Join the conversationI figured I‚Äôd share my quick #homelab video on the open source NUT Server here too! pic.twitter.com/e7wA0fNGk4&mdash; Techno Tim (@TechnoTimLive) November 29, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I'll never run out of power! - Eaton and Tripp Lite UPS", "url": "/posts/new-ups-rack/", "categories": "homelab", "tags": "ups, eaton, tripp-lite, server, server-rack, hardware", "date": "2022-11-26 08:00:00 -0600", "snippet": "Today I look at 2 (or 3 depending on how you count them) UPS systems from Tripp Lite and Eaton.These UPS devices couldn‚Äôt be any different but they are awesome nonetheless.Each has it‚Äôs own unique ...", "content": "Today I look at 2 (or 3 depending on how you count them) UPS systems from Tripp Lite and Eaton.These UPS devices couldn‚Äôt be any different but they are awesome nonetheless.Each has it‚Äôs own unique capabilities and features.Which on will you choose when looking for your next UPS? Join me as we walk through and review these type UPS systems and rack them in my new rack!üì∫ Watch VideoHuge THANK YOU to Eaton / Tripp Lite for sending these UPS systems.If you‚Äôre looking for a new UPS for home or work, you should totally check them out!Tripp Litehttps://tripplite.eaton.comEatonhttps://www.eaton.com/us/en-us/products/backup-power-ups-surge-it-power-distribution/backup-power-ups.htmlCheck out a variety of UPS SystemsTripp Lite Tripp Lite 1500VA Smart UPS Back Up - https://amzn.to/3gEwbGG Tripp Lite 2200VA 1920W UPS Smart 2U Rackmount - https://amzn.to/3XrnC2q Tripp Lite BP36V15-2U Smart UPS 36V 2U Rackmount External Battery Pack - https://amzn.to/3XxwBzd Tripp Lite SMART1500LCD 1500VA Smart UPS Battery Back Up - https://amzn.to/3VnIWnyEaton Eaton 5P550R 5P 550 Rackmount - https://amzn.to/3UaLwwa Eaton 5P Rackmount Compact 1500VA UPS - https://amzn.to/3OEJVhd Eaton 5P1500R - https://amzn.to/3OC2D90 Eaton 5S1500LCD UPS - https://amzn.to/3GHXaf8NUT Server Install scriptBe sure to check out (and star) David‚Äôs repo with an automated NUT server install!‚≠ê https://github.com/dzomaya/NUTandRpiChapters00:00 - What should I protect with my UPS?02:16 - Tripp Lite SmartPro UPS Review and Specs03:24 - Tripp Lite 36v Battery Pack Review and Specs04:29 - Tripp Lite SmartPro UPS Configuration05:23 - Eaton 5P 1550 UPS Review and Specs07:43 - Eaton 5P 1550 UPS Configuration08:47 - Rack mounting the UPSes10:53 - My Thoughts and Monitoring and Alerting Solutions13:01 - Stream Highlight - ‚ÄúTesting in Production‚ÄùJoin the conversationToday I look at 2 (or 3 depending on how you count them) UPS systems. These UPS devices couldn&#39;t be any different but they are awesome nonetheless.Which UPS do you use? (I think I had too much fun creating this thumbnail) Check it out!https://t.co/1kxDvSeGt7 pic.twitter.com/fNiODnanAR&mdash; Techno Tim (@TechnoTimLive) November 26, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Best Server Rack for Your HomeLab? Sysracks Enclosed Rack!", "url": "/posts/sysracks-server-rack/", "categories": "homelab", "tags": "server, server-rack, homelab, hardware, sysracks", "date": "2022-11-12 08:00:00 -0600", "snippet": "I‚Äôve been on a quest looking for a new server rack for my HomeLab in my home.I‚Äôve outgrown my current 18u open frame rack and decided to give a 32u Sysracks Enclosed Rack a try! Join me as we put ...", "content": "I‚Äôve been on a quest looking for a new server rack for my HomeLab in my home.I‚Äôve outgrown my current 18u open frame rack and decided to give a 32u Sysracks Enclosed Rack a try! Join me as we put together this server rack, test out all of the features, and I‚Äôll let you know my thoughts about this brand new server rack!üì∫ Watch VideoA HUGE thank you to Sysracks for sending me this rack!Check out their selection of racks at https://sysracks.comA HUGE thank you to Micro Center for sponsoring this video!New Customer Exclusive ‚Äì Free 256GB SSD In-Store: https://micro.center/yi0Check out Micro Center‚Äôs Custom PC Builder: https://micro.center/3dqSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/lsnShop Micro Center‚Äôs Black Friday Deals: https://micro.center/rguüì¶ See a collection of Sysracks racks here:https://kit.co/TechnoTim/sysracks-server-racksChapters00:00 - Why get a new Server Rack?01:14 - Sysracks 32u Server &amp; Features02:22 - Micro Center (Sponsor)03:35 - Assembling the Rack07:38 - Exploring the Rack Features09:39 - Checking Out the Temperature Control Unit11:04 - My Thoughts About the Sysracks Server Rack13:42 - Stream Highlight - ‚ÄúThe grow room isn‚Äôt big enough for 2 racks!‚ÄùJoin the conversationI‚Äôve been on a quest looking for a new server rack for my HomeLab and I think I‚Äôve found one that fits my needs! I‚Äôve decided to give a new enclosed rack a try! https://t.co/BS4TMHo3Qw pic.twitter.com/CCGJIiWXsu&mdash; Techno Tim (@TechnoTimLive) November 12, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Put RGB Fans in My Server and I am NOT Apologizing", "url": "/posts/rgb-storinator/", "categories": "homelab", "tags": "homelab, hardware, server, storinator, 45-drives, rgb", "date": "2022-10-22 09:00:00 -0500", "snippet": "My Storinator server from 45Drives is great, except for 1 thing.It‚Äôs a little loud for my home.It would be fine if it were in a data center or a real network closet, however this is in my basement....", "content": "My Storinator server from 45Drives is great, except for 1 thing.It‚Äôs a little loud for my home.It would be fine if it were in a data center or a real network closet, however this is in my basement.I decided to swap out all the fans to make it quieter, and install RGB fans along with a ZigBee controller so I can control them with Home Automation!üì∫ Watch VideoHUGE THANK YOU to Micro Center for Sponsoring this Video!New Customers Exclusive ‚Äì Get $25 off your purchase of any AMD and Intel Processor (limit one per customer): https://micro.center/1z7Check out Micro Center‚Äôs PC Builder: https://micro.center/mrpSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/ow4Thanks again to 45drives for the Storinator!https://45drives.comüì¶See all the parts in this kit here! üì¶https://kit.co/TechnoTim/smart-rgb-fan-conversationTime Codes00:00 - Making My Server Quiet02:13 - Micro Center (Sponsor)03:18 - Taking the Server Apart04:17 - Changing the CPU Cooler05:02 - How to Add Smart RGB to a Server06:07 - Wiring Up the ZigBee Controller and Fans07:20 - Testing and Pairing the ZigBee Controller08:08 - Why Put RGB Fans in a Server?08:42 - How Much Quieter Is It?09:13 - What‚Äôs Next for the Server?09:33 - Stream Highlight - I will buy an LTT ScrewdriverJoin the conversationI Put RGB Fans in My Server and I am NOT Apologizing!https://t.co/YRhA9jPRoj pic.twitter.com/rR8EEMOobh&mdash; Techno Tim (@TechnoTimLive) October 22, 2022Hacking my RGB fans to work with Zigbee!I hacked my RGB PC fans to use zigbee. No PC software required! pic.twitter.com/DfV13n7tE2&mdash; Techno Tim (@TechnoTimLive) October 12, 2022I made my servers quiet!I made my servers quiet! pic.twitter.com/iFQSwWhM15&mdash; Techno Tim (@TechnoTimLive) October 26, 2022Which color do you like best?Which color do you like best? pic.twitter.com/O7ChniryYd&mdash; Techno Tim (@TechnoTimLive) October 23, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Encrypt Your Sensitive Information Before Storing It - Encrypting with Mozilla SOPS and AGE", "url": "/posts/secret-encryption-sops/", "categories": "homelab", "tags": "git, kubernetes, secrets, security, sops, age", "date": "2022-10-01 09:00:00 -0500", "snippet": "Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information.Some might think that committing secrets to a private Git Repo is ...", "content": "Committing secrets to your Git Repo can expose information like passwords, access tokens, and other types of sensitive information.Some might think that committing secrets to a private Git Repo is OK, but I am here to tell you it‚Äôs not.If you‚Äôre going to commit secrets to a git repo, private or public, you should encrypt them first using Mozilla SOPS (Secret Operations) and AGE.SOPS is an editor of encrypted files that supports YAML, JSON, ENV, INI and BINARY formats and encrypts with AWS KMS, GCP KMS, Azure Key Vault, age, and PGP.Age is a simple, modern, and secure file encryption tool, format, and build using Go.It can encrypt and decrypt your files making then safe enough to commit to your Git repos!A HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.ioüì∫ Watch VideoInstall SOPSYou can install sops by following this guide.test withsops -vshould seesops 3.7.3 (latest)Install AgeYou can install age by following this guidetest age with age -versionshould seev1.0.0test age-keygen with age-keygen -versionshould seev1.0.0configure keysNow that we have age installed we need to create a public and private keyage-keygen -o key.txtshould seeage-keygen: warning: writing secret key to a world-readable filePublic key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428tlet‚Äôs look at the contentscat key.txtshould see# created: 2022-09-26T21:55:47-05:00# public key: age1epzmwwzw8n09slh0c7z0z52x43nnga7lkksx3qrh07tqz5v7lcys45428tAGE-SECRET-KEY-1HJCRJVK7EE3A5N8CRP8YSDUGZKNW90Y5UR2RGYAS8L279LFP6LCQU5ADNR Remember this is a secret so keep this safe! Do not commit this!move the file and add to our shellmkdir ~/.sopsmv ./key.txt ~/.sopsadd it to our shellnano ~/.zshrc # or nano ~/.bashrcadd to the end of fileexport SOPS_AGE_KEY_FILE=$HOME/.sops/key.txtsource our shellsource ~/.zshrc # or source ~/.bashrcNow! Let‚Äôs encryptA few ways you can do this.You can encrypt in place or encrypt with an editor but we‚Äôre going to do an in place encryption.YAMLThis can be kubernetes secrets, helm values, or just plain old yamlcreate a secret with the following contentssecret.yaml---apiVersion: v1kind: Secretmetadata: name: mysql-secret namespace: defaultstringData: MYSQL_USER: root MYSQL_PASSWORD: super-Secret-Password!!!!to encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' --in-place ./secret.yamlto decryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' --in-place ./secret.yamlKubernetesIf you want to decrypt this secret on the fly and apply to kubernetesencrypt firstsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' --in-place ./secret.yamldecrypt and pipe to kubectlsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --encrypted-regex '^(data|stringData)$' ./secret.yaml | kubectl apply -f -check it withk describe secrets mysql-secret-testthen kubectl get secret mysql-secret-test -o jsonpath='{.data}'thenkubectl get secret mysql-secret-test -o jsonpath='{.data.MYSQL_PASSWORD}' | base64 --decodeVSCodeinstall vscode extensionchoose the beta for sops because that supports age + sopsdon‚Äôt forget to add .decrypted~secret.yaml to .gitignoreencrypt .env filesmake sure extension is installed.ENV Filescreatesecret.envMYSQL_USER=superrootMYSQL_PASSWORD=\"super-Secret-Password!!!!############\"encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i .envdecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i .envdon‚Äôt forget to add .decrypted~secret.env to your .gitignoreJSON Filessecret.json{ \"mySqlUser\": \"superroot\", \"password\": \"super-Secret-Password!!!!#######\"}encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.jsondecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.jsondon‚Äôt forget to add .decrypted~secret.json to your .gitignoreINI Filessecret.ini[database]user = superrootpassword = super-Secret-Password!!!!1223encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.inidecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") -i secret.inidon‚Äôt forget to add .decrypted~secret.ini to you .gitignoreFilessecret.sql--- https://xkcd.com/327/--- DO NOT USEINSERT INTO Students VALUES ( 'Robert' ); DROP TABLE STUDENTS; --' )encryptsops --encrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --in-place ./secret.sqldecryptsops --decrypt --age $(cat $SOPS_AGE_KEY_FILE |grep -oP \"public key: \\K(.*)\") --in-place ./secret.sqlFluxIf you‚Äôre thinking of doing GitOps with Flux, you can check out my video on this topic or see my documentation.You can do cluster decryption and fully automate decryption of secrets.In cluster decryption with Fluxhttps://fluxcd.io/flux/guides/mozilla-sops/#configure-in-cluster-secrets-decryptionJoin the conversationPeople often ask if it&#39;s OK to save secrets in code or config to a private git repo. I though this was ok until now... If you&#39;re using Secrets in Kubernetes or ENVs in Docker I highly recommend encrypting them with Mozilla SOPS.@mozhacks https://t.co/r1NpBoGWe2 pic.twitter.com/sdPFq06WQM&mdash; Techno Tim (@TechnoTimLive) October 1, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "NEW SERVER! Deploying 100 TB of Storage to my HomeLab!", "url": "/posts/45-drives-storinator/", "categories": "homelab", "tags": "homelab, hardware, server, storinator, 45-drives", "date": "2022-09-10 09:00:00 -0500", "snippet": "Check out my new server! It‚Äôs an Storinator AV15 from 45 Drives loaded with lots of great upgrades! Will it be my new high performance storage server and replace TrueNAS? Will it be my new hype...", "content": "Check out my new server! It‚Äôs an Storinator AV15 from 45 Drives loaded with lots of great upgrades! Will it be my new high performance storage server and replace TrueNAS? Will it be my new hypervisor and replace one of my Proxmox servers? Or will I cluster this server and do something else? Let‚Äôs see what this server is made of first!A HUGE thank you to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì FREE Redragon GS500 Gaming Stereo Speakers: https://micro.center/mkpCheck out Micro Center‚Äôs PC Builder: https://micro.center/njwSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/govüì∫ Watch VideoCheck out 45Drives Storinators and other servers - https://www.45drives.com/Seagate Exos X16 14TB Drives and more - https://kit.co/TechnoTim/best-ssd-hard-drive-flash-storageJoin the conversationNEW SERVER! This week I built, configured, and (kind of) racked a new server! It&#39;s a customized Storinator server from the folks over at @45Drives! What do you think of the design??? üíÖhttps://t.co/r8i1fqYETj pic.twitter.com/EvxgilZb27&mdash; Techno Tim (@TechnoTimLive) September 10, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Essential HomeLab Tools & Accessories - Network / Server / PC Tool Kit", "url": "/posts/homelab-tools-accessories/", "categories": "homelab", "tags": "homelab, tools, accessories, hardware", "date": "2022-08-27 09:00:00 -0500", "snippet": "Every Home Labber and IT person has their go to set of tools and accessories to help them accomplish tasks for technical projects in their HomeLab.This ranges from the very specialized, to the comm...", "content": "Every Home Labber and IT person has their go to set of tools and accessories to help them accomplish tasks for technical projects in their HomeLab.This ranges from the very specialized, to the common.I do all kinds of projects at home, from building and racking servers, to building mini and full-size PCs, to upgrading and troubleshooting hardware, to home office upgrades, to installing wireless access points and cameras, down to building raspberry pi projects.I‚Äôve gathered up some of my most essential tools and accessories to assist you in your projects!A HUGE thanks to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì FREE Redragon GS500 Gaming Stereo Speakers: https://micro.center/gomCheck out Micro Center‚Äôs PC Builder: https://micro.center/7hjSubmit your build to Micro Center‚Äôs Build Showcase: https://micro.center/vo6üì∫ Watch VideoItemsHere are all of the items that were in the video, plus a few more.üì¶ See the entire kit here: https://kit.co/TechnoTim/essential-homelab-tools-accessories-for-home-labbers-and-it-prosCage nuts Nickel plated 60 pack https://amzn.to/3bPXCuy Black 50 pack https://amzn.to/3bMQbocNetwork cables Mono price Slim cat6a https://amzn.to/3SIz5Iv Monoprice Cat6 pure bare copper https://amzn.to/3JPUdZp Cable matters 6 pack https://amzn.to/3bJDA52Label Maker Brother p touch label maker https://amzn.to/3AaN9DnLaser grip thermometer https://amzn.to/3SEYPp7Short Power cords 10 pack 8 inch https://amzn.to/3QcfHC412 outlet surge protector https://amzn.to/3QvlrXpFluke voltage tester https://amzn.to/3vOVCthKill A Watt Electricity Usage Monitor https://amzn.to/3ASub52SSD Mounting bracket https://amzn.to/3PeN3PBVelcro https://amzn.to/3C2PJfYZip ties https://amzn.to/3JIVpxCHard drive screws https://amzn.to/3SyjlYJUSB Drive https://amzn.to/3BYAnJxSATA/IDE/USB Adapter Usb 2.0 https://amzn.to/3Qc6d9P Usb 3.0 https://amzn.to/3PrTMWBCraftsman quick change screw driver https://amzn.to/3PdvtLCDeWalt utility knife https://amzn.to/3bJFnXGCable crimper https://amzn.to/3ddXxBjPunchdown tool https://amzn.to/3A9QYIVTP Link Gigabit PoE Switch https://amzn.to/3PdBA2sDremel kit https://amzn.to/3BYA15EHead lamp https://amzn.to/3SE3OqgKeystones https://amzn.to/3SQ9mxXCat 6 ends https://amzn.to/3QGXCfgCable tester Klein https://amzn.to/3dy7SrQCable toner https://amzn.to/3QrKHONLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Wildcard Certificates with Traefik + cert-manager + Let's Encrypt in Kubernetes Tutorial", "url": "/posts/kube-traefik-cert-manager-le/", "categories": "kubernetes", "tags": "kubernetes, traefik, cert-manager, k3s, cloudflare, letsencrypt", "date": "2022-08-06 09:00:00 -0500", "snippet": "Traefik, cert-manager, Cloudflare, and Let‚Äôs Encrypt are a winning combination when it comes to securing your services with certificates in Kubernetes.Today, we‚Äôll install and configure Traefik, th...", "content": "Traefik, cert-manager, Cloudflare, and Let‚Äôs Encrypt are a winning combination when it comes to securing your services with certificates in Kubernetes.Today, we‚Äôll install and configure Traefik, the cloud native proxy and load balancer, as our Kubernetes Ingress Controller.We‚Äôll then install and configure cert-manager to manage certificates for our cluster.We‚Äôll set up Let‚Äôs Encrypt as our Cluster Issuer so that cert-manager can automatically provision TLS certificates and even wildcard certificates using Cloudflare DNS challenge absolutely free.We‚Äôll walk through all of this, step by step, so you can help secure your cluster today.üì∫ Watch VideoA HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.ioGetting StartedIf you need to install a new kubernetes cluster you can use my Ansible Playbook to install one.Resources You can find all of the resources for this tutorial hereHelmcurl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3chmod 700 get_helm.sh./get_helm.shFor other ways to install Helm see the installation docs hereInstallingVerify you can communicate with your clusterkubectl get nodesYou should seeNAME STATUS ROLES AGE VERSIONk3s-01 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-02 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-03 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-04 Ready &lt;none&gt; 10h v1.23.4+k3s1k3s-05 Ready &lt;none&gt; 10h v1.23.4+k3s1Verify helm is installedhelm versionYou should seeversion.BuildInfo{Version:\"v3.8.0\", GitCommit:\"d14138609b01886f544b2025f5000351c9eb092e\", GitTreeState:\"clean\", GoVersion:\"go1.17.5\"}Traefik These resources are in the launchpad/kubernetes/traefik-cert-manager/traefik/ folderAdd repohelm repo add traefik https://helm.traefik.io/traefikUpdate repohelm repo updateCreate our namespacekubectl create namespace traefikGet all namespaceskubectl get namespacesWe should seeNAME STATUS AGEdefault Active 21hkube-node-lease Active 21hkube-public Active 21hkube-system Active 21hmetallb-system Active 21htraefik Active 12sInstall traefikhelm install --namespace=traefik traefik traefik/traefik --values=values.yamlCheck the status of the traefik ingress controller servicekubectl get svc --all-namespaces -o wideWe should see traefik with the specified IPNAMESPACE NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE SELECTORdefault kubernetes ClusterIP 10.43.0.1 &lt;none&gt; 443/TCP 16h &lt;none&gt;kube-system kube-dns ClusterIP 10.43.0.10 &lt;none&gt; 53/UDP,53/TCP,9153/TCP 16h k8s-app=kube-dnskube-system metrics-server ClusterIP 10.43.182.24 &lt;none&gt; 443/TCP 16h k8s-app=metrics-servermetallb-system webhook-service ClusterIP 10.43.205.142 &lt;none&gt; 443/TCP 16h component=controllertraefik traefik LoadBalancer 10.43.156.161 192.168.30.80 80:30358/TCP,443:31265/TCP 22s app.kubernetes.io/instance=traefik,app.kubernetes.io/name=traefikGet all pods in traefik namespacekubectl get pods --namespace traefikWe should see pods in the traefik namespaceNAME READY STATUS RESTARTS AGEtraefik-76474c4d47-l5z74 1/1 Running 0 11mtraefik-76474c4d47-xb282 1/1 Running 0 11mtraefik-76474c4d47-xx5lw 1/1 Running 0 11mmiddlewareApply middlewarekubectl apply -f default-headers.yamlGet middlewarekubectl get middlewareWe should see our headersNAME AGEdefault-headers 25sdashboardInstall htpasswordsudo apt-get updatesudo apt-get install apache2-utilsGenerate a credential / password that‚Äôs base64 encodedhtpasswd -nb techno password | openssl base64Apply secretkubectl apply -f secret-dashboard.yamlGet secretkubectl get secrets --namespace traefikApply middlewarekubectl apply -f middleware.yamlApply dashboardkubectl apply -f ingress.yamlVisit https://traefik.local.example.comSample Workload These resources are in the launchpad/kubernetes/traefik-cert-manager/nginx/ folderkubectl apply -f deployment.yamlkubectl apply -f service.yamlkubectl apply -f ingress.yamlOr you can apply an entire folder at once!kubectl apply -f nginxcert-manager These resources are in the launchpad/kubernetes/traefik-cert-manager/cert-manager/ folderAdd repohelm repo add jetstack https://charts.jetstack.ioUpdate ithelm repo updateCreate our namespacekubectl create namespace cert-managerGet all namespaceskubectl get namespacesWe should seeNAME STATUS AGEcert-manager Active 12sdefault Active 21hkube-node-lease Active 21hkube-public Active 21hkube-system Active 21hmetallb-system Active 21htraefik Active 4h35mApply crds Note: Be sure to change this to the latest version of cert-managerkubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.9.1/cert-manager.crds.yamlInstall with helmhelm install cert-manager jetstack/cert-manager --namespace cert-manager --values=values.yaml --version v1.9.1Apply secrets Be sure to generate the correct token if using Cloudflare.This is using an API Token and not a global key.From issuers folderkubectl apply -f secret-cf-token.yamlApply staging ClusterIssuerFrom issuers folderkubectl apply -f letsencrypt-staging.yamlCreate certsstagingFrom certificates/staging folderkubectl apply -f local-example-com.yamlCheck the logskubectl logs -n cert-manager -f cert-manager-877fd747c-fjwhpGet challengeskubectl get challengesGet more detailskubectl describe order local-technotim-live-frm2z-1836084675productionApply production ClusterIssuerFrom issuers folderkubectl apply -f letsencrypt-production.yamlFrom certificates/production folderkubectl apply -f local-example-com.yamlLearn MoreIf you‚Äôre using cert-manager to manage certificates, you might want to check out this post on how to mirror your Kubernetes configs, secrets, and resources to other namespaces. This is helpful when you need to share you secrets / certificates across namespaces!LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Unboxing YouTube 100K Subs Play Button Creator Award", "url": "/posts/whats-in-the-box/", "categories": "homelab", "tags": "youtube, live, unboxing", "date": "2022-07-30 10:00:00 -0500", "snippet": "YouTube sent a package.I have a feeling I know what it is, but we‚Äôll all find out live!üì∫ Watch VideoFind all of my server gear here!https://kit.co/TechnoTim/techno-tim-homelab-and-server-room-upgra...", "content": "YouTube sent a package.I have a feeling I know what it is, but we‚Äôll all find out live!üì∫ Watch VideoFind all of my server gear here!https://kit.co/TechnoTim/techno-tim-homelab-and-server-room-upgrade-2021LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Beautiful Dashboards with Grafana and Prometheus - Monitoring Kubernetes Tutorial", "url": "/posts/kube-grafana-prometheus/", "categories": "kubernetes", "tags": "kubernetes, grafana, prometheus, alert-manager, k3s", "date": "2022-07-23 10:00:00 -0500", "snippet": "Grafana and Prometheus are a powerful monitoring solution.It allows you to visualize, query, and alert metrics no matter where they are stored.Today, we‚Äôll install and configure Prometheus and Graf...", "content": "Grafana and Prometheus are a powerful monitoring solution.It allows you to visualize, query, and alert metrics no matter where they are stored.Today, we‚Äôll install and configure Prometheus and Grafana in Kubernetes using kube-prometheus-stack. By the end of this tutorial you be able to observe and visualize your entire Kubernetes cluster with Grafana and Prometheus.üì∫ Watch VideoA HUGE thanks to Datree for sponsoring this video!Combat misconfigurations. Empower engineers.https://www.datree.ioGetting StartedIf you need to install a new kubernetes cluster you can use my Ansible Playbook to install one.k3sIf you want to get metrics from your k3s servers, you will need to provide some additional flags to k3s.Additional k3s flags used in the video:extra_server_args: \"--no-deploy servicelb --no-deploy traefik --kube-controller-manager-arg bind-address=0.0.0.0 --kube-proxy-arg metrics-bind-address=0.0.0.0 --kube-scheduler-arg bind-address=0.0.0.0 --etcd-expose-metrics true --kubelet-arg containerd=/run/k3s/containerd/containerd.sock\"helmcurl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3chmod 700 get_helm.sh./get_helm.shInstall helmThe helm chart we will be using to install Grafana, Preometheus, and Alert Manager is kube-prometheus-stackInstallingVerify you can communicate with your clusterkubectl get nodesNAME STATUS ROLES AGE VERSIONk3s-01 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-02 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-03 Ready control-plane,etcd,master 10h v1.23.4+k3s1k3s-04 Ready &lt;none&gt; 10h v1.23.4+k3s1k3s-05 Ready &lt;none&gt; 10h v1.23.4+k3s1Verify helm is installedhelm versionversion.BuildInfo{Version:\"v3.8.0\", GitCommit:\"d14138609b01886f544b2025f5000351c9eb092e\", GitTreeState:\"clean\", GoVersion:\"go1.17.5\"}Add helm repohelm repo add prometheus-community https://prometheus-community.github.io/helm-chartsUpdate repohelm repo updateCreate a Kubernetes Namespacekubectl create namespace monitoringEcho username and password to a fileecho -n 'adminuser' &gt; ./admin-user # change your usernameecho -n 'p@ssword!' &gt; ./admin-password # change your passwordCreate a Kubernetes Secret kubectl create secret generic grafana-admin-credentials --from-file=./admin-user --from-file=admin-password -n monitoringYou should seesecret/grafana-admin-credentials createdVerify your secretkubectl describe secret -n monitoring grafana-admin-credentialsYou should seeName: grafana-admin-credentialsNamespace: monitoringLabels: &lt;none&gt;Annotations: &lt;none&gt;Type: OpaqueData====admin-password: 9 bytesadmin-user: 9 bytesVerify the usernamekubectl get secret -n monitoring grafana-admin-credentials -o jsonpath=\"{.data.admin-user}\" | base64 --decodeYou should seeadminuser%Verify passwordkubectl get secret -n monitoring grafana-admin-credentials -o jsonpath=\"{.data.admin-password}\" | base64 --decodep@ssword!%Remove username and password file from filesystemrm admin-user &amp;&amp; rm admin-passwordCreate a values file to hold our helm valuesnano values.yamlpaste in values from hereCreate our kube-prometheus-stackhelm install -n monitoring prometheus prometheus-community/kube-prometheus-stack -f values.yamlPort Forwarding Grafana UI(be sure to change the pod name to one that matches yours)kubectl port-forward -n monitoring grafana-fcc55c57f-fhjfr 52222:3000Visit Grafanahttp://localhost:52222If you make changes to your values.yaml you can deploy these changes by runninghelm upgrade -n monitoring prometheus prometheus-community/kube-prometheus-stack -f values.yamlExamples:Traefik Ingress exampleLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Will 10 Gigabit work with Cat5e? - 10Gbe HomeLab Network Upgrade!", "url": "/posts/10gbe-cat5e-homelab-network/", "categories": "homelab", "tags": "homelab, network, unifi, 10gbe, hardware", "date": "2022-07-09 10:00:00 -0500", "snippet": "After deciding to upgrade my ‚Äúold‚Äù 24 PoE switch to a new 48 port PoE switch with 4 SFP+ ports, I decided to check to see if my old house with old Cat5e network wiring will work at 10 gigabit speed...", "content": "After deciding to upgrade my ‚Äúold‚Äù 24 PoE switch to a new 48 port PoE switch with 4 SFP+ ports, I decided to check to see if my old house with old Cat5e network wiring will work at 10 gigabit speeds! If this works, I will have a 10 Gbe network connection from my PCs to my HomeLab server rack!üì∫ Watch VideoA HUGE thank you to Micro Center for sponsoring today‚Äôs video!New Customer Exclusive, Receive a FREE 256GB SSD in Store: https://micro.center/6af2daCheck Out Micro Center‚Äôs PC Builder: https://micro.center/f65221Visit the Micro Center Community: https://micro.center/e64c4cItems in this videoIntel Server Adapter X540-T1 - https://ebay.us/mQCVflUSW-PRO-48-POE - https://amzn.to/3PbuFYfPatch Panel - https://amzn.to/3yuBdukSlim Patch Cables - https://amzn.to/3yvdmdO10GBase-T SFP+ Transceiver - https://amzn.to/3atGdHBServer Rack - https://amzn.to/3AKfj8SCat5e Spool (you should buy cat 6) - https://amzn.to/3PwNeX9Cat6 Spool - https://amzn.to/3Pgk6TCRJ45 Keystone Jacks - https://amzn.to/3IxwMDGSFP+ DAC - https://amzn.to/3Pg96pyiperfInstallsudo apt updatesudo apt install iperfon the remote machineiperf -sthen on another machineiperf -c 192.168.0.104 # ip of the remote machineLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My HomeLab Regrets...", "url": "/posts/my-homelab-regrets/", "categories": "homelab", "tags": "homelab, hardware, network, unifi", "date": "2022-06-25 10:00:00 -0500", "snippet": "If I could start my HomeLab all over, what would I choose? Would I choose the same servers, rack, networking, gateway, switch, firewall, my pc conversion, and even my disk shelf NAS? Did I make a...", "content": "If I could start my HomeLab all over, what would I choose? Would I choose the same servers, rack, networking, gateway, switch, firewall, my pc conversion, and even my disk shelf NAS? Did I make a good choice or a bad one? Join me as we give each piece of my HomeLab a Keep or Upgrade rating.üì∫ Watch VideoA HUGE thanks to Micro Center for sponsoring this video!New Customer Exclusive, Receive a FREE 256GB SSD in Store: https://micro.center/cff7caCheck Out Micro Center‚Äôs PC Builder: https://micro.center/81b822Visit the Micro Center Community: https://micro.center/b33782Find all of my server gear here!https://kit.co/TechnoTim/techno-tim-homelab-and-server-room-upgrade-2021LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "100 Days of HomeLab - The HomeLab Challenge", "url": "/posts/100-days-of-homelab/", "categories": "homelab", "tags": "homelab, challenge", "date": "2022-06-11 10:00:00 -0500", "snippet": "It‚Äôs here. The #100DaysOfHomeLab challenge! This challenge is meant to accelerate your knowledge in servers, networking, infrastructure, automation, storage, containerization, orchestration, virtu...", "content": "It‚Äôs here. The #100DaysOfHomeLab challenge! This challenge is meant to accelerate your knowledge in servers, networking, infrastructure, automation, storage, containerization, orchestration, virtualization, Windows, Linux, and more.It can even possibly accelerate your IT career! So, commit to the Hundred Days of HomeLab challenge, share your progress, and encourage others along the way!So, to celebrate my 100k subs, I brought in some of the biggest names in the HomeLab community and some new faces too! A hue thanks to everyone that took part in this video.I can‚Äôt thank you enough!üì∫ Watch VideoTake the challenge! https://100daysofhomelab.com/Join the conversationDay 100! #100DaysOfHomeLab üéâ We did it!It&#39;s hard to believe that this challenge started 100 days ago. Still forever grateful for those in this video and all those who joined. This isn&#39;t the end, for some it&#39;s just the beginning. ü™û Reflecting on my journey Thank you! pic.twitter.com/XpNiTjAnCv&mdash; Techno Tim (@TechnoTimLive) September 19, 2022LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Jekyll - The Static Site Generator", "url": "/posts/jekyll-docs-site/", "categories": "self-hosted", "tags": "jekyll, website, github, gitlab, docker", "date": "2022-05-28 10:00:00 -0500", "snippet": "Jekyll is a static site generator that transforms your plain text into beautiful static web sites and blogs.It can be use for a documentation site, a blog, an event site, or really any web site you...", "content": "Jekyll is a static site generator that transforms your plain text into beautiful static web sites and blogs.It can be use for a documentation site, a blog, an event site, or really any web site you like. It‚Äôs fast, secure, easy, and open source.It‚Äôs also the same site generator I use to maintain my open source documentation.Today, we‚Äôll be installing and configuring Jekyll using the Chirpy theme.We configure the site, create some pages with markdown, automatically build it with a GitHub action and even host it for FREE on GitHub pages.If you don‚Äôt want to host in the cloud, I show how to host it on your own server or even in Docker.A HUGE THANK YOU to Micro Center for Sponsoring this video!New Customers Exclusive ‚Äì Get a Free 256 GB SSD at Micro CenterBrowse Micro Center‚Äôs 30,000 products in stockBe sure to ‚≠ê the jekyll repo and the Chrirpy theme repoüì∫ Watch VideoTerminal SetupIf you need help setting up your terminal on Windows, check out these two posts which will help you configure your terminal with WSL like mine Windows Terminal and WSL Config Fast, Simple, and Easy Guide Setting Up Windows for JavaScript Development THE RIGHT WAY (WSL Terminal NVM Node Yarn VS Code ZSH) You can follow this guide up until installing NodeJS (You don‚Äôt need NodeJS for Jekyll) Install Dependenciessudo apt updatesudo apt install ruby-full build-essential zlib1g-dev gitTo avoid installing RubyGems packages as the root user:If you are using bash (usually the default for most)echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~/.bashrcecho 'export GEM_HOME=\"$HOME/gems\"' &gt;&gt; ~/.bashrcecho 'export PATH=\"$HOME/gems/bin:$PATH\"' &gt;&gt; ~/.bashrcsource ~/.bashrcIf you are using zsh (you know if you are)echo '# Install Ruby Gems to ~/gems' &gt;&gt; ~/.zshrcecho 'export GEM_HOME=\"$HOME/gems\"' &gt;&gt; ~/.zshrcecho 'export PATH=\"$HOME/gems/bin:$PATH\"' &gt;&gt; ~/.zshrcsource ~/.zshrcInstall Jekyll bundlergem install jekyll bundlerCreating a site based on Chirpy StarterVisit https://github.com/cotes2020/jekyll-theme-chirpy#quick-startAfter creating a site based on the template, clone your repogit clone git@&lt;YOUR-USER-NAME&gt;/&lt;YOUR-REPO-NAME&gt;.gitthen install your dependenciescd repo-namebundleAfter making changes to your site, commit and push then up to gitgit add .git commit -m \"made some changes\"git pushJekyll Commandsserving your sitebundle exec jekyll sBuilding your site in production modeJEKYLL_ENV=production bundle exec jekyll bThis will output the production site to _siteBuilding Site in CIThis site already works with GitHub actions, just push it up and check the actions Tab.,For GitLab you can see the pipeline I built for my own docs site hereBuilding with DockerCreate a Dockerfile with the followingFROM nginx:stable-alpineCOPY _site /usr/share/nginx/htmlBuild site in production modeJEKYLL_ENV=production bundle exec jekyll bThen build your image:docker build .Creating a PostNaming ConventionsJekyll uses a naming convention for pages and postsCreate a file in _posts with the formatYEAR-MONTH-DAY-title.mdFor example:2022-05-23-homelab-docs.md2022-05-34-hardware-specs.md Jekyll can delay posts which have the date/time set for a point in the future determined by the ‚Äúfront matter‚Äù section at the top of your post file. Check the date &amp; time as well as time zone if you don‚Äôt see a post appear shortly after re-build.Local Linking of FilesImage from asset:... which is shown in the screenshot below:![A screenshot](/assets/screenshot.webp)Linking to a file... you can [download the PDF](/assets/diagram.pdf) here.See more post formatting rules on the Jekyll siteMarkdown ExamplesIf you need some help with markdown, check out the markdown cheat sheetI have lots of examples in my documentation site repo.Just click on the Raw button to see the code behind the page.For more neat syntax for the Chirpy theme check their demo page on making posts https://chirpy.cotes.page/posts/write-a-new-post/LinksSee reference repo for filesüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The FASTEST way to deploy apps to Kubernetes - GitOps with FLUX", "url": "/posts/flux-devops-gitops/", "categories": "kubernetes", "tags": "flux, devops, gitops, kubernetes", "date": "2022-05-13 08:00:00 -0500", "snippet": "I think I found the perfect GitOps and DevOps toolkit with FluxCD and Kubernetes.Flux is an open source GitOps solution that helps your deploy app and infrastructure with automation.It can monitor ...", "content": "I think I found the perfect GitOps and DevOps toolkit with FluxCD and Kubernetes.Flux is an open source GitOps solution that helps your deploy app and infrastructure with automation.It can monitor git repositories, source control, image container repositories, helm repositories, and more.It can install apps using Kustomize, Helm, Kubernetes manifests so it‚Äôs designed to fit into your existing workflow.It can even push alerts to your chat system letting you know when deployments happen.In this tutorial we‚Äôll cover all of this and more.https://fluxcd.ioBe sure to ‚≠ê the Flux GitHub repoüì∫ Watch VideoKubernetes ClusterIf you‚Äôre looking to install your own Kubernetes cluster, be sure to check out this video that creates a cluster with AnsibleReference RepoIf you‚Äôre looking for the repo I created this in video, you can find it here /demos/flux-demoInstall Flux CLIcurl -s https://fluxcd.io/install.sh | sudo bashInstalling Flux using a GitHub RepoYou‚Äôll need to grab a personal access token from hereflux bootstrap github \\ --components-extra=image-reflector-controller,image-automation-controller \\ --owner=YourGitHUbUserName \\ --repository=flux \\ --branch=main \\ --path=clusters/home \\ --personal \\ --token-authCheck flux podskubectl get pods -n flux-systemSource Controller (installing manifests)See reference repo for files, located in /demos/flux-demoHelm Controller (installing helm charts)See reference repo for files, /demos/flux-demoImage Automation Controller (monitoring a container registry)See reference repo for files, /demos/flux-demoFirst create a workload (see redis deployment file)Deploy the redis workload (deployment.yml)git add -A &amp;&amp; \\git commit -m \"add redis deployment\" &amp;&amp; \\git push origin mainCreate ImageRepository in the cluster, namespace, and chart that correspond.flux create image repository podinfo \\--image=redis \\--interval=1m \\--export &gt; ./clusters/home/default/redis/redis-registry.yamlCreate ImagePolicy in the cluster, namespace, and chart that correspond.flux create image policy podinfo \\--image-ref=podinfo \\--select-semver=5.0.x \\--export &gt; ./clusters/home/default/redis/redis-policy.yamlThen deploy the ImageRepository and ImagePolicygit add -A &amp;&amp; \\git commit -m \"add redis image scan\" &amp;&amp; \\git push origin maintell flux to apply changesflux reconcile kustomization flux-system --with-sourceNow edit your deployment.yml and add a comment spec: containers: - name: redis image: redis:6.0.0 # {\"$imagepolicy\": \"flux-system:redis\"}Create ImageUpdateAutomationflux create image update flux-system \\--git-repo-ref=flux-system \\--git-repo-path=\"./clusters/home\" \\--checkout-branch=main \\--push-branch=main \\--author-name=fluxcdbot \\--author-email=fluxcdbot@users.noreply.github.com \\--commit-template=\"\" \\--export &gt; ./clusters/home/flux-system-automation.yamlCommit and deploygit add -A &amp;&amp; \\git commit -m \"add image updates automation\" &amp;&amp; \\git push origin maintell flux to apply changesflux reconcile kustomization flux-system --with-sourceNow do a git pull to see that flux has applied the tagsgit pullYour deployment.yml should be updated and it should be deployed to your cluster! spec: containers: - name: redis image: redis:6.0.16 # {\"$imagepolicy\": \"flux-system:redis\"}NotificationsCreate a secretkubectl -n flux-system create secret generic discord-url \\--from-literal=address=https://discord.com/api/webhooks/YOUR/WEBHOOK/URLCreate a notification providerapiVersion: notification.toolkit.fluxcd.io/v1beta1kind: Providermetadata: name: discord namespace: flux-systemspec: type: discord channel: general secretRef: name: discord-urlDefine an AlertapiVersion: notification.toolkit.fluxcd.io/v1beta1kind: Alertmetadata: name: on-call-webapp namespace: flux-systemspec: providerRef: name: discord eventSeverity: info eventSources: - kind: GitRepository name: '*' - kind: Kustomization name: '*'Get alertskubectl -n flux-system get alertsNAME READY STATUS AGEon-call-webapp True Initialized 1mUpdating FluxIf you need to update flux, check out Updating Flux Installation Using the Latest Binary from CLILinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Built the PERFECT Game Server with Pterodactyl and Docker", "url": "/posts/pterodactyl-game-server/", "categories": "homelab", "tags": "gaming, pterodactyl, docker, redis, mariabdb, opensource", "date": "2022-04-30 08:00:00 -0500", "snippet": "Pterodactyl is a free an open source dedicated game server.It comes with both a panel to configure and deploy your game servers as well as game server nodes to run your games.It runs games in Docke...", "content": "Pterodactyl is a free an open source dedicated game server.It comes with both a panel to configure and deploy your game servers as well as game server nodes to run your games.It runs games in Docker containers to keep them isolated and making them easier than ever to deploy.We‚Äôre going to also use Docker to create our Pterodactyl server and the Wings agent making this truly Docker to the core.https://pterodactyl.ioBe sure to ‚≠ê the Pterodactyl GitHub repo and the Eggs repo (additional games)üì∫ Watch VideoInstall DockerTo install docker, see this postReverse ProxyBoth your Pterodactyl Panel server as well as your Pterodactyl Wing server will need to be configured in your reverse proxy, each with their own public URL. If you need help configuring your reverse proxy, see my guide on how to do that.Need games üéÆ?Check out game deals on Humble Games (affiliate link)Game Panelmkdir pterodactylcd pterodactylmkdir panelcd panelnano docker-compose.ymldocker-compose.ymlversion: '3.8'x-common: database: &amp;db-environment # Do not remove the \"&amp;db-password\" from the end of the line below, it is important # for Panel functionality. MYSQL_PASSWORD: &amp;db-password \"CHANGE_ME\" MYSQL_ROOT_PASSWORD: \"CHANGE_ME_TOO\" panel: &amp;panel-environment # This URL should be the URL that your reverse proxy routes to the panel server APP_URL: \"https://pterodactyl.example.com\" # A list of valid timezones can be found here: http://php.net/manual/en/timezones.php APP_TIMEZONE: \"UTC\" APP_SERVICE_AUTHOR: \"noreply@example.com\" TRUSTED_PROXIES: \"*\" # Set this to your proxy IP # Uncomment the line below and set to a non-empty value if you want to use Let's Encrypt # to generate an SSL certificate for the Panel. # LE_EMAIL: \"\" mail: &amp;mail-environment MAIL_FROM: \"noreply@example.com\" MAIL_DRIVER: \"smtp\" MAIL_HOST: \"mail\" MAIL_PORT: \"1025\" MAIL_USERNAME: \"\" MAIL_PASSWORD: \"\" MAIL_ENCRYPTION: \"true\"## ------------------------------------------------------------------------------------------# DANGER ZONE BELOW## The remainder of this file likely does not need to be changed. Please only make modifications# below if you understand what you are doing.#services: database: image: mariadb:10.5 restart: always command: --default-authentication-plugin=mysql_native_password volumes: - \"/srv/pterodactyl/database:/var/lib/mysql\" environment: &lt;&lt;: *db-environment MYSQL_DATABASE: \"panel\" MYSQL_USER: \"pterodactyl\" cache: image: redis:alpine restart: always panel: image: ghcr.io/pterodactyl/panel:latest restart: always ports: - \"80:80\" - \"443:443\" links: - database - cache volumes: - \"/srv/pterodactyl/var/:/app/var/\" - \"/srv/pterodactyl/nginx/:/etc/nginx/http.d/\" - \"/srv/pterodactyl/certs/:/etc/letsencrypt/\" - \"/srv/pterodactyl/logs/:/app/storage/logs\" environment: &lt;&lt;: [*panel-environment, *mail-environment] DB_PASSWORD: *db-password APP_ENV: \"production\" APP_ENVIRONMENT_ONLY: \"false\" CACHE_DRIVER: \"redis\" SESSION_DRIVER: \"redis\" QUEUE_DRIVER: \"redis\" REDIS_HOST: \"cache\" DB_HOST: \"database\" DB_PORT: \"3306\"networks: default: ipam: config: - subnet: 172.20.0.0/16Start the stackdocker-compose up -dCreate a Userdocker-compose run --rm panel php artisan p:user:makeWingsmkdir pterodactylcd pterodactylmkdir wingscd wingsnano docker-compose.ymldocker-compose.ymlversion: '3.8'services: wings: image: ghcr.io/pterodactyl/wings:v1.6.1 restart: always networks: - wings0 ports: - \"8080:8080\" - \"2022:2022\" - \"443:443\" tty: true environment: TZ: \"UTC\" WINGS_UID: 988 WINGS_GID: 988 WINGS_USERNAME: pterodactyl volumes: - \"/var/run/docker.sock:/var/run/docker.sock\" - \"/var/lib/docker/containers/:/var/lib/docker/containers/\" - \"/etc/pterodactyl/:/etc/pterodactyl/\" - \"/var/lib/pterodactyl/:/var/lib/pterodactyl/\" - \"/var/log/pterodactyl/:/var/log/pterodactyl/\" - \"/tmp/pterodactyl/:/tmp/pterodactyl/\" - \"/etc/ssl/certs:/etc/ssl/certs:ro\" # you may need /srv/daemon-data if you are upgrading from an old daemon #- \"/srv/daemon-data/:/srv/daemon-data/\" # Required for ssl if you use let's encrypt. uncomment to use. #- \"/etc/letsencrypt/:/etc/letsencrypt/\"networks: wings0: name: wings0 driver: bridge ipam: config: - subnet: \"172.21.0.0/16\" driver_opts: com.docker.network.bridge.name: wings0Start the stackdocker-compose up -dsudo nano /etc/pterodactyl/config.ymlPaste the contents from the config your panel generated for your node into this fileNote: The FQDN field when configuring the node in the panel should be the URL that your reverse proxy routes to your wing server. Also ensure you entered 443 for the Daemon Port field.config.ymldebug: falseuuid: 716deb8f-7047-42ad-9323-4a25ae49118btoken_id: 7PoSfql3hdKjbMKntoken: apEo1esCKe5sEWkpfnRB5xakj3mc0aM6jglacgBcsIsgglBtOm0oV1W3efTbwarNapi: host: 0.0.0.0 port: 443 ssl: enabled: false cert: /etc/letsencrypt/live/node-01.example.com/fullchain.pem key: /etc/letsencrypt/live/node-01.example.com/privkey.pem upload_limit: 100system: data: /var/lib/pterodactyl/volumes sftp: bind_port: 2022allowed_mounts: []remote: 'https://pterodactyl.example.com'Restart the stackdocker-compose up -d --force-recreateTroubleshootingMissing MetricsIf you aren‚Äôt seeing your stats in the consolesudo nano /etc/default/grubadd additional parameters to GRUB_CMDLINE_LINUX_DEFAULTGRUB_CMDLINE_LINUX_DEFAULT=\"swapaccount=1 systemd.unified_cgroup_hierarchy=1\"sudo update-grubsudo rebootKubernetesIf you are looking to install the Pterodactyl Panel on kubernetes, see the manifests here.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Freed Up 700GB+ Converting my Videos Using Tdarr", "url": "/posts/tadarr-server/", "categories": "homelab", "tags": "tdarr, plex", "date": "2022-04-16 10:00:00 -0500", "snippet": "Tdarr is a distributed transcoding system that runs on on Windows, Mac, Linux, Arm, Docker, and even Unraid.It uses a server with one or more nodes to transcode videos into any format you like.Toda...", "content": "Tdarr is a distributed transcoding system that runs on on Windows, Mac, Linux, Arm, Docker, and even Unraid.It uses a server with one or more nodes to transcode videos into any format you like.Today, we‚Äôll set up the Docker and Windows version of Tdarr using a GPU to regain up to 50% of your disk space back.I converted my video collection using Tdarr to h265 and saved over 700 GB of disk space.A HUGE THANKS to our sponsor, Micro Center!New Customers Exclusive ‚Äì Get a Free 256gb SSD at Micro Center: https://micro.center/a643c4üì∫ Watch VideoDocker Server + Nodedocker-compose.ymlversion: \"3.4\"services: tdarr: container_name: tdarr image: ghcr.io/haveagitgat/tdarr:latest restart: unless-stopped network_mode: bridge ports: - 8265:8265 # webUI port - 8266:8266 # server port - 8267:8267 # Internal node port environment: - TZ=America/Chicago - PUID=1000 - PGID=1000 - UMASK_SET=002 - serverIP=0.0.0.0 - serverPort=8266 - webUIPort=8265 - internalNode=true - nodeID=MyInternalNode - nodeIP=0.0.0.0 - nodePort=8267 - NVIDIA_DRIVER_CAPABILITIES=all - NVIDIA_VISIBLE_DEVICES=all volumes: - /path/to/server:/app/server - /path/to/configs:/app/configs - /path/to/logs:/app/logs - /path/to/media/:/media - /path/to/temp/:/temp deploy: resources: reservations: devices: - capabilities: - gpuWindows NodeTdarr_Node_Config.json{ \"nodeID\": \"Windows-Node\", \"nodeIP\": \"192.168.0.100\", \"nodePort\": \"8267\", \"serverIP\": \"192.168.0.101\", \"serverPort\": \"8266\", \"handbrakePath\": \"\", \"ffmpegPath\": \"\", \"mkvpropeditPath\": \"\", \"pathTranslators\": [ { \"server\": \"/media/\", \"node\": \"C:/media\" }, { \"server\": \"/temp\", \"node\": \"C:/temp\" } ], \"platform_arch\": \"win32_x64_docker_false\", \"logLevel\": \"INFO\"}LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Fully Automated K3S etcd High Availability Install", "url": "/posts/k3s-etcd-ansible/", "categories": "kubernetes, k3s", "tags": "k3s, rancher, etcd, ansible, cloud-image, metallb, kube-vip", "date": "2022-03-26 10:00:00 -0500", "snippet": "Setting up k3s is hard.That‚Äôs why we made it easy.Today we‚Äôll set up a High Availability K3s cluster using etcd, MetalLB, kube-vip, and Ansible.We‚Äôll automate the entire process giving you an easy,...", "content": "Setting up k3s is hard.That‚Äôs why we made it easy.Today we‚Äôll set up a High Availability K3s cluster using etcd, MetalLB, kube-vip, and Ansible.We‚Äôll automate the entire process giving you an easy, repeatable way to create a k3s cluster that you can run in a few minutes.A HUGE THANKS to our sponsor, Micro Center!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/1043bcüì∫ Watch VideoPrepYou‚Äôll need to be sure you have Ansible installed on your machine and that it is at least 2.11+. If you don‚Äôt, you can use the install Ansible post on how to install and update it.Second, you‚Äôll need to provision the VMs. Here‚Äôs an easy way to create perfect Proxmox templates with cloud image and cloud init and a video if you need.Next, you‚Äôll need to fork and clone the repo.While you‚Äôre at it, give it a ‚≠ê too :).git clone https://github.com/timothystewart6/k3s-ansibleNext you‚Äôll want to create a local copy of ansible.example.cfg.cp ansible.example.cfg ansible.cfgYou‚Äôll want to adapt this to suit your needs however the defaults should work without issue.If you‚Äôre looking for the old defaults, you can see them in this PR that remove the file.Next you‚Äôll need to install some requirements for ansibleansible-galaxy install -r ./collections/requirements.ymlNext, you‚Äôll want to cd into the repo and copy the sample directory within the inventory directory.(Be sure you‚Äôre using the latest template)cp -R inventory/sample inventory/my-clusterInstalling k3sNext, edit the inventory/my-cluster/hosts.ini to match your systems.DNS works here too.[master]192.168.30.38192.168.30.39192.168.30.40[node]192.168.30.41192.168.30.42[k3s_cluster:children]masternodeEdit inventory/my-cluster/group_vars/all.yml to your liking.See comments inline.It‚Äôs best to start using these args, and optionally include traefik if you want it installed with k3s however I would recommend installing it later with helmIt‚Äôs best to start with the default values in the repo.# change these to your liking, the only required are: --disable servicelb, --tls-san extra_server_args: &gt;- --node-taint node-role.kubernetes.io/master=true:NoSchedule --tls-san --disable servicelb --disable traefikextra_agent_args: &gt;- I would not change these values unless you know what you are doing.It will most likely not work for you but listing for posterity. Note: These are for an advanced use case. There isn‚Äôt a one size fits all setting for everyone and their needs, I would try using k3s with the above values before changing them.This could have undesired effects like nodes going offline, pods jumping or being removed, etc‚Ä¶ Using these args might come at the cost of stability Also, these will not work anymore without some modificationsextra_server_args: \"--disable servicelb --disable traefik --write-kubeconfig-mode 644 --kube-apiserver-arg default-not-ready-toleration-seconds=30 --kube-apiserver-arg default-unreachable-toleration-seconds=30 --kube-controller-arg node-monitor-period=20s --kube-controller-arg node-monitor-grace-period=20s --kubelet-arg node-status-update-frequency=5s\"extra_agent_args: \"--kubelet-arg node-status-update-frequency=5s\"Start provisioning of the cluster using the following command:ansible-playbook ./site.yml -i ./inventory/my-cluster/hosts.ini Note: note: add ‚Äìask-pass ‚Äìask-become-pass if you are using password SSH login.After deployment control plane will be accessible via virtual ip address which is defined in inventory/my-cluster/group_vars/all.yml as apiserver_endpointkube configTo get access to your Kubernetes cluster and copy your kube config locally run:scp ansibleuser@192.168.30.38:~/.kube/config ~/.kube/configTesting your clusterBe sure you can ping your VIP defined in inventory/my-cluster/group_vars/all.yml as apiserver_endpointping 192.168.30.222Getting nodeskubectl get nodesDeploying a sample nginx workloadkubectl apply -f example/deployment.ymlCheck to be sure it was deployedkubectl describe deployment nginxDeploying a sample nginx service with a LoadBalancerkubectl apply -f example/service.ymlCheck service and be sure it has an IP from metal lb as defined in inventory/my-cluster/group_vars/all.ymlkubectl describe service nginxVisit that url or curlcurl http://192.168.30.80You should see the nginx welcome page.You can clean this up by runningkubectl delete -f example/deployment.ymlkubectl delete -f example/service.ymlResetting your clusterThis will remove k3s from all nodes.These nodes should be rebooted afterwards.ansible-playbook ./reset.yml -i ./inventory/my-cluster/hosts.iniWhat‚Äôs next?See here to get the steps for installing traefik + let‚Äôs encryptSee here for steps to deploy rancherTroubleshootingBe sure to see this post on how to troubleshoot common problemsLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Perfect Proxmox Template with Cloud Image and Cloud Init", "url": "/posts/cloud-init-cloud-image/", "categories": "proxmox", "tags": "proxmox, ubuntu, cloud-image, cloud-init, cloud, clone, linux", "date": "2022-03-19 10:00:00 -0500", "snippet": "Using Cloud Images and Cloud Init with Proxmox is easy, fast, efficient, and fun! Cloud Images are small images that are certified cloud ready that have Cloud Init preinstalled and ready to accept...", "content": "Using Cloud Images and Cloud Init with Proxmox is easy, fast, efficient, and fun! Cloud Images are small images that are certified cloud ready that have Cloud Init preinstalled and ready to accept a Cloud Config.Cloud Images and Cloud Init also work with Proxmox and if you combine the two you have a perfect, small, efficient, optimized clone template to provision machines with your ssh keys and network settings.So join me as we discuss, set up, and configure Proxmox with Cloud Images and Cloud Init.üì∫ Watch VideoInstructionsChoose your Ubuntu Cloud ImageDownload Ubuntu (replace with the url of the one you chose from above)wget https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.imgCreate a new virtual machineqm create 8000 --memory 2048 --core 2 --name ubuntu-cloud --net0 virtio,bridge=vmbr0Import the downloaded Ubuntu disk to local storage (Change local to the storage of your choice)qm disk import 8000 noble-server-cloudimg-amd64.img localAttach the new disk to the vm as a scsi drive on the scsi controller (Change local to the storage of your choice)qm set 8000 --scsihw virtio-scsi-pci --scsi0 local:vm-8000-disk-0Add cloud init drive ((Change local to the storage of your choice)qm set 8000 --ide2 local:cloudinitMake the cloud init drive bootable and restrict BIOS to boot from disk onlyqm set 8000 --boot c --bootdisk scsi0Add serial consoleqm set 8000 --serial0 socket --vga serial0DO NOT START YOUR VMNow, configure hardware and cloud init, then create a template and clone.If you want to expand your hard drive you can on this base image before creating a template or after you clone a new machine.I prefer to expand the hard drive after I clone a new machine based on need.Create template.qm template 8000Clone template.qm clone 8000 135 --name yoshi --fullTroubleshootingIf you need to reset your machine-idsudo rm -f /etc/machine-idsudo rm -f /var/lib/dbus/machine-idThen shut it down and do not boot it up.A new id will be generated the next time it boots.If it does not you can run:sudo systemd-machine-id-setupLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "A Hypervisor Built on Kubernetes - Cloud Native HCI with Harvester", "url": "/posts/meet-harvester/", "categories": "kubernetes, rancher", "tags": "harvester, homelab, rancher, k3s, kubernetes, grafana", "date": "2022-03-12 07:00:00 -0600", "snippet": "Rancher released a next generation open source HCI software hypervisor built on Kubernetes that helps you run virtual machines.With Harvester you can create Linux, Windows, or any virtual machine t...", "content": "Rancher released a next generation open source HCI software hypervisor built on Kubernetes that helps you run virtual machines.With Harvester you can create Linux, Windows, or any virtual machine that can be easily scaled and cluster giving your high availability virtual machines with a few clicks.It also gives you a platform to automatically create HA RKE1, RKE2, and K3S Kubernetes clusters with etcd along with the virtual machines it runs on.Now you can run virtual machines and kubernetes on the edge on one machine.üì∫ Watch Video‚¨áÔ∏è Download Harvesterüìñ Harvester DocumentationLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "TrueNAS Scale Apps - Official, Unofficial, Docker, and Kubernetes", "url": "/posts/truenas-scale-apps/", "categories": "truenas", "tags": "homelab, docker-compose, container, image, helm, kubernetes, k3s, truenas, docker", "date": "2022-03-02 07:00:00 -0600", "snippet": "TrueNAS SCALE is here and with it comes new way of installing and managing applications.You can install official apps, unofficial and community apps using TrueCharts, and also any Docker image or K...", "content": "TrueNAS SCALE is here and with it comes new way of installing and managing applications.You can install official apps, unofficial and community apps using TrueCharts, and also any Docker image or Kubernetes deployment with helm.Join me as we dive into managing applications and exploring TrueNAS SCALES‚Äôs new app engine that runs Docker, Kubernetes, and K3S.üì∫ Watch VideoIf you‚Äôre looking for Community App Catalog for TrueNAS SCALE, you can find it hereLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Building your first Dockerfile, Image, and Container", "url": "/posts/custom-docker-image/", "categories": "docker", "tags": "docker, docker-compose, container, image", "date": "2022-02-26 07:00:00 -0600", "snippet": "We spin up all types of containers on my channel in my tutorials, but we have yet to build our own custom Docker container image.Today we‚Äôll start from scratch with an empty Dockerfile and create, ...", "content": "We spin up all types of containers on my channel in my tutorials, but we have yet to build our own custom Docker container image.Today we‚Äôll start from scratch with an empty Dockerfile and create, build, and run our very own custom Docker image! We‚Äôll learn all the commands that everyone should know when building and maintaining images with Docker.This tutorial is a great way to get started with Docker!üì∫ Watch VideoInstall DockerTo install docker, see this postDocker commandsSource filesbuild imagedocker build .build image with tagdocker build -t hello-internetlist docker imagesdocker imageslist docker containersdocker pslist docker containers including stoppeddocker ps -acreate container from imagedocker run -d -p 80:80 &lt;image id&gt;exec into running containerdocker exec -it &lt;container id&gt; /bin/shstop running containerdocker stop &lt;container id&gt;start a stopped containerdocker start &lt;container id&gt;remove a containerdocker rm &lt;container id&gt;remove an imagedocker rmi &lt;image id&gt;LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Open Source & Collaborative Security with CrowdSec and Traefik - CrowdSec & Traefik Tutorial", "url": "/posts/crowdsec-traefik/", "categories": "homelab", "tags": "homelab, hardware, security, self-hosted, crowdsec, traefik, fail2ban", "date": "2022-02-12 07:00:00 -0600", "snippet": "CrowdSec is a free, open-source and collaborative IPS. Analyze behaviors, respond to attacks &amp; share signals across the community.With CrowdSec, you can set up your own intrusion detection syst...", "content": "CrowdSec is a free, open-source and collaborative IPS. Analyze behaviors, respond to attacks &amp; share signals across the community.With CrowdSec, you can set up your own intrusion detection system that parses logs, detects and blocks threats, and shares bad actors with the larger CrowdSec community.It works great with a reverse proxy like traefik to help keep hackers at bay.Could this be a viable alternative to fail2ban?üì∫ Watch VideoA HUGE THANK YOU to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/1fbb85If you need to set up traefik, you can follow this post here on configuring traefikIf you need a high level overview of HomeLab and Self-Hosting Security, check out this video that will help you keep your network safe.Configure CrowdSectraefik bouncer repohttps://github.com/fbonalair/traefik-crowdsec-bouncermkdir crowdseccd crowdsectouch docker-compose.ymlnano docker-compose.ymlversion: '3.8'services: crowdsec: image: crowdsecurity/crowdsec:latest container_name: crowdsec environment: GID: \"${GID-1000}\" COLLECTIONS: \"crowdsecurity/linux crowdsecurity/traefik\" # depends_on: #uncomment if running traefik in the same compose file # - 'traefik' volumes: - ./config/acquis.yaml:/etc/crowdsec/acquis.yaml - crowdsec-db:/var/lib/crowdsec/data/ - crowdsec-config:/etc/crowdsec/ - traefik_traefik-logs:/var/log/traefik/:ro networks: - proxy restart: unless-stopped bouncer-traefik: image: docker.io/fbonalair/traefik-crowdsec-bouncer:latest container_name: bouncer-traefik environment: CROWDSEC_BOUNCER_API_KEY: some-api-key CROWDSEC_AGENT_HOST: crowdsec:8080 networks: - proxy # same network as traefik + crowdsec depends_on: - crowdsec restart: unless-stoppednetworks: proxy: external: truevolumes: crowdsec-db: crowdsec-config: traefik_traefik-logs: # this will be the name of the volume from trarfic logs external: true # remove if traefik is running on same stackcd configtouch acquis.yamlnano acquis.yamldocker-compose up -d --force-recreatefilenames: - /var/log/traefik/*labels: type: traefikConfigure Traefikcd traefikcd datanano traefik.ymlapi: dashboard: true debug: trueentryPoints: http: address: \":80\" http: middlewares: - crowdsec-bouncer@file https: address: \":443\" http: middlewares: - crowdsec-bouncer@fileserversTransport: insecureSkipVerify: trueproviders: docker: endpoint: \"unix:///var/run/docker.sock\" exposedByDefault: false file: filename: /config.ymlcertificatesResolvers: cloudflare: acme: email: someone@example.com storage: acme.json dnsChallenge: provider: cloudflare resolvers: - \"1.1.1.1:53\"log: level: \"INFO\" filePath: \"/var/log/traefik/traefik.log\"accessLog: filePath: \"/var/log/traefik/access.log\"nano docker-compose.ymlversion: '3'services: traefik: image: traefik:latest container_name: traefik restart: unless-stopped security_opt: - no-new-privileges:true networks: - proxy ports: - 80:80 - 443:443 environment: - CF_API_EMAIL=user@example.com - CF_DNS_API_TOKEN=YOUR_API_TOKEN # - CF_API_KEY=YOUR_API_KEY # be sure to use the correct one depending on if you are using a token or key volumes: - /etc/localtime:/etc/localtime:ro - /var/run/docker.sock:/var/run/docker.sock:ro - /home/username/traefik/data/traefik.yml:/traefik.yml:ro - /home/username/traefik/data/acme.json:/acme.json - /home/username/traefik/data/config.yml:/config.yml:ro - traefik-logs:/var/log/traefik labels: - \"traefik.enable=true\" - \"traefik.http.routers.traefik.entrypoints=http\" - \"traefik.http.routers.traefik.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.middlewares.traefik-auth.basicauth.users=USER:BASIC_AUTH_PASSWORD\" - \"traefik.http.middlewares.traefik-https-redirect.redirectscheme.scheme=https\" - \"traefik.http.middlewares.sslheader.headers.customrequestheaders.X-Forwarded-Proto=https\" - \"traefik.http.routers.traefik.middlewares=traefik-https-redirect\" - \"traefik.http.routers.traefik-secure.entrypoints=https\" - \"traefik.http.routers.traefik-secure.rule=Host(`traefik-dashboard.local.example.com`)\" - \"traefik.http.routers.traefik-secure.middlewares=traefik-auth\" - \"traefik.http.routers.traefik-secure.tls=true\" - \"traefik.http.routers.traefik-secure.tls.certresolver=cloudflare\" - \"traefik.http.routers.traefik-secure.tls.domains[0].main=local.example.com\" - \"traefik.http.routers.traefik-secure.tls.domains[0].sans=*.local.example.com\" - \"traefik.http.routers.traefik-secure.service=api@internal\"networks: proxy: external: truevolumes: traefik-logs:docker-compose up -d --force-recreatecd config/datanano config.ymladd crowdsec-bouncer: forwardauth: address: http://bouncer-traefik:8080/api/v1/forwardAuth trustForwardHeader: truenano traefik.yml# check to be sure you have your middleware set for bothentryPoints: http: address: \":80\" http: middlewares: - crowdsec-bouncer@file https: address: \":443\" http: middlewares: - crowdsec-bouncer@fileDashboardTo add a self-hosted dashboard update your docker-compose.ymlcd crowdsectouch DockerfileFROM metabase/metabaseRUN mkdir /data/ &amp;&amp; wget https://crowdsec-statics-assets.s3-eu-west-1.amazonaws.com/metabase_sqlite.zip &amp;&amp; unzip metabase_sqlite.zip -d /data/nano docker-compose.yml dashboard: #we're using a custom Dockerfile so that metabase pops with pre-configured dashboards build: ./dashboard restart: always ports: - 3000:3000 environment: MB_DB_FILE: /data/metabase.db MGID: \"${GID-1000}\" depends_on: - 'crowdsec' volumes: - crowdsec-db:/metabase-data/ networks: crowdsec_test: ipv4_address: 172.20.0.5restart containerdocker-compose up -d --force-recreateDefault‚Äôs credentials for metabase are crowdsec@crowdsec.net and !!Cr0wdS3c_M3t4b4s3?? Be sure to change this.CrowdSec Commandssee metricsdocker exec crowdsec cscli metricssee bansdocker exec crowdsec cscli decisions listmanually install collectionsdocker exec crowdsec cscli collections install crowdsecurity/traefikupdate hubsdocker exec crowdsec cscli hub updateupgrade hubsdocker exec crowdsec cscli hub upgradeadd bouncer(save api key somewhere)docker exec crowdsec cscli bouncers add bouncer-traefikban ipdocker exec crowdsec cscli decisions add --ip 192.168.0.101unban ipdocker exec crowdsec cscli decisions delete --ip 192.168.0.101LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Hosting Security Guide for your HomeLab", "url": "/posts/self-hosting-security/", "categories": "homelab", "tags": "homelab, hardware, security, self-hosted", "date": "2022-01-29 07:00:00 -0600", "snippet": "When most people think about self-hosting services in their HomeLab, they often think of the last mile. By last mile I mean the very last hop before a user accesses your services. This last hop, wh...", "content": "When most people think about self-hosting services in their HomeLab, they often think of the last mile. By last mile I mean the very last hop before a user accesses your services. This last hop, whether that‚Äôs using certificates or a reverse proxy, is incredibly important, but it‚Äôs also important to know that security starts at the foundation of your HomeLab.Today, we‚Äôll work our way up from hardware security, to OS, to networking, to containers, to firewalls, IDS/IPS, reverse proxies, auth proxies for authentication and authorization, and even lean in to an external provider like Cloudflare.A HUGE thanks to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/0ef37aüì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Build a Low Power, Efficient, Small Form Factor but Powerful Proxmox Server", "url": "/posts/low-power-efficient-proxmox/", "categories": "homelab", "tags": "homelab, proxmox, hardware", "date": "2022-01-15 07:00:00 -0600", "snippet": "Have you been thinking about building a low power, efficient, small form factor but performant Proxmox server? This is the perfect home server build for anyone who wanted to virtualize some machi...", "content": "Have you been thinking about building a low power, efficient, small form factor but performant Proxmox server? This is the perfect home server build for anyone who wanted to virtualize some machines while still staying green.This tiny, silent, and efficient build is one that won‚Äôt drive up your electricity bill either.A HUGE thanks to Micro Center for sponsoring this video!New Customers Exclusive ‚Äì Get a Free 240gb SSD at Micro Center: https://micro.center/4e48d4üì∫ Watch VideoSee the kit here:https://kit.co/technotim/efficient-low-power-powerful-virtualization-serverLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet the Turing Pi 2 - Mix Pis and NVidia Jetsons on a Mini ITX Board!", "url": "/posts/turing-pi-2-hardware/", "categories": "homelab", "tags": "raspberry-pi, k3s, kubernetes, homelab, hardware, turing-pi", "date": "2022-01-01 07:00:00 -0600", "snippet": "The Turing Pi 2 is a compact ARM cluster that provides a scalable computing on the edge.The Turning Pi 2 comes with many improvements over the Turning Pi 1.This model ships with 32GB of RAM, SATA I...", "content": "The Turing Pi 2 is a compact ARM cluster that provides a scalable computing on the edge.The Turning Pi 2 comes with many improvements over the Turning Pi 1.This model ships with 32GB of RAM, SATA III interface, Raspberry Pi Compute module 4 support, and support for NVIDIA Jetson boards.This means that you can mix and match both raspberry Pis along with Nvidia Jetson boards. This gives us a ton of flexibility to be able to run Pis for general compute workloads, and then Nvidia Jetsons for AI or ML workloads.Join me as we explore the Turing Pi 2 and prepare its home inside of my HomeLab server rack.üì∫ Watch VideoTuring Pi 2 - https://turingpi.comRaspberry Pi Compute Modules - https://www.raspberrypi.com/products/compute-module-4NVIDIA Jetson - https://amzn.to/3eGDQjeRosewill 2U Server Chassis Case - https://amzn.to/3qxbygkEVGA 550 Power Supply - https://amzn.to/3EMEzd4Noctua 80mm Redux PWM Fans - https://amzn.to/3zdBUbpSamsung EVO microSD 64 GB - https://amzn.to/3FR5OosSamsung EVO microSD 128 GB - https://amzn.to/3eCIajxCR2032 Batteries - https://amzn.to/3zfWE2bCM4 Heat Sinks - https://amzn.to/31hSVVkMultipurpose Rails https://amzn.to/3Hr6wsS4 Pin Splitter Cables https://amzn.to/3mQvzh4LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet keepalived - High Availability and Load Balancing in One", "url": "/posts/keepalived-ha-loadbalancer/", "categories": "homelab", "tags": "homelab, keepalived, self-hosted, linux, ubuntu", "date": "2021-12-11 07:00:00 -0600", "snippet": "In my quest to make my services highly available I decided to use keepalived.keepalived is a framework for both load balancing and high availability that implements VRRP.This is a protocol that you...", "content": "In my quest to make my services highly available I decided to use keepalived.keepalived is a framework for both load balancing and high availability that implements VRRP.This is a protocol that you see on some routers and has been implemented in keepalived. It creates a Virtual IP (or VIP, or floating IP) that acts as a gateway to route traffic to all participating hosts.This VIP that can provide a high availability setup and fail over to another host in the event that one is down. In this video, we‚Äôll set up and configure keepalived, we‚Äôll test our configuration to make sure it‚Äôs working, and we‚Äôll also talk about some advanced use cases like load balancing.üì∫ Watch VideoInstallationsudo apt updatesudo apt install keepalivedsudo apt install libipset13ConfigurationFind your IPip a edit your configsudo nano /etc/keepalived/keepalived.confFirst nodevrrp_instance VI_1 { state MASTER interface ens18 virtual_router_id 55 priority 150 advert_int 1 unicast_src_ip 192.168.30.31 unicast_peer { 192.168.30.32 } authentication { auth_type PASS auth_pass C3P9K9gc } virtual_ipaddress { 192.168.30.100/24 }}Second nodevrrp_instance VI_1 { state BACKUP interface ens18 virtual_router_id 55 priority 100 advert_int 1 unicast_src_ip 192.168.30.32 unicast_peer { 192.168.30.31 } authentication { auth_type PASS auth_pass C3P9K9gc } virtual_ipaddress { 192.168.30.100/24 }}Start and enable the servicesudo systemctl enable --now keepalived.servicestopping the servicesudo systemctl stop keepalived.serviceget the statussudo systemctl status keepalived.servicenginx examplecreate index.html to mountnano /home/user/docker_volumes/nginx/index.html&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"&gt; &lt;title&gt;Hello From Primary Node&lt;/title&gt; &lt;style&gt; h1{ font-weight:lighter; font-family: Arial, Helvetica, sans-serif; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt; Hello World 1 &lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;install nginx via dockerdocker run --name some-nginx -v /home/user/docker_volumes/nginx:/usr/share/nginx/html:ro -d -p 8080:80 nginxvisit your VIP on port 8080PiHoleIn this video we covered the PiHole use case.After setting this up, be sure to check out the tutorial on Gravity SyncLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "HomeLab Services Tour Late 2021 - What am I Self-Hosting in my HomeLab?", "url": "/posts/homelab-services-tour-2021/", "categories": "homelab", "tags": "homelab, proxmox, grafana, logging, dns, dashboard, kubernetes, certificates, shlink, littlelink-server, portainer, self-hosted, docker, rancher, pi-hole, heimdall, plex, truenas, jekyll, grafana, loki, monitoring, uptime-kuma, traefik, nas, unifi, virtualization, containerization", "date": "2021-12-04 07:00:00 -0600", "snippet": "After showing off my Home Lab hardware in my late 2021 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which se...", "content": "After showing off my Home Lab hardware in my late 2021 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which services I am running here at home.Today, we walk through everything I am hosting including: Dashboard, Hypervisor, Virtualization, Containerization, Network Attached Storage (NAS), DNS, Network Management, Home Security, Kubernetes, Kubernetes Storage, Docker, Reverse Proxy, Certificates, Monitoring, Logging, Syncing Data, File Sharing, Self-Promotion (Contact Page), Link Shortening, Home Entertainment, Home Automation, Battery / UPS Monitoring, CMS, Static Site Generators, Dynamic DNS, CI/CD, and many, many others.Enjoy the virtual tour!Worth mentioning, I have videos on almost every service mentioned in this video!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Grafana LOKI, a Log Aggregation System for Everything", "url": "/posts/grafana-loki/", "categories": "homelab", "tags": "homelab, proxmox, grafana, logging, promtail, prometheus", "date": "2021-11-20 07:00:00 -0600", "snippet": "I‚Äôve been on a quest to find a new logging system.I‚Äôve use quite a few in the past, some open source, some proprietary, and some home grown, but recently I‚Äôve decided to switch.I‚Äôve switched to Gra...", "content": "I‚Äôve been on a quest to find a new logging system.I‚Äôve use quite a few in the past, some open source, some proprietary, and some home grown, but recently I‚Äôve decided to switch.I‚Äôve switched to Grafana Loki for all of my logs for all of my systems - this includes machines, devices, docker systems and hosts, and my all of my kubernetes clusters.If you‚Äôre thinking of using Grafana and are also looking for a fast way to log all of your systems, join me as we discuss and configure Grafana Loki.üì∫ Watch VideoDon‚Äôt want to host it yourself? Check out Grafana Cloud and sign up for a free account https://l.technotim.live/grafana-labsDocker SetupSee this post on how to install docker and docker-composeRunning the containerIf you‚Äôre using Docker composemkdir grafanamkdir lokimkdir promtailtouch docker-compose.ymlnano docker-compose.yml # copy the contents from belowlsdocker-compose up -d --force-recreate # be sure you've created promtail-config.yml and loki-config.yml before running thisdocker-compose.ymlversion: \"3\"networks: loki:services: loki: image: grafana/loki:2.4.0 volumes: - /home/serveradmin/docker_volumes/loki:/etc/loki ports: - \"3100:3100\" restart: unless-stopped command: -config.file=/etc/loki/loki-config.yml networks: - loki promtail: image: grafana/promtail:2.4.0 volumes: - /var/log:/var/log - /home/serveradmin/docker_volumes/promtail:/etc/promtail # ports: # - \"1514:1514\" # this is only needed if you are going to send syslogs restart: unless-stopped command: -config.file=/etc/promtail/promtail-config.yml networks: - loki grafana: image: grafana/grafana:latest user: \"1000\" volumes: - /home/serveradmin/docker_volumes/grafana:/var/lib/grafana ports: - \"3000:3000\" restart: unless-stopped networks: - lokiLoki Confignano loki/loki-config.ymlloki-config.ymlauth_enabled: falseserver: http_listen_port: 3100 grpc_listen_port: 9096common: path_prefix: /tmp/loki storage: filesystem: chunks_directory: /tmp/loki/chunks rules_directory: /tmp/loki/rules replication_factor: 1 ring: instance_addr: 127.0.0.1 kvstore: store: inmemoryschema_config: configs: - from: 2020-10-24 store: boltdb-shipper object_store: filesystem schema: v11 index: prefix: index_ period: 24hruler: alertmanager_url: http://localhost:9093Promtail Confignano promtail/promtail-config.ymlpromtail-config.ymlserver: http_listen_port: 9080 grpc_listen_port: 0positions: filename: /tmp/positions.yamlclients: - url: http://loki:3100/loki/api/v1/pushscrape_configs:# local machine logs- job_name: local static_configs: - targets: - localhost labels: job: varlogs __path__: /var/log/*log ## docker logs#- job_name: docker # pipeline_stages:# - docker: {}# static_configs:# - labels:# job: docker# __path__: /var/lib/docker/containers/*/*-json.log# syslog target#- job_name: syslog# syslog:# listen_address: 0.0.0.0:1514 # make sure you also expose this port on the container# idle_timeout: 60s# label_structured_data: yes# labels:# job: \"syslog\"# relabel_configs:# - source_labels: ['__syslog_message_hostname']# target_label: 'host'Loki Docker DriverInstall docker plugindocker plugin install grafana/loki-docker-driver:latest --alias loki --grant-all-permissionsEdit docker daemon configsudo nano /etc/docker/daemon.jsondaemon.json{ \"log-driver\": \"loki\", \"log-opts\": { \"loki-url\": \"http://localhost:3100/loki/api/v1/push\", \"loki-batch-size\": \"400\" }}Restart docker daemon. sudo systemctl restart dockerYou will also need to recreate your containers after applying this setting *LogQL sample queriesQuery all logs from the varlogs stream{job=\"varlogs\"} Query all logs from the varlogs stream and filter on docker{job=\"varlogs\"} |= \"docker\"Query all logs from the container_name label of uptime-kuma and filter on host of juno{container_name=\"uptime-kuma\", host=\"juno\"}Read more about LogQL hereARM CPU (Raspberry Pi)There is a workaround for using this with ARM CPUs. Credit to AndreiTelteu for finding this in this discussiondelete /etc/docker/daemon.jsonAdd the vector service to the docker-compose.yml file vector: image: timberio/vector:0.18.1-debian volumes: - /var/run/docker.sock:/var/run/docker.sock - /home/serveradmin/docker_volumes/vector/vector-config.toml:/etc/vector/vector.toml:ro ports: - \"8383:8383\" restart: unless-stopped networks: - lokiRun this commandmkdir vectorcd vectornano vector-config.tomlpaste this config in the file:[sources.docker-local] type = \"docker_logs\" docker_host = \"/var/run/docker.sock\" exclude_containers = [] # Identify zero-width space as first line of a multiline block. multiline.condition_pattern = '^\\x{200B}' # required multiline.mode = \"halt_before\" # required multiline.start_pattern = '^\\x{200B}' # required multiline.timeout_ms = 1000 # required, milliseconds [sinks.loki] # General type = \"loki\" # required inputs = [\"docker*\"] # required endpoint = \"http://loki:3100\" # required # Auth auth.strategy = \"bearer\" # required auth.token = \"none\" # required # Encoding encoding.codec = \"json\" # required # Healthcheck healthcheck.enabled = false # optional, default # Loki Labels labels.forwarder = 'vector' labels.host = '' labels.container_name = '' labels.compose_service = '' labels.compose_project = '' labels.source = '' labels.category = 'dockerlogs'Credits to this post for the config file: grafana/loki#2361 (comment)Kubernetes SetupIf you‚Äôre looking to set this up in kubernetes, see this postLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Installing Grafana Loki with Helm on Kubernetes", "url": "/posts/grafana-loki-kubernetes/", "categories": "kubernetes", "tags": "homelab, proxmox, grafana, logging, promtail, prometheus, kubernetes, helm", "date": "2021-11-20 06:00:00 -0600", "snippet": "In my previous video (Meet Grafana LOKI, a log aggregation system for everything and post, I promised that I would also explain how to install Granfana Loki on Kubernetes using helm.If you‚Äôre looki...", "content": "In my previous video (Meet Grafana LOKI, a log aggregation system for everything and post, I promised that I would also explain how to install Granfana Loki on Kubernetes using helm.If you‚Äôre looking to set this up in docker-compose, be sure to check out this videoInstalling helmThink of helm as a package manager for kubernetes. It‚Äôa an easy way to bundle and deploy config to kubernetes with versioning.If you need to install helm visit helm.shInstalling Loki StackFirst add Loki‚Äôs chart repository to helmhelm repo add grafana https://grafana.github.io/helm-chartsThen update the chart repositoryhelm repo updateThis command will: install grafana install prometheus install loki enable persistence for your stack and create a PVChelm upgrade --install loki grafana/loki-stack --set grafana.enabled=true,prometheus.enabled=true,prometheus.alertmanager.persistentVolume.enabled=false,prometheus.server.persistentVolume.enabled=false,loki.persistence.enabled=true,loki.persistence.storageClassName=nfs-client,loki.persistence.size=5GiYou‚Äôll want to set loki.persistence.storageClassName=nfs-client to your StorageClassIn this example, I am using nf-client which is the Kubernetes NFS Subdir External ProvisionerAccessing the Grafana DashboardTo access your Grafana dashboard you can runkubectl port-forward --namespace &lt;YOUR-NAMESPACE&gt; service/loki-grafana 3000:80To get the password for the admin user runkubectl get secret --namespace &lt;YOUR-NAMESPACE&gt; loki-grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echoThis should print out your passwordYou can now access your dashboard on http://localhost:3000Ingress with TraefikIf you want to create an IngressRoute and you are using traefik can you apply the followingingress.ymlapiVersion: traefik.containo.us/v1alpha1kind: IngressRoutemetadata: name: loki-grafana-ingress annotations: kubernetes.io/ingress.class: traefik-internal # change with your valuespec: entryPoints: - websecure routes: - match: Host(`grafana.example.com`) # change with your value kind: Rule services: - name: loki-grafana port: 80kubectl apply -f ingress.ymlYou should now be able to access your dashboard on https://grafana.example.comLogQL sample queriesQuery all logs from the container label{container=\"uptime-kuma\"} query all logs from the container stream and filter on error{container=\"uptime-kuma\"} |= \"error\"query all logs from the pod label of uptime-kuma-8d45g32fd-lk8rl{pod=\"uptime-kuma-8d45g32fd-lk8rl\"}Read more about LogQL hereUpgrading Loki StackTo upgrade, you run the same command you use to install it, with an updated charthelm repo updatehelm upgrade --install loki grafana/loki-stack --set grafana.enabled=true,prometheus.enabled=true,prometheus.alertmanager.persistentVolume.enabled=false,prometheus.server.persistentVolume.enabled=false,loki.persistence.enabled=true,loki.persistence.storageClassName=nfs-client,loki.persistence.size=5GiLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim HomeLab and NEW Server Room Tour! (Late 2021)", "url": "/posts/homelab-tour-2021/", "categories": "homelab", "tags": "homelab, hardware", "date": "2021-11-06 08:00:00 -0500", "snippet": "Well, here it is! My Late 2021 Server Rack and HomeLab tour! This is a special one because I just revamped and remodeled a spot in the basement for my new data center / server room (still picking...", "content": "Well, here it is! My Late 2021 Server Rack and HomeLab tour! This is a special one because I just revamped and remodeled a spot in the basement for my new data center / server room (still picking out a name for it).I‚Äôve upgraded, replaced, added, and consolidated quite a bit since my last tour! New servers, new networking, new UPS, new Raspberry Pi, and even a whole entire wall of tech gear. I also added lots of automation and IoT devices! Join me as we walk through my server room upgrade!üì∫ Watch Video(Affiliate links are included in this description. I may receive a small commission at no cost to you.)üì¶ Gear in this video üì¶2u Rack Shelf - https://amzn.to/2ZVSJKNAPC 1500VA UPS - https://amzn.to/3GXLJh6Nest Protect - https://amzn.to/3BLhc21Hue Iris Light - https://amzn.to/3ET5Gn8Hue Motion &amp; Temp https://amzn.to/3qb1FXfAxxtra Power Strip - https://amzn.to/3qbzIhTAmazon Power Strip - https://amzn.to/3mMN16wWall Control Galvanized Steel Pegboard - https://amzn.to/3bJ8R4sHue Dimmer Switch - https://amzn.to/3wj9StsHue Light Strips - https://amzn.to/3wkkLLDHue Smart Bulb Starter Kit - https://amzn.to/31renqsHue Motion &amp; Temp Detection - https://amzn.to/3o7HOFRCloud Lamp - https://amzn.to/3GZji24Pi 4 B - https://amzn.to/3BTPKzcPoE Pi Hat - https://amzn.to/3GUqY5OPi Zero - https://amzn.to/3o4LGapHD Homerun - https://amzn.to/2ZXxmYSIntel NUC - https://amzn.to/3BKE3uR24 Port Patch Panel - https://amzn.to/3GYA4yoWall Mount Patch Panel - https://amzn.to/3o2AxadSlim Network Cables - https://amzn.to/3kbYV85UniFi Flex Mini - https://l.technotim.live/ubiquitiUniFi UDM Pro - https://l.technotim.live/ubiquitiUniFi 24 Port PoE Gen 2 Switch Pro - https://l.technotim.live/ubiquitiPC Conversion Case - https://amzn.to/3qgkFDJ18u Server Rack - https://amzn.to/3kbZdvH1u Rails - https://amzn.to/3GSd701APC 600 VA UPS - https://amzn.to/3mMxsM1NetApp DD4246 Disk Shelf - https://amzn.to/3o2AOKhSuperMicro 1u Servers - https://amzn.to/3q9M7TJ8 TB IronWolf NAS Drives - https://amzn.to/3EQXXGwüöÄ Kits üöÄRackmount Servers - https://kit.co/technotim/rackmount-home-lab-serversHomeLab Racks - https://kit.co/technotim/server-rack-homelab1u Servers - https://kit.co/technotim/techno-tim-1u-serverNetworking Stack - https://kit.co/technotim/techno-tim-network-stackRaspberry Pi with PoE - https://kit.co/technotim/best-raspberry-pi-with-poeHome Security - https://kit.co/technotim/techno-tim-home-securityStorage and Hard Drives - https://kit.co/technotim/best-ssd-hard-drive-flash-storageHomeLab and Server Room Upgrade 2021 - https://kit.co/technotim/techno-tim-homelab-and-server-room-upgrade-2021LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize Windows 11 with Proxmox the Right Way!", "url": "/posts/windows-11-proxmox/", "categories": "homelab", "tags": "homelab, proxmox, windows-11, virtualization", "date": "2021-10-22 08:00:00 -0500", "snippet": "Windows 11 is here and with it comes new hardware requirements.These requirements not only affect physical hardware but also virtual hardware too.The TPM 2.0 requirement for Windows 11 is shaking t...", "content": "Windows 11 is here and with it comes new hardware requirements.These requirements not only affect physical hardware but also virtual hardware too.The TPM 2.0 requirement for Windows 11 is shaking the tech community, HomeLab community, and even virtualization too.Well have no fear, today we‚Äôre going to virtualize Windows 11 with a virtual TPM chip! We‚Äôre going to create a virtual machine according to proxmox best practices and even install a virtual TMP chip so that you can test Windows 11 with your hardware and software before upgrading Windows 10 in your HomeLab or production environment without any hacks!üì∫ Watch VideoLinksWindows 11 Downloadhttps://www.microsoft.com/en-us/software-download/windows11KVM/QEMU Windows guest drivers (virtio-win) downloadhttps://github.com/virtio-win/virtio-win-pkg-scriptsNeed to Upgrade to Proxmox 7?See the guide hereüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Uptime Kuma, a Fancy Open Source Uptime Monitor for all your HomeLab Monitoring Needs", "url": "/posts/uptime-kuma/", "categories": "self-hosted", "tags": "homelab, uptime-kuma, self-hosted, docker, monitoring, alerting, open-source", "date": "2021-10-03 10:00:00 -0500", "snippet": "You‚Äôve spun up lots of self-hosted services in your HomeLab but you haven‚Äôt set up monitoring and alerting yet.Well, be glad you waited because today well set up Uptime Kuma to do just that.Uptime ...", "content": "You‚Äôve spun up lots of self-hosted services in your HomeLab but you haven‚Äôt set up monitoring and alerting yet.Well, be glad you waited because today well set up Uptime Kuma to do just that.Uptime Kuma is a self-hosted, open source, fancy uptime monitoring and alerting system.It can monitor HTTP, HTTP with keyword, TCP, Ping, and even DNS systems!https://github.com/louislam/uptime-kumaüì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeRunning the containerIf you‚Äôre using Docker composemkdir uptime-kumacd uptime-kumatouch docker-compose.ymlnano docker-compose.yml # copy the contents from belowmkdir datalsdocker-compose up -d --force-recreatedocker-compose.yml---version: \"3.1\"services: uptime-kuma: image: louislam/uptime-kuma:1 container_name: uptime-kuma volumes: - /home/serveradmin/docker_volumes/uptime-kuma/data:/app/data ports: - 3001:3001 restart: unless-stopped security_opt: - no-new-privileges:trueIf you‚Äôre using Rancher, Portainer, Open Media Vault, Unraid, or anything else with a GUI, just copy and paste the environment variables, ports, and volumes from above into the form on the web page.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Network UPS Tools (NUT) Ultimate Guide", "url": "/posts/NUT-server-guide/", "categories": "homelab", "tags": "homelab, nut, self-hosted, docker, ups, pdu, open-source", "date": "2021-09-25 10:00:00 -0500", "snippet": "Meet NUT Server, or Network UPS Tools.It‚Äôs an open UPS networking monitoring tool that runs on many different operating systems and processors.This means you can run the server on Linux, MacOS, or ...", "content": "Meet NUT Server, or Network UPS Tools.It‚Äôs an open UPS networking monitoring tool that runs on many different operating systems and processors.This means you can run the server on Linux, MacOS, or BSD and run the client on Windows, MacOS, Linux, and more.It‚Äô perfect for your Pi, server, or desktop.It works with hundreds of UPS devices, PDUs, and many other power management systems.This is the ultimate guide to configuring Network UPS Tools (NUT).We cover everything from installing and configuring the server on as Raspberry Pi, configuring the client on Windows and Linux, configure a charting and graphing website to visualize NUT data, spin up an additional web site use Docker, and finally set up monitoring and alerting to automate shutdowns of your machine.https://networkupstools.orgAlso, note to self, don‚Äôt eat a salad before you record a video‚Ä¶.üì∫ Watch VideoNUT UPS Serverplug in upslsusbshould see something likeBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 001 Device 019: ID 09ae:2012 Tripp LiteBus 001 Device 002: ID 2109:3431 VIA Labs, Inc. HubBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hubsudo apt updatesudo apt install nut nut-client nut-serversudo nut-scanner -Ushould see something liketripp lite[nutdev1] driver = \"usbhid-ups\" port = \"auto\" vendorid = \"09AE\" productid = \"2012\" product = \"Tripp Lite UPS\" vendor = \"Tripp Lite\" bus = \"001\"apc 1500[nutdev1] driver = \"usbhid-ups\" port = \"auto\" vendorid = \"051D\" productid = \"0002\" product = \"Back-UPS XS 1500M FW:947.d10 .D USB FW:d10\" serial = \"3xxxxxxxxxxx\" vendor = \"Tripp Lite\" bus = \"001\"apc 850[nutdev3] driver = \"usbhid-ups\" port = \"auto\" vendorid = \"051D\" productid = \"0002\" product = \"Back-UPS ES 850G2 FW:931.a10.D USB FW:a\" serial = \"3xxxxxxxxxxx\" vendor = \"American Power Conversion\" bus = \"001\"sudo nano /etc/nut/ups.confpollinterval = 1maxretry = 3[tripplite] driver = usbhid-ups port = auto desc = \"Tripp Lite 1500VA SmartUPS\" vendorid = 09ae productid = 2012[apc-network] driver = usbhid-ups port = auto desc = \"APC Back-UPS XS 1500\" vendorid = 051d productid = 0002 serial = 3xxxxxxxxx[apc-modem] driver = usbhid-ups port = auto desc = \"APC 850 VA\" vendorid = 051d productid = 0002 serial = 3xxxxxxxxxsudo nano /etc/nut/upsmon.confMONITOR tripplite@localhost 1 admin secret masterMONITOR apc-modem@localhost 1 admin secret masterMONITOR apc-network@localhost 1 admin secret mastersudo nano /etc/nut/upsd.confChange 127.0.0.1LISTEN 127.0.0.1 3493 to all interfaceLISTEN 0.0.0.0 3493 sudo nano /etc/nut/nut.confMODE=netserversudo nano /etc/nut/upsd.users[monuser] password = secret admin mastersudo nano /etc/udev/rules.d/99-nut-ups.rulesSUBSYSTEM!=\"usb\", GOTO=\"nut-usbups_rules_end\"# TrippLite# e.g. TrippLite SMART1500LCD - usbhid-upsACTION==\"add|change\", SUBSYSTEM==\"usb|usb_device\", SUBSYSTEMS==\"usb|usb_device\", ATTR{idVendor}==\"09ae\", ATTR{idProduct}==\"2012\", MODE=\"664\", GROUP=\"nut\", RUN+=\"/sbin/upsdrvctl stop; /sbin/upsdrvctl start\"LABEL=\"nut-usbups_rules_end\"reboot (because it‚Äôs easy)orsudo service nut-server restartsudo service nut-client restartsudo systemctl restart nut-monitorsudo upsdrvctl stopsudo upsdrvctl startAPC UPS 950 valist all usb deviceslsusbquery device by USB bus (replace with # from previous command)lsusb -D /dev/bus/usb/001/057You should see something likeDevice Descriptor: bLength 18 bDescriptorType 1 bcdUSB 2.00 bDeviceClass 0 bDeviceSubClass 0 bDeviceProtocol 0 bMaxPacketSize0 64 idVendor 0x051d American Power Conversion idProduct 0x0002 Uninterruptible Power Supply bcdDevice 0.90 iManufacturer 1 iProduct 2 iSerial 3 bNumConfigurations 1 Configuration Descriptor: bLength 9 bDescriptorType 2 wTotalLength 0x0022 bNumInterfaces 1 bConfigurationValue 1 iConfiguration 0 bmAttributes 0xe0 Self Powered Remote Wakeup MaxPower 2mA Interface Descriptor: bLength 9 bDescriptorType 4 bInterfaceNumber 0 bAlternateSetting 0 bNumEndpoints 1 bInterfaceClass 3 Human Interface Device bInterfaceSubClass 0 bInterfaceProtocol 0 iInterface 0 HID Device Descriptor: bLength 9 bDescriptorType 33 bcdHID 1.00 bCountryCode 33 US bNumDescriptors 1 bDescriptorType 34 Report wDescriptorLength 1049 Report Descriptors: ** UNAVAILABLE ** Endpoint Descriptor: bLength 7 bDescriptorType 5 bEndpointAddress 0x81 EP 1 IN bmAttributes 3 Transfer Type Interrupt Synch Type None Usage Type Data wMaxPacketSize 0x0008 1x 8 bytes bInterval 100NUT CGI Serversudo apt install apache2 nut-cgisudo nano /etc/nut/hosts.confMONITOR tripplite@localhost \"Tripp Lite 1500VA SmartUPS - Rack\"MONITOR apc-modem@localhost \"APC 850 VA - Wall\"MONITOR apc-network@localhost \"APC Back-UPS XS 1500 - Rack\"sudo a2enmod cgisudo systemctl restart apache2sudo nano /etc/nut/upsset.confI_HAVE_SECURED_MY_CGI_DIRECTORYvisithttp://your.ip.adddress/cgi-bin/nut/upsstats.cgiWebnut Docker Containermkdir webnutcd webnutnano docker-compose.ymlpaste contents and saveversion: \"3.1\"services: nut: image: teknologist/webnut container_name: webnut environment: - UPS_HOST=ip.address.of.nut.server - UPS_PORT=3493 - UPS_USER=admin - UPS_PASSWORD=secret restart: unless-stopped security_opt: - no-new-privileges:true networks: - proxy ports: - 6543:6543networks: proxy: external: truedocker-compose up -d --force-recreateLinux NUT Client (remote)sudo apt install nut-clientthen runupscto verifyverify you can connectupsc tripplite@ip.address.of.serversudo nano /etc/nut/upsmon.confRUN_AS_USER rootMONITOR apc-modem@ip.address.of.nut.server 1 admin secret slaveMINSUPPLIES 1SHUTDOWNCMD \"/sbin/shutdown -h\"NOTIFYCMD /usr/sbin/upsschedPOLLFREQ 2POLLFREQALERT 1HOSTSYNC 15DEADTIME 15POWERDOWNFLAG /etc/killpowerNOTIFYMSG ONLINE \"UPS %s on line power\"NOTIFYMSG ONBATT \"UPS %s on battery\"NOTIFYMSG LOWBATT \"UPS %s battery is low\"NOTIFYMSG FSD \"UPS %s: forced shutdown in progress\"NOTIFYMSG COMMOK \"Communications with UPS %s established\"NOTIFYMSG COMMBAD \"Communications with UPS %s lost\"NOTIFYMSG SHUTDOWN \"Auto logout and shutdown proceeding\"NOTIFYMSG REPLBATT \"UPS %s battery needs to be replaced\"NOTIFYMSG NOCOMM \"UPS %s is unavailable\"NOTIFYMSG NOPARENT \"upsmon parent process died - shutdown impossible\"NOTIFYFLAG ONLINE SYSLOG+WALL+EXECNOTIFYFLAG ONBATT SYSLOG+WALL+EXECNOTIFYFLAG LOWBATT SYSLOG+WALLNOTIFYFLAG FSD SYSLOG+WALL+EXECNOTIFYFLAG COMMOK SYSLOG+WALL+EXECNOTIFYFLAG COMMBAD SYSLOG+WALL+EXECNOTIFYFLAG SHUTDOWN SYSLOG+WALL+EXECNOTIFYFLAG REPLBATT SYSLOG+WALLNOTIFYFLAG NOCOMM SYSLOG+WALL+EXECNOTIFYFLAG NOPARENT SYSLOG+WALLRBWARNTIME 43200NOCOMMWARNTIME 600FINALDELAY 5set net clientsudo nano /etc/nut/nut.confMODE=netclientrestart servicesudo systemctl restart nut-clientcheck statussudo systemctl status nut-clientWindows NUT Clienthttps://github.com/gawindx/WinNUT-Client/releasesscheduling on the remote systemsudo nano /etc/nut/upssched.confCMDSCRIPT /etc/nut/upssched-cmdPIPEFN /etc/nut/upssched.pipeLOCKFN /etc/nut/upssched.lockAT ONBATT * START-TIMER onbatt 30AT ONLINE * CANCEL-TIMER onbatt onlineAT ONBATT * START-TIMER earlyshutdown 30AT LOWBATT * EXECUTE onbattAT COMMBAD * START-TIMER commbad 30AT COMMOK * CANCEL-TIMER commbad commokAT NOCOMM * EXECUTE commbadAT SHUTDOWN * EXECUTE powerdownAT SHUTDOWN * EXECUTE powerdownsudo nano /etc/nut/upssched-cmd`````bash#!/bin/sh case $1 in onbatt) logger -t upssched-cmd \"UPS running on battery\" ;; earlyshutdown) logger -t upssched-cmd \"UPS on battery too long, early shutdown\" /usr/sbin/upsmon -c fsd ;; shutdowncritical) logger -t upssched-cmd \"UPS on battery critical, forced shutdown\" /usr/sbin/upsmon -c fsd ;; upsgone) logger -t upssched-cmd \"UPS has been gone too long, can't reach\" ;; *) logger -t upssched-cmd \"Unrecognized command: $1\" ;; esacmake it executable (should already be)chmod +x /etc/nut/upssched-cmdBe sure PIPEFN and LOCKFN point to a folder that esists, I‚Äôve seen it point to /etc/nut/upssched/ instead of /etc/nut If it does, create the folder or update these variables.mkdir /etc/nut/upssched/testsystemctl restart nut-clientthen pull the plug on the ups connected to the master, check syslogstail /var/log/syslogshould see the logsmachine should shutdownLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet File Browser, a Small but Mighty Web File Browser", "url": "/posts/meet-file-browser/", "categories": "self-hosted", "tags": "homelab, portainer, self-hosted, docker, rancher, file-browser", "date": "2021-09-04 10:00:00 -0500", "snippet": "Meet File Browser, an open source, self-hosted alternative to services like Dropbox and other web based file browsers.Today we‚Äôll configure a containerized version of File Browser and have you up a...", "content": "Meet File Browser, an open source, self-hosted alternative to services like Dropbox and other web based file browsers.Today we‚Äôll configure a containerized version of File Browser and have you up and going in just a few minutes.We‚Äôll also walk through creating, editing, moving, copying, and even sharing files and folders so that you get a better understanding about what File Browser is all about.üì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeRunning the containerIf you‚Äôre using Docker composemkdir filebrowsercd filebrowsertouch docker-compose.ymlnano docker-compose.yml # copy the contents from belowtouch filebrowser.dbdocker-compose up -d --force-recreatedocker-compose.yml---version: '3'services: file-browser: image: filebrowser/filebrowser container_name: file-browser user: 1000:1000 ports: - 8081:80 volumes: - /home/serveradmin/:/srv - /home/serveradmin/filebrowser/filebrowser.db:/database.db restart: unless-stopped security_opt: - no-new-privileges:trueIf you‚Äôre using Rancher, Portainer, Open Media Vault, Unraid, or anything else with a GUI, just copy and paste the environment variables above into the form on the web page.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Install Docker and Docker Compose Ubuntu", "url": "/posts/docker-compose-install/", "categories": "docker", "tags": "homelab, docker, docker-compose", "date": "2021-08-14 11:00:00 -0500", "snippet": "This guide will walk you through how to Install Docker Engine, containerd, and Docker Compose on Ubuntu.If you have an existing version of Docker install, it is best to remove it first.See the Clea...", "content": "This guide will walk you through how to Install Docker Engine, containerd, and Docker Compose on Ubuntu.If you have an existing version of Docker install, it is best to remove it first.See the Cleaning UpIf you‚Äôre installing this on Debian, see Docker‚Äôs Debian Install GuideInstallSet up Docker‚Äôs apt repository.# Add Docker's official GPG key:sudo apt-get updatesudo apt-get install ca-certificates curl gnupgsudo install -m 0755 -d /etc/apt/keyringscurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpgsudo chmod a+r /etc/apt/keyrings/docker.gpg# Add the repository to Apt sources:echo \\ \"deb [arch=\"$(dpkg --print-architecture)\" signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\ \"$(. /etc/os-release &amp;&amp; echo \"$VERSION_CODENAME\")\" stable\" | \\ sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/nullsudo apt-get update If you use an Ubuntu derivative distro, such as Linux Mint, you may need to use UBUNTU_CODENAME instead of VERSION_CODENAME.Install the latest versionsudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-pluginCheck Installed versiondocker -vCheck docker composedocker composeCheck runtime sudo docker run hello-worldUse Docker without sudosudo usermod -aG docker $USERYou‚Äôll need to log out then back in to apply thisCleaning UpIf you need to uninstall Docker, run the followingsudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extrasLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Hosted, DIY, Open Source Alternative to Linktree", "url": "/posts/open-source-linktree-alt/", "categories": "self-hosted", "tags": "homelab, pi-hole, dns, littlelink-server, portainer, self-hosted, docker, rancher", "date": "2021-08-14 11:00:00 -0500", "snippet": "Meet LittleLink &amp; LittleLink-Server - a DIY, self hosted, and open source alternative to the popular service Linktree.This web site inside of a container allows you to create and host your own...", "content": "Meet LittleLink &amp; LittleLink-Server - a DIY, self hosted, and open source alternative to the popular service Linktree.This web site inside of a container allows you to create and host your own web site with all of your social information and links, giving your followers multiple ways to connect with you! In this video we talk about what LittleLink-Server is, what it does, and how to create your own site using this Docker container with only a few environment variables, no knowledge of web development required.Be sure to check the documentation for details!üì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeRunning the containermkdir littlelink-servercd littlelink-servertouch docker-compose.ymlIf you‚Äôre using Docker compose (see the GitHub repo for the latest file)docker-compose.yml---version: '3'services: little-link: image: ghcr.io/timothystewart6/littlelink-server:latest container_name: littlelink-server environment: - META_TITLE=Techno Tim - META_DESCRIPTION=Techno Tim Link page - META_AUTHOR=Techno Tim - THEME=Dark - FAVICON_URL=https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg - AVATAR_URL=https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg - AVATAR_2X_URL=https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_400x400.jpg - AVATAR_ALT=Techno Tim Profile Pic - NAME=TechnoTim - BIO=Hey! Just a place where you can connect with me! - GITHUB=https://l.technotim.live/github - TWITTER=https://l.technotim.live/twitter - INSTAGRAM=https://l.technotim.live/instagram - YOUTUBE=https://l.technotim.live/subscribe - TWITCH=https://l.technotim.live/twitch/ - DISCORD=https://l.technotim.live/discord - TIKTOK=https://l.technotim.live/tiktok - KIT=https://l.technotim.live/gear # - FACEBOOK=https://facebook.com # - FACEBOOK_MESSENGER=https://facebook.com # - LINKED_IN=https://linkedin.com # - PRODUCT_HUNT=https://www.producthunt.com/ # - SNAPCHAT=https://www.snapchat.com/ # - SPOTIFY=https://www.spotify.com/ # - REDDIT=https://www.reddit.com/ # - MEDIUM=https://medium.com # - PINTEREST=https://www.pinterest.com/ # - EMAIL=you@example.com # - EMAIL_ALT=you@example.com # - SOUND_CLOUD=https://souncloud.com # - FIGMA=https://figma.com # - TELEGRAM=https://telegram.org/ # - TUMBLR=https://www.tumblr.com/ # - STEAM=https://steamcommunity.com/ # - VIMEO=https://vimeo.com/ # - WORDPRESS=https://wordpress.com/ # - GOODREADS=https://www.goodreads.com/ # - SKOOB=https://www.skoob.com.br/ - FOOTER=Thanks for stopping by! ports: - 8080:3000 restart: unless-stopped security_opt: - no-new-privileges:trueIf you‚Äôre running docker onlyDocker commanddocker run -d \\ --name=littlelink-server \\ -p 8080:3000 \\ -e META_TITLE='Techno Tim' \\ -e META_DESCRIPTION='Techno Tim Link page' \\ -e META_AUTHOR='Techno Tim' \\ -e THEME='Dark' \\ -e FAVICON_URL='https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg' \\ -e AVATAR_URL='https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_200x200.jpg' \\ -e AVATAR_2X_URL='https://pbs.twimg.com/profile_images/1286144221217316864/qIAsKOpB_400x400.jpg' \\ -e AVATAR_ALT='Techno Tim Profile Pic' \\ -e NAME='TechnoTim' \\ -e BIO='Hey! Just a place where you can connect with me!' \\ -e GITHUB='https://l.technotim.live/github' \\ -e TWITTER='https://l.technotim.live/twitter' \\ -e INSTAGRAM='https://l.technotim.live/instagram' \\ -e YOUTUBE='https://l.technotim.live/subscribe' \\ -e TWITCH='https://l.technotim.live/twitch' \\ -e DISCORD='https://l.technotim.live/discord' \\ -e TIKTOK='https://l.technotim.live/tiktok' \\ -e KIT='https://l.technotim.live/gear' \\ --restart unless-stopped \\ ghcr.io/timothystewart6/littlelink-server:latestIf you‚Äôre using Rancher, Portainer, Open Media Vault, Unraid, or anything else with a GUI, just copy and paste the environment variables above into the form on the web page.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "All the Secrets to Creating My Tech YouTube Channel", "url": "/posts/how-i-create-my-content/", "categories": "vlog", "tags": "homelab, office, youtube, content-creation, adobe, hardware", "date": "2021-07-31 15:00:00 -0500", "snippet": "People have asked how I‚Äôve been able to create and grow a Tech YouTube channel and what my process is when planning, filming, editing, and producing content.Today we talk about just that.All my sec...", "content": "People have asked how I‚Äôve been able to create and grow a Tech YouTube channel and what my process is when planning, filming, editing, and producing content.Today we talk about just that.All my secrets unveiled as we celebrate 50,000 subscribers in this behind the scenes look.Thank you so much!üì∫ Watch VideoSee all the hardware I recommend at https://l.technotim.live/gearDon‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files." }, { "title": "Before you upgrade to Proxmox 7, please consider this...", "url": "/posts/proxmox-7/", "categories": "proxmox", "tags": "homelab, proxmox", "date": "2021-07-10 14:00:00 -0500", "snippet": "As you may know, proxmox is my current choice for a hypervisor. Proxmox 7 is here and comes with a host of new features! In this video we‚Äôre cover all of the new features in Proxmox 7 as well as h...", "content": "As you may know, proxmox is my current choice for a hypervisor. Proxmox 7 is here and comes with a host of new features! In this video we‚Äôre cover all of the new features in Proxmox 7 as well as how to upgrade your Proxmox server safely. We‚Äôll also cover all of the ‚Äúscary‚Äù prompts you get while upgrading as well as some of the ways to make sure your upgrade is successful. So, if you‚Äôre thinking about upgrading your HomeLab to Proxmox 7, be sure to check this video out first.If you‚Äôre looking to upgrade to Proxmox 8, see this postüì∫ Watch VideoCommandsCheck your upgrade statuspve6to7 --fullFirst, make sure we have the latest packagesapt updateapt dist-upgradeUpdate all Debian repositories to Bullseyesed -i 's/buster\\/updates/bullseye-security/g;s/buster/bullseye/g' /etc/apt/sources.listWe‚Äôll also need to make sure we comment out any Proxmox ve 6.0 repositories.nano /etc/apt/sources.listnano /etc/apt/sources.list.d/pve-enterprise.listAdd Proxmox VE &amp; package Repoecho \"deb https://enterprise.proxmox.com/debian/pve bullseye pve-enterprise\" &gt; /etc/apt/sources.list.d/pve-enterprise.listIf you‚Äôre using the non-subscription repository (like me) also runsed -i -e 's/buster/bullseye/g' /etc/apt/sources.list.d/pve-install-repo.list If you‚Äôre running Ceph, you‚Äôll need to runecho \"deb http://download.proxmox.com/debian/ceph-octopus bullseye main\" &gt; /etc/apt/sources.list.d/ceph.listDo the upgradeapt updateapt dist-upgradenetwork changesIf you‚Äôre running LACP / LAGG I found that you need to make some additional changes to your network config.See the comments in the config/etc/network/interfacesauto loiface lo inet loopback#auto eno1 &lt;--- I had to comment this outiface eno1 inet manual#auto eno2 &lt;--- I had to comment this outiface eno2 inet manualauto bond0iface bond0 inet manual bond-slaves eno1 eno2 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3auto vmbr0iface vmbr0 inet static address 192.168.0.11/24 gateway 192.168.0.1 bridge-ports bond0 bridge-stp off bridge-fd 0 bridge-vlan-aware yes bridge-vids 2-4094LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Linux desktop, inside of a container, inside of a browser??? Yes. A Webtop.", "url": "/posts/webtop-container/", "categories": "self-hosted", "tags": "homelab, traefik, portainer, docker, self-hosted, ubuntu, webtop", "date": "2021-06-20 09:00:00 -0500", "snippet": "Have you ever thought about running a Linux desktop inside of a container? Me neither until I found this awesome project from LinuxServer called Webtops.A webtop is a technology stack that allows ...", "content": "Have you ever thought about running a Linux desktop inside of a container? Me neither until I found this awesome project from LinuxServer called Webtops.A webtop is a technology stack that allows you to run Ubuntu or Alpine Linux within a container that is fully accessible from a browser.This allows you to use most Linux features with a container with a fraction of the cost of resources.Join me as we configure one from beginning to end.üì∫ Watch VideoDocker SetupSee this post on how to install docker and docker-composeWebtopdocker-compose.yml and .env can be found hereFiles and foldersmkdir webtopcd webtopmkdir configcd ..nano docker-compose.ymlCreate Webtop containerdocker-compose up -dLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "2 Factor Auth and Single Sign on with Authelia", "url": "/posts/authelia-traefik/", "categories": "traefik", "tags": "authelia, homelab, traefik, portainer, ssl, docker, self-hosted", "date": "2021-06-05 09:00:00 -0500", "snippet": "Authelia is an open source Single Sign On and 2FA companion for reverse proxies.It helps you secure your endpoints with single factor and 2 factor auth.It works with Nginx, Traefik, and HA proxy.To...", "content": "Authelia is an open source Single Sign On and 2FA companion for reverse proxies.It helps you secure your endpoints with single factor and 2 factor auth.It works with Nginx, Traefik, and HA proxy.Today, we‚Äôll configure Authelia with Portainer and Traefik and have 2 Factor up and running with brute force protection!üì∫ Watch VideoTraefikAuthelia will work with other reverse proxies but I used Traefik.If you want to configure Traefik as your reverse proxy see this guide.Docker SetupSee this post on how to install docker and docker-composeAutheliaconfiguration.yml, users_database.yml, and docker-compose.yml can be found hereExample heimdall can be found here hereTraefik configuration changes can be found hereGeneration a hashed password$ docker run authelia/authelia:latest authelia hash-password 'yourpassword'Password hash: $argon2id$v=19$m=65536$3oc26byQuSkQqksq$zM1QiTvVPrMfV6BVLs2t4gM+af5IN7euO0VB6+Q8ZFsFiles and foldersmkdir autheliacd autheliamkdir configcd confignano configuration.ymlnano users_database.ymlcd ..nano docker-compose.ymlCreate Authelia containerdocker-compose up -dLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Is adding 3 MILLION domains to your Pi-Hole Block List a good thing?", "url": "/posts/pi-hole-blocklists/", "categories": "homelab", "tags": "homelab, pi-hole, dns, self-hosted", "date": "2021-05-08 09:00:00 -0500", "snippet": "In some of my previous Pi-Hole videos many of you spotted my blocklist with over a millions sites added and you wondered how you can do the same.Well, today I show you how to block more ads, block ...", "content": "In some of my previous Pi-Hole videos many of you spotted my blocklist with over a millions sites added and you wondered how you can do the same.Well, today I show you how to block more ads, block more tracking, block more malware, and block more telemetry with these community lists.Bonus (and spoiler alert) I show you how to add 3.5 million!Thanks to Firebog for the great lists firebog.netüì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Put Wildcard Certificates and SSL on EVERYTHING", "url": "/posts/traefik-portainer-ssl/", "categories": "traefik", "tags": "homelab, pi-hole, dns, traefik, portainer, ssl, self-hosted, docker", "date": "2021-04-24 09:00:00 -0500", "snippet": "Today, we‚Äôre going to use SSL for everything.No more self-sign certs.No more http.No more hosting things on odd ports.We‚Äôre going all in with SSL for our internal services and our external services...", "content": "Today, we‚Äôre going to use SSL for everything.No more self-sign certs.No more http.No more hosting things on odd ports.We‚Äôre going all in with SSL for our internal services and our external services too.We going to set up a reverse proxy using Traefik, Portainer, and use that to get wildcard certificates from Let‚Äôs Encrypt. Join me and let‚Äôs secure all the things.üì∫ Watch Video Looking for the Traefik 3.0 guide? Check out traefik 3 on Docker Looking to do this same thing in Kubernetes? Check out traefik + cert-manager on KubernetesDocker SetupSee this post on how to install docker and docker-composeTraefikmkdir traefikcd traefikmkdir datacd datatouch acme.jsonchmod 600 acme.jsontouch traefik.ymltraefik.yml can be found herecreate docker networkdocker network create proxytouch docker-compose.ymldocker-compose.yml can be found herecd datatouch config.ymldocker-compose up -dPortainermkdir portainercd portainertouch docker-compose.ymlmkdir datadocker-compose.yml can be found hereGenerate Basic Auth Passwordsudo apt updatesudo apt install apache2-utilsecho $(htpasswd -nb \"&lt;USER&gt;\" \"&lt;PASSWORD&gt;\") | sed -e s/\\\\$/\\\\$\\\\$/gNOTE: Replace &lt;USER&gt; with your username and &lt;PASSWORD&gt; with your password to be hashed. If you‚Äôre having an issue with your password, it might not be escaped properly and you can use the following command to prompt for your passwordecho $(htpasswd -nB USER) | sed -e s/\\\\$/\\\\$\\\\$/gPaste the output in your docker-compose.yml in line (traefik.http.middlewares.traefik-auth.basicauth.users=&lt;USER&gt;:&lt;HASHED-PASSWORD&gt;)Spin up the containerdocker-compose up -dTraefik Routes Configcd traefik/datanano config.ymlconfig.yml heredocker-compose up -d --force-recreateYour folder structure should look like the below, if you are following along with the example.But feel free to make it however you wish just keep in mind you‚Äôll need to change the location in the corresponding files../traefik‚îú‚îÄ‚îÄ data‚îÇ¬†¬† ‚îú‚îÄ‚îÄ acme.json‚îÇ¬†¬† ‚îú‚îÄ‚îÄ config.yml‚îÇ¬†¬† ‚îî‚îÄ‚îÄ traefik.yml‚îî‚îÄ‚îÄ docker-compose.ymlLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Using Pi-Hole for Local DNS - Fast, Simple, and Easy Guide", "url": "/posts/pi-hole-dns/", "categories": "homelab", "tags": "homelab, pi-hole, dns, self-hosted", "date": "2021-04-17 09:00:00 -0500", "snippet": "Pi-Hole is a wonderful ad blocking DNS sever for your network, but did you know you can also use it for a Local DNS server? In this fast, simple, and easy guide we‚Äôll walk through how to create DNS...", "content": "Pi-Hole is a wonderful ad blocking DNS sever for your network, but did you know you can also use it for a Local DNS server? In this fast, simple, and easy guide we‚Äôll walk through how to create DNS Entries (A Records) for the clients on your network and also set up Aliases (pointers to A Records) so that you can start using DNS at home instead of relying on IP addresses.üì∫ Watch Videocommandsnslookup juno.home.lan # lookup by host namehost 192.168.0.100 # reverse lookupLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Monitoring Your Kubernetes Cluster with Grafana, Prometheus, and Alertmanager", "url": "/posts/rancher-monitoring/", "categories": "kubernetes, rancher", "tags": "k3s, rancher, kubernetes, grafana, prometheus, homelab", "date": "2021-04-10 09:00:00 -0500", "snippet": "Today in this step by step guide, we‚Äôll set up Grafana, Prometheus, and Alertmanager to monitor your Kubernetes cluster.This can be set up really quickly using helm or the Rancher UI.We‚Äôll install ...", "content": "Today in this step by step guide, we‚Äôll set up Grafana, Prometheus, and Alertmanager to monitor your Kubernetes cluster.This can be set up really quickly using helm or the Rancher UI.We‚Äôll install and configure, set up some dashboards, and even set up some alerts using Slack.All this and more in this simple to follow, easy tutorial.Setting up Grafana and Prometheus has never been so easy.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Configuring Traefik 2 Ingress for Kubernetes", "url": "/posts/k3s-traefik-rancher/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, k3s, traefik", "date": "2021-04-08 09:00:00 -0500", "snippet": "This guide is for installing traefik 2 on k3s.If you‚Äôre not using rancher, that‚Äôs fine, just skip to Reconfiguring k3s Note: There is an updated tutorial on installing traefik + cert-manager on Ku...", "content": "This guide is for installing traefik 2 on k3s.If you‚Äôre not using rancher, that‚Äôs fine, just skip to Reconfiguring k3s Note: There is an updated tutorial on installing traefik + cert-manager on Kubernetes here. However, if you want to store your certificates on disk, this tutorial here is perfectly fine.It assumes you have followed: Fully Automated K3S etcd High Availability Install (or) HIGH AVAILABILITY k3s (Kubernetes) in minutes! (if you need rancher) High Availability Rancher on a Kubernetes ClusterThere is a little bit of ‚Äúundoing‚Äù we‚Äôll have to do since k3s ships with traefik and Rancher doesn‚Äôt play well with service load balancer. So, we‚Äôll pick up after instaling these two.Reconfigure RancherMake note of your version of RancherRemove Rancherhelm uninstall rancherInstall Rancher(replace with version above)helm install rancher rancher-stable/rancher \\ --namespace cattle-system \\ --set hostname=rancher.example.com \\ --version 2.5.6Reconfiguring k3sGet the version of k3s that‚Äôs currently runningk3s --versionexport INSTALL_K3S_VERSION=v1.20.5+k3s1Run the same command you ran initially to install k3s on your servers but add --disable traefik --disable servicelb and be sure to set your version.example (be sure you are using the right version)export INSTALL_K3S_VERSION=v1.20.5+k3s1curl -sfL https://get.k3s.io | sh -s - server --node-taint CriticalAddonsOnly=true:NoExecute --tls-san your.load.balancer.ip --write-kubeconfig-mode 644 --disable traefik --disable servicelbThis should reconfigure your servers.Just run it on all server nodes, not agent nodes.Install Metal LBMetal LB installationYou can follow Self-Hosting Your Homelab Services with SSL to get the idea of Metal LB. It‚Äôs recommended to: Install with helm Use Layer2 configuration if you follow this seriesExposing Rancher directly to your Metal LBIt‚Äôs a good idea to do this until traefik is configured otherwise you won‚Äôt have access to the Rancher UIkubectl expose deployment rancher -n cattle-system --type=LoadBalancer --name=rancher-lb --port=443Then, you can access Rancher UI after getting external-IPkubectl get service/rancher-lb -n cattle-systemInstall Traefik 2You can can choose between creating Ingress in Rancher or IngresRoute with traefikIf you choose IngressRoute see IngressRoute otherwise continue on. You must have a persistent volume set up already for acme.json certificate This uses cloudflare, check providers if you want to switch This will get wildcard certs This is pointed at staging, if you want production be sure comment staging the line (and delete your staging certs)We will be installing this into the kube-system namespace, which already exists. If you are going to use anther namespace you will need change it everywhere.(Optional) Make sure that persistent volume claim is availableThe dynamic configuration for Traefik is stored in a persistent volume. If you want to persist the certificate, it‚Äôs better to create one now to claim later.To create a persistent volume, it‚Äôs better to check out Cloud Native Distributed Storage in Kubernetes with Longhorn.If not, just create one from Rancher UI &gt; Clusters (Choose your cluster) &gt; Storage &gt; Persistent Volume &gt; Add volumeAdd traefik helm repo and updatehelm repo add traefik https://helm.traefik.io/traefikhelm repo updateEdit &amp; apply ConfigMap Create traefik-config.yaml with the contents of /config/traefik-config.yaml from /config This holds our cloudflare secrets along with a configmap Update this file with your values Re-check if you have a persistent volume ready to claim Apply the configkubectl apply -f traefik-config.yamlEdit &amp; install Traefik helm chart Create traefik-chart-values.yaml with the contents of /config/traefik-chart-values.yaml from /config Update loadBalancerIP in traefik-chart-values.yaml with your Metal LB IPBefore running this, be sure you only have one default storage class set.If you are using Rancher it is Cluster &gt; Storage &gt; Storage Classes. Make sure only one is default. Install Traefik with chart valueshelm install traefik traefik/traefik --namespace=kube-system --values=traefik-chart-values.yamlMore configuration value can be add from this default-value.yaml from Traefik github.If all went well, you should now have traefik 2 installed and configured.Check for container logsTo check if the Traefik instance is running correctly, see the logs:kubectl -n kube-system logs $(kubectl -n kube-system get pods --selector \"app.kubernetes.io/name=traefik\" --output=name)It should be level=info msg=\"Configuration loaded from flags.\"Traefik DashboardTo see all router to Traefik, we can install and expose Traefik Dashboard.First you will need htpassword to generate a password for your dashboard.sudo apt-get updatesudo apt-get install apache2-utilsYou can then generate one using this, be sure to swap your username and password.htpasswd -nb techno password | openssl base64It should output:dGVjaG5vOiRhcHIxJFRnVVJ0N2E1JFpoTFFGeDRLMk8uYVNaVWNueG41eTAKCg==Save this in a secure place, it will be the password you use to access the traefik dashboard.Copy traefik-dashboard-secret.yaml locally and update it with your credentials.Copy traefik-dashboard-ingressroute.yaml and update it with your hostname, then apply:kubectl apply -f traefik-dashboard-secret.yamlkubectl apply -f traefik-dashboard-ingressroute.yamlThis should create: A secret in Kubernetes cluster name traefik-dashboard-auth A middleware for Traefik name traefik-dashboard-basicauth An ingress route for Traefik name dashboardCheck out the Traefik Dashboard with the URL you specify earlier.Exposing a service with traefik and Rancher IngressIn Rancher go to Load Balancing create ingress choose a host name (service.example.com) choose a target (your workload) set the port to the exposed port within the container go to labels and annotations and add kubernetes.io/ingress.class = traefik-external note, traefik-external comes from --providers.kubernetesingress.ingressclass=traefik-external in traefik-chart-values.yml.If you used something else, you will need to set your label properly. when you visit your website (https://service.example.com) you should now see a certificate issues.If it‚Äôs a staging cert, see the note about switching to production in traefik-chart-values.yaml.After changing, you will need to delete your certs in storage and reapply that filekubectl delete -n kube-system persistentvolumeclaims acme-json-certskubectl apply -f traefik-config.yamlExposing a service with traefik IngressRoutecopy the contents of config-ingress-route/kubernetes to your local machinethen runkubectl apply -f kubernetesThis will create the deployment, service, and ingress.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Everything you need to know about the NEW Rancher UI", "url": "/posts/rancher-new-ui/", "categories": "kubernetes, rancher", "tags": "k3s, rancher, kubernetes, homelab", "date": "2021-04-03 09:00:00 -0500", "snippet": "Today we‚Äôre going to talk about the new Cluster Explorer in Rancher.The Cluster Explorer is the new fancy user interface that will replace the old Cluster Manager.The new UI contains lots of new ar...", "content": "Today we‚Äôre going to talk about the new Cluster Explorer in Rancher.The Cluster Explorer is the new fancy user interface that will replace the old Cluster Manager.The new UI contains lots of new areas to explore, from new dashboards to new workload and deployment views, to service discovery, to storage to RBAC, and more.If you‚Äôve been hesitant to use the new UI, no need to worry, we all have.But hopefully after this you‚Äôll switch over like I have done too!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Multi-CPU Architecture Kubernetes Cluster with a Raspberry Pi", "url": "/posts/multi-arch-k3s-rpi/", "categories": "kubernetes, k3s", "tags": "raspberry-pi, k3s, kubernetes, homelab, hardware", "date": "2021-03-14 09:00:00 -0500", "snippet": "Building a Multi-architecture CPU Kubernetes cluster is easier than you think with k3s.In this video we‚Äôll build a Raspberry Pi 4 with an ARM CPU and add it to our existing x86 x64 amd64 CPU Kubern...", "content": "Building a Multi-architecture CPU Kubernetes cluster is easier than you think with k3s.In this video we‚Äôll build a Raspberry Pi 4 with an ARM CPU and add it to our existing x86 x64 amd64 CPU Kubernetes cluster.Our foundation will be Ubuntu for ARM, then we‚Äôll add k3s, and then join it to our cluster.We‚Äôll also discuss how this works with Docker images built for specific CPU types.We‚Äôll also talk about some build configurations and requirements for your Pi.Happy Pi Day!üì∫ Watch Videok3s --versionget k3s token from a serversudo cat /var/lib/rancher/k3s/server/node-tokenset k3s version (the value you got from k3s --version) export INSTALL_K3S_VERSION=v1.20.5+k3s1install k3s as an agent using your token from abovecurl -sfL https://get.k3s.io | K3S_URL=https://example.local.com:6443 K3S_TOKEN=hksadhahdklahkadjhasjdhasdhasjk::server:asljkdklasjdaskdljaskjdlasj sh -check all k3s nodes from your workstationkubectl get nodesget all pods running on a specific node (elio)kubectl get pods --all-namespaces -o wide --field-selector spec.nodeName=elioset a label on a node (elio)kubectl label nodes elio cputype=armdescribe a node (elio)kubectl describe node elioExample pod specnginx-pod.ymlapiVersion: v1kind: Podmetadata: name: nginxspec: containers: - name: nginx image: nginx imagePullPolicy: IfNotPresent nodeSelector: cputype: arm64LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Rancher vs. Portainer - Which one should I choose?", "url": "/posts/rancher-vs-portainer/", "categories": "homelab", "tags": "homelab, rancher, portainer", "date": "2021-03-08 08:00:00 -0600", "snippet": "Rancher vs. Portainer, which one is better‚Äù Which one should I choose? Can Portainer manager Kubernetes? Can Rancher manage Kubernetes? We answer all these questions and more in this quick, no f...", "content": "Rancher vs. Portainer, which one is better‚Äù Which one should I choose? Can Portainer manager Kubernetes? Can Rancher manage Kubernetes? We answer all these questions and more in this quick, no fluff video. Side note, this is one of the most asked questions in my live streams.Please share this with anyone who asks what a Home Lab is.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Windows Terminal and WSL Config Fast, Simple, and Easy Guide", "url": "/posts/windows-terminal-wsl/", "categories": "homelab", "tags": "homelab, wsl, terminal, zsh, windows, linux", "date": "2021-02-23 08:00:00 -0600", "snippet": "Lots of people ask which terminal I use on Windows and how I configure it.It‚Äôs pretty simple, I use the Microsoft Windows Terminal and it‚Äôs a fantastic terminal on Windows.It is free and open sourc...", "content": "Lots of people ask which terminal I use on Windows and how I configure it.It‚Äôs pretty simple, I use the Microsoft Windows Terminal and it‚Äôs a fantastic terminal on Windows.It is free and open source.With Windows Terminal, you can install and configure different environments for Windows and Linux.You can choose between Ubuntu or any other WSL 1 or WSL 2 (Windows Subsystem for Linux) environment along with the typical PowerShell and cmd.In this fast, simple, and easy tutorial we‚Äôll set up the Windows Terminal, install WSL, then install Ubuntu, and configure Ubuntu with ZSH (zshell) and oh my zsh (0h-my-zsh).Then, you‚Äôll know exactly how I configure my Terminal on Windows.Bonus Now all your copy pasta commands will work on Windows, macOS, and Linux!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "What is a HomeLab and How Do I Get Started?", "url": "/posts/we-are-homelab/", "categories": "homelab", "tags": "homelab, hardware, software", "date": "2021-02-21 08:00:00 -0600", "snippet": "What is a Home Lab and how do you get started? It‚Äôs easy. You can get started today in a few different ways. You can virtualize your entire home lab or build it on an old PC, a Raspberry Pi, or ...", "content": "What is a Home Lab and how do you get started? It‚Äôs easy. You can get started today in a few different ways. You can virtualize your entire home lab or build it on an old PC, a Raspberry Pi, or even some enterprise servers. The choice is really up to you. You‚Äôll need to first establish some goals for your homelab to determine capacity for your workloads. After that, the rest is up to you. You can take it as far as you want to go, and remember each home lab is almost as unique as the individual who builds it!Please share this with anyone who asks what a Home Lab is.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Update Portainer Fast, Simple, and Easy Guide", "url": "/posts/portainer-update/", "categories": "portainer", "tags": "portainer, kubernetes, homelab, docker", "date": "2021-02-19 08:00:00 -0600", "snippet": "Updating Portainer is easy, if you know how.In this quick no fluff video, I will show you how to update any version of Portainer.This guide can be used for installing it too.Portainer is a containe...", "content": "Updating Portainer is easy, if you know how.In this quick no fluff video, I will show you how to update any version of Portainer.This guide can be used for installing it too.Portainer is a container management system for Docker, Kubernetes, Swarm, and Azure ACI. Portainer is free and open source.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Containerizing HandBrake with Docker and Kubernetes", "url": "/posts/handbrake-docker-k8s/", "categories": "self-hosted", "tags": "rancher, kubernetes, handbrake, docker, homelab, self-hosted", "date": "2021-02-16 08:00:00 -0600", "snippet": "Handbrake is a fantastic open source transcoder.It allows you to transcode, or convert, your video files into different formats. It has a nice UI that‚Äôs easy to use and helps you transcode videos v...", "content": "Handbrake is a fantastic open source transcoder.It allows you to transcode, or convert, your video files into different formats. It has a nice UI that‚Äôs easy to use and helps you transcode videos very easily. It supports profiles that are optimized for your target devices. And because this is open source and cross compiled, you can run this on Windows, macOS, or Linux‚Ä¶but did you also know you can self host a containerized version of this with Docker and Kubernetes?üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Create a Multiboot USB with Ventoy Fast, Simple, and Easy Guide", "url": "/posts/ventoy-tutorial/", "categories": "homelab", "tags": "windows, linux, homelab, ubuntu, ventoy, hardware", "date": "2021-02-12 08:00:00 -0600", "snippet": "In this quick no fluff video, I will show you how to create a multi-bootable USB drive with Ventoy that can boot all of your ISO, WIM, IMG, VHD, and EFI files.It supports both MBR and GPT partition...", "content": "In this quick no fluff video, I will show you how to create a multi-bootable USB drive with Ventoy that can boot all of your ISO, WIM, IMG, VHD, and EFI files.It supports both MBR and GPT partitions. This is the last USB drive you will ever need and you won‚Äôt ever need to format another one.Ventoy is free and open source.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "The Best Way to Dual Boot Windows and Ubuntu", "url": "/posts/dual-boot-windows-ubuntu/", "categories": "homelab", "tags": "windows, linux, homelab, ubuntu", "date": "2021-02-08 08:00:00 -0600", "snippet": "Dual booting Windows and Ubuntu Linux can be a pain however there are many benefits do doing this if you do it right.In this tutorial we‚Äôll discuss how to dual boot Windows and Ubuntu on your PC or...", "content": "Dual booting Windows and Ubuntu Linux can be a pain however there are many benefits do doing this if you do it right.In this tutorial we‚Äôll discuss how to dual boot Windows and Ubuntu on your PC or laptop in a few simple steps so that you can take advantage of all the hardware in your ‚Äúbest‚Äù machine with full access to your GPU.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I ran MY LIFE through a DEEP LEARNING algorithm and here's what came out...", "url": "/posts/deep-learning-my-life/", "categories": "homelab", "tags": "windows, linux, homelab, machine-learning, deep-learning, ai, nvidia, hardware, life", "date": "2021-02-01 08:00:00 -0600", "snippet": "My life, ran against a neural network and detected by Deep Learning.If you‚Äôd like to see how this video was generated using ML and Deep Learning, check out the video here:How this video was generat...", "content": "My life, ran against a neural network and detected by Deep Learning.If you‚Äôd like to see how this video was generated using ML and Deep Learning, check out the video here:How this video was generatedüì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "RTX 3090 for Machine Learning?", "url": "/posts/3090-machine-learning/", "categories": "homelab", "tags": "windows, linux, homelab, machine-learning, deep-learning, ai, nvidia, hardware", "date": "2021-01-30 08:00:00 -0600", "snippet": "The NVIDIA RTX 3090 is a beast.We all know it can beat the benchmarks in gaming, but how about machine learning and neural networks? Today we walk through the RTX 3090 and then compile and run Dar...", "content": "The NVIDIA RTX 3090 is a beast.We all know it can beat the benchmarks in gaming, but how about machine learning and neural networks? Today we walk through the RTX 3090 and then compile and run Darknet, an open source neural network, on Windows and then Ubuntu Linux and run object detection on pictures, images, and real-time video.You will be amazed at how much more you can get out of your video card than just gaming!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My HUGE Home Security Upgrade", "url": "/posts/home-security-upgrade/", "categories": "homelab", "tags": "homelab, unifi, protect, home-security, hardware", "date": "2021-01-16 08:00:00 -0600", "snippet": "I am a huge fan of self hosted home security and I‚Äôve been doing it for years. I love the idea of being able to check on my home when I am away.Also, I‚Äôve always kept my video footage on premise (o...", "content": "I am a huge fan of self hosted home security and I‚Äôve been doing it for years. I love the idea of being able to check on my home when I am away.Also, I‚Äôve always kept my video footage on premise (on prem) and never sent it to the cloud.It started way back with a laptop and a webcam and it evolved into self-hosting my own DVR software on a virtual machine with many PoE and wireless cameras‚Ä¶ but this became way too much to manage. Well, this is the next evolution of my home security, integrating it into my recently upgraded UniFi network.I wanted to simplify my home security, just like my network, so I decided to pick up some UniFi Protect G3 FLEX cameras and some new UniFi Protect G3 Instant cameras to help secure my home.I also picked up the UniFi Smart Power Plug that will monitor my internet connection and reboot my modem if I lose connection.This is going to be awesome! I hope you enjoy this complete guide to setting up your new UniFi Protect system! Note, everything here was purchased with my own money. 0 outside influence by brands.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-host your own internet speed test with LibreSpeed!", "url": "/posts/librespeed/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, librespeed, self-hosted", "date": "2021-01-09 08:00:00 -0600", "snippet": "Internet speed tests are full of junk, ads, tracking, and some even contain deprecated plug-ins.Who needs this when we can self-host an open source one? LibreSpeed is a lightweight speedtest imple...", "content": "Internet speed tests are full of junk, ads, tracking, and some even contain deprecated plug-ins.Who needs this when we can self-host an open source one? LibreSpeed is a lightweight speedtest implemented in JavaScript using XHR requests and web workers.It‚Äôs fast, feature rich, and supports every modern browser.Say goodbye to those other speed tests and host your own containerized in Docker or Kubernetes today!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Cloud Native Distributed Storage in Kubernetes with Longhorn", "url": "/posts/longhorn-install/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, longhorn, k3s", "date": "2021-01-02 08:00:00 -0600", "snippet": "Storage in Kubernetes is hard, complicated, and messy.Configuring volumes, mounts, and persistent volumes claims and getting it right can be a challenge.It‚Äôs also challenging to manage that storage...", "content": "Storage in Kubernetes is hard, complicated, and messy.Configuring volumes, mounts, and persistent volumes claims and getting it right can be a challenge.It‚Äôs also challenging to manage that storage and replicate it across all your Kubernetes clusters.It‚Äôs also been very challenging to do this on bare metal, outside of a cloud provider.That‚Äôs where Longhorn comes.Longhorn is an open source, a CNCF distributed block storage system for Kubernetes.It comes with a UI, backups, snapshots, cluster disaster recovery, and it does all this with or without Rancher.Rancher is NOT a requirement.üì∫ Watch VideoInstallationAdditional DependenciesThere are some additional dependencies you might want to install on target nodes prior to configuringsudo apt updatesudo apt install nfs-common open-iscsi#start the service now and on rebootsudo systemctl enable open-iscsi --nowInstall MethodsRancher app catalogSee the app catalog within RancherKubectlkubectl apply -f https://raw.githubusercontent.com/longhorn/longhorn/master/deploy/longhorn.yamlkubectl get pods \\--namespace longhorn-system \\--watchSee more at https://longhorn.io/docs/1.0.0/deploy/install/install-with-kubectlHelmhelm3kubectl create namespace longhorn-systemhelm install longhorn ./longhorn/chart/ --namespace longhorn-systemkubectl -n longhorn-system get podTaints This is not required, nor do I taint nodes anymore.I allow Longhorn storage to use any available space on any node that is not running etcd / control plane.You can simply skip this step and it will work like this.If you‚Äôre still convinced you need dedicated nodes, it‚Äôs much easier doing it in the Longhorn UI after a node joins the cluster than with taints.I ended up tainting my storage nodes using this commandkubectl taint nodes luna-01 luna-02 luna-03 luna-04 CriticalAddonsOnly=true:NoExecutekubectl taint nodes luna-01 luna-02 luna-03 luna-04 StorageOnly=true:NoExecuteThen applying that toleration to Longhorn in settingsStorageOnly=true:NoExecute;CriticalAddonsOnly=true:NoExecuteThis ensures that the storage nodes won‚Äôt take on any general workloads and still allow Lonhorn to use these as storage.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Automate EVERYTHING with Ansible!", "url": "/posts/ansible-automation/", "categories": "homelab", "tags": "homelab, ansible", "date": "2020-12-26 08:00:00 -0600", "snippet": "Ansible.Need I say more? Well, maybe, if you‚Äôve never heard of it. Ansible is a simple IT / DevOps automation that anyone can use.You can Automate anything with an SSH connection and WITHOUT insta...", "content": "Ansible.Need I say more? Well, maybe, if you‚Äôve never heard of it. Ansible is a simple IT / DevOps automation that anyone can use.You can Automate anything with an SSH connection and WITHOUT installing any agents or clients. Join me as we set up, configure and start automating with Ansible!üì∫ Watch Videoinstallsudo apt updatesudo apt install ansiblesudo apt install sshpass Note: Most distributions include an ‚Äúolder‚Äù version of Ansible.If you want to install the latest version of Ansible, see installing the latest version of ansiblehosts[ubuntu]server-01server-02192.168.0.100192.168.0.1002commandscheck ansible versionansible --versioncommand with moduleansible -i ./inventory/hosts ubuntu -m ping --user someuser --ask-passcommand with playbookansible-playbook ./playbooks/apt.yml --user someuser --ask-pass --ask-become-pass -i ./inventory/hostsplaybooksapt.yml- hosts: \"*\" become: yes tasks: - name: apt apt: update_cache: yes upgrade: 'yes'qemu-guest-agent.yml- name: install latest qemu-guest-agent hosts: \"*\" tasks: - name: install qemu-guest-agent apt: name: qemu-guest-agent state: present update_cache: true become: truezsh.yml- name: install latest zsh on all hosts hosts: \"*\" tasks: - name: install zsh apt: name: zsh state: present update_cache: true become: truetimezone.yml- name: Set timezone and configure timesyncd hosts: \"*\" become: yes tasks: - name: set timezone shell: timedatectl set-timezone America/Chicago - name: Make sure timesyncd is stopped systemd: name: systemd-timesyncd.service state: stopped - name: Copy over the timesyncd config template: src=../templates/timesyncd.conf dest=/etc/systemd/timesyncd.conf - name: Make sure timesyncd is started systemd: name: systemd-timesyncd.service state: startedtimesyncd.conf# This file is part of systemd.## systemd is free software; you can redistribute it and/or modify it# under the terms of the GNU Lesser General Public License as published by# the Free Software Foundation; either version 2.1 of the License, or# (at your option) any later version.## Entries in this file show the compile time defaults.# You can change settings by editing this file.# Defaults can be restored by simply deleting this file.## See timesyncd.conf(5) for details.[Time]NTP=192.168.0.4FallbackNTP=time.cloudflare.com#RootDistanceMaxSec=5#PollIntervalMinSec=32#PollIntervalMaxSec=2048Installing the latest version of AnsibleMost distributions have an older version of Ansible installed.This is usually fine except sometimes you may need to use features from the latest Ansible.Use the following commands to update Ansible to the latest version.Check versionansible --versionIf it‚Äôs not the version you are looking for, check to see where it is installedwhich ansibleIf it lives somewhere like/usr/bin/ansiblethis is most likely due to your distribution installing it there.Remove previous versionsudo apt remove ansibleCheck to be sure it is removedwhich ansibleYou should seeansible not foundcheck to see that you have python3 and pippython3 -m pip -VYou should see something likepip 22.3.1 from /home/user/.local/lib/python3.8/site-packages/pip (python 3.8)Install pip if the previous couldn‚Äôt find the pip modulecurl https://bootstrap.pypa.io/get-pip.py -o get-pip.pyInstall ansiblepython3 -m pip install --user ansibleConfirm your version withansible --versionLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "HIGH AVAILABILITY k3s (Kubernetes) in minutes!", "url": "/posts/k3s-ha-install/", "categories": "kubernetes, k3s", "tags": "homelab, rancher, kubernetes, k3s, mysql, nginx", "date": "2020-12-19 08:00:00 -0600", "snippet": "Are you running Kubernetes in your homelab or in the enterprise? Do you want an easy way to manage and create Kubernetes clusters? Do you want high availability Rancher? Join me as we walk through...", "content": "Are you running Kubernetes in your homelab or in the enterprise? Do you want an easy way to manage and create Kubernetes clusters? Do you want high availability Rancher? Join me as we walk through stalling Rancher on an existing high availability k3s cluster in this step-by-step tutorial.We install Rancher, configure a load balancer, install and configure helm, install cert-manager, configure Rancher, walk through the GUI, scale up our cluster, and set up a health check and liveness check! Join me, it‚Äôs easy in this straightforward guide.üì∫ Watch VideoLoad BalancerCreate a load balancer using nginxnginx.conf#uncomment this next line if you are NOT running nginx in docker#load_module /usr/lib/nginx/modules/ngx_stream_module.so;events {}stream { upstream k3s_servers { server 192.168.60.20:6443; server 192.168.60.21:6443; } server { listen 6443; proxy_pass k3s_servers; }}k3s serversOn your k3s serversexport K3S_DATASTORE_ENDPOINT='mysql://username:password@tcp(database_ip_or_hostname:port)/database'Note: It‚Äôs advised you consult the Rancher Support Matrixto get the recommended version for all Rancher dependencies.thencurl -sfL https://get.k3s.io | sh -s - server --node-taint CriticalAddonsOnly=true:NoExecute --tls-san load_balancer_ip_or_hostnametest withsudo k3s kubectl get nodesto add additional servers, get token from first serversudo cat /var/lib/rancher/k3s/server/node-tokenthen run the same command but add the token (replace SECRET with token from previous command)curl -sfL https://get.k3s.io | sh -s - server --token=SECRET --node-taint CriticalAddonsOnly=true:NoExecute --tls-san load_balancer_ip_or_hostnameon agents / workersto run without sudosudo chmod 644 /etc/rancher/k3s/k3s.yaml` on the serversget tokensudo cat /var/lib/rancher/k3s/server/node-tokenk3s agents / workerscurl -sfL https://get.k3s.io | K3S_URL=https://load_balancer_ip_or_hostname:6443 K3S_TOKEN=mynodetoken sh -otherTo install kubectl see this linkkubeconfig location on server/etc/rancher/k3s/k3s.yamlsudo cat /etc/rancher/k3s/k3s.yamlcopy contents to your dev machine~/.kube/configBe sure to update the server: to your load balancer ip or hostnamekubernetes dashboardcheck releases for the command to use. At time or filming it‚Äôs:kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.4/aio/deploy/recommended.yamlDashboard RBAC Configurationdashboard.admin-user.ymlapiVersion: v1kind: ServiceAccountmetadata: name: admin-user namespace: kubernetes-dashboarddashboard.admin-user-role.ymlapiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: admin-userroleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: cluster-adminsubjects:- kind: ServiceAccount name: admin-user namespace: kubernetes-dashboardDeploy the admin-user configuration:(if you‚Äôre doing this from your dev machine, remove sudo k3s and just use kubectl)sudo k3s kubectl create -f dashboard.admin-user.yml -f dashboard.admin-user-role.ymlget bearer tokensudo k3s kubectl -n kubernetes-dashboard create token admin-userstart dashboard locallysudo k3s kubectl proxyThen you can sign in at this URL using your token we got in the previous step:http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/here‚Äôs testdeploy.yml you can useapiVersion: apps/v1kind: Deploymentmetadata: name: mysite labels: app: mysitespec: replicas: 1 selector: matchLabels: app: mysite template: metadata: labels: app : mysite spec: containers: - name : mysite image: nginx ports: - containerPort: 80LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "High Availability Rancher on Kubernetes", "url": "/posts/rancher-ha-install/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, k3s", "date": "2020-12-19 08:00:00 -0600", "snippet": "Are you running Kubernetes in your homelab or in the enterprise?Do you want an easy way to manage and create Kubernetes clusters?Join me as we walk through installing Rancher on an existing high av...", "content": "Are you running Kubernetes in your homelab or in the enterprise?Do you want an easy way to manage and create Kubernetes clusters?Join me as we walk through installing Rancher on an existing high availability k3s cluster in this step-by-step tutorial.We install Rancher, configure a load balancer, install and configure helm, install cert-manager, configure Rancher, walk through the GUI, scale up our cluster, and set up a health check and liveness check! Join me, it‚Äôs easy in this straightforward guide.üì∫ Watch VideoinstallNote:It‚Äôs advised you consult the Rancher Support Matrixto get the recommended version for all Rancher dependencies.https://rancher.com/docs/rancher/v2.x/en/installation/install-rancher-on-k8s/#1-install-the-required-cli-toolskubectlinstall helmcurl https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3 | bashadd helm repo, stablehelm repo add rancher-stable https://releases.rancher.com/server-charts/stablecreate rancher namespacekubectl create namespace cattle-systemssl configurationuser rancher generated (default)install cert-managerkubectl apply --validate=false -f https://github.com/jetstack/cert-manager/releases/download/v1.7.1/cert-manager.crds.yamlcreate name-space for cert-managerkubectl create namespace cert-managerAdd the Jetstack Helm repository helm repo add jetstack https://charts.jetstack.ioupdate helm repohelm repo updateinstall cert-manager helm chart*Note: If you receive an ‚ÄúError: Kubernetes cluster unreachable‚Äù message when installing cert-manager, try copyingthe contents of ‚Äú/etc/rancher/k3s/k3s.yaml‚Äù to ‚Äú~/.kube/config‚Äù to resolve the issue.*helm install \\ cert-manager jetstack/cert-manager \\ --namespace cert-manager \\ --version v1.7.1check rollout of cert-managerkubectl get pods --namespace cert-managerBe sure each pod is fully running before proceedingInstall Rancher with Helm Note: If you have ‚Äú.local‚Äù for your private TLD then Rancher will NOT finish the setup within the webUIhelm install rancher rancher-stable/rancher \\ --namespace cattle-system \\ --set hostname=rancher.example.comcheck rolloutkubectl -n cattle-system rollout status deploy/rancheryou should seeWaiting for deployment \"rancher\" rollout to finish: 0 of 3 updated replicas are available...Waiting for deployment \"rancher\" rollout to finish: 1 of 3 updated replicas are available...Waiting for deployment \"rancher\" rollout to finish: 2 of 3 updated replicas are available...deployment \"rancher\" successfully rolled outcheck statuskubectl -n cattle-system rollout status deploy/rancheryou should seedeployment \"rancher\" successfully rolled outload balancerIf you are using k3s you can use the traefik ingress controller that ships with k3srunkubectl get svc --all-namespaces -o widelook forkube-system traefik LoadBalancer 10.43.202.72 192.168.100.10 80:32003/TCP,443:32532/TCP 5d23h app=traefik,release=traefikthen create a DNS entry for rancher.example.com 192.168.100.10This can be a host entry on your machine, or a DNS entry in your local DNS system (router, pi hole, etc‚Ä¶)otherwise you can use nginxnginx lbhttps://rancher.com/docs/rancher/v2.x/en/installation/resources/k8s-tutorials/infrastructure-tutorials/nginx/other considerationsSeparating Rancher Cluster from your User Clusterhttps://rancher.com/docs/rancher/v2.x/en/overview/architecture-recommendations/#separation-of-rancher-and-user-clustersLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "High Availability Pi-Hole? Yes please!", "url": "/posts/ha-pi-hold-gravity-sync/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, pi-hole, gravity-sync, keepalived", "date": "2020-12-12 08:00:00 -0600", "snippet": "Dear Pi-Hole,We love your product.It keeps our network safe from malware and other unwanted domains. While we love what is there so far, please add a feature to your core product to keep multiple ...", "content": "Dear Pi-Hole,We love your product.It keeps our network safe from malware and other unwanted domains. While we love what is there so far, please add a feature to your core product to keep multiple servers in sync and provide high availability DNS to our whole entire network.Then, we won‚Äôt have people asking us ‚ÄúIs the internet down?‚Äù every time we reboot our Pi-Hole server.Until then, we will use Gravity Sync.Sincerely,Techno Tim (and probably thousands of other lovers of Pi-Hole).P.S.Keep up the good work!Thank you Gravity Sync!(don‚Äôt forget to star the repo!)https://github.com/vmstan/gravity-syncüì∫ Watch VideoGreat Raspberry Pi - Pi-Hole Servers!‚ñ∫ Raspberry Pi Zero W Kit - https://amzn.to/3qOl9yS‚ñ∫ Raspberry Pi 4 Kit - https://amzn.to/3nophDmIf you‚Äôre looking to have your PiHole instances failover automatically, be sure to check out the documentation on keepalivedMeet keepalived - High Availability and Load Balancing in OneLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Before I do anything on Proxmox, I do this first...", "url": "/posts/first-11-things-proxmox/", "categories": "proxmox", "tags": "homelab, proxmox, homelab", "date": "2020-11-28 08:00:00 -0600", "snippet": "After setting up my Proxmox servers, there are a few things I do before I use them for their intended purpose.This ranges from updates, to storage, to networking and VLANS, to uploading ISOs, to cl...", "content": "After setting up my Proxmox servers, there are a few things I do before I use them for their intended purpose.This ranges from updates, to storage, to networking and VLANS, to uploading ISOs, to clustering, and more.Join me as we pick up where the rest of the proxmox tutorials stop, and that‚Äôs everything you need to do to make these production ready (and maybe a bonus item too).üì∫ Watch VideoUpdatesEdit /etc/apt/sources.listProxmox Version 6.Xdeb http://ftp.us.debian.org/debian buster main contribdeb http://ftp.us.debian.org/debian buster-updates main contrib# security updatesdeb http://security.debian.org buster/updates main contrib# not for production usedeb http://download.proxmox.com/debian buster pve-no-subscriptionProxmox Version 7.X(for a full guide on Proxmox 7, please see this link)deb http://ftp.debian.org/debian bullseye main contribdeb http://ftp.debian.org/debian bullseye-updates main contrib# security updatesdeb http://security.debian.org/debian-security bullseye-security main contrib# PVE pve-no-subscription repository provided by proxmox.com,# NOT recommended for production usedeb http://download.proxmox.com/debian/pve bullseye pve-no-subscriptionEdit /etc/apt/sources.list.d/pve-enterprise.list# deb https://enterprise.proxmox.com/debian/pve buster pve-enterpriseProxmox Version 8.XCreate a file at /etc/apt/sources.list.d/pve-no-enterprise.list with the following contents:# not for production usedeb http://download.proxmox.com/debian/pve bookworm pve-no-subscriptionIf you are using cephCreate a file at /etc/apt/sources.list.d/ceph.list with the following contents:# not for production usedeb http://download.proxmox.com/debian/ceph-quincy bookworm no-subscriptionIf you‚Äôre looking to upgrade to Proxmox 8, see this postRunapt-get updateapt dist-upgraderebootStorageBE CAREFUL.This will wipe your disks.fdisk /dev/sdaThen P for partition, then D for delete, then W for write.Check SMART Monitoringsmartctl -a /dev/sdaIOMMU (PCI Passthrough)You‚Äôll first want to be sure that Vt-d / IOMMU is enabled in your BIOS before continuing. If see ‚ÄúNo IOMMU detected, please activate it.See Documentation for further information.‚Äù It means that IOMMU is not enabled in your BIOS or that it has not been enabled in Proxmox yet. If you‚Äôre seeing this and you‚Äôve enabled it in your BIOS, you can enable it in Proxmox below.Checking your boot managerEnabling PCI passthrough depends on your boot manager. You can check to see which one you are using by runningefibootmgr -vIf it returns an errors, it‚Äôs running in Legacy/BIOS with GRUB, skip to GRUB sectionif it returns something like this, it‚Äôs running system-boot, skip to system-d section sectionBoot0002* proxmox\tHD(2,GPT,b0f10348-020c-4bd6-b002-dc80edcf1899,0x800,0x100000)/File(\\EFI\\proxmox\\shimx64.efi)if it returns something like this.Boot0006 * Linux Boot Manager [...] File(EFI\\systemd\\systemd-bootx64.efi)GRUBIf you‚Äôre using GRUB, use the following commands:nano /etc/default/grubadd iommu=pt to GRUB_CMDLINE_LINUX_DEFAULT like so:GRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on iommu=pt\"If you aren‚Äôt using an intel processor, remove intel_iommu=onsystem-bootIf you‚Äôre using system-boot use the following commands.nano /etc/kernel/cmdlineadd intel_iommu=on iommu=pt to the end of this line without line breaksroot=ZFS=rpool/ROOT/pve-1 boot=zfs intel_iommu=on iommu=ptIf you aren‚Äôt using an intel processor, remove intel_iommu=onrunpve-efiboot-tool refreshthen rebootrebootVFIO modulesEdit /etc/modulesvfiovfio_iommu_type1vfio_pcivfio_virqfdrunupdate-initramfs -u -k allthen rebootrebootNVIDIAIf you‚Äôre planning on using an NVIDIA card, I‚Äôve found this helps prevent some apps like GPUz from crashing on the VM.echo \"options kvm ignore_msrs=1 report_ignored_msrs=0\" &gt; /etc/modprobe.d/kvm.confStill having trouble?See Proxmox PCI PassthroughVLAN AwareIf you want to restrict your VLANSnano /etc/network/interfacesSet your VLAN herebridge-vlan-aware yesbridge-vids 20NIC Team Examplenano /etc/network/interfacesauto eno1iface eno1 inet manualauto eno2iface eno2 inet manualauto bond0iface bond0 inet manual bond-slaves eno1 eno2 bond-miimon 100 bond-mode 802.3ad bond-xmit-hash-policy layer2+3auto vmbr0iface vmbr0 inet static address 192.168.0.11/24 gateway 192.168.0.1 bridge-ports bond0 bridge-stp off bridge-fd 0 bridge-vlan-aware yes bridge-vids 2-4094#lacp nic teamIf you‚Äôre running Proxmox 7, see the modified config here for LAGG / LACPCloningThese are the commands I run after cloning a Linux machine so that it resets all information for the machine it was cloned from.(Note: If you use cloud-init-aware OS images as described under Cloud-Init Support on https://pve.proxmox.com/pve-docs/chapter-qm.html, these steps won‚Äôt be necessary!)change hostnamesudo nano /etc/hostname find your hostname and change itchange hosts file find your hostname and change itsudo nano /etc/hostsreset machine IDrm -f /etc/machine-id /var/lib/dbus/machine-iddbus-uuidgen --ensure=/etc/machine-iddbus-uuidgen --ensureregenerate ssh keysregen ssh keyssudo rm /etc/ssh/ssh_host_*sudo dpkg-reconfigure openssh-serverrebootAlertsI‚Äôve added yet another item to my list when setting up a new Proxmox server, and that‚Äôs setting up alerts!LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "My HUGE (but small) 1U Server Upgrade", "url": "/posts/1u-server-upgrade/", "categories": "homelab", "tags": "homelab, hardware", "date": "2020-11-21 08:00:00 -0600", "snippet": "I‚Äôve been making great use of some older, bigger servers but I decided to try and build, upgrade, and migrate to some 1U servers.Join me as we unbox and build my 2 new virtualization servers!üì∫ Watc...", "content": "I‚Äôve been making great use of some older, bigger servers but I decided to try and build, upgrade, and migrate to some 1U servers.Join me as we unbox and build my 2 new virtualization servers!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet WireGuard, the new hotness in VPN...", "url": "/posts/wiregaurd-setup/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, wireguard, self-hosted, vpn, portainer", "date": "2020-11-14 08:00:00 -0600", "snippet": "Self hosting a VPN has traditionally been hard to set up and we‚Äôve had very few options.That is until WireGuard came about. WireGuard is an extremely simple yet fast and modern VPN that utilizes st...", "content": "Self hosting a VPN has traditionally been hard to set up and we‚Äôve had very few options.That is until WireGuard came about. WireGuard is an extremely simple yet fast and modern VPN that utilizes state-of-the-art cryptography.It also supports running inside of a Docker container and that‚Äôs exactly what we‚Äôll be using in this tutorial!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I think I found a Dropbox replacement with Nextcloud...", "url": "/posts/nextcloud-setup/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, self-hosted, nextcloud, portainer", "date": "2020-11-07 08:00:00 -0600", "snippet": "Are you thinking about ditching Google apps or looking for a Dropbox replacement? Are you ready to self host your own productivity platform? Well, Nextcloud may be for you! In today‚Äôs tutorial w...", "content": "Are you thinking about ditching Google apps or looking for a Dropbox replacement? Are you ready to self host your own productivity platform? Well, Nextcloud may be for you! In today‚Äôs tutorial we‚Äôll walk though setting up Nextcloud with Docker and Kubernetes.We‚Äôll also walk through some of the new features, installing apps from the app store, exposing this Nextcloud publicly, as well as setting up 2FA (2 factor authentication) with TOTP clients like Google Authenticator and Authy.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Before I do anything on Linux, I do these first...", "url": "/posts/fist-13-things-linux/", "categories": "homelab", "tags": "homelab, linux, ubuntu", "date": "2020-10-31 09:00:00 -0500", "snippet": "After setting up my Linux servers, there are a few things I do before I use them for their intended purpose.This ranges from security, to tools, to config.Join me as we set up our first Linux serve...", "content": "After setting up my Linux servers, there are a few things I do before I use them for their intended purpose.This ranges from security, to tools, to config.Join me as we set up our first Linux server in this tutorial and walk through setting it up proper (and maybe some bonus items sprinkled in).üì∫ Watch VideoUpdatesudo apt-get updatesudo apt-get upgradeReconfigure unattended-upgradessudo dpkg-reconfigure --priority=low unattended-upgradesVerify unattended upgrades configuration file in your text editor of choice/etc/apt/apt.conf.d/20auto-upgradesTo disable automatic reboots by the automatic upgrades configuration edit the following file:/etc/apt/apt.conf.d/50unattended-upgradesand uncomment the following line by removing the leading slashes://Unattended-Upgrade::Automatic-Reboot \"false\";Accountadd usersudo adduser someuseradd to sudoerssudo usermod -aG sudo someuserSSH Serverinstallsudo apt-get install openssh-servercopy key from client to serverssh-copy-id someuser@192.168.0.100switch to key based authsudo nano /etc/ssh/sshd_configAdd these attributesPasswordAuthentication noChallengeResponseAuthentication noNetworkingstatic IPsudo nano /etc/netplan/01-netcfg.yamlnetwork: version: 2 renderer: networkd ethernets: ens18: dhcp4: no addresses: - 192.168.0.222/24 gateway4: 192.168.0.1 nameservers: addresses: [192.168.0.4]Install oh-my-zshsudo apt-get updatesudo apt-get install zshsudo apt-get install powerline fonts-powerlinesh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"Fix LVMsudo lvmlvscanYou should see your logical volumeslvm&gt; lvscan ACTIVE '/dev/vgubuntu-server/root' [&lt;168.54 GiB] inherit ACTIVE '/dev/vgubuntu-server/swap_1' [980.00 MiB] inheritresize the logical volume group, usually the first one in the list but check to be sure!lvextend -l +100%FREE /dev/vgubuntu-server/rootYou should see: Size of logical volume vgubuntu-server/root changed from &lt;138.54 GiB (35466 extents) to &lt;168.54 GiB (43146 extents). Logical volume vgubuntu-server/root successfully resizedexitresize the file systemsudo resize2fs /dev/vgubuntu-server/rootCheck to see file system sizedf -hYou should see:Filesystem Size Used Avail Use% Mounted ontmpfs 1.6G 3.9M 1.6G 1% /run/dev/mapper/vgubuntu--server-root 166G 89G 70G 56% /tmpfs 7.9G 0 7.9G 0% /dev/shmtmpfs 5.0M 0 5.0M 0% /run/lock/dev/sda1 511M 4.0K 511M 1% /boot/efitmpfs 1.6G 0 1.6G 0% /run/user/1000You should see:resize2fs 1.46.5 (30-Dec-2021)Filesystem at /dev/vgubuntu-server/root is mounted on /; on-line resizing requiredold_desc_blocks = 18, new_desc_blocks = 22The filesystem on /dev/vgubuntu-server/root is now 44181504 (4k) blocks long.hostnamesudo hostnamectl set-hostnamesudo nano /etc/hostsTime ZoneCheck time zone:timedatectlChange time zone:sudo timedatectl set-timezoneYou can also use if you want a menu.sudo dpkg-reconfigure tzdata NTP Timesudo nano /etc/systemd/timesyncd.confNTP=192.168.0.4sudo timedatectl set-ntp offsudo timedatectl set-ntp oninstall kvm agentsudo apt-get install qemu-guest-agentfirewallsudo ufw default deny incomingsudo ufw default allow outgoingsudo ufw allow sshsudo ufw enablefail2bansudo apt-get install fail2bansudo cp /etc/fail2ban/fail2ban.{conf,local}sudo cp /etc/fail2ban/jail.{conf,local}sudo nano /etc/fail2ban/jail.localbackend = systemdcheck statussudo fail2ban-client statussudo fail2ban-client status sshdLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Huge Network Upgrade for My Homelab", "url": "/posts/home-network-upgrade/", "categories": "homelab", "tags": "homelab, network, hardware, unifi", "date": "2020-10-24 09:00:00 -0500", "snippet": "I decided to give my Home Lab a proper upgrade for 2020 and in to 2021! I finally took the plunge and went all in with a UniFi UDM Pro and a UniFi Switch PRO 24 PoE switch and they are awesome!üì∫ W...", "content": "I decided to give my Home Lab a proper upgrade for 2020 and in to 2021! I finally took the plunge and went all in with a UniFi UDM Pro and a UniFi Switch PRO 24 PoE switch and they are awesome!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Migrate Your Databases to Kubernetes and Docker", "url": "/posts/migrate-database-docker-kubernetes/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, self-hosted, mysql, database, portainer", "date": "2020-10-17 09:00:00 -0500", "snippet": "Have you been putting off migrating your database to Docker and Kubernetes like I have? Well wait no longer.It‚Äôs simple using this step-by-step tutorial.Today, we‚Äôll move a database that‚Äôs on a vi...", "content": "Have you been putting off migrating your database to Docker and Kubernetes like I have? Well wait no longer.It‚Äôs simple using this step-by-step tutorial.Today, we‚Äôll move a database that‚Äôs on a virtual machine to a container that‚Äôs running in kubernetes.Oh yeah, this will also work if it‚Äôs a bare metal server too, duh.üôÇüì∫ Watch Videomysql_backup.sh#! /bin/bashBACKUP_DIR=\"/home\"MYSQL_USER=\"root\"MYSQL=/usr/bin/mysqlMYSQL_PASSWORD=\"your my sql password\"MYSQLDUMP=/usr/bin/mysqldumpMYSQL_HOST=\"mysql\"MYSQL_PORT=\"3306\"databases=`$MYSQL --user=$MYSQL_USER --host $MYSQL_HOST --port $MYSQL_PORT -p$MYSQL_PASSWORD -e \"SHOW DATABASES;\" | grep -Ev \"(Database|information_schema|performance_schema)\"`for db in $databases; do $MYSQLDUMP --host $MYSQL_HOST --port $MYSQL_PORT --force --opt --user=$MYSQL_USER -p$MYSQL_PASSWORD --databases $db | gzip &gt; \"$BACKUP_DIR/$db.gz\"doneLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Heard You Like GPUs in Servers... GPU Passthrough on Linux and Docker", "url": "/posts/gpu-passthrough-linux/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, docker, portainer, nvidia, hardware", "date": "2020-10-10 09:00:00 -0500", "snippet": "We‚Äôve already figured out how to pass through a GPU to Windows machine but why let Windows have all the fun? Today, we do it on an Ubuntu headless server that‚Äôs virtualized, run some AI and Deep L...", "content": "We‚Äôve already figured out how to pass through a GPU to Windows machine but why let Windows have all the fun? Today, we do it on an Ubuntu headless server that‚Äôs virtualized, run some AI and Deep Learning workloads, then turn up the transcoding on Plex to 11.üì∫ Watch Video88 88 88 \"\" 88 88,dPPYba, 88 8b,dPPYba, ,adPPYb,d8 ,adPPYba, 88P' \"8a 88 88P' `\"8a a8\" `Y88 a8\" \"8a 88 d8 88 88 88 8b 88 8b d8 88b, ,a8\" 88 88 88 \"8a, ,d88 \"8a, ,a8\" 8Y\"Ybbd8\"' 88 88 88 `\"YbbdP\"Y8 `\"YbbdP\"' aa, ,88 \"Y8bbdP\" If you need to passthrough a GPU, follow this guide but install Ubuntu instead.ProxmoxShut down your VM in proxmox, edit your conf file, it should be here (note, change path to your VM‚Äôs ID)/etc/pve/qemu-server/100.confadd cpu: host,hidden=1,flags=+pcid to that filestart the server.Linux Guestsudo apt-get updatesudo apt-get upgradesudo apt-get install qemu-guest-agent # this is optional if you are virtualizing this machinesudo apt-get install build-essential # build-essential is required for nvidia drivers to compilesudo apt install --no-install-recommends nvidia-cuda-toolkit nvidia-headless-450 nvidia-utils-450 libnvidia-encode-450Then reboot.Then install nvtopsudo apt-get install nvtoptensorflow workloadnvidia-docker run --rm -ti tensorflow/tensorflow:r0.9-devel-gpuRancher / KubernetesIn your Rancher server (or kubernetes host)distribution=$(. /etc/os-release;echo $ID$VERSION_ID)curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.listsudo apt-get update &amp;&amp; sudo apt-get install -y nvidia-container-toolkitsudo apt-get install nvidia-container-runtimeupdate daemon.jsonsudo nano /etc/docker/daemon.jsonReplace with:{ \"default-runtime\": \"nvidia\", \"runtimes\": { \"nvidia\": { \"path\": \"/usr/bin/nvidia-container-runtime\", \"runtimeArgs\": [] } }}Install one more util for nvidia:sudo apt-get install -y nvidia-docker2RebootThen, using kubectl on your kubernetes / rancher hostkubectl create -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/master/nvidia-device-plugin.ymlLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "I Built Something for Your Homelab...", "url": "/posts/broadlink-control/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, broadlink, iot, hardware", "date": "2020-10-03 09:00:00 -0500", "snippet": "I am betting you have at least 3 infrared remote controls in your house.I am also willing to be you would love to automate some of these from time to time.Well don‚Äôt worry I have the solution for y...", "content": "I am betting you have at least 3 infrared remote controls in your house.I am also willing to be you would love to automate some of these from time to time.Well don‚Äôt worry I have the solution for you! In this video we walk through setting up a self-hosted /local only Broadlink Wifi Smart Home Hub that you can use within your own home without connecting to the cloud.Added bonus, I built a Docker container you can pull down and add to your Rancher, Portainer, Synology, QNAP, or any server running Docker or Kubernetes.This includes a python backend and API as well as a ReactJS frontend so that you can discover, learn, and send commands from the web UI or even from the web API.I hope you enjoy it!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Guacamole, Your Remote Access Gateway", "url": "/posts/guacamole-remote-access-gateway/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, self-hosted, guacamole, portainer, docker, vnc, ssh, rdp", "date": "2020-09-26 09:00:00 -0500", "snippet": "Do you have a lot of virtual machines? Are you running Windows, Linux, and Mac and need remote access from a single UI? Well, Apache Guacamole is for you! Apache Guacamole is a clientless remote...", "content": "Do you have a lot of virtual machines? Are you running Windows, Linux, and Mac and need remote access from a single UI? Well, Apache Guacamole is for you! Apache Guacamole is a clientless remote access gateway that give you a web portal to access any of your clients over standard protocols like VNC, RDP, SSH, TELNET, and more. Join me in this step by step tutorial as we set up a self-hosted version of Guacamole in your homelab.As an added bonus, we‚Äôll set up 2FA (multifactor authentication) to help secure Guacamole.Oh, yeah, and we‚Äôll do this all in Docker and or Kubernetes, it‚Äôs up to you! :)üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Bridge Mode with UniFi Access Points", "url": "/posts/unifi-ap-bridge-mode/", "categories": "homelab", "tags": "homelab, network, unifi, hardware", "date": "2020-09-19 09:00:00 -0500", "snippet": "Do you have some places where you can‚Äôt run ethernet? Do want to extend your ethernet without pulling more cable? Well this is the guide for you.In this step-by-step tutorial we‚Äôll use a Ubiquiti...", "content": "Do you have some places where you can‚Äôt run ethernet? Do want to extend your ethernet without pulling more cable? Well this is the guide for you.In this step-by-step tutorial we‚Äôll use a Ubiquiti UniFi AP AC PRO and connect a second as a guest, giving use remote ethernet to a remote site! This is the pro tip guide to setting up a wireless bridge! Bonus, we‚Äôll even do a live throughput test to see how much bandwidth we get running in bridge mode with 2 AC Pros!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Build & Deploy Your Own Code in Your Homelab!", "url": "/posts/self-hosted-devops-stack/", "categories": "self-hosted, homelab", "tags": "homelab, rancher, kubernetes, gitlab", "date": "2020-09-12 09:00:00 -0500", "snippet": "So you‚Äôre a software engineer or a developer who wants to self-host your own code in your own homelab? Well this is the tutorial for you! In this step-by-step guide we‚Äôll walk through setting up ...", "content": "So you‚Äôre a software engineer or a developer who wants to self-host your own code in your own homelab? Well this is the tutorial for you! In this step-by-step guide we‚Äôll walk through setting up a repo, building and testing our own code (with unit tests) in a self-hosted Gitlab CI runner in our CI pipeline, then we‚Äôll build a Docker image and push it up to a container registry, then we‚Äôll use kubectl in our CD pipeline to deploy our Docker container to our self-hosted kubernetes cluster! This all happens in a couple of minutes and then we‚Äôll truly have continuous integration and continuous delivery in our homelab!üì∫ Watch VideoHelpful videos1 - Set Up Kubernetes with Rancher2 - Set up a reverse proxy and SSL with Traefik3 - Expose Rancher and Kubernetes API SecurelyGitLab react appSee the app here:https://github.com/timothystewart6/techno-reactDocker file:https://github.com/timothystewart6/techno-react/blob/master/DockerfileKubernetes deployment yamlhttps://github.com/timothystewart6/techno-react/blob/master/kubernetes/deployment.yamlnginx config for your react applicationhttps://github.com/timothystewart6/techno-react/blob/master/nginx.confpbcopy for WSL on Windowshttps://www.techtronic.us/pbcopy-pbpaste-for-wsl/https://www.techtronic.us/pbcopy-pbpaste-for-wsl/Example config.toml for your GitLab runner.concurrent = 1check_interval = 0[session_server] session_timeout = 1800[[runners]] name = \"rancher-gitlab-runner\" url = \"https://gitlab.com\" token = \"your-gitlab-runner-token\" executor = \"docker\" [runners.custom_build_dir] [runners.cache] [runners.cache.s3] [runners.cache.gcs] [runners.docker] tls_verify = false image = \"docker:stable\" privileged = false disable_entrypoint_overwrite = false oom_kill_disable = false disable_cache = false volumes = [\\\"/var/run/docker.sock:/var/run/docker.sock\\\", \\\"/cache\\\"] shm_size = 0example ~/.kube/config for your GitLab secretapiVersion: v1kind: Configclusters:- name: \"cluster1\" cluster: server: \"https://your.rancher.url/k8s/clusters/c-cluster-id\"users:- name: \"cluster1\" user: token: \"your kubernetes token\"contexts:- name: \"cluster1\" context: user: \"cluster1\" cluster: \"cluster1\"current-context: \"cluster1\"LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "SSL, Traefik, and OAuth for Rancher! (Google, GitHub, Keycloak, Azure, and more!)", "url": "/posts/host-rancher-securely/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, github", "date": "2020-09-05 09:00:00 -0500", "snippet": "Do you want to self host your Rancher UI securely in your homelab? Have you thought about putting your Rancher UI behind Traefik and your reverse proxy to get free SSL certificates using Let‚Äôs Encr...", "content": "Do you want to self host your Rancher UI securely in your homelab? Have you thought about putting your Rancher UI behind Traefik and your reverse proxy to get free SSL certificates using Let‚Äôs Encrypt? Do you want to make your Rancher UI available publicly and secure it using 3rd party OAuth providers like Google, GitHub, Keycloak, Okta, Shibboleth, and more? Well this is the guide for you.In this step-by-step tutorial we‚Äôll walk through setting up the Rancher UI to use Traefik reverse proxy, get SSL certificates using Let‚Äôs Encrypt, host our UI publicly, and then add 3rd party OAuth providers so that we can use 2 factor authentication (2FA) and all of the other security features auth providers give us.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Portainer 2.0 -- Now with more Kubernetes!", "url": "/posts/portainer-2/", "categories": "portainer", "tags": "homelab, kubernetes, portainer", "date": "2020-08-29 09:00:00 -0500", "snippet": "What‚Äôs new in Portainer 2.0? Well, a ton.With the release of Portainer 2 you now have the option to install Kubernetes.This makes installing, managing, and deploying Kubenetes really easy.In this ...", "content": "What‚Äôs new in Portainer 2.0? Well, a ton.With the release of Portainer 2 you now have the option to install Kubernetes.This makes installing, managing, and deploying Kubenetes really easy.In this step by step tutorial, we‚Äôll start with nothing and end up with a fully working Portainer 2 server running Kubernetes.We‚Äôll set up k3s using k3d, install kubectl, and then spin up Portainer.As an added bonus, we‚Äôll also run a Minecraft server in Kubernetes as a proof of work.Double bonus, we‚Äôll cover how to pronounce kubectl‚Ä¶üì∫ Watch VideoLet‚Äôs get startedHere are the commands used in the video.Be sure to use them appropriately.Install ubuntuhttps://ubuntu.com/Install DockerTo install docker, see this postInstall kubectlhttps://kubernetes.io/docs/tasks/tools/install-kubectl/curl -LO \"https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\"chmod +x ./kubectlsudo mv ./kubectl /usr/local/bin/kubectlkubectl version --clientInstall k3dhttps://github.com/rancher/k3dcurl -s https://raw.githubusercontent.com/rancher/k3d/main/install.sh | bashInstall k3sk3d cluster create portainer --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server:0\"k3d cluster create portainer --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server:0\"Install Portainerhttps://github.com/portainer/k8skubectl create namespace portainerkubectl apply -n portainer -f https://raw.githubusercontent.com/portainer/k8s/master/deploy/manifests/portainer/portainer.yamlThe Portainer UI is hosted on port `30777` Example: `http://192.168.0.1:30777`LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Host All Your Homelab Services with DuckDNS -- Free Dynamic DNS Running on Docker", "url": "/posts/duck-dns/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, duckdns", "date": "2020-08-22 09:00:00 -0500", "snippet": "Are you trying to access your self-hosted services outside of your firewall? Are you tired of trying to remember your IP when away, or worse yet, having your ISP change your IP address? Have you ...", "content": "Are you trying to access your self-hosted services outside of your firewall? Are you tired of trying to remember your IP when away, or worse yet, having your ISP change your IP address? Have you not purchased a domain yet but want to access your own personal VPN? If you answered ‚ÄúYES‚Äù to any of these, join me as we walk through this step-by-step tutorial and set up DuckDNS, the free dynamic DNS service, using Docker and then move on to use Rancher and Kubernetes.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Hosting Your Homelab Services with SSL -- Let's Encrypt, MetalLB, Traefik, Rancher, Kubernetes", "url": "/posts/reverse-proxy-kubernetes/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes, traefik, wsl, metal-lb", "date": "2020-08-15 09:00:00 -0500", "snippet": "Are you self-hosting lots of services at home in your homelab? Have you been port forwarding or using VPN to access your self-hosted services wishing you had certificates so that you can access th...", "content": "Are you self-hosting lots of services at home in your homelab? Have you been port forwarding or using VPN to access your self-hosted services wishing you had certificates so that you can access them securely over SSL? Well after this video, you can! In this step by step tutorial we‚Äôll walk through setting up Rancher and Kubernetes with a reverse proxy, Kubernetes Ingress, MetalLB, Traefik, Let‚Äôs Encrypt, and DNS giving you free certificates.üì∫ Watch VideoInstall WSL on Windows 10https://www.youtube.com/watch?v=kL8iGErULiwInstall kubectlhttps://kubernetes.io/docs/tasks/tools/install-kubectl/Install MetalLBhttps://metallb.universe.tf/installation/kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.5/manifests/namespace.yamlkubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.9.5/manifests/metallb.yamlYou should only ever run this step once.kubectl create secret generic -n metallb-system memberlist --from-literal=secretkey=\"$(openssl rand -base64 128)\"sample config.yamlapiVersion: v1kind: ConfigMapmetadata: namespace: metallb-system name: configdata: config: | address-pools: - name: default protocol: layer2 addresses: - 192.168.1.240-192.168.1.250kubectl apply -f config.yamlTraefiktraefik sample answers yamlchange ‚Äústaging: true‚Äù to ‚Äústaging: false‚Äù once you confirm its all working to get the live certs--- defaultImage: true imageTag: \"1.7.14\" serviceType: \"LoadBalancer\" debug: enabled: false rbac: enabled: true ssl: enabled: true enforced: true permanentRedirect: false acme: enabled: true email: \"you@example.com\" onHostRule: true staging: true logging: true challengeType: \"dns-01\" dnsProvider: name: \"cloudflare\" existingSecretName: \"cloudflare-dns\" persistence: enabled: true dashboard: enabled: true domain: \"traefik.example.com\" auth: basic: \"\"Traefik Helmhttps://hub.helm.sh/charts/stable/traefikTraefik DNS Providershttps://docs.traefik.io/https/acme/#providersTroubleshootingBe sure that your Traefik yaml matches the code above exactly, including whitespace.Yaml is whitespace sensitive.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Self-Host Code Server in Your Homelab -- VS Code in a Browser!", "url": "/posts/code-server-self-host/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, vscode", "date": "2020-08-08 09:00:00 -0500", "snippet": "Have you ever wanted to run VS Code in your browser? What if you had access to your terminal and could pull and commit code as well as push it up to GitHub all from a browser or tablet? That‚Äôs ex...", "content": "Have you ever wanted to run VS Code in your browser? What if you had access to your terminal and could pull and commit code as well as push it up to GitHub all from a browser or tablet? That‚Äôs exactly what code server does! In this tutorial we‚Äôll walk through step by step of how to install and configure code server to get it self-hosted in your homelab.We‚Äôll start with bare metal and virtualization and then work our way up to Docker, Kubernetes, and Rancher.Then, you don‚Äôt have to carry around your laptop anymore! You can preserve battery life on the go and leave the intensive tasks to your homelab server.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Upgrade FreeNAS to TrueNAS", "url": "/posts/upgrade-freenas-to-truenas/", "categories": "truenas", "tags": "homelab, truenas", "date": "2020-08-01 09:00:00 -0500", "snippet": "Want to migrate FreeNAS to TrueNAS today? It‚Äôs simple using this step by step tutorial.We‚Äôll walk through how to upgrade FreeNAS to TreNAS CORE.We‚Äôll cover upgrading FreeNAS to TrueNAS on a physic...", "content": "Want to migrate FreeNAS to TrueNAS today? It‚Äôs simple using this step by step tutorial.We‚Äôll walk through how to upgrade FreeNAS to TreNAS CORE.We‚Äôll cover upgrading FreeNAS to TrueNAS on a physical machine (bare metal) as well as a virtualized install of FreeNAS. We‚Äôll prepare our services, jails, plugins, virtual machines, pools, and disks for the migration and then upgrade each.We‚Äôll even show you how to do an offline upgrade of TrueNAS and then how to upgrade a ZFS pool with newer feature flags.Finally we‚Äôll walk through what‚Äôs different between TrueNAS and FreeNAS.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Proxmox Backup Server Install Tutorial", "url": "/posts/proxmox-backup-server-first/", "categories": "proxmox", "tags": "homelab, proxmox", "date": "2020-07-25 09:00:00 -0500", "snippet": "Proxmox Backup Server is an enterprise-class client-server backup software that backs up virtual machines, containers, and physical hosts.In this step by step tutorial, we install and configure Pro...", "content": "Proxmox Backup Server is an enterprise-class client-server backup software that backs up virtual machines, containers, and physical hosts.In this step by step tutorial, we install and configure Proxmox Backup Server (PBS) and back up all of our virtual machines. We‚Äôll start with nothing and end up with a fully functional Proxmox Backup Server with a ZFS datastore you can use to back up and restore your machines today.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Homelab Services Tour -- What am I running on my Homelab?", "url": "/posts/homelab-services-tour-2020/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, proxmox, truenas, docker", "date": "2020-07-18 09:00:00 -0500", "snippet": "In my homelab tour, I showed you my hardware and network setup that powers all the infrastructure at home.Then, many of you asked which services I am hosting on this hardware.Well, here it is.This...", "content": "In my homelab tour, I showed you my hardware and network setup that powers all the infrastructure at home.Then, many of you asked which services I am hosting on this hardware.Well, here it is.This is a tour of all the self hosted services I have running in my Homelab.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Techno Tim Homelab Tour -- Server Rack and Network", "url": "/posts/homelab-hardware-tour/", "categories": "homelab", "tags": "homelab, hardware", "date": "2020-07-11 09:00:00 -0500", "snippet": "You asked for a tour of my homelab, well here it is.In this tour I will take you through my home server rack and network setup.This includes my all of my home networking equipment, my servers, dis...", "content": "You asked for a tour of my homelab, well here it is.In this tour I will take you through my home server rack and network setup.This includes my all of my home networking equipment, my servers, disk array, and everything else in my server rack.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Build a Slack Bot", "url": "/posts/slack-bot/", "categories": "coding", "tags": "coding, self-hosted, slack", "date": "2020-07-04 09:00:00 -0500", "snippet": "Slack is a great chat and communication tool used by small and large businesses as well as personal use.Slack has a great API and great official Node JS clients that help you automate many features...", "content": "Slack is a great chat and communication tool used by small and large businesses as well as personal use.Slack has a great API and great official Node JS clients that help you automate many features of Slack. If you‚Äôre thinking of building a bot for Slack, be sure to follow this step by step tutorial on how to build a Slack bot in JavaScript using the Slack API and the Node Slack SDK.With this SDK, we can connect to the Slack Web API and event hook into events using the RTM API and build a bot in just a few minutes that you can add to your Slack server today.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Upgrade, Backup, and Restore Rancher 2", "url": "/posts/rancher-2-upgrade-backup-restore/", "categories": "kubernetes, rancher", "tags": "homelab, rancher, kubernetes", "date": "2020-06-27 09:00:00 -0500", "snippet": "It use to be hard to back up Rancher, but with Rancher 2 it‚Äôs super simple.Upgrading, backing up, and restoring your Rancher server should be part of your regular routine.Join me in this tutorial a...", "content": "It use to be hard to back up Rancher, but with Rancher 2 it‚Äôs super simple.Upgrading, backing up, and restoring your Rancher server should be part of your regular routine.Join me in this tutorial as we walk through backing up, upgrading, and restoring a single node Rancher Docker install in just a couple of minutes.Trust me, you‚Äôll feel better after you do.üì∫ Watch Video Need to install Rancher? See my guide https://www.youtube.com/watch?v=YWqBxCIfxw4 See the full guide from Rancher https://rancher.com/docs/rancher/v2.x/en/upgrades/upgrades/single-node/ Upgrade &amp; Backup Outline Create a copy of the data from your Rancher server container Create a backup tarball Pull the new Docker image Start the new Rancher server container Verify the Upgrade Clean up your old Rancher server containerSee all containersdocker psSee all containers including stopped onesdocker ps -aStop the containerdocker stop &lt;RANCHER_CONTAINER_NAME&gt;Create a data containerdocker create --volumes-from &lt;RANCHER_CONTAINER_NAME&gt; --name rancher-data-&lt;DATE&gt; rancher/rancher:&lt;RANCHER_CONTAINER_TAG&gt;Create a backup tarballdocker run --volumes-from rancher-data-&lt;DATE&gt; -v $PWD:/backup:z busybox tar pzcvf /backup/rancher-data-backup-&lt;RANCHER_VERSION&gt;-&lt;DATE&gt;.tar.gz /var/lib/rancherRun ls and you should see your tarballrancher-data-backup-v2.4.3-2020-06-21.tar.gzPull a new docker imagedocker pull rancher/rancher:&lt;RANCHER_VERSION_TAG&gt;Start your new rancher server container.Use the command you used to create your initial container, it looks something like this.docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server rancher/rancher:&lt;RANCHER_VERSION&gt;Check to see if it‚Äôs runningdocker psRestoring Rancher from BackupUse the command you used to create your initial container, it looks something like this.docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server rancher/rancher:&lt;RANCHER_VERSION&gt;Stop the containerdocker stop &lt;RANCHER_CONTAINER_NAME&gt;Delete state data and replace from backupdocker run --volumes-from &lt;RANCHER_CONTAINER_NAME&gt; -v $PWD:/backup \\busybox sh -c \"rm /var/lib/rancher/* -rf &amp;&amp; \\tar pzxvf /backup/rancher-data-backup-&lt;RANCHER_VERSION&gt;-&lt;DATE&gt;.tar.gz\"Start the containerdocker start &lt;RANCHER_CONTAINER_NAME&gt;Unofficial WayBackupcd /optdocker stop rancher_docker_serverif this fails it means you named your container something else, find it by running docker pssudo tar czpf rancher-data-backup-VERSION-DATE-unofficial.tar.gz ranchersudo mv rancher-data-backup-VERSION-DATE-unofficial.tar.gz ~/ docker start rancher_docker_serverRestorecd /optdocker stop rancher_docker_serverif this fails it means you named your container something else, find it by running docker pssudo tar xzpf rancher-data-backup-VERSION-DATE-unofficial.tar.gz docker start rancher_docker_serverBackup scriptYour rancher server must be named similar to rancher_docker_server_v2.4.5 otherwise you‚Äôll need to modify this.This will not work with latest tag, so be sure to pin your version.It will need to be run with sudo or scheduled in sudo crontab -erancher_backup.sh# go to rancher dircd /opt# get current rancher tagRANCHER_TAG=$(docker ps | grep rancher/rancher | grep -Eio 'rancher/rancher:.{0,6}' | sed 's/rancher\\/rancher://g')# date formatTODAY=`date -I`# stop docker containerdocker stop rancher_docker_server_$RANCHER_TAG# create tartar czpf rancher-data-backup-$RANCHER_TAG-$TODAY-unofficial.tar.gz rancher# move tarmv rancher-data-backup-$RANCHER_TAG-$TODAY-unofficial.tar.gz /home/USERNAME/backups/rancher_backups/# start serverdocker start rancher_docker_server_$RANCHER_TAGupgrading to a new versionNEW_VERSION_TAG=v2.4.8docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server_$NEW_VERSION_TAG rancher/rancher:$NEW_VERSION_TAGLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Meet Heimdall, Your Homelab Application Dashboard", "url": "/posts/heimdall-dashboard/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, portainer, docker, heimdall, self-hosted", "date": "2020-06-20 09:00:00 -0500", "snippet": "Tired of bookmarking all of your self-hosted services only to lose them? Want access to all your sites from anywhere in the world? Well, Heimdall can help with a clean, responsive, and beautiful d...", "content": "Tired of bookmarking all of your self-hosted services only to lose them? Want access to all your sites from anywhere in the world? Well, Heimdall can help with a clean, responsive, and beautiful dashboard for all of your Homelab services. So join me in this tutorial as we install and configure Heimdall on Docker and Kubernetes and build a dashboard with live icons.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Home Assistant on Docker and Kubernetes (Open Source Home Automation)", "url": "/posts/home-assistant/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, home-assistant", "date": "2020-06-13 09:00:00 -0500", "snippet": "Are you ready to start automating your smart home with the power of open source? Do you already have Home Assistant running but need a little more power than a Raspberry Pi? If so, join me in thi...", "content": "Are you ready to start automating your smart home with the power of open source? Do you already have Home Assistant running but need a little more power than a Raspberry Pi? If so, join me in this easy to follow, step by step tutorial on installing Home Assistant on Docker, Kubernetes, and Rancher. We‚Äôll set it up, walk through and configure the UI, and then move on to configure some Wemo smart switches, Phillips Hue bulbs, Google Home / Chromecast devices, and even create a Dark Mode / Light mode automation script using Phillips Hue Scenes!üì∫ Watch Videoconfiguration.yaml# Configure a default setup of Home Assistant (frontend, api, etc)default_config:# Text to speechtts: - platform: google_translategroup: !include groups.yamlautomation: !include automations.yamlscript: !include scripts.yamlscene: !include scenes.yamlwemo: discovery: truescripts.yaml'1591564249617': alias: Dark Mode sequence: - data: group_name: Office scene_name: Gaming service: hue.hue_activate_scene - device_id: f41ccf86433148dcbd8e932d1412f12a domain: switch entity_id: switch.gaming_lights type: turn_on'1591564322588': alias: Light Mode sequence: - data: group_name: Office scene_name: Energize service: hue.hue_activate_scene - device_id: f41ccf86433148dcbd8e932d1412f12a domain: switch entity_id: switch.gaming_lights type: turn_offLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize vs. Containerize (Which should I choose?)", "url": "/posts/virtualize-vs-containerize/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, proxmox, docker, portainer", "date": "2020-06-06 09:00:00 -0500", "snippet": "Should I virtualize this? Should I containerize this? These are great questions to ask yourself when spinning up self-hosted services in your Homelab environment.We‚Äôll review my previous video (2...", "content": "Should I virtualize this? Should I containerize this? These are great questions to ask yourself when spinning up self-hosted services in your Homelab environment.We‚Äôll review my previous video (20 Ways to Use a Virtual Machine (and other ideas for your homelab) and decide which should run in a Docker container, which should be virtualized with Proxmox, and which should run on hardware as bare metal.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "PiHole on Docker and Kubernetes (I almost gave up)", "url": "/posts/pihole-containerized/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, docker, portainer, self-hosted, pi-hole", "date": "2020-05-30 09:00:00 -0500", "snippet": "We know you‚Äôve heard of Pihole and we know you are probably aware of how to install it but‚Ä¶ have you tried running it on Docker and Kubernetes using Rancher? Have you configured it for pfSense? D...", "content": "We know you‚Äôve heard of Pihole and we know you are probably aware of how to install it but‚Ä¶ have you tried running it on Docker and Kubernetes using Rancher? Have you configured it for pfSense? Don‚Äôt worry, I figured out all the hard stuff for you.So let‚Äôs consolidate some hardware and services.üì∫ Watch VideoUbuntu Fixsudo apt-get updatesudo apt-get install resolvconfsudo nano /etc/resolvconf/resolv.conf.d/headenabled &amp; start servicesudo systemctl enable resolvconf.servicesudo systemctl start resolvconf.serviceadd your upstream DNS (I use Quad9)nameserver 9.9.9.9update resolv.conf after adding nameserversudo resolvconf -uSet pi-hole passwordsudo pihole -a -pLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "4 Ways to Install Plex (one is unexpected)", "url": "/posts/plex-containerized/", "categories": "self-hosted", "tags": "homelab, rancher, kubernetes, portainer, docker, plex, self-hosted", "date": "2020-05-23 09:00:00 -0500", "snippet": "I‚Äôm a huge fan of virtualization and containerization (if you couldn‚Äôt tell already)! Today, we‚Äôll walk though the various ways to install Plex step-by-step.We also see how easy it is to get Plex ...", "content": "I‚Äôm a huge fan of virtualization and containerization (if you couldn‚Äôt tell already)! Today, we‚Äôll walk though the various ways to install Plex step-by-step.We also see how easy it is to get Plex running on Docker and Kubernetes using Rancher.üì∫ Watch VideoId for ContainerGet Id and Group Idid yourusernameShould see something like this:uid=1001(technotim) gid=1001(technotim) groups=1001(technotim),27(sudo),999(docker)Mount Shares During BootInstall cifs-utilssudo apt-get install cifs-utilsCreate credentials files for sharesudo nano /home/technotim/.smbcredentialsSet permissionschmod 600 ~/.smbcredentialsusername=yourUsyourusernameername password=yourPasswordEdit /etc/fstab//192.168.0.22/plex_media/movies /mnt/movies cifs credentials=/home/technotim/.smbcredentials 0 0//192.168.0.22/plex_media/music /mnt/music cifs credentials=/home/technotim/.smbcredentials 0 0Then reboot orsudo mount -ato mountLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Virtualize Your Home Router / Firewall Using pfSense", "url": "/posts/proxmox-pfsense/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-05-16 09:00:00 -0500", "snippet": "It‚Äôs time to say goodbye to your home router and start virtualizing it using Proxmox and pfSense.pfSense Community Edition Download: https://www.pfsense.org/download/Get started with Proxmox today:...", "content": "It‚Äôs time to say goodbye to your home router and start virtualizing it using Proxmox and pfSense.pfSense Community Edition Download: https://www.pfsense.org/download/Get started with Proxmox today: https://www.youtube.com/watch?v=hdoBQNI_Ab8üì∫ Watch VideoEnable PCI Passthroughhttps://pve.proxmox.com/wiki/PCI(e)_PassthroughLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Setup and Best Settings for Streamlabs OBS on Mac", "url": "/posts/streamlabs-mac/", "categories": "streaming", "tags": "streaming, mac, streamlabs, obs", "date": "2020-05-09 09:00:00 -0500", "snippet": "Streamlabs OBS for MacOS is here! In this video we‚Äôll walk through setting up Streamlabs step by step.We‚Äôll install Streamlabs OBS, set up desktop audio with iShowU Audio Capture so you can captur...", "content": "Streamlabs OBS for MacOS is here! In this video we‚Äôll walk through setting up Streamlabs step by step.We‚Äôll install Streamlabs OBS, set up desktop audio with iShowU Audio Capture so you can capture desktop audio, configure our webcam and game capture with a Cam Link, set up our alerts, configure the best possible streaming settings for Streamlabs, adjust our streaming layout, and go live.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Build a Twitch Bot Using TMI.JS (a moderator bot)", "url": "/posts/twitch-bot/", "categories": "coding", "tags": "coding, self-hosted, twitch, javascript", "date": "2020-05-03 09:00:00 -0500", "snippet": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good.Let‚Äôs build a Twitch moderator bot using tmi.js! The Twitch API is powerful and and already has lots of great bots however no bo...", "content": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good.Let‚Äôs build a Twitch moderator bot using tmi.js! The Twitch API is powerful and and already has lots of great bots however no bot has the flexibility of creating your own! In this video I will show you how to build a Twitch bot using TMI.JS from start to finish.You‚Äôll see how to use the developer portal, set up oauth, set the correct scopes, get an access token, create a bot using JavaScript, NodeJS, and NPM, invite the bot to your Twitch channel, and have it moderate your chat.Also, We have made this bot open source and will continue to contribute to this bot.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "20 Ways to Use a Virtual Machine (and other ideas for your homelab)", "url": "/posts/20-ways-virtual-machine/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-04-26 09:00:00 -0500", "snippet": "Looking for new ideas on how to use your virtual machines? Well, here‚Äôs the top 20 ways to use your virtual machines in your homelab.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l....", "content": "Looking for new ideas on how to use your virtual machines? Well, here‚Äôs the top 20 ways to use your virtual machines in your homelab.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Convert ANY Desk to a STANDING Desk: Home Office Upgrade", "url": "/posts/office-upgrade/", "categories": "vlog", "tags": "homelab, office, hardware", "date": "2020-04-19 09:00:00 -0500", "snippet": "I decided to tear apart our office and convert my old Ikea hack table tops into a standing desk.Oh, and I also clamped on 3 - 27‚Äù 1440p gaming monitors while I was at it üòâüì∫ Watch VideoLinksüõçÔ∏è Check...", "content": "I decided to tear apart our office and convert my old Ikea hack table tops into a standing desk.Oh, and I also clamped on 3 - 27‚Äù 1440p gaming monitors while I was at it üòâüì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Docker, Rancher, Kubernetes... Minecraft? (Setup and Install Tutorial)", "url": "/posts/docker-rancher-kubernetes/", "categories": "homelab", "tags": "homelab, rancher, kubernetes, docker, minecraft, gaming", "date": "2020-04-09 09:00:00 -0500", "snippet": "If you want to set up Kubernetes at home using Rancher to run Docker containers, this is the guide for you. This is a step by step tutorial of how to install and configure Rancher, Docker, and Kube...", "content": "If you want to set up Kubernetes at home using Rancher to run Docker containers, this is the guide for you. This is a step by step tutorial of how to install and configure Rancher, Docker, and Kubernetes for your homelab.In this video we set up and configure a Minecraft server in just a matter of minutes with some enterprise like features.You can use this same process to spin up other Docker containers at home on your server or desktop.üì∫ Watch VideoSee all the hardware I recommend at https://l.technotim.live/gearInstall DockerTo install docker, see this postInstall RancherThe two paths in the workload configuration need to be reversed: Path on the Node should be mc Mount Point should be /dataYou‚Äôll want to use a command similar to this so that there aren‚Äôt any port conflicts with other services or kubernetes itself.Also, you may want to consider pinning your docker tag to a version other than latest to make backing up and upgrading easier. See here for the latest version.docker run -d --restart=unless-stopped -p 9090:80 -p 9091:443 --privileged -v /opt/rancher:/var/lib/rancher --name=rancher_docker_server rancher/rancher:latestTroubleshooting Make sure you have a static IP on your Rancher host Be sure to use the ports above if you want to add SSL later and use commands in future videos The new UI is now the ‚ÄúCluster Explorer‚Äù.You can toggle between this and the ‚ÄúCluser Manager‚Äù UI by clicking the button. Do not create workloads in the local cluster.This is a management cluster for Rancher.You should create new cluster for your workload, just like in this video.LinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Update Proxmox VE (No subscription required)", "url": "/posts/proxmox-update/", "categories": "proxmox", "tags": "homelab, proxmox", "date": "2020-04-02 09:00:00 -0500", "snippet": "Have you been thinking about updating your Proxmox VE server? Well, what are you waiting for? Upgrade your Proxmox server in your home lab in just a few minutes with this step-by-step tutorial!üì∫ ...", "content": "Have you been thinking about updating your Proxmox VE server? Well, what are you waiting for? Upgrade your Proxmox server in your home lab in just a few minutes with this step-by-step tutorial!üì∫ Watch VideoSee all the hardware I recommend at https://l.technotim.live/gearEdit /etc/apt/sources.listdeb http://ftp.us.debian.org/debian buster main contribdeb http://ftp.us.debian.org/debian buster-updates main contrib# security updatesdeb http://security.debian.org buster/updates main contrib# not for production usedeb http://download.proxmox.com/debian buster pve-no-subscriptionRunapt-get updateapt dist-upgradeLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Remote Gaming! (and Video Encoding using Proxmox and GPU Passthrough)", "url": "/posts/gpu-passthrough/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-03-26 09:00:00 -0500", "snippet": "Are you looking to build a remote gaming machine and passthrough your GPU to a virtual machine? Do you want to use GPU acceleration for transcoding Plex or Adobe Media Encoder? Do you dream of se...", "content": "Are you looking to build a remote gaming machine and passthrough your GPU to a virtual machine? Do you want to use GPU acceleration for transcoding Plex or Adobe Media Encoder? Do you dream of setting up Steam Link or Remote Play In Home Streaming and streaming games to any screen in your house? If so, this complete step-by-step guide of how to passthrough your Nvidia or AMD video card through to a guest VM using Proxmox VE! If not, well, please watch this anyway.üì∫ Watch Videoedit grub/etc/default/grubChange this line:GRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on pcie_acs_override=downstream,multifunction video=efifb:eek:ff\"runupdate-grubrebootrebootEdit/etc/modulesvfiovfio_iommu_type1vfio_pcivfio_virqfdrebootreboot/etc/pve/qemu-server/qm.conf (will be something like 100.conf)agent: 1balloon: 4096bios: ovmfboot: cdnbootdisk: virtio0cores: 8cpu: host,hidden=1,flags=+pcidefidisk0: fast1:vm-100-disk-1,size=128Khostpci0: 02:00,pcie=1,x-vga=1hostpci1: 04:00.0,rombar=0ide0: none,media=cdrommachine: q35memory: 14336name: beamnuma: 0ostype: win10scsihw: virtio-scsi-pcismbios1: uuid=d6febb0d-4242-4bdb-8aea-7c03e7b5df0esockets: 1unused0: storage1:vm-100-disk-0unused1: slow1:vm-100-disk-0virtio0: fast1:vm-100-disk-0,size=80Gvmgenid: 524a58dd-7e3e-44f4-abf4-9de0f490d936Add your PCI deviceedit /etc/modprobe.d/pve-blacklist.confblacklist nvidiafbblacklist nvidiablacklist radeonblacklist nouveauTroubleshootingIf your Windows machine fails to boot, you may want to create a new Windows VM using UEFI rather than BIOS.If your motherboard has onboard GPU set in BIOS to use the onboard primarily or exclusively to free up PCIE GPULinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize Ubuntu Server with Proxmox VE", "url": "/posts/proxmox-ubuntu-server/", "categories": "proxmox", "tags": "proxmox, ubuntu, linux", "date": "2020-03-20 09:00:00 -0500", "snippet": "Do you need to virtualize Ubuntu Server with Proxmox? Join me as we install and configure Ubuntu Server LTS on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinksüõçÔ∏è Check ...", "content": "Do you need to virtualize Ubuntu Server with Proxmox? Join me as we install and configure Ubuntu Server LTS on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Virtualize Windows 10 with Proxmox VE", "url": "/posts/proxmox-windows/", "categories": "proxmox", "tags": "proxmox, windows", "date": "2020-03-18 09:00:00 -0500", "snippet": "Do you need to virtualize Windows 10 with Proxmox? Join me as we install and configure Windows 10 on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinksüõçÔ∏è Check out the ne...", "content": "Do you need to virtualize Windows 10 with Proxmox? Join me as we install and configure Windows 10 on Proxmox VE step-by-step using the best performance options.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Proxmox VE Install and Setup Tutorial", "url": "/posts/proxmox-setup/", "categories": "homelab", "tags": "homelab, rancher, kubernetes", "date": "2020-03-14 09:00:00 -0500", "snippet": "Do you need to virtualize something at home? Thinking of building your own Homelab? (The answer is YES).Join me as we install and configure Proxmox VE step-by-step.üì∫ Watch VideoLinksüõçÔ∏è Check out t...", "content": "Do you need to virtualize something at home? Thinking of building your own Homelab? (The answer is YES).Join me as we install and configure Proxmox VE step-by-step.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Setting Up Windows for JavaScript Development THE RIGHT WAY (WSL Terminal NVM Node Yarn VS Code ZSH)", "url": "/posts/windows-developer-setup/", "categories": "coding", "tags": "windows, coding, javascript, wsl, nvm, zsh, node, windows, linux, ubuntu", "date": "2020-03-12 09:00:00 -0500", "snippet": "You want to get started developing JavaScript with NodeJS, ReactJS, or AngularJS but you‚Äôre not sure how to get started? This is a complete, step by step guide on how to configure your Windows mac...", "content": "You want to get started developing JavaScript with NodeJS, ReactJS, or AngularJS but you‚Äôre not sure how to get started? This is a complete, step by step guide on how to configure your Windows machines for JavaScript development the right way.You‚Äôll learn how to install and configure Windows, the new Windows Terminal, WSL, Ubuntu, ZSH with Oh My ZSH, yarn, NPM, NVM, NodeJS, and VS Code.We‚Äôll also configure our git client for SSH access to GitHub.This is the perfect beginner tutorial for anyone trying to develop software on a Windows PC.üì∫ Watch VideoUpdate Ubuntusudo apt-get updatesudo apt-get upgradeinstall zshellsudo apt-get install zshoh-my-zshCheck this site for the command https://ohmyz.sh/#installIt should be something like this:sh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"nvmBe sure zshell and oh-my-zsh are working before continuingCheck this site for the command https://github.com/nvm-sh/nvmIt should be something like this, but be sure to use the version from the link abovecurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bashIf nvm doesn‚Äôt work, check this https://youtu.be/kL8iGErULiw?t=507Close all terminals and all VS Code instances after doing this stepInstall Nodenvm install 12.16.1Install yarnBe sure nvm and node are working before continuingCheck this site for the latest command https://classic.yarnpkg.com/en/docs/install/#alternatives-stableIt should be something like this, but be sure to use the version from the link abovecurl -o- -L https://yarnpkg.com/install.sh | bashConfigure GitYou‚Äôll want to follow this guide for configuring git.Be sure to follow the LINUX versionhttps://docs.github.com/en/github/using-git/getting-started-with-git-and-githubgit config --global user.name \"Techno Tim\"git config --global user.email \"your_email@example.com\"ssh-keygen -t rsa -b 4096 -C \"your_email@example.com\"eval $(ssh-agent -s)Cloning a repomkdir code &amp;&amp; cd codeBe sure you choose the right repo before cloning, this is just an examplegit clone git@github.com:timothystewart6/techno-boto-discord.gitcd techno-boto-discordyarnContinuing with the bot turotials Discord Bot https://www.youtube.com/watch?v=YSZcyz2-twQ Twitch Bot https://www.youtube.com/watch?v=7uSjKbAUHXg Slack Bot https://www.youtube.com/watch?v=AajBk59nOgwLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How To Create an iSCSI Target with TrueNAS", "url": "/posts/iscsi-truenas/", "categories": "truenas", "tags": "homelab, rancher, kubernetes", "date": "2020-03-06 08:00:00 -0600", "snippet": "Setting up iSCSI with TrueNAS and Windows 10 is super simple with TrueNAS.This is an easy way to have a hard drive installed on your machine that isn‚Äôt really attached, it lives on the network.üì∫ Wa...", "content": "Setting up iSCSI with TrueNAS and Windows 10 is super simple with TrueNAS.This is an easy way to have a hard drive installed on your machine that isn‚Äôt really attached, it lives on the network.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "How to Install and Virtualize TrueNAS with Proxmox", "url": "/posts/virtualize-truenas/", "categories": "truenas", "tags": "truenas, proxmox, windows", "date": "2020-03-01 08:00:00 -0600", "snippet": "Do you want a DIY NAS? Do you want to set up TrueNAS? Have you considered virtualizing TrueNAS with Proxmox? In this video we‚Äôll walk through installing and setting up TrueNAS and configure a sa...", "content": "Do you want a DIY NAS? Do you want to set up TrueNAS? Have you considered virtualizing TrueNAS with Proxmox? In this video we‚Äôll walk through installing and setting up TrueNAS and configure a samba share for Windows.We‚Äôll also install it on a virtual server using ProxmoxVE that‚Äôs running in my Homelab.Both are free and open source.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Let's Build a Discord Bot Using DiscordJS - Moderator Bot", "url": "/posts/discord-bot/", "categories": "coding", "tags": "coding, javascript, discord, self-hosted", "date": "2020-02-17 08:00:00 -0600", "snippet": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good.Let‚Äôs build a discord moderator bot using discord.js! Discord is powerful chat + video client and already has lots of great bots...", "content": "Let‚Äôs build a bot! Not a bad bot like a view bot, but bot for good.Let‚Äôs build a discord moderator bot using discord.js! Discord is powerful chat + video client and already has lots of great bots however no bot has the flexibility of creating your own! In this video I will show you how to build a discord bot using DiscordJS from start to finish.You‚Äôll see how to use the developer portal, create a bot using JavaScript, NodeJS, and NPM, invite the bot to your Discord server and have it moderate some of your channels.We have made this bot open source and will continue to contribute to this bot.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Touch Portal vs. Stream Deck", "url": "/posts/touchportal-vs-streamdeck/", "categories": "streaming", "tags": "touch-portal, stream-deck, streaming, hardware", "date": "2020-02-02 08:00:00 -0600", "snippet": "Let‚Äôs compare Touch Portal to Stream Deck.We‚Äôll walk through some of the similarities and differences between the free software Touch Portal and the Stream Deck hardware/software combination.We‚Äôll ...", "content": "Let‚Äôs compare Touch Portal to Stream Deck.We‚Äôll walk through some of the similarities and differences between the free software Touch Portal and the Stream Deck hardware/software combination.We‚Äôll see if we can set up, configure in a step by step guide, and clone our Stream Deck interface for OBS using Touch Portal and a mobile device, we‚Äôll review features and experiences, then we‚Äôll choose a winner in the Touch Portal vs. Stream Deck face off!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "Upgrade Your ROOM (One of the most OVERLOOKED stream upgrades!)", "url": "/posts/upgrade-your-room/", "categories": "streaming", "tags": "office, hardware, twitch", "date": "2020-01-20 08:00:00 -0600", "snippet": "There are so many upgrades out there for streaming, what do I start with? Video card? Microphone? Audio? CPU? RAM? Lights? I started with one that is overlooked by many streamers, and it‚Äôs the roo...", "content": "There are so many upgrades out there for streaming, what do I start with? Video card? Microphone? Audio? CPU? RAM? Lights? I started with one that is overlooked by many streamers, and it‚Äôs the room I stream in.So come along with me as give a tour of my stream room makeover! Hopefully this video gives you some stream background ideas for sofas, lights, smart LED lights, accent lighting, coffee tables, plants, rugs, bookshelves, and even Hyrule Historia as I walk through my stream studio setup!üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "BEST OBS Streaming Settings 2021! üî¥ (Quality, Frame Rate, Bit Rate, Audio, 1080p 60/FPS & MORE!)", "url": "/posts/obs-best-settings/", "categories": "streaming", "tags": "obs, twitch, streaming", "date": "2020-01-14 08:00:00 -0600", "snippet": "Do you want the best settings for OBS in 2020? This is the ultimate OBS settings guide with the BEST OBS settings for streaming Fortnite, Just Chatting APEX Legends, PUBG, or really ANY game.This v...", "content": "Do you want the best settings for OBS in 2020? This is the ultimate OBS settings guide with the BEST OBS settings for streaming Fortnite, Just Chatting APEX Legends, PUBG, or really ANY game.This video includes the best settings for quality, frame rate, bit rate, and audio for streaming at 60 frames per second (FPS) at 1080p (max settings for streamers).This guide works with OBS Studio, Streamlabs OBS (SLOBS), and OBS.LIVE (from StreamElements).I also include various Windows settings and tweaks to give you the best performance while streaming.I even cover the new NVENC settings (NVIDIA NVENC H.264 (new) ) for NVidia graphics cards with Turing Architecture. This is a great guide for anyone who wants to tweak their existing settings or have just installed it for the first time with the default settings.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" }, { "title": "GoXLR WITH WIRELESS HEADSET - Connect ANY wireless bluetooth headphones", "url": "/posts/goxlr-wireless/", "categories": "streaming", "tags": "goxlr, streaming, twitch, hardware", "date": "2020-01-07 08:00:00 -0600", "snippet": "Connect any wireless headset to a GoXLR or GoXLR mini. In this video, I show you how you can connect any pair of wireless bluetooth headphones to a GoXLR or GoXLR mini.They can be AirPods, Beats, B...", "content": "Connect any wireless headset to a GoXLR or GoXLR mini. In this video, I show you how you can connect any pair of wireless bluetooth headphones to a GoXLR or GoXLR mini.They can be AirPods, Beats, Beats Wireless Pro, Bose, or any other wireless bluetooth headset.You can use this bluetooth adapter transmitter to stream while using the GoXLR or GoXLR mini.I bought these products with my own money because I thought they were cool.Nothing in this video was sponsored.üì∫ Watch VideoLinksüõçÔ∏è Check out the new Merch Shop at https://l.technotim.live/shop‚öôÔ∏è See all the hardware I recommend at https://l.technotim.live/gearüöÄ Don‚Äôt forget to check out the üöÄLaunchpad repo with all of the quick start source files" } ]
