<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Optimizing TrueNAS for SPEED (and Safety)" /><meta property="og:locale" content="en" /><meta name="description" content="After setting up your TrueNAS server there are lots of things to configure when it comes to tuning ZFS. From pools, to disk configuration, to cache to networking, backups and more. This guide will walk you through everything you should do after installing TrueNAS with a focus on speed, safety, and optimization." /><meta property="og:description" content="After setting up your TrueNAS server there are lots of things to configure when it comes to tuning ZFS. From pools, to disk configuration, to cache to networking, backups and more. This guide will walk you through everything you should do after installing TrueNAS with a focus on speed, safety, and optimization." /><link rel="canonical" href="https://technotim.live/posts/truenas-performance-guide/" /><meta property="og:url" content="https://technotim.live/posts/truenas-performance-guide/" /><meta property="og:site_name" content="Techno Tim" /><meta property="og:image" content="https://technotim.live/assets/img/headers/truenas-optimizations-hero.webp" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-02-09T07:00:00-06:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://technotim.live/assets/img/headers/truenas-optimizations-hero.webp" /><meta property="twitter:title" content="Optimizing TrueNAS for SPEED (and Safety)" /><meta name="twitter:site" content="@technotimlive" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-22T15:37:27-06:00","datePublished":"2024-02-09T07:00:00-06:00","description":"After setting up your TrueNAS server there are lots of things to configure when it comes to tuning ZFS. From pools, to disk configuration, to cache to networking, backups and more. This guide will walk you through everything you should do after installing TrueNAS with a focus on speed, safety, and optimization.","headline":"Optimizing TrueNAS for SPEED (and Safety)","image":{"lqip":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAUACgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP5HPCl18NfAvg/wzouufs8fBj4n6n4hsNXvJPF3jfU/2hNO163xq9/a2g+x/Dr4/eA/ClxNpywsllLN4a8v7OYo7y3u7hJ7u6+sqYeLqY2cJzprBuhThBKnJP2uHhVk7zpycfjStq3y3vZqMeKnTfNhKDld4lVpyn7yt7OpKEVyqaUvhb3Vr7Xu38rzeDLOOWWP7Q52SOmfLAztYrnHmcZxnFd6p02k/Zx1Se3dGUoTjKUfa/DJr4F0du5//9k=","url":"https://technotim.live/assets/img/headers/truenas-optimizations-hero.webp","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://technotim.live/posts/truenas-performance-guide/"},"url":"https://technotim.live/posts/truenas-performance-guide/"}</script><title>Optimizing TrueNAS for SPEED (and Safety) | Techno Tim</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Techno Tim"><meta name="application-name" content="Techno Tim"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="preconnect" href="https://cdnjs.cloudflare.com" ><link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.25.0/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return 'mode'; } static get MODE_ATTR() { return 'data-mode'; } static get DARK_MODE() { return 'dark'; } static get LIGHT_MODE() { return 'light'; } static get ID() { return 'mode-toggle'; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia('(prefers-color-scheme: dark)'); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { document.documentElement.setAttribute(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { document.documentElement.removeAttribute(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage( { direction: ModeToggle.ID, message: this.modeStatus }, '*' ); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/1322205?s=400&u=5b4f2219006577dc0426007fe5a02391c4899677&v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a><h1 class="site-title"> <a href="/">Techno Tim</a></h1><p class="site-subtitle fst-italic mb-0">Engineer. Builder. Creator. | From Code to Cloud</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/shop/" class="nav-link"> <i class="fa-fw fas fa-bag-shopping"></i> <span>MERCH</span> </a><li class="nav-item"> <a href="/sponsor/" class="nav-link"> <i class="fa-fw fas fa-handshake"></i> <span>SPONSOR</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://l.technotim.live/links" aria-label="links" target="_blank" rel="noopener noreferrer" > <i class="fa-solid fa-link"></i> </a> <a href="https://twitter.com/technotimlive" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="https://l.technotim.live/github" aria-label="github-custom" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Optimizing TrueNAS for SPEED (and Safety)</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link"> <i class="fas fa-search fa-fw"></i> </button> <search class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1"><header><h1 data-toc-skip>Optimizing TrueNAS for SPEED (and Safety)</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1707483600" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 9, 2024 </time> </span> <span> Updated <time data-ts="1708637847" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 22, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/img/headers/truenas-optimizations-hero.webp" class="popup img-link preview-img blur"><img data-src="/assets/img/headers/truenas-optimizations-hero.webp" alt="Preview Image" width="1200" height="630" data-lqip="true" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAUACgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP5HPCl18NfAvg/wzouufs8fBj4n6n4hsNXvJPF3jfU/2hNO163xq9/a2g+x/Dr4/eA/ClxNpywsllLN4a8v7OYo7y3u7hJ7u6+sqYeLqY2cJzprBuhThBKnJP2uHhVk7zpycfjStq3y3vZqMeKnTfNhKDld4lVpyn7yt7OpKEVyqaUvhb3Vr7Xu38rzeDLOOWWP7Q52SOmfLAztYrnHmcZxnFd6p02k/Zx1Se3dGUoTjKUfa/DJr4F0du5//9k="></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://l.technotim.live/twitter">Techno Tim</a> </em> </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="866 words" > <em>4 min</em> read</span></div></div></header><div class="content"><p>After setting up your TrueNAS server there are lots of things to configure when it comes to tuning ZFS. From pools, to disk configuration, to cache to networking, backups and more. This guide will walk you through everything you should do after installing TrueNAS with a focus on speed, safety, and optimization.</p><iframe class="embed-video youtube" loading="lazy" src="https://www.youtube.com/embed/3T5wBZOm4hY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><p>📺 <a href="https://www.youtube.com/watch?v=3T5wBZOm4hY">Watch Video</a></p><p>Disclosures:</p><ul><li>Nothing in this video was sponsored</ul><h2 id="pool-optimizations"><span class="me-2">Pool Optimizations</span><a href="#pool-optimizations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>I chose Mirrored VDEVs for a few reasons:</p><p>Upsides</p><ul><li>Provides redundancy<li>Increased performance<li>Great for small random reads<li>Expansion, much easier than any other raid type<li>You can expand by adding an additional pair<ul><li>This means I only need to buy 2 disks to expand my pool<li>Resilvering is fast</ul></ul><p>Downsides</p><ul><li>Write performance can be impacted since each write involves updating all VDEVS in a mirror<li>Adding a separate ZIP like an SSD can improve write performance, which we’ll talk about<li>If I lose 2 drives in the same mirror I lose the whole pool<ul><li>Which means that I need to replace disks fast<li>If your pool of mirrored VDEVs is big enough, the chances are less likely to happen</ul><li>50% capacity loss</ul><h2 id="datasets"><span class="me-2">Datasets</span><a href="#datasets" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Encryption: On<li>Sync: Standard<li>Compression: LZ4<li>Enabled Atime: Off<li>ZFS Deduplication: Off</ul><h2 id="arc"><span class="me-2">ARC</span><a href="#arc" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Adaptive Replacement Cache, this is where data is stored that is frequently accessed along with metadata about the files.<li>Algorithm for adding and evicting data for least recently used.<li>This makes accessing files quicker because it doesn’t need to read from disk and takes the load off those disks so they can do another tasks<li>This isn’t really used for write, that’s ZIL, but some async writes and write directly to ARC<li>There’s a general rule of thumb that you should have 1GB for each TB, however the more the better.<li>One tweak that you might have to do if using ZFS on a Linux system like TrueNAS Scale and that’s adjusting the ARC allocation<ul><li><a href="https://www.truenas.com/docs/scale/gettingstarted/scalereleasenotes/">This is not needed after this patch is released</a><li>By default linux only allocates 50%<li>You can override this with a quick command while the system is running and then you can also follow that up with a startup command to be sure that this persists between reboots<li>Generally speaking you should let your system run for a few days before making this adjustment as well as running any services and VMs to be sure you don’t over allocate your RAM to ARC.<li>See <a href="https://www.youtube.com/watch?v=X0_8DilTkYM">Tom Lawrence’s Video on this topic</a></ul></ul><h2 id="read-speeds"><span class="me-2">Read Speeds</span><a href="#read-speeds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To increase read speeds:</p><ul><li>More RAM<li>More disks / spindles<li>L2ARC<ul><li>Stripe these, even 1 large SSD is good</ul></ul><h2 id="write-speeds"><span class="me-2">Write Speeds</span><a href="#write-speeds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To increase write speeds:</p><ul><li>More Disks - spinning disks can only read/write at about 150 MB/s<li>Disable Sync write? (No!, not safe)<li>Create SLOG device<ul><li>Should use disks fast that in the pool like SSDs<li>Be sure you have at least a mirror for this<li>This moves ZIL off the main pool, which frees up the pool to do other things</ul></ul><h2 id="network-considerations"><span class="me-2">Network Considerations</span><a href="#network-considerations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>LAGG / LACP gives you 2 lanes<li>Gives you redundancy<li>Generally speaking if your switch supports it, a great idea</ul><h2 id="network-and-disk-speed-go-hand-in-hand"><span class="me-2">Network and disk speed go hand in hand</span><a href="#network-and-disk-speed-go-hand-in-hand" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>If your pool can’t read at 10 Gb/s there’s no sense of having 10 gb/s networking<li>If your disks have huge IOSps (think all SSD) your network can’t handle the throughput<li>Somewhere in the middle</ul><h2 id="vlan-routing"><span class="me-2">VLAN Routing</span><a href="#vlan-routing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Another huge consideration is inter VLAN routing.<li>If you have to cross VLANs, be sure that your switch or router can handle these speeds or you might have to get creative with a dedicated data network that doesn’t traverse VLANs.</ul><h2 id="snapshots"><span class="me-2">Snapshots</span><a href="#snapshots" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>This is diff based<ul><li>Fist will be relatively large<li>Subsequent will be smaller</ul></ul><p>My Settings:</p><ul><li>Lifetime of 2 weeks<li>Enable Recursion<li>Don’t allow taking empty snapshots<li>Enable the schedule</ul><h2 id="backups"><span class="me-2">Backups</span><a href="#backups" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Yes, but hard to do on a budget<li>Ideally you want to replicate these snapshots to another pool, preferably on another machine</ul><h2 id="alerts"><span class="me-2">Alerts</span><a href="#alerts" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Check to be sure alerts are enabled and working</ul><h2 id="ups"><span class="me-2">UPS</span><a href="#ups" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Yes, enough said</ul><h2 id="where-to-buy"><span class="me-2">Where to Buy</span><a href="#where-to-buy" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Here are some items I found useful when building my NAS</p><ul><li>Supermicro NVMe Add-in Card - <a href="https://www.ebay.com/itm/375100900409?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1">https://www.ebay.com/itm/375100900409?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1</a><li>Dell NVMe Add-in Card - <a href="https://www.ebay.com/itm/164864777644?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1">https://www.ebay.com/itm/164864777644?mkcid=1&amp;mkrid=711-53200-19255-0&amp;siteid=0&amp;campid=5338780159&amp;customid=&amp;toolid=10001&amp;mkevt=1</a><li>M.2 Heatsink SSD Cooler for PS5 PCIE NVME - <a href="https://amzn.to/4bwsYAq">https://amzn.to/4bwsYAq</a><li>Intel OPTANE SSD P1600X Series 118GB M.2 PCIE - <a href="https://amzn.to/497Np53">https://amzn.to/497Np53</a><li>SAMSUNG 990 PRO Series - 2TB PCIe Gen4. X4 NVMe 2.0c - M.2 Internal SSD - <a href="https://amzn.to/4buzeZz">https://amzn.to/4buzeZz</a><li>Seagate IronWolf 12TB NAS Internal Hard Drive HDD - <a href="https://amzn.to/3usqnH8">https://amzn.to/3usqnH8</a><li>Seagate Exos X18 ST14000NM000J 14 TB Hard Drive - <a href="https://amzn.to/3SC6ntT">https://amzn.to/3SC6ntT</a><li>APC UPS 1500VA UPS Battery Backup and Surge Protector - <a href="https://amzn.to/499JvZx">https://amzn.to/499JvZx</a><li>Tripp Lite SMART1500LCD 1500VA UPS Smart Battery Backup (rackmount) - <a href="https://amzn.to/3SOXhLr">https://amzn.to/3SOXhLr</a></ul><p>(Affiliate links may be included. I may receive a small commission at no cost to you.)</p><h2 id="join-the-conversation"><span class="me-2">Join the conversation</span><a href="#join-the-conversation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote class="twitter-tweet" data-dnt="true" data-theme="dark"><p lang="en" dir="ltr">Over the last few weeks while building my new TrueNAS server I learned a lot about ZFS and how to optimize my new NAS for performance.<a href="https://t.co/qvAJBBSCkA">https://t.co/qvAJBBSCkA</a> <a href="https://t.co/6LB5IqHZo7">pic.twitter.com/6LB5IqHZo7</a></p>&mdash; Techno Tim (@TechnoTimLive) <a href="https://twitter.com/TechnoTimLive/status/1755985833495032218?ref_src=twsrc%5Etfw">February 9, 2024</a></blockquote><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><h2 id="links"><span class="me-2">Links</span><a href="#links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>🛍️ Check out the new Merch Shop at <a href="https://l.technotim.live/shop">https://l.technotim.live/shop</a></p><p>⚙️ See all the hardware I recommend at <a href="https://l.technotim.live/gear">https://l.technotim.live/gear</a></p><p>🚀 Don’t forget to check out the <a href="https://l.technotim.live/quick-start">🚀Launchpad repo</a> with all of the quick start source files</p><p>🤝 Support me and <a href="/sponsor">help keep this site ad-free!</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/truenas/">truenas</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/homelab/" class="post-tag no-text-decoration" >homelab</a> <a href="/tags/truenas/" class="post-tag no-text-decoration" >truenas</a> <a href="/tags/zfs/" class="post-tag no-text-decoration" >zfs</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Optimizing%20TrueNAS%20for%20SPEED%20(and%20Safety)%20-%20Techno%20Tim&url=https%3A%2F%2Ftechnotim.live%2Fposts%2Ftruenas-performance-guide%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Optimizing%20TrueNAS%20for%20SPEED%20(and%20Safety)%20-%20Techno%20Tim&u=https%3A%2F%2Ftechnotim.live%2Fposts%2Ftruenas-performance-guide%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftechnotim.live%2Fposts%2Ftruenas-performance-guide%2F&text=Optimizing%20TrueNAS%20for%20SPEED%20(and%20Safety)%20-%20Techno%20Tim" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftechnotim.live%2Fposts%2Ftruenas-performance-guide%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <script defer type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/share-to-mastodon/+esm"></script> <button class="btn text-start" data-bs-toggle="tooltip" data-bs-placement="top" title="Mastodon" aria-label="Mastodon"> <share-to-mastodon class="share-mastodon" message="Optimizing%20TrueNAS%20for%20SPEED%20(and%20Safety)%20-%20Techno%20Tim" url="https%3A%2F%2Ftechnotim.live%2Fposts%2Ftruenas-performance-guide%2F"customInstanceList="[{&quot;label&quot;:&quot;mastodon.social&quot;,&quot;link&quot;:&quot;https://mastodon.social/&quot;},{&quot;label&quot;:&quot;mastodon.online&quot;,&quot;link&quot;:&quot;https://mastodon.online/&quot;},{&quot;label&quot;:&quot;fosstodon.org&quot;,&quot;link&quot;:&quot;https://fosstodon.org/&quot;},{&quot;label&quot;:&quot;photog.social&quot;,&quot;link&quot;:&quot;https://photog.social/&quot;}]" > <i class="fa-fw fa-brands fa-mastodon"></i> </share-to-mastodon> </button> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 mb-5 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/traefik-3-docker-certificates/">Traefik 3 and FREE Wildcard Certificates with Docker</a><li class="text-truncate lh-lg"> <a href="/posts/traefik-portainer-ssl/">Put Wildcard Certificates and SSL on EVERYTHING</a><li class="text-truncate lh-lg"> <a href="/posts/authelia-traefik/">2 Factor Auth and Single Sign on with Authelia</a><li class="text-truncate lh-lg"> <a href="/posts/grafana-loki/">Meet Grafana LOKI, a Log Aggregation System for Everything</a><li class="text-truncate lh-lg"> <a href="/posts/jekyll-docs-site/">Meet Jekyll - The Static Site Generator</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/hardware/">hardware</a> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/rancher/">rancher</a> <a class="post-tag btn btn-outline-primary" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/portainer/">portainer</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/k3s/">k3s</a></div></section></div><section id="toc-wrapper" class="ps-0 pe-4"><h2 class="panel-heading ps-3 pt-2 mb-2">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/truenas-zfs-expand/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1673708400" data-df="ll" > Jan 14, 2023 </time><h4 class="pt-0 my-2">The EASIEST way to Expand Your ZFS Pool in TrueNAS (But is it the Best?)</h4><div class="text-muted"><p> ZFS is a great file system that comes with TrueNAS and can meet all of your storage needs.But with it comes some complexity on how to manage and expand your ZFS storage pools.Over the last week I l...</p></div></div></a></article><article class="col"> <a href="/posts/homelab-services-tour-2021/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1638622800" data-df="ll" > Dec 4, 2021 </time><h4 class="pt-0 my-2">HomeLab Services Tour Late 2021 - What am I Self-Hosting in my HomeLab?</h4><div class="text-muted"><p> After showing off my Home Lab hardware in my late 2021 tour, many of you asked what services are self-hosted in this stack. This is always a moving target so I decided it was time to share which se...</p></div></div></a></article><article class="col"> <a href="/posts/truenas-docker-pro/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1752498000" data-df="ll" > Jul 14, 2025 </time><h4 class="pt-0 my-2">How I Run Docker on TrueNAS Like a Pro</h4><div class="text-muted"><p> Learn how to run Docker apps on TrueNAS like a pro — with full control, clean YAML, and no extra dashboards. Have questions or a different setup that works for you? Leave a comment, I’d love to h...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/pikvm-tesmart/" class="btn btn-outline-primary" aria-label="Older" ><p>PiKVM with TESmart KVM Fixed!</p></a> <a href="/posts/techno-tim-shop-launch/" class="btn btn-outline-primary" aria-label="Newer" ><p>Introducing, the Techno Tim Shop</p></a></nav><script type="text/javascript"> (function () { const origin = 'https://giscus.app'; const iframe = 'iframe.giscus-frame'; const lightTheme = 'light'; const darkTheme = 'dark_dimmed'; let initTheme = lightTheme; const html = document.documentElement; if ( (html.hasAttribute('data-mode') && html.getAttribute('data-mode') === 'dark') || (!html.hasAttribute('data-mode') && window.matchMedia('(prefers-color-scheme: dark)').matches) ) { initTheme = darkTheme; } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'timothystewart6/techno-tim.github.io', 'data-repo-id': 'MDEwOlJlcG9zaXRvcnkyNTQ3ODQ3Nzk', 'data-category': 'Comments', 'data-category-id': 'DIC_kwDODy-1C84CSN7z', 'data-mapping': 'pathname', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': 'en', 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusScript = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value) ); document.getElementById('tail-wrapper').appendChild(giscusScript); addEventListener('message', (event) => { if ( event.source === window && event.data && event.data.direction === ModeToggle.ID ) { /* global theme mode changed */ const mode = event.data.message; const theme = mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme; const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); })(); </script><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://l.technotim.live/twitter">Techno Tim</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p><a href="/sponsor/">🤝 Help keep this ad-free!</href> &nbsp; &nbsp;<a href="https://l.technotim.live/shop">🛍️ Check out the new merch shop!</href></p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/homelab/">homelab</a> <a class="post-tag btn btn-outline-primary" href="/tags/hardware/">hardware</a> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/docker/">docker</a> <a class="post-tag btn btn-outline-primary" href="/tags/rancher/">rancher</a> <a class="post-tag btn btn-outline-primary" href="/tags/self-hosted/">self-hosted</a> <a class="post-tag btn btn-outline-primary" href="/tags/proxmox/">proxmox</a> <a class="post-tag btn btn-outline-primary" href="/tags/portainer/">portainer</a> <a class="post-tag btn btn-outline-primary" href="/tags/linux/">linux</a> <a class="post-tag btn btn-outline-primary" href="/tags/k3s/">k3s</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask"></div><script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.7.1/dist/jquery.min.js,npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js,npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/magnific-popup@1.1.0/dist/jquery.magnific-popup.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.10/dayjs.min.js,npm/dayjs@1.11.10/locale/en.min.js,npm/dayjs@1.11.10/plugin/relativeTime.min.js,npm/dayjs@1.11.10/plugin/localizedFormat.min.js,npm/tocbot@4.25.0/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* Note: dependent library will be loaded in `js-selector.html` */ SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{snippet}</p></article>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
